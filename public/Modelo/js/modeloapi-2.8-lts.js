!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Modelo",[],t):"object"==typeof exports?exports.Modelo=t():e.Modelo=t()}(this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}({"./00utility/Config.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"Config",function(){return n});var n={webvr:!1,compressNormals:!1,maxInstanceCount:1e3}},"./00utility/Environment.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"Environment",function(){return n});var n={isMobile:!1,devicePixelRatio:1,littleEndian:!0,gpuMemory:256,browserName:"",browserVersion:""}},"./00utility/Path.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"Path3D",function(){return i});var n=r("./glMatrix.js"),i=function(){function e(e,t,r){void 0===t&&(t=[0,0,1]),this.path=e,this._curve=new Array,this._distances=new Array,this._tangents=new Array,this._normals=new Array,this._binormals=new Array;for(var i=0;i<e.length;i++)this._curve[i]=n.vec3.clone(e[i]);this._useDefaultUpVector=r,this._compute(t)}return e.prototype.getCurve=function(){return this._curve},e.prototype.getTangents=function(){return this._tangents},e.prototype.getNormals=function(){return this._normals},e.prototype.getBinormals=function(){return this._binormals},e.prototype.getDistances=function(){return this._distances},e.prototype.update=function(e,t,r){for(var n=0;n<e.length;n++)this._curve[n].x=e[n].x,this._curve[n].y=e[n].y,this._curve[n].z=e[n].z;return this._useDefaultUpVector=r,this._compute(t),this},e.prototype._compute=function(e){var t=this._curve.length;this._tangents[0]=this._getFirstNonNullVector(0),n.vec3.normalize(this._tangents[0],this._tangents[0]),this._tangents[t-1]=n.vec3.create(),n.vec3.subtract(this._tangents[t-1],this._curve[t-1],this._curve[t-2]),n.vec3.normalize(this._tangents[t-1],this._tangents[t-1]);var r,i,a,o=this._tangents[0],s=this._normalVector(o,e);this._normals[0]=s,n.vec3.normalize(this._normals[0],this._normals[0]),this._binormals[0]=n.vec3.create(),n.vec3.cross(this._binormals[0],o,this._normals[0]),n.vec3.normalize(this._binormals[0],this._binormals[0]),this._distances[0]=0;for(var l=n.vec3.create(),u=1;u<t;u++)r=this._getLastNonNullVector(u),u<t-1&&(i=this._getFirstNonNullVector(u),this._tangents[u]=n.vec3.create(),this._tangents[u]=i,n.vec3.normalize(this._tangents[u],this._tangents[u])),this._distances[u]=this._distances[u-1]+n.vec3.length(r),a=this._tangents[u],this._binormals[u-1],this._normals[u]=n.vec3.create(),n.vec3.cross(l,a,this._normals[u-1]),n.vec3.cross(this._normals[u],l,a),n.vec3.normalize(this._normals[u],this._normals[u]),this._binormals[u]=n.vec3.create(),n.vec3.cross(this._binormals[u],a,this._normals[u]),n.vec3.normalize(this._binormals[u],this._binormals[u])},e.prototype._getFirstNonNullVector=function(e){var t=1,r=n.vec3.create();for(n.vec3.subtract(r,this._curve[e+t],this._curve[e]),this._useDefaultUpVector&&(r[2]=0);0===n.vec3.length(r)&&e+t+1<this._curve.length;)t++,n.vec3.subtract(r,this._curve[e+t],this._curve[e]),this._useDefaultUpVector&&(r[2]=0);return 0===n.vec3.length(r)&&(r=n.vec3.fromValues(0,1,0)),r},e.prototype._getLastNonNullVector=function(e){var t=1,r=n.vec3.create();for(n.vec3.subtract(r,this._curve[e],this._curve[e-t]),this._useDefaultUpVector&&(r[2]=0);0===n.vec3.length(r)&&e>t+1;)t++,r=this._curve[e].subtract(this._curve[e-t]),this._useDefaultUpVector&&(r[2]=0);return 0===n.vec3.length(r)&&(r=n.vec3.fromValues(0,1,0)),r},e.prototype._normalVector=function(e,t){var r,i=n.vec3.create(),a=n.vec3.length(e);(0===a&&(a=1),null==t)?(r=Math.abs(Math.abs(e.y)/a-1)>.001?[0,-1,0]:Math.abs(Math.abs(e.x)/a-1)>.001?[1,0,0]:Math.abs(Math.abs(e.z)/a-1)>.001?[0,0,1]:n.vec3.create(),n.vec3.cross(i,e,r)):(n.vec3.cross(i,e,t),n.vec3.cross(i,i,e));return n.vec3.normalize(i,i),i},e}()},"./00utility/m3d_hwinfo.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/ua-parser-js/src/ua-parser.js"),i=r.n(n);t.default=function(){return function(){this.vramSize=0,this.littleEndian=!0;var e=(new i.a).getResult(),t=(e.device.model||"").toLowerCase();switch(this.browserName=(e.browser&&e.browser.name||"").toLowerCase(),this.browserVersion=(e.browser&&e.browser.major||"").toLowerCase(),t){case"iphone":this.vramSize=1024;break;case"ipad":this.vramSize=2048;break;default:this.vramSize=4096}}}()},"./00utility/m3d_interpolator.js":function(e,t,r){"use strict";var n;r.r(t),t.default=((n={linear:{}}).linear.vec3=function(e,t,r,n){var i=1-n;e[0]=i*t[0]+n*r[0],e[1]=i*t[1]+n*r[1],e[2]=i*t[2]+n*r[2]},n.linear.scalar=function(e,t,r){return(1-r)*e+r*t},n.cubic={},n.cubic.vec3=function(e,t,r,n){var i=1-(n=3*n*n-2*n*n*n);e[0]=i*t[0]+n*r[0],e[1]=i*t[1]+n*r[1],e[2]=i*t[2]+n*r[2]},n.cubic.scalar=function(e,t,r,n){return(1-(n=3*n*n-2*n*n*n))*t+n*r},n)},"./00utility/m3d_math.js":function(e,t,r){"use strict";r.r(t);var n=r("./glMatrix.js");t.default=function(){var e={cone:{_theta:0,_tanTheta:0}};e.cone.create=function(){return{tip:n.vec3.create(),direction:n.vec3.create(),cosThetaSquared:0,sinThetaSquared:0,invSinTheta:0}},e.cone.updateShape=function(e,t,r){this._theta=.017453293*t*.5,this._tanTheta=Math.tan(this._theta),this._tanTheta*=Math.sqrt(1+r*r),e.cosThetaSquared=1/(this._tanTheta*this._tanTheta+1),e.sinThetaSquared=1-e.cosThetaSquared,e.invSinTheta=1/Math.sqrt(e.sinThetaSquared)},e.aabb={_vec:new Float32Array(3)},e.aabb.createFromArray=function(e){var t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.aabb.createFromSphere=function(e){var t=new Float32Array(6);return t[0]=e[0]-e[3],t[1]=e[1]-e[3],t[2]=e[2]-e[3],t[3]=e[0]+e[3],t[4]=e[1]+e[3],t[5]=e[2]+e[3],t},e.aabb.createFromPoints=function(e,t){e[0]=t[0][0],e[3]=t[0][0],e[1]=t[0][1],e[4]=t[0][1],e[2]=t[0][2],e[5]=t[0][2];for(var r=1,n=t.length;r<n;r++)e[0]>t[r][0]&&(e[0]=t[r][0]),e[3]<t[r][0]&&(e[3]=t[r][0]),e[1]>t[r][1]&&(e[1]=t[r][1]),e[4]<t[r][1]&&(e[4]=t[r][1]),e[2]>t[r][2]&&(e[2]=t[r][2]),e[5]<t[r][2]&&(e[5]=t[r][2]);return e},e.aabb.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e};var t=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],r=[-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE];e.aabb.create=function(e,n){var i=new Float32Array(6);return e=e||t,n=n||r,i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=n[0],i[4]=n[1],i[5]=n[2],i},e.aabb.invalidate=function(e){e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=r[0],e[4]=r[1],e[5]=r[2]},e.aabb.min=function(e){return n.vec3.fromValues(e[0],e[1],e[2])},e.aabb.max=function(e){return n.vec3.fromValues(e[3],e[4],e[5])},e.aabb.length=function(e){var t=e[3]-e[0],r=e[4]-e[1],n=e[5]-e[2];return Math.sqrt(t*t+r*r+n*n)},e.aabb.isEqual=function(e,t){return Math.abs(e[0]-t[0])<1e-6&&Math.abs(e[1]-t[1])<1e-6&&Math.abs(e[2]-t[2])<1e-6&&Math.abs(e[3]-t[3])<1e-6&&Math.abs(e[4]-t[4])<1e-6&&Math.abs(e[5]-t[5])<1e-6},e.aabb.union=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e[4]=Math.max(t[4],r[4]),e[5]=Math.max(t[5],r[5]),e},e.aabb.moveTo=function(e,t,r){let n=r[0]-.5*(t[0]+t[3]),i=r[1]-.5*(t[1]+t[4]),a=r[2]-.5*(t[2]+t[5]);return e[0]=t[0]+n,e[1]=t[1]+i,e[2]=t[2]+a,e[3]=t[3]+n,e[4]=t[4]+i,e[5]=t[5]+a,e},e.aabb.scaleTo=function(e,t,r){var n=.5*(t[0]+t[3])-.5*r[0],i=.5*(t[0]+t[3])+.5*r[0],a=.5*(t[1]+t[4])-.5*r[1],o=.5*(t[1]+t[4])+.5*r[1],s=.5*(t[2]+t[5])-.5*r[2],l=.5*(t[2]+t[5])+.5*r[2];e[0]=n,e[3]=i,e[1]=a,e[4]=o,e[2]=s,e[5]=l},e.aabb.scale=function(e,t,r){var n=.5-.5*r,i=.5+.5*r,a=t[0]*i+t[3]*n,o=t[0]*n+t[3]*i,s=t[1]*i+t[4]*n,l=t[1]*n+t[4]*i,u=t[2]*i+t[5]*n,c=t[2]*n+t[5]*i;e[0]=a,e[3]=o,e[1]=s,e[4]=l,e[2]=u,e[5]=c},e.aabb.expand=function(e,t){void 0===t&&(t=1e-4),e[0]-=t,e[1]-=t,e[2]-=t,e[3]+=t,e[4]+=t,e[5]+=t},e.aabb.points=function(e){var t=[];return t.push(n.vec3.fromValues(e[0],e[1],e[2])),t.push(n.vec3.fromValues(e[3],e[1],e[2])),t.push(n.vec3.fromValues(e[3],e[4],e[2])),t.push(n.vec3.fromValues(e[0],e[4],e[2])),t.push(n.vec3.fromValues(e[0],e[1],e[5])),t.push(n.vec3.fromValues(e[3],e[1],e[5])),t.push(n.vec3.fromValues(e[3],e[4],e[5])),t.push(n.vec3.fromValues(e[0],e[4],e[5])),t},e.aabb.points2=function(e,t){return t[0][0]=e[0],t[0][1]=e[1],t[0][2]=e[2],t[1][0]=e[3],t[1][1]=e[1],t[1][2]=e[2],t[2][0]=e[3],t[2][1]=e[4],t[2][2]=e[2],t[3][0]=e[0],t[3][1]=e[4],t[3][2]=e[2],t[4][0]=e[0],t[4][1]=e[1],t[4][2]=e[5],t[5][0]=e[3],t[5][1]=e[1],t[5][2]=e[5],t[6][0]=e[3],t[6][1]=e[4],t[6][2]=e[5],t[7][0]=e[0],t[7][1]=e[4],t[7][2]=e[5],t},e.aabb.points3=function(e,t){return t[0][0]=e[0],t[0][1]=e[1],t[0][2]=e[2],t[1][0]=e[3],t[1][1]=e[1],t[1][2]=e[2],t[2][0]=e[3],t[2][1]=e[1],t[2][2]=e[5],t[3][0]=e[0],t[3][1]=e[1],t[3][2]=e[5],t[4][0]=e[0],t[4][1]=e[4],t[4][2]=e[2],t[5][0]=e[3],t[5][1]=e[4],t[5][2]=e[2],t[6][0]=e[3],t[6][1]=e[4],t[6][2]=e[5],t[7][0]=e[0],t[7][1]=e[4],t[7][2]=e[5],t},e.aabb.planes=function(e){var t=[];return t.push(n.vec4.fromValues(-1,0,0,e[0])),t.push(n.vec4.fromValues(0,-1,0,e[1])),t.push(n.vec4.fromValues(0,0,-1,e[2])),t.push(n.vec4.fromValues(1,0,0,-e[3])),t.push(n.vec4.fromValues(0,1,0,-e[4])),t.push(n.vec4.fromValues(0,0,1,-e[5])),t},e.aabb.volume=function(e){return(e[3]-e[0])*(e[4]-e[1])*(e[5]-e[2])};var i={width:0,height:0,depth:0};e.aabb.size=function(e){return i.width=e[3]-e[0],i.height=e[4]-e[1],i.depth=e[5]-e[2],i},e.aabb.center=function(e){return[.5*(e[0]+e[3]),.5*(e[1]+e[4]),.5*(e[2]+e[5])]};var a=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]];e.aabb.transform=function(t,r,i){e.aabb.points2(r,a),n.vec3.transformMat4(a[0],a[0],i),n.vec3.transformMat4(a[1],a[1],i),n.vec3.transformMat4(a[2],a[2],i),n.vec3.transformMat4(a[3],a[3],i),n.vec3.transformMat4(a[4],a[4],i),n.vec3.transformMat4(a[5],a[5],i),n.vec3.transformMat4(a[6],a[6],i),n.vec3.transformMat4(a[7],a[7],i),t[0]=a[0][0],t[3]=a[0][0],t[1]=a[0][1],t[4]=a[0][1],t[2]=a[0][2],t[5]=a[0][2];for(var o=1;o<8;o++)t[0]>a[o][0]&&(t[0]=a[o][0]),t[3]<a[o][0]&&(t[3]=a[o][0]),t[1]>a[o][1]&&(t[1]=a[o][1]),t[4]<a[o][1]&&(t[4]=a[o][1]),t[2]>a[o][2]&&(t[2]=a[o][2]),t[5]<a[o][2]&&(t[5]=a[o][2])},e.plane={},e.plane.create=function(e,t,r){var i=t[0]-e[0],a=t[1]-e[1],o=t[2]-e[2],s=r[0]-e[0],l=r[1]-e[1],u=r[2]-e[2],c=n.vec4.create();return c[0]=a*u-o*l,c[1]=o*s-i*u,c[2]=i*l-a*s,c[3]=-(c[0]*e[0]+c[1]*e[1]+c[2]*e[2]),this.normalize(c),c},e.plane.createABCD=function(e,t,r,i){var a=n.vec4.fromValues(e,t,r,i);return this.normalize(a),a},e.plane.normalize=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t,e[3]/=t},e.sphere={},e.sphere.createFromAABB=function(t){var r=new Float32Array(4);return r[0]=.5*(t[0]+t[3]),r[1]=.5*(t[1]+t[4]),r[2]=.5*(t[2]+t[5]),r[3]=.5*e.aabb.length(t),r},e.sphere.createFromArray=function(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.frustum={};var o=n.mat4.create();e.frustum.createFromMatrix=function(t){var r,i=[];for(r=0;r<14;++r)i.push(n.vec4.create());for(n.mat4.invert(o,t),n.vec4.transformMat4(i[6],[-1,-1,-1,1],o),n.vec4.transformMat4(i[7],[1,-1,-1,1],o),n.vec4.transformMat4(i[8],[1,-1,1,1],o),n.vec4.transformMat4(i[9],[-1,-1,1,1],o),n.vec4.transformMat4(i[10],[-1,1,-1,1],o),n.vec4.transformMat4(i[11],[1,1,-1,1],o),n.vec4.transformMat4(i[12],[1,1,1,1],o),n.vec4.transformMat4(i[13],[-1,1,1,1],o),r=6;r<14;++r)n.vec4.scale(i[r],i[r],1/i[r][3]);var a=-t[3],s=-t[7],l=-t[11],u=-t[15];return i[0]=e.plane.createABCD(a-t[2],s-t[6],l-t[10],u-t[14]),i[1]=e.plane.createABCD(a+t[2],s+t[6],l+t[10],u+t[14]),i[2]=e.plane.createABCD(a+t[1],s+t[5],l+t[9],u+t[13]),i[3]=e.plane.createABCD(a-t[1],s-t[5],l-t[9],u-t[13]),i[4]=e.plane.createABCD(a-t[0],s-t[4],l-t[8],u-t[12]),i[5]=e.plane.createABCD(a+t[0],s+t[4],l+t[8],u+t[12]),i},e.frustum.points=function(e){return e.slice(6)},e.frustum.planes=function(e){var t=[];return t.push(e[0]),t.push(e[1]),t.push(e[2]),t.push(e[3]),t.push(e[4]),t.push(e[5]),t},e.intersect={_temp:[0,0,0],_U:[0,0,0],_D:[0,0,0],_vec:[0,0,0],_diff:[0,0,0],_v0:[0,0,0],_v1:[0,0,0],_v2:[0,0,0]},e.intersect.line_plane=function(e,t,r){n.vec3.subtract(this._diff,e,t),n.vec3.normalize(this._vec,this._diff);var i=n.vec3.dot(this._vec,r);if(Math.abs(i)<=.001)return null;for(var a=-(n.vec3.dot(t,r)+r[3])/i,o=0;o<3;++o)if(a*this._vec[o]/this._diff[o]<0||a*this._vec[o]/this._diff[o]>1)return null;var s=n.vec3.create();return s[0]=t[0]+a*this._vec[0],s[1]=t[1]+a*this._vec[1],s[2]=t[2]+a*this._vec[2],s},e.intersect.line_frustum=function(t,r,n,i){for(var a=[[0,1,5,4],[2,3,7,6],[4,5,6,7],[0,3,2,1],[0,4,7,3],[1,2,6,5]],o=!1,s=0;s<6;s++){var l=n[s],u=[];u.push(n[a[s][0]+6]),u.push(n[a[s][1]+6]),u.push(n[a[s][2]+6]),u.push(n[a[s][3]+6]);var c=e.intersect.line_frustum_quad(t,r,l,u);null!==c&&(i.push(c),o=!0)}return o},e.intersect.line_aabb=function(t,r,n,i){for(var a=e.aabb.planes(n),o=!1,s=0;s<6;s++){var l=e.intersect.line_aabb_quad(t,r,a[s],n,s);null!=l&&(i.push(l),o=!0)}return o},e.intersect.line_frustum_quad=function(t,r,n,i){var a;return null==(a=e.intersect.line_plane(t,r,n))?null:e.inside.point_triangle(i[0],i[1],i[2],a)||e.inside.point_triangle(i[2],i[3],i[0],a)?a:null},e.intersect.line_aabb_quad=function(t,r,n,i,a){var o;if(null===(o=e.intersect.line_plane(t,r,n)))return null;var s=!1;switch(a){case 1:case 4:s=e.inside.point_slab(o[0],i[0],i[3])&&e.inside.point_slab(o[2],i[2],i[5]);break;case 5:case 2:s=e.inside.point_slab(o[0],i[0],i[3])&&e.inside.point_slab(o[1],i[1],i[4]);break;case 0:case 3:s=e.inside.point_slab(o[1],i[1],i[4])&&e.inside.point_slab(o[2],i[2],i[5])}return s?o:null};var s=new Array(4);return e.intersect.ray_aabb=function(e,t,r){for(var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,a=!0,o=-1,l=0;l<3;l++){var u=t[l],c=e[l],d=r[l],h=r[l+3];if(0!==u){var f=(d-c)/u,p=(h-c)/u,m=0;if(f>p){var v=p;p=f,f=v,m=1}if(f>n&&(n=f,o=2*l+m),(n=Math.max(f,n))>(i=Math.min(p,i))){a=!1;break}if(i<0){a=!1;break}}else if(u<d||u>h){a=!1;break}}return a?(s[0]=e[0]+t[0]*n,s[1]=e[1]+t[1]*n,s[2]=e[2]+t[2]*n,s[3]=o,s):null},e.intersect.sphere_frustum=function(e,t){return n.vec3.dot(t[0],e)+t[0][3]<e[3]&&n.vec3.dot(t[1],e)+t[1][3]<e[3]&&n.vec3.dot(t[2],e)+t[2][3]<e[3]&&n.vec3.dot(t[3],e)+t[3][3]<e[3]&&n.vec3.dot(t[4],e)+t[4][3]<e[3]&&n.vec3.dot(t[5],e)+t[5][3]<e[3]},e.intersect.sphere_cone=function(e,t){n.vec3.scale(this._temp,t.direction,t.invSinTheta*e[3]),n.vec3.subtract(this._U,t.tip,this._temp),n.vec3.subtract(this._D,e,this._U);var r=n.vec3.dot(this._D,this._D),i=n.vec3.dot(t.direction,this._D);return i>0&&i*i>=r*t.cosThetaSquared&&(n.vec3.subtract(this._D,e,t.tip),r=n.vec3.dot(this._D,this._D),!((i=-n.vec3.dot(t.direction,this._D))>0&&i*i>=r*t.sinThetaSquared)||r<=e[3]*e[3])},e.intersect.aabb_frustum=function(t,r){var n,i=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[1,5],[2,6],[3,7]],a=e.aabb.points(t),o=e.frustum.points(r),s=[];for(n=0;n<12;n++)e.intersect.line_frustum(a[i[n][0]],a[i[n][1]],r,s);for(n=0;n<12;n++)e.intersect.line_aabb(o[i[n][0]],o[i[n][1]],t,s);for(n=0;n<8;n++){var l=a[n];e.inside.point_frustum(l,r)&&s.push(l)}for(n=0;n<8;n++){var u=o[n];e.inside.point_aabb(u,t)&&s.push(u)}return s},e.intersect.aabb_aabb=function(t,r){return(e.inside.point_slab(t[0],r[0],r[3])||e.inside.point_slab(t[3],r[0],r[3]))&&(e.inside.point_slab(t[1],r[1],r[4])||e.inside.point_slab(t[4],r[1],r[4]))&&(e.inside.point_slab(t[2],r[2],r[5])||e.inside.point_slab(t[5],r[2],r[5]))||(e.inside.point_slab(r[0],t[0],t[3])||e.inside.point_slab(r[3],t[0],t[3]))&&(e.inside.point_slab(r[1],t[1],t[4])||e.inside.point_slab(r[4],t[1],t[4]))&&(e.inside.point_slab(r[2],t[2],t[5])||e.inside.point_slab(r[5],t[2],t[5]))},e.inside={_v0:new Float32Array(3),_v1:new Float32Array(3),_v2:new Float32Array(3)},e.inside.point_triangle=function(e,t,r,i){n.vec3.subtract(this._v0,r,e),n.vec3.subtract(this._v1,t,e),n.vec3.subtract(this._v2,i,e);var a=n.vec3.dot(this._v0,this._v0),o=n.vec3.dot(this._v0,this._v1),s=n.vec3.dot(this._v0,this._v2),l=n.vec3.dot(this._v1,this._v1),u=n.vec3.dot(this._v1,this._v2),c=1/(a*l-o*o),d=(l*s-o*u)*c;if(d<0||d>1)return!1;var h=(a*u-o*s)*c;return!(h<0||h>1)&&d+h<=1},e.inside.point_aabb=function(e,t){return e[0]>t[0]&&e[1]>t[1]&&e[2]>t[2]&&e[0]<t[3]&&e[1]<t[4]&&e[2]<t[5]},e.inside.point_frustum=function(e,t){return n.vec3.dot(t[0],e)+t[0][3]<0&&n.vec3.dot(t[1],e)+t[1][3]<0&&n.vec3.dot(t[2],e)+t[2][3]<0&&n.vec3.dot(t[3],e)+t[3][3]<0&&n.vec3.dot(t[4],e)+t[4][3]<0&&n.vec3.dot(t[5],e)+t[5][3]<0},e.inside.sphere_frustum=function(e,t){return n.vec3.dot(t[0],e)+t[0][3]<-e[3]&&n.vec3.dot(t[1],e)+t[1][3]<-e[3]&&n.vec3.dot(t[2],e)+t[2][3]<-e[3]&&n.vec3.dot(t[3],e)+t[3][3]<-e[3]&&n.vec3.dot(t[4],e)+t[4][3]<-e[3]&&n.vec3.dot(t[5],e)+t[5][3]<-e[3]},e.inside.point_slab=function(e,t,r){return e<r&&e>t},e.inside.aabb_frustum=function(t,r){var n=e.aabb.points(t);return e.inside.point_frustum(n[0],r)&&e.inside.point_frustum(n[1],r)&&e.inside.point_frustum(n[2],r)&&e.inside.point_frustum(n[3],r)&&e.inside.point_frustum(n[4],r)&&e.inside.point_frustum(n[5],r)&&e.inside.point_frustum(n[6],r)&&e.inside.point_frustum(n[7],r)},e.outside={},e.outside.point_frustum=function(e,t){return n.vec3.dot(t[0],e)+t[0][3]>0||n.vec3.dot(t[1],e)+t[1][3]>0||n.vec3.dot(t[2],e)+t[2][3]>0||n.vec3.dot(t[3],e)+t[3][3]>0||n.vec3.dot(t[4],e)+t[4][3]>0||n.vec3.dot(t[5],e)+t[5][3]>0},e.outside.sphere_frustum=function(e,t){return n.vec3.dot(t[0],e)+t[0][3]>e[3]||n.vec3.dot(t[1],e)+t[1][3]>e[3]||n.vec3.dot(t[2],e)+t[2][3]>e[3]||n.vec3.dot(t[3],e)+t[3][3]>e[3]||n.vec3.dot(t[4],e)+t[4][3]>e[3]||n.vec3.dot(t[5],e)+t[5][3]>e[3]},e.outside.aabb_frustum=function(e,t){for(var r=0;r<6;r++){var n=t[r][0]>0?e[0]:e[3],i=t[r][1]>0?e[1]:e[4],a=t[r][2]>0?e[2]:e[5];if(t[r][0]*n+t[r][1]*i+t[r][2]*a+t[r][3]>0)return!0}for(r=0;r<3;r++){if(t[6][r]>e[1][r]&&t[7][r]>e[1][r]&&t[8][r]>e[1][r]&&t[9][r]>e[1][r]&&t[10][r]>e[1][r]&&t[11][r]>e[1][r]&&t[12][r]>e[1][r]&&t[13][r]>e[1][r])return!0;if(t[6][r]<e[0][r]&&t[7][r]<e[0][r]&&t[8][r]<e[0][r]&&t[9][r]<e[0][r]&&t[10][r]<e[0][r]&&t[11][r]<e[0][r]&&t[12][r]<e[0][r]&&t[13][r]<e[0][r])return!0}return!1},e.outside.aabb_aabb=function(e,t){return e[3]<=t[0]||e[0]>=t[3]||e[4]<=t[1]||e[1]>=t[4]||e[5]<=t[2]||e[2]>=t[5]},e.clamp=function(e,t,r){return Math.min(Math.max(e,t),r)},e.lerp=function(e,t,r){return e+(t-e)*r},e}()},"./00utility/m3d_utils.ts":function(e,t,r){"use strict";r.r(t);var n=function(){function e(){}return e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.indexOf=function(t,r){if(!e.isArray(t))return console.error("Not an array!"),-1;for(var n=0,i=t.length;n<i;++n)if(t[n]===r)return n;return-1},e}();t.default=n},"./01wrapper/glenum.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"gl",function(){return n});var n={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,LINEAR_MIPMAP_LINEAR:9987,LINEAR:9729,NEAREST:9728,NEAREST_MIPMAP_NEAREST:9984,REPEAT:10497,CLAMP_TO_EDGE:33071,RGBA:6408,RGB:6407}},"./01wrapper/m3d_wgl.release.js":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/Environment.ts");t.default=function(){return function(e,t){t.antialias=!t.webgl2&&t.samples>1,t.depth=!t.webgl2&&t.depth;var r=WebGLUtils.setupWebGL(e,t);r.version=r.getParameter(r.VERSION);var i=null!==r.version.match("WebGL 2.0");if(i)r.floatTextureExtension=r.getExtension("EXT_color_buffer_float"),r.floatTextureExtension2=r.getExtension("OES_texture_float_linear"),r.instancingExtension=t.instancing,r.COLOR_ATTACHMENT0_WEBGL=r.COLOR_ATTACHMENT0;else{t.instancing&&(r.instancingExtension=r.getExtension("ANGLE_instanced_arrays")),r.instancingExtension?(t.vao&&console.warn("Instance drawing and VAO cannot use at same time. Turn off VAO."),r.drawElementsInstanced=function(e,t,n,i,a){r.instancingExtension.drawElementsInstancedANGLE(e,t,n,i,a)},r.vertexAttribDivisor=function(e,t){r.instancingExtension.vertexAttribDivisorANGLE(e,t)}):(t.vao&&(r.vaoExtension=r.getExtension("OES_vertex_array_object")),r.vaoExtension&&(r.deleteVertexArray=function(e){return r.vaoExtension.deleteVertexArrayOES(e)},r.bindVertexArray=function(e){return r.vaoExtension.bindVertexArrayOES(e)},r.createVertexArray=function(){return r.vaoExtension.createVertexArrayOES()})),r.floatTextureExtension=(r.getExtension("OES_texture_float")||r.getExtension("WEBGL_color_buffer_float"))&&r.getExtension("OES_texture_float_linear"),r.depthTextureExtension=r.getExtension("WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture"),r.uintIBOExtension=r.getExtension("OES_element_index_uint");var a=r.getExtension("WEBGL_draw_buffers");r.COLOR_ATTACHMENT0_WEBGL=a?a.COLOR_ATTACHMENT0_WEBGL:r.COLOR_ATTACHMENT0,r.s3tcExtension=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"),r.halfFloatExtension=r.getExtension("OES_texture_half_float"),r.halfFloatLinearExtension=r.getExtension("OES_texture_half_float_linear")}var o=new Uint8Array(4);return r.syncGPU=function(){"chrome"===n.Environment.browserName?r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,o):r.finish()},r.isWebGL2=i,r.isWebGL2||(r.RGBA8=r.RGBA,r.RGB8=r.RGB,r.DEPTH24_STENCIL8=r.DEPTH_STENCIL,r.DEPTH_COMPONENT24=r.DEPTH_COMPONENT,r.RGBA32F=34836,r.RGB32F=34837),r.wbSamples=t.samples,r.wbFormat=t.alpha?r.RGBA8:r.RGB8,r.wbDepthFormat=t.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,r}}()},"./02resource/BitmapFont.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./02resource/Resource.ts"),a=r("./02resource/Texture.ts"),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t){var r=e.call(this,"bitmap-font",t)||this;return r._asciiMap=new Map,r._bitmap=new a.default("bitmap-font",t),r.ready=!1,r._fontInfo={name:"Arial",size:32,bold:!1,italic:!1,width:1024,height:128,characters:{0:{x:288,y:42,width:27,height:35,originX:5,originY:29,advance:18},1:{x:630,y:42,width:21,height:35,originX:3,originY:29,advance:18},2:{x:120,y:42,width:28,height:35,originX:5,originY:29,advance:18},3:{x:315,y:42,width:27,height:35,originX:5,originY:29,advance:18},4:{x:148,y:42,width:28,height:35,originX:6,originY:29,advance:18},5:{x:176,y:42,width:28,height:35,originX:5,originY:28,advance:18},6:{x:342,y:42,width:27,height:35,originX:5,originY:29,advance:18},7:{x:735,y:42,width:27,height:34,originX:5,originY:28,advance:18},8:{x:204,y:42,width:28,height:35,originX:5,originY:29,advance:18},9:{x:232,y:42,width:28,height:35,originX:5,originY:29,advance:18}," ":{x:471,y:77,width:12,height:12,originX:6,originY:6,advance:9},"!":{x:672,y:42,width:16,height:35,originX:3,originY:29,advance:9},'"':{x:304,y:77,width:21,height:20,originX:5,originY:29,advance:11},"#":{x:393,y:0,width:30,height:36,originX:6,originY:29,advance:18},$:{x:197,y:0,width:27,height:40,originX:5,originY:30,advance:18},"%":{x:562,y:0,width:37,height:35,originX:4,originY:29,advance:28},"&":{x:361,y:0,width:32,height:36,originX:5,originY:29,advance:21},"'":{x:325,y:77,width:16,height:20,originX:5,originY:29,advance:6},"(":{x:85,y:0,width:20,height:42,originX:4,originY:29,advance:10},")":{x:105,y:0,width:20,height:42,originX:4,originY:29,advance:10},"*":{x:281,y:77,width:23,height:22,originX:5,originY:29,advance:12},"+":{x:143,y:77,width:28,height:27,originX:4,originY:24,advance:18},",":{x:341,y:77,width:16,height:19,originX:3,originY:9,advance:9},"-":{x:403,y:77,width:21,height:15,originX:5,originY:15,advance:10},".":{x:424,y:77,width:16,height:15,originX:3,originY:9,advance:9},"/":{x:478,y:0,width:21,height:36,originX:6,originY:29,advance:9},":":{x:127,y:77,width:16,height:28,originX:3,originY:22,advance:9},";":{x:762,y:42,width:16,height:33,originX:3,originY:22,advance:9},"<":{x:171,y:77,width:28,height:27,originX:4,originY:25,advance:18},"=":{x:253,y:77,width:28,height:22,originX:4,originY:22,advance:18},">":{x:199,y:77,width:28,height:27,originX:4,originY:25,advance:18},"?":{x:369,y:42,width:27,height:35,originX:5,originY:29,advance:18},"@":{x:0,y:0,width:42,height:42,originX:4,originY:29,advance:32},A:{x:599,y:0,width:34,height:35,originX:6,originY:29,advance:21},B:{x:0,y:42,width:30,height:35,originX:4,originY:29,advance:21},C:{x:328,y:0,width:33,height:36,originX:5,originY:29,advance:23},D:{x:799,y:0,width:32,height:35,originX:4,originY:29,advance:23},E:{x:30,y:42,width:30,height:35,originX:4,originY:29,advance:21},F:{x:260,y:42,width:28,height:35,originX:4,originY:29,advance:19},G:{x:294,y:0,width:34,height:36,originX:4,originY:29,advance:25},H:{x:831,y:0,width:31,height:35,originX:4,originY:29,advance:23},I:{x:688,y:42,width:16,height:35,originX:3,originY:29,advance:9},J:{x:583,y:42,width:25,height:35,originX:5,originY:29,advance:16},K:{x:862,y:0,width:31,height:35,originX:4,originY:29,advance:21},L:{x:396,y:42,width:27,height:35,originX:4,originY:29,advance:18},M:{x:633,y:0,width:34,height:35,originX:4,originY:29,advance:26},N:{x:893,y:0,width:31,height:35,originX:4,originY:29,advance:23},O:{x:259,y:0,width:35,height:36,originX:5,originY:29,advance:25},P:{x:60,y:42,width:30,height:35,originX:4,originY:29,advance:21},Q:{x:224,y:0,width:35,height:37,originX:5,originY:29,advance:25},R:{x:667,y:0,width:33,height:35,originX:4,originY:29,advance:23},S:{x:924,y:0,width:31,height:35,originX:5,originY:29,advance:21},T:{x:955,y:0,width:31,height:35,originX:5,originY:29,advance:19},U:{x:986,y:0,width:31,height:35,originX:4,originY:29,advance:23},V:{x:700,y:0,width:33,height:35,originX:6,originY:29,advance:21},W:{x:520,y:0,width:42,height:35,originX:6,originY:29,advance:30},X:{x:733,y:0,width:33,height:35,originX:6,originY:29,advance:21},Y:{x:766,y:0,width:33,height:35,originX:6,originY:29,advance:21},Z:{x:90,y:42,width:30,height:35,originX:5,originY:29,advance:19},"[":{x:159,y:0,width:19,height:41,originX:4,originY:29,advance:9},"\\":{x:499,y:0,width:21,height:36,originX:6,originY:29,advance:9},"]":{x:178,y:0,width:19,height:41,originX:6,originY:29,advance:9},"^":{x:227,y:77,width:26,height:24,originX:5,originY:29,advance:15},_:{x:440,y:77,width:31,height:14,originX:7,originY:1,advance:18},"`":{x:385,y:77,width:18,height:16,originX:5,originY:29,advance:10},a:{x:960,y:42,width:27,height:29,originX:5,originY:23,advance:18},b:{x:423,y:42,width:27,height:35,originX:4,originY:29,advance:18},c:{x:987,y:42,width:27,height:29,originX:5,originY:23,advance:16},d:{x:450,y:42,width:27,height:35,originX:5,originY:29,advance:18},e:{x:848,y:42,width:28,height:29,originX:5,originY:23,advance:18},f:{x:608,y:42,width:22,height:35,originX:6,originY:29,advance:9},g:{x:451,y:0,width:27,height:36,originX:5,originY:23,advance:18},h:{x:531,y:42,width:26,height:35,originX:4,originY:29,advance:18},i:{x:704,y:42,width:16,height:35,originX:4,originY:29,advance:7},j:{x:125,y:0,width:19,height:42,originX:8,originY:29,advance:7},k:{x:557,y:42,width:26,height:35,originX:4,originY:29,advance:16},l:{x:720,y:42,width:15,height:35,originX:4,originY:29,advance:7},m:{x:778,y:42,width:35,height:29,originX:4,originY:23,advance:26},n:{x:27,y:77,width:26,height:29,originX:4,originY:23,advance:18},o:{x:876,y:42,width:28,height:29,originX:5,originY:23,advance:18},p:{x:477,y:42,width:27,height:35,originX:4,originY:23,advance:18},q:{x:504,y:42,width:27,height:35,originX:5,originY:23,advance:18},r:{x:105,y:77,width:22,height:29,originX:4,originY:23,advance:10},s:{x:53,y:77,width:26,height:29,originX:5,originY:23,advance:16},t:{x:651,y:42,width:21,height:35,originX:6,originY:29,advance:9},u:{x:79,y:77,width:26,height:29,originX:4,originY:23,advance:18},v:{x:904,y:42,width:28,height:29,originX:6,originY:23,advance:16},w:{x:813,y:42,width:35,height:29,originX:6,originY:23,advance:23},x:{x:932,y:42,width:28,height:29,originX:6,originY:23,advance:16},y:{x:423,y:0,width:28,height:36,originX:6,originY:23,advance:16},z:{x:0,y:77,width:27,height:29,originX:6,originY:23,advance:16},"{":{x:42,y:0,width:22,height:42,originX:5,originY:29,advance:10},"|":{x:144,y:0,width:15,height:42,originX:3,originY:29,advance:8},"}":{x:64,y:0,width:21,height:42,originX:5,originY:29,advance:10},"~":{x:357,y:77,width:28,height:17,originX:5,originY:20,advance:18}}},r._init(),r}return o(t,e),t.prototype._init=function(){var e=this,t=this._manager.gl;this._bitmap.create(1024,128,t.RGB8,t.LINEAR,t.CLAMP_TO_EDGE);var r=new Image;r.onload=function(){e._bitmap.updateImage(r,t.RGB,t.UNSIGNED_BYTE,t.LINEAR,t.CLAMP_TO_EDGE)},r.src="data:image/png;base64,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"},t.prototype.getGlyphs=function(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r),i=this._fontInfo.characters[e[r]];if(this._asciiMap.has(n))t.push(this._asciiMap.get(n));else{var a={x1:i.x/this._fontInfo.width,y1:(i.y+i.height)/this._fontInfo.height,x2:(i.x+i.width)/this._fontInfo.width,y2:i.y/this._fontInfo.height,size:i.advance/this._fontInfo.size,width:i.width/this._fontInfo.size,height:i.height/this._fontInfo.size,xoffset:i.originX/2/this._fontInfo.size,yoffset:i.originY/this._fontInfo.size};t.push(a),this._asciiMap.set(n,a)}}return t},t.prototype.getTexture=function(){return this._bitmap},t}(i.default);t.default=s},"./02resource/Buffer.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./02resource/Resource.ts"),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=function(e){function t(t,r){var n=e.call(this,t,r)||this,i=r.gl;return n._target=i.ARRAY_BUFFER,n.buffer=i.createBuffer(),n}return a(t,e),t.prototype.destroy=function(t){if(void 0===t&&(t=!1),t||(this._ref--,!(this._ref>0))){if(null!==this.buffer)this._manager.gl.deleteBuffer(this.buffer),this.buffer=null,delete this.buffer;this.ready&&this._manager&&(this._manager.deleteBuffer(this.name),this._manager=null),e.prototype.destroy.call(this)}},t.prototype.create=function(e,t){if(!this.ready){var r=this._manager.gl;this._target=e,r.bindBuffer(e,this.buffer),r.bufferData(e,t,r.STATIC_DRAW),r.getError()===r.NO_ERROR?this.ready=!0:(r.deleteBuffer(this.buffer),this.buffer=null,this.ready=!1)}},t.prototype.update=function(e){var t=this._manager.gl;t.bindBuffer(this._target,this.buffer),t.bufferData(this._target,e,t.STATIC_DRAW),t.getError()===t.NO_ERROR?this.ready=!0:(t.deleteBuffer(this.buffer),this.buffer=null,this.ready=!1)},t}(i.default);t.default=o},"./02resource/DDS.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"TextureType",function(){return i}),r.d(t,"DDSTools",function(){return u});function n(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}var i,a=n("DXT1"),o=n("DXT3"),s=n("DXT5"),l=n("DX10");!function(e){e[e.TEXTURETYPE_UNSIGNED_INT=0]="TEXTURETYPE_UNSIGNED_INT",e[e.TEXTURETYPE_HALF_FLOAT=1]="TEXTURETYPE_HALF_FLOAT",e[e.TEXTURETYPE_FLOAT=2]="TEXTURETYPE_FLOAT"}(i||(i={}));var u=function(){function e(){}return e.GetDDSInfo=function(e){var t=new Int32Array(e,0,31),r=new Int32Array(e,0,35),n=1;131072&t[2]&&(n=Math.max(1,t[7]));var u=t[21],c=u===l?r[32]:0,d=i.TEXTURETYPE_UNSIGNED_INT;switch(u){case 113:d=i.TEXTURETYPE_HALF_FLOAT;break;case 116:d=i.TEXTURETYPE_FLOAT;break;case l:if(10===c){d=i.TEXTURETYPE_HALF_FLOAT;break}if(2===c){d=i.TEXTURETYPE_FLOAT;break}}return{width:t[4],height:t[3],mipmapCount:n,isFourCC:4==(4&t[20]),isRGB:64==(64&t[20]),isLuminance:131072==(131072&t[20]),isCube:512==(512&t[28]),isCompressed:u===a||u===o||u===s,dxgiFormat:c,textureType:d}},e._ToHalfFloat=function(t){e._FloatView||(e._FloatView=new Float32Array(1),e._Int32View=new Int32Array(e._FloatView.buffer)),e._FloatView[0]=t;var r=e._Int32View[0],n=r>>16&32768,i=r>>12&2047,a=r>>23&255;return a<103?n:a>142?(n|=31744,n|=(255==a?0:1)&&8388607&r):a<113?n|=((i|=2048)>>114-a)+(i>>113-a&1):(n|=a-112<<10|i>>1,n+=1&i)},e._FromHalfFloat=function(e){var t=(32768&e)>>15,r=(31744&e)>>10,n=1023&e;return 0===r?(t?-1:1)*Math.pow(2,-14)*(n/Math.pow(2,10)):31==r?n?NaN:1/0*(t?-1:1):(t?-1:1)*Math.pow(2,r-15)*(1+n/Math.pow(2,10))},e._GetHalfFloatAsFloatRGBAArrayBuffer=function(t,r,n,i,a,o){for(var s=new Float32Array(i),l=new Uint16Array(a,n),u=0,c=0;c<r;c++)for(var d=0;d<t;d++){var h=4*(d+c*t);s[u]=e._FromHalfFloat(l[h]),s[u+1]=e._FromHalfFloat(l[h+1]),s[u+2]=e._FromHalfFloat(l[h+2]),e.StoreLODInAlphaChannel?s[u+3]=o:s[u+3]=e._FromHalfFloat(l[h+3]),u+=4}return s},e._GetHalfFloatRGBAArrayBuffer=function(t,r,n,i,a,o){if(e.StoreLODInAlphaChannel){for(var s=new Uint16Array(i),l=new Uint16Array(a,n),u=0,c=0;c<r;c++)for(var d=0;d<t;d++){var h=4*(d+c*t);s[u]=l[h],s[u+1]=l[h+1],s[u+2]=l[h+2],s[u+3]=e._ToHalfFloat(o),u+=4}return s}return new Uint16Array(a,n,i)},e._GetFloatRGBAArrayBuffer=function(t,r,n,i,a,o){if(e.StoreLODInAlphaChannel){for(var s=new Float32Array(i),l=new Float32Array(a,n),u=0,c=0;c<r;c++)for(var d=0;d<t;d++){var h=4*(d+c*t);s[u]=l[h],s[u+1]=l[h+1],s[u+2]=l[h+2],s[u+3]=o,u+=4}return s}return new Float32Array(a,n,i)},e._GetFloatAsUIntRGBAArrayBuffer=function(t,r,n,i,a,o){for(var s=new Uint8Array(i),l=new Float32Array(a,n),u=0,c=0;c<r;c++)for(var d=0;d<t;d++){var h=4*(d+c*t);s[u]=255*Math.min(1,Math.max(0,l[h])),s[u+1]=255*Math.min(1,Math.max(0,l[h+1])),s[u+2]=255*Math.min(1,Math.max(0,l[h+2])),e.StoreLODInAlphaChannel?s[u+3]=o:s[u+3]=255*Math.min(1,Math.max(0,l[h+3])),u+=4}return s},e._GetHalfFloatAsUIntRGBAArrayBuffer=function(t,r,n,i,a,o){for(var s=new Uint8Array(i),l=new Uint16Array(a,n),u=0,c=0;c<r;c++)for(var d=0;d<t;d++){var h=4*(d+c*t);s[u]=255*Math.min(1,Math.max(0,e._FromHalfFloat(l[h]))),s[u+1]=255*Math.min(1,Math.max(0,e._FromHalfFloat(l[h+1]))),s[u+2]=255*Math.min(1,Math.max(0,e._FromHalfFloat(l[h+2]))),e.StoreLODInAlphaChannel?s[u+3]=o:s[u+3]=255*Math.min(1,Math.max(0,e._FromHalfFloat(l[h+3]))),u+=4}return s},e._GetRGBAArrayBuffer=function(e,t,r,n,i,a,o,s,l){for(var u=new Uint8Array(n),c=new Uint8Array(i,r),d=0,h=0;h<t;h++)for(var f=0;f<e;f++){var p=4*(f+h*e);u[d]=c[p+a],u[d+1]=c[p+o],u[d+2]=c[p+s],u[d+3]=c[p+l],d+=4}return u},e._ExtractLongWordOrder=function(t){return 0===t||255===t||-16777216===t?0:1+e._ExtractLongWordOrder(t>>8)},e._GetRGBArrayBuffer=function(e,t,r,n,i,a,o,s){for(var l=new Uint8Array(n),u=new Uint8Array(i,r),c=0,d=0;d<t;d++)for(var h=0;h<e;h++){var f=3*(h+d*e);l[c]=u[f+a],l[c+1]=u[f+o],l[c+2]=u[f+s],c+=3}return l},e._GetLuminanceArrayBuffer=function(e,t,r,n,i){for(var a=new Uint8Array(n),o=new Uint8Array(i,r),s=0,l=0;l<t;l++)for(var u=0;u<e;u++){var c=u+l*e;a[s]=o[c],s++}return a},e.uploadDataToTexture=function(e,t,r,n,i,a,o,s,l){void 0===l&&(l=!1);var u=e.TEXTURE_CUBE_MAP_POSITIVE_X+o,c=Math.round(Math.log(t.width)*Math.LOG2E),d=Math.round(Math.log(t.height)*Math.LOG2E),h=l?t.width:Math.pow(2,Math.max(c-s,0)),f=l?t.height:Math.pow(2,Math.max(d-s,0));e.isWebGL2||(i=a),e.texImage2D(u,s,a,h,f,0,i,n,r)},e.uploadCompressedDataToTextureDirectly=function(e,t,r,n,i,a,o,s){void 0===o&&(o=0),void 0===s&&(s=0);var l=e.TEXTURE_CUBE_MAP_POSITIVE_X+o;e.compressedTexImage2D(l,s,r,n,i,0,a)},e.UploadDDSLevels=function(t,r,n,i,u,c,d,h){void 0===d&&(d=-1);var f,p,m,v,_,g,y,b=t.s3tcExtension,x=new Int32Array(n,0,31),w=0,E=0,M=1;if(542327876===x[0])if(i.isFourCC||i.isRGB||i.isLuminance)if(!i.isCompressed||b){var A=x[22];v=x[1]+4;var T;if(i.isFourCC)switch(f=x[21]){case a:M=8,E=b.COMPRESSED_RGBA_S3TC_DXT1_EXT;break;case o:M=16,E=b.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case s:M=16,E=b.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;case 113:case 116:!0;break;case l:v+=20;var S=!1;switch(i.dxgiFormat){case 10:case 2:!0,S=!0;break;case 88:i.isRGB=!0,i.isFourCC=!1,A=32,S=!0}if(S)break;default:return void console.error("Unsupported FourCC code:",(T=f,String.fromCharCode(255&T,T>>8&255,T>>16&255,T>>24&255)))}var k=e._ExtractLongWordOrder(x[23]),D=e._ExtractLongWordOrder(x[24]),P=e._ExtractLongWordOrder(x[25]),I=e._ExtractLongWordOrder(x[26]);g=1,131072&x[2]&&!1!==u&&(g=Math.max(1,x[7]));for(var N,O,R,F=h||0,C=t.isWebGL2||t.halfFloatExtension,B=F;B<c;B++){for(p=x[4],m=x[3],y=0;y<g;++y){if(-1===d||d===y){var L=-1===d?y:0;if(!i.isCompressed&&i.isFourCC){N=t.RGBA,w=p*m*4;var j=null;128===A?(R=t.FLOAT,O=t.RGBA32F,j=e._GetFloatRGBAArrayBuffer(p,m,v,w,n,L)):64!==A||C?(R=t.HALF_FLOAT||C.HALF_FLOAT_OES,O=t.RGBA16F||t.RGBA,j=e._GetHalfFloatRGBAArrayBuffer(p,m,v,w,n,L)):(R=t.FLOAT,O=t.RGBA32F,j=e._GetHalfFloatAsFloatRGBAArrayBuffer(p,m,v,w,n,L)),j&&e.uploadDataToTexture(t,r,j,R,N,O,B,L)}else if(i.isRGB)R=t.UNSIGNED_INT,24===A?(N=t.RGB,O=t.RGB8,w=p*m*3,_=e._GetRGBArrayBuffer(p,m,v,w,n,k,D,P),e.uploadDataToTexture(t,r,_,R,N,O,B,L)):(N=t.RGBA,O=t.RGBA8,w=p*m*4,_=e._GetRGBAArrayBuffer(p,m,v,w,n,k,D,P,I),e.uploadDataToTexture(t,r,_,R,N,O,B,L));else if(i.isLuminance){var V=t.getParameter(t.UNPACK_ALIGNMENT),z=p;w=Math.floor((p+V-1)/V)*V*(m-1)+z,_=e._GetLuminanceArrayBuffer(p,m,v,w,n),N=t.LUMINANCE,O=t.LUMINANCE,R=t.UNSIGNED_INT,e.uploadDataToTexture(t,r,_,R,N,O,B,L)}else w=Math.max(4,p)/4*Math.max(4,m)/4*M,_=new Uint8Array(n,v,w),R=t.UNSIGNED_INT,e.uploadCompressedDataToTextureDirectly(t,r,E,p,m,_,B,L)}v+=A?p*m*(A/8):w,p*=.5,m*=.5,p=Math.max(1,p),m=Math.max(1,m)}if(void 0!==h)break}}else console.error("Compressed textures are not supported on this platform.");else console.error("Unsupported format, must contain a FourCC, RGB or LUMINANCE code");else console.error("Invalid magic number in DDS header")},e.StoreLODInAlphaChannel=!1,e}()},"./02resource/FrameBuffer.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./00utility/m3d_utils.ts"),a=r("./02resource/Resource.ts"),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n._framebuffer=null,n._colorBuffers=[],n._depthBuffer=null,n}return o(t,e),t.prototype.create=function(e,t){var r=this._manager.gl;if(!this.ready){for(var n=0,a=e.length;n<a;n++)if(!e[n].ready)return;if(!t||t.ready){if(i.default.isArray(e)||(e=[e]),this._colorBuffers=e,this._depthBuffer=t,this._framebuffer=r.createFramebuffer(),r.bindFramebuffer(r.FRAMEBUFFER,this._framebuffer),r.isWebGL2||r.drawBuffers){var o=[];for(n=0,a=e.length;n<a;n++)this._colorBuffers[n]._rbo?r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0_WEBGL+n,r.RENDERBUFFER,this._colorBuffers[n]._texture):r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0_WEBGL+n,r.TEXTURE_2D,this._colorBuffers[n]._texture,0),o.push(r.COLOR_ATTACHMENT0_WEBGL+n);r.drawBuffers(o)}else this._colorBuffers[0]._rbo?r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0_WEBGL,r.RENDERBUFFER,this._colorBuffers[0]._texture):r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0_WEBGL,r.TEXTURE_2D,this._colorBuffers[0]._texture,0);this._depthBuffer?this._depthBuffer._rbo?this._depthBuffer._format===r.DEPTH_COMPONENT?r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,this._depthBuffer._texture):r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,this._depthBuffer._texture):this._depthBuffer._format===r.DEPTH_COMPONENT?r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,this._depthBuffer._texture,0):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,this._depthBuffer._texture,0):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,null,0),this.ready=this._checkCompleteness()}}},t.prototype._destroy=function(){var e,t=this._manager.gl;if(this.ready){t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,null,0),t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,null,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,null),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,null);for(var r=0,n=t.isWebGL2||t.drawBuffers?this._colorBuffers.length:1;r<n;r++)t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0_WEBGL+r,t.TEXTURE_2D,null,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0_WEBGL+r,t.RENDERBUFFER,null);t.deleteFramebuffer(this._framebuffer),delete this._framebuffer}(e=t.getError())!==t.NO_ERROR&&console.log("GL error in framebuffer._destroy(): "+e)},t.prototype.destroy=function(t){void 0===t&&(t=!1),!t&&(this._ref--,this._ref>0)||(this.ready&&this._destroy(),this._manager&&this._manager.deleteFramebuffer(this.name),e.prototype.destroy.call(this))},t.prototype.resize=function(e,t){if(this.getWidth()!==e||this.getHeight()!==t){var r=this._manager.gl;if(this.ready){(e>4096||t>4096)&&(e>=t?(t=Math.floor(4096*t/e),e=4096):(e=Math.floor(4096*e/t),t=4096)),this.ready=!1,r.bindFramebuffer(r.FRAMEBUFFER,this._framebuffer);for(var n=0,i=this._colorBuffers.length;n<i;n++)this._colorBuffers[n].resize(e,t);this._depthBuffer.resize(e,t);for(n=0,i=this._colorBuffers.length;n<i;n++)if(!this._colorBuffers[n].ready)return void this.destroy();if(this._depthBuffer.ready){for(var a=0,o=r.isWebGL2||r.drawBuffers?this._colorBuffers.length:1;a<o;a++)this._colorBuffers[a]._rbo?r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0_WEBGL+a,r.RENDERBUFFER,this._colorBuffers[a]._texture):r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0_WEBGL+a,r.TEXTURE_2D,this._colorBuffers[a]._texture,0);this._depthBuffer?this._depthBuffer._rbo?this._depthBuffer._format===r.DEPTH_COMPONENT?r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,this._depthBuffer._texture):r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,this._depthBuffer._texture):this._depthBuffer._format===r.DEPTH_COMPONENT?r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,this._depthBuffer._texture,0):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,this._depthBuffer._texture,0):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,null,0),this.ready=this._checkCompleteness()}else this.destroy()}}},t.prototype._checkCompleteness=function(){var e=this._manager.gl,t=!1,r=e.checkFramebufferStatus(e.FRAMEBUFFER);switch(r){case e.FRAMEBUFFER_COMPLETE:t=!0;break;case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:console.log("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");break;case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:console.log("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");break;case e.FRAMEBUFFER_INCOMPLETEDIMENSIONS:console.log("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");break;case e.FRAMEBUFFER_UNSUPPORTED:console.log("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED");break;default:console.log("Incomplete framebuffer: "+r)}return e.getError()!==e.NO_ERROR&&(t=!1),t},t.prototype.getWidth=function(){return this.ready?this._colorBuffers[0].width:-1},t.prototype.getHeight=function(){return this.ready?this._colorBuffers[0].height:-1},t.prototype.use=function(){var e=this._manager.gl;this.ready?e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer):console.error("framebuffer "+this.name+" is not ready.")},t.prototype.getColorBufferNumber=function(){return this.ready?this._colorBuffers.length:null},t.prototype.getColorBuffer=function(e){return void 0===e&&(e=0),this.ready&&e<this._colorBuffers.length?this._colorBuffers[e]:null},t.prototype.getDepthBuffer=function(){return this.ready?this._depthBuffer:null},t.prototype.discard=function(){var e=this._manager.gl;if(this.ready){this._depthBuffer&&this._depthBuffer.discard();for(var t=0,r=this._colorBuffers.length;t<r;t++)this._colorBuffers[t].discard();e.deleteFramebuffer(this._framebuffer),this._framebuffer=null,this.ready=!1}},t.prototype.restore=function(){var e=this._manager.gl;if(!this.ready){this._depthBuffer&&this._depthBuffer.restore();for(var t=0,r=this._colorBuffers.length;t<r;t++)this._colorBuffers[t].restore();for(t=0,r=this._colorBuffers.length;t<r;t++)if(!this._colorBuffers[t].ready)return;if(this._depthBuffer&&!this._depthBuffer.ready)return;this._framebuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer);for(var n=[],i=0,a=e.isWebGL2||e.drawBuffers?this._colorBuffers.length:1;i<a;i++)this._colorBuffers[i]._rbo?e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0_WEBGL+i,e.RENDERBUFFER,this._colorBuffers[i]._texture,0):e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0_WEBGL+i,e.TEXTURE_2D,this._colorBuffers[i]._texture,0),n.push(e.COLOR_ATTACHMENT0_WEBGL+i);(e.isWebGL2||e.drawBuffers)&&e.drawBuffers(n),this._depthBuffer?this._depthBuffer._rbo?this._depthBuffer._format===e.DEPTH_COMPONENT?e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this._depthBuffer._texture):e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this._depthBuffer._texture):this._depthBuffer._format===e.DEPTH_COMPONENT?e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,this._depthBuffer._texture,0):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,this._depthBuffer._texture,0):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,null,0),this.ready=this._checkCompleteness()}},t.prototype.copy=function(e,t){if(this.name!==e.name){var r=this._manager.gl;if(r.isWebGL2){var n=this._colorBuffers[0].width,i=this._colorBuffers[0].height,a=r.getParameter(r.DRAW_FRAMEBUFFER_BINDING);r.bindFramebuffer(r.READ_FRAMEBUFFER,e._framebuffer),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,this._framebuffer),r.blitFramebuffer(0,0,n,i,0,0,n,i,t,r.NEAREST),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,a)}else console.warn("Framebuffer.copy() only gets supported in WebGL 2.0 context.")}},t}(a.default);t.default=s},"./02resource/Mesh.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./02resource/m3d_geometric_shape.js"),a=r("./02resource/Resource.ts"),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n._vao=null,n._vbos=[],n._ibo=null,n._primitive=4,n._type=r.gl.UNSIGNED_INT,n._vboBase=0,n._iboBase=0,n._shared=!1,n.attributes=null,n.length=0,n.bytes=0,n.indexSize=2,n}return o(t,e),t.prototype.destroy=function(t){if(void 0===t&&(t=!1),t||(this._ref--,!(this._ref>0))){if(this.ready){var r,n=this._manager.gl;this._shared||(this._vbos.forEach(function(e){n.deleteBuffer(e)}),this._vbos=null,delete this._vbos,n.deleteBuffer(this._ibo),this._ibo=!1,delete this._ibo),this._vao&&(n.deleteVertexArray(this._vao),this._vao=!1,delete this._vao),(r=n.getError())!==n.NO_ERROR&&console.log("GL error in mesh.destroy(): "+r)}this._manager&&this._manager.deleteMesh(this.name),e.prototype.destroy.call(this)}},t.prototype.createShared=function(e,t,r,n,i,a,o){var s=this._manager.gl;this.ready||(this._primitive=e,this.attributes=t,this.bytes=r.byteLength+n.byteLength,this._type=i||s.UNSIGNED_SHORT,this._type===s.UNSIGNED_BYTE?(this.length=n.byteLength,this.indexSize=1):this._type===s.UNSIGNED_INT?(this.length=n.byteLength/4,this.indexSize=4):(this.length=n.byteLength/2,this.indexSize=2),this._vbos[0]=a.buffer,this._ibo=o.buffer,(s.isWebGL2||s.vaoExtension)&&(this._vao=s.createVertexArray(),s.bindVertexArray(this._vao),this.attributes.bind(this._vbos[0],s),s.bindVertexArray(null)),this._shared=!0,this._iboBase=n.byteOffset,this._vboBase=r.byteOffset,this.ready=a.ready&&o.ready)},t.prototype.create=function(e,t,r,n,i){if(!this.ready){var a=this._manager.gl;this._vbos[0]=a.createBuffer(),this._ibo=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this._vbos[0]),a.bufferData(a.ARRAY_BUFFER,r,a.STATIC_DRAW),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this._ibo),a.bufferData(a.ELEMENT_ARRAY_BUFFER,n,a.STATIC_DRAW),this._primitive=e,this.attributes=t,(a.isWebGL2||a.vaoExtension)&&(this._vao=a.createVertexArray(),a.bindVertexArray(this._vao),this.attributes.bind(this._vbos[0],a),a.bindVertexArray(null)),this.bytes=r.byteLength+n.byteLength,this._type=i||a.UNSIGNED_SHORT,this._type===a.UNSIGNED_BYTE?(this.length=n.byteLength,this.indexSize=1):this._type===a.UNSIGNED_INT?(this.length=n.byteLength/4,this.indexSize=4):(this.length=n.byteLength/2,this.indexSize=2),a.getError()===a.NO_ERROR?this.ready=!0:(a.deleteBuffer(this._vbos[0]),a.deleteBuffer(this._ibo),this._vao&&a.deleteVertexArray(this._vao))}},t.prototype.createFromBufferObject=function(e,t,r,n,i,a,o){if(!this.ready){var s=this._manager.gl;this._vbos=e,this._ibo=t,this._iboBase=o,this._primitive=n,this.attributes=r,(s.isWebGL2||s.vaoExtension)&&(this._vao=s.createVertexArray(),s.bindVertexArray(this._vao),this.attributes.bindBuffers(this._vbos,s),s.bindVertexArray(null)),this._type=i,this.length=a,s.getError()===s.NO_ERROR?this.ready=!0:(this._vbos.forEach(function(e){s.deleteBuffer(e)}),s.deleteBuffer(this._ibo),this._vao&&s.deleteVertexArray(this._vao))}},t.prototype.createWiredCube=function(e){if(void 0===e&&(e=1),!this.ready){var t=new i.default;t.createWiredCube(e),this.create(t.primitive,t.attributes,t.vertices,t.indices,t.indexType)}},t.prototype.createArrow=function(e,t){if(!this.ready){var r=new i.default;r.createArrow(e,t),this.create(r.primitive,r.attributes,r.vertices,r.indices,r.indexType)}},t.prototype.createSolidCube=function(e){if(void 0===e&&(e=1),!this.ready){var t=new i.default;t.createSolidCube(e),this.create(t.primitive,t.attributes,t.vertices,t.indices,t.indexType)}},t.prototype.createWiredCubeField=function(e,t){if(!this.ready){var r=new i.default;r.createWiredCubeField(e,t),this.create(r.primitive,r.attributes,r.vertices,r.indices,r.indexType)}},t.prototype.createSolidCubeField=function(e,t){if(!this.ready){var r=new i.default;r.createSolidCubeField(e,t),this.create(r.primitive,r.attributes,r.vertices,r.indices,r.indexType)}},t.prototype.createGrid=function(e,t){if(!this.ready){var r=new i.default;r.createGrid(e,t),this.create(r.primitive,r.attributes,r.vertices,r.indices,r.indexType)}},t.prototype.createTextGrid=function(e){if(!this.ready){var t=new i.default;t.createTextGrid(e),this.create(t.primitive,t.attributes,t.vertices,t.indices,t.indexType)}},t.prototype.createQuad=function(e,t,r,n){if(void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===r&&(r=!1),void 0===n&&(n=!1),!this.ready){var a=new i.default;a.createQuad(e,t,r,n),this.create(a.primitive,a.attributes,a.vertices,a.indices,a.indexType)}},t.prototype.createPoint=function(){if(!this.ready){var e=new i.default;e.createPoint(),this.create(e.primitive,e.attributes,e.vertices,e.indices,e.indexType)}},t.prototype.createSphere=function(e,t){if(!this.ready){var r=new i.default;r.createSphere(e,t),this.create(r.primitive,r.attributes,r.vertices,r.indices,r.indexType)}},t.prototype.createLine=function(){if(!this.ready){var e=new i.default;e.createLine(),this.create(e.primitive,e.attributes,e.vertices,e.indices,e.indexType)}},t.prototype.createLineStrip=function(){if(!this.ready){var e=new i.default;e.createLineStrip(),this.create(e.primitive,e.attributes,e.vertices,e.indices,e.indexType)}},t.prototype.createArc=function(e,t,r,n){if(!this.ready){var a=new i.default;a.createArc(e,t,r,n),this.create(a.primitive,a.attributes,a.vertices,a.indices,a.indexType)}},t.prototype.createTorus=function(e,t,r,n){if(!this.ready){var a=new i.default;a.createTorus(e,t,r,n),this.create(a.primitive,a.attributes,a.vertices,a.indices,a.indexType)}},t.prototype.render=function(){this._manager.gl.drawElements(this._primitive,this.length,this._type,this._iboBase)},t.prototype.renderSub=function(e,t){this._manager.gl.drawElements(this._primitive,t,this._type,e+this._iboBase)},t.prototype.renderInstanced=function(e){this._manager.gl.drawElementsInstanced(this._primitive,this.length,this._type,this._iboBase,e)},t.prototype.use=function(){if(this.ready){var e=this._manager.gl;this._vao?e.bindVertexArray(this._vao):this.attributes.bind(this._vbos,e),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._ibo)}else console.error("mesh "+this.name+" is not ready.")},t.prototype.update=function(e,t,r){var n=this._manager.gl;this.ready&&(n.deleteBuffer(this._vbos[0]),n.deleteBuffer(this._ibo),this._vao&&n.deleteVertexArray(this._vao),this._vbos=[n.createBuffer()],this._ibo=n.createBuffer(),this._vboBase=0,this._iboBase=0,n.bindBuffer(n.ARRAY_BUFFER,this._vbos[0]),n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this._ibo),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW),(n.isWebGL2||n.vaoExtension)&&(this._vao=n.createVertexArray(),n.bindVertexArray(this._vao),this.attributes.bind(this._vbos[0],n),n.bindVertexArray(null)),n.getError()!==n.NO_ERROR&&(this.ready=!1),this._type=r||n.UNSIGNED_SHORT,this._type===n.UNSIGNED_BYTE?this.length=t.byteLength:this._type===n.UNSIGNED_SHORT?this.length=t.byteLength/2:this._type===n.UNSIGNED_INT&&(this.length=t.byteLength/4),this.bytes=e.byteLength+t.byteLength)},t.prototype.isTriangle=function(){return this._primitive>=this._manager.gl.TRIANGLES},t.prototype.isLine=function(){var e=this._manager.gl;return this._primitive===e.LINES||this._primitive===e.LINE_LOOP||this._primitive==e.LINE_STRIP},t.prototype.hasColor=function(){return this.attributes.hasColor},t.prototype.slice=function(e){var t=this._manager.gl;if(!t.isWebGL2)return console.error("createSubMesh is only supported in WebGL2"),this;for(var r=0,n=0,i=0,a=e.length;i<a;i++)r+=e[i].verticesBytes,n+=e[i].indicesBytes;var o=this._manager.getMesh((parseFloat(this.name)+Math.random()).toString());o._vbos=t.createBuffer(),o._ibo=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,o._vbos),t.bufferData(t.ARRAY_BUFFER,new Uint8Array(r),t.STATIC_DRAW);var s=0;t.bindBuffer(t.COPY_READ_BUFFER,this._vbos);for(i=0,a=e.length;i<a;i++)t.copyBufferSubData(t.COPY_READ_BUFFER,t.ARRAY_BUFFER,this._vboBase+e[i].verticesOffset,s,e[i].verticesBytes),s+=e[i].verticesBytes;var l=null,u=null;switch(this.indexSize){case 2:l=new Uint16Array(this.length),u=new Uint16Array(n/2);break;case 1:l=new Uint8Array(this.length),u=new Uint8Array(n);break;case 4:l=new Uint32Array(this.length),u=new Uint32Array(n/4)}t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._ibo),t.getBufferSubData(t.ELEMENT_ARRAY_BUFFER,this._iboBase,l);var c=0,d=0;for(i=0,a=e.length;i<a;i++){for(var h=e[i].verticesOffset/this.attributes.values[0].stride,f=e[i].indicesBytes/this.indexSize,p=e[i].indicesOffset/this.indexSize,m=0;m<f;m++)u[m+c]=l[m+p]-h+d;c+=f,d+=e[i].verticesBytes/this.attributes.values[0].stride}return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o._ibo),t.bufferData(t.ELEMENT_ARRAY_BUFFER,u,t.STATIC_DRAW),o._primitive=this._primitive,o.attributes=this.attributes,(t.isWebGL2||t.vaoExtension)&&(o._vao=t.createVertexArray(),t.bindVertexArray(o._vao),o.attributes.bind(o._vbos[0],t),t.bindVertexArray(null)),o.bytes=n+r,o._type=this._type,o.indexSize=this.indexSize,o.length=n/o.indexSize,t.getError()===t.NO_ERROR?o.ready=!0:(t.deleteBuffer(o._vbos[0]),t.deleteBuffer(o._ibo),o._vao&&t.deleteVertexArray(o._vao)),o},t.prototype.ibSubData=function(e,t){var r=this._manager.gl;this.ready=!1,r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this._ibo),r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,this._iboBase+e,t),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null),r.getError()===r.NO_ERROR?this.ready=!0:(r.deleteBuffer(this._ibo),r.deleteBuffer(this._vbos[0]),this._vao&&(r.deleteVertexArray(this._vao),this._vao=!1,delete this._vao))},t.prototype.vbSubData=function(e,t){var r=this._manager.gl;this.ready=!1,r.bindBuffer(r.ARRAY_BUFFER,this._vbos[0]),r.bufferSubData(r.ARRAY_BUFFER,this._vboBase+e,t),r.bindBuffer(r.ARRAY_BUFFER,null),r.getError()===r.NO_ERROR?this.ready=!0:(r.deleteBuffer(this._ibo),r.deleteBuffer(this._vbos[0]),this._vao&&(r.deleteVertexArray(this._vao),this._vao=!1,delete this._vao))},t.prototype.getVBSubData=function(e,t){var r=this._manager.gl;r.bindBuffer(r.ARRAY_BUFFER,this._vbos[0]),r.getBufferSubData(r.ARRAY_BUFFER,this._vboBase+e,t),r.bindBuffer(r.ARRAY_BUFFER,null)},t.prototype.getIBSubData=function(e,t){var r=this._manager.gl;r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this._ibo),r.getBufferSubData(r.ELEMENT_ARRAY_BUFFER,this._iboBase+e,t),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null)},t}(a.default);t.default=s},"./02resource/MeshAttributes.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"MeshAttribute",function(){return i});var n=r("./01wrapper/glenum.ts"),i=function(){return function(e,t,r,n){this.name=e,this.index=-1,this.type=t,this.offset=0,this.stride=0,this.size=n,this.normalized=!!r}}(),a=function(){function e(){this.values=[],this.hasNormal=!1,this.hasColor=!1,this.hasUV=!1,this.id=0,this.primitive=n.gl.TRIANGLES,this.compressed=!1}return e.prototype._getSizeOfType=function(e){switch(e){case n.gl.UNSIGNED_BYTE:case n.gl.BYTE:return 1;case n.gl.UNSIGNED_SHORT:case n.gl.SHORT:return 2;case n.gl.FLOAT:case n.gl.INT:case n.gl.UNSIGNED_INT:return 4;default:throw new Error("unknown GL type")}},e.prototype.builtin=function(e,t,r,a){var o=0,s=null;if(e&&((s=new i("m_aPosition",e,!1,3)).index=0,s.offset=0,this.values.push(s),o=3*this._getSizeOfType(e)),t){var l=3,u=!1;l=3,u=!1,t!==n.gl.FLOAT&&(u=!0,l=4),(s=new i("m_aNormal",t,u,l)).index=1,s.offset=o,this.values.push(s),o+=l*this._getSizeOfType(t),this.hasNormal=!0}r&&((s=new i("m_aTexCoord",r,!1,2)).index=4,s.offset=o,this.values.push(s),o+=2*this._getSizeOfType(r),this.hasUV=!0),a&&((s=new i("m_aColor",a,!1,4)).index=5,s.offset=o,t!==n.gl.FLOAT&&(s.normalized=!0),this.values.push(s),o+=4*this._getSizeOfType(a),this.hasColor=!0);for(var c=0,d=this.values.length;c<d;++c)this.values[c].stride=o;this.id=(e?16:0)+(t?8:0)+(r?4:0)+(a?2:0)},e.prototype.compress=function(){if(this.hasNormal&&!this.compressed){this.compressed=!0,this.id+=32;var e=[];e.push(this.values[0]);var t=null;(t=new i("m_aNormal0",n.gl.BYTE,!0,1)).index=1,t.offset=0,e.push(t),(t=new i("m_aNormal1",n.gl.BYTE,!0,1)).index=2,t.offset=4,e.push(t),(t=new i("m_aNormal2",n.gl.BYTE,!0,1)).index=3,t.offset=8,e.push(t);for(var r=2,a=this.values.length;r<a;r++)this.values[r].offset-=4,e.push(this.values[r]);var o=this.values[0].stride-4;for(r=0,a=e.length;r<a;++r)e[r].stride=o;this.values=e}},e.prototype.clone=function(){var t=new e;t.id=this.id,t.hasNormal=this.hasNormal,t.hasColor=this.hasColor,t.hasUV=this.hasUV,t.compressed=this.compressed,t.primitive=this.primitive,t.values=new Array(this.values.length);for(var r=0,n=this.values.length;r<n;r++){var a=this.values[r];t.values[r]=new i(a.name,a.type,a.normalized,a.size),t.values[r].index=a.index,t.values[r].offset=a.offset,t.values[r].stride=a.stride}return t},e.prototype.add=function(e,t,r,n,a,o,s){if(!this.has(e)){var l=new i(e,r,n,a);l.index=t,l.stride=o,l.offset=s,this.values.push(l)}},e.prototype.has=function(e){for(var t=0,r=this.values.length;t<r;++t)if(this.values[t].name===e)return!0;return!1},e.prototype.bindBuffers=function(e,t){var r=this;e.forEach(function(e,n){t.bindBuffer(t.ARRAY_BUFFER,e),t.vertexAttribPointer(r.values[n].index,r.values[n].size,r.values[n].type,r.values[n].normalized,r.values[n].stride,r.values[n].offset),t.enableVertexAttribArray(r.values[n].index)})},e.prototype.bind=function(e,t){t.disableVertexAttribArray(1),t.disableVertexAttribArray(2),t.disableVertexAttribArray(3),t.disableVertexAttribArray(4),t.disableVertexAttribArray(5),t.disableVertexAttribArray(6),t.bindBuffer(t.ARRAY_BUFFER,e);for(var r=0,n=this.values.length;r<n;r++){var i=this.values[r].index;t.vertexAttribPointer(i,this.values[r].size,this.values[r].type,this.values[r].normalized,this.values[r].stride,this.values[r].offset),t.enableVertexAttribArray(i)}},e}();t.default=a},"./02resource/Resource.ts":function(e,t,r){"use strict";r.r(t);var n=function(){function e(e,t){this._manager=t,this._ref=0,this.name=e,this.ready=!1}return e.prototype.ref=function(){this._ref++},e.prototype.destroy=function(){this.ready=!1,this._manager=null,delete this._manager,this.name=null,delete this.name},e.prototype.getGL=function(){return this._manager.gl},e.prototype.getManager=function(){return this._manager},e}();t.default=n},"./02resource/ResourceManager.ts":function(e,t,r){"use strict";r.r(t);var n=r("./02resource/Texture.ts"),i=r("./02resource/Mesh.ts"),a=r("./02resource/FrameBuffer.ts"),o=r("./02resource/Shader.ts"),s=r("./02resource/Buffer.ts"),l=r("./02resource/BitmapFont.ts"),u=function(){function e(e){this._shaders=new Map,this._meshes=new Map,this._textures=new Map,this._framebuffers=new Map,this._buffers=new Map,this.gl=e,this.gl||console.error("ResourceManager requires a valid gl context."),this._bitmapFont=new l.default(this),this._framebuffers.set("default",{ready:!0,manager:null,_name:"default",_framebuffer:null,_width:1,_height:1,destroy:function(){},use:function(){e.bindFramebuffer(e.FRAMEBUFFER,null)},resize:function(e,t){this._width=e,this._height=t},discard:function(){},restore:function(){},getWidth:function(){return this._width},getHeight:function(){return this._height},ref:function(){},copy:function(t,r){if(this._name!==t._name&&e.isWebGL2){var n=t._colorBuffers[0].width,i=t._colorBuffers[0].height,a=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.READ_FRAMEBUFFER,t._framebuffer),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.blitFramebuffer(0,0,n,i,0,0,n,i,r,e.NEAREST),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,a)}}})}return e.prototype.destroy=function(){this._meshes.forEach(function(e,t){e.destroy(!0)}),this._framebuffers.forEach(function(e,t){e.destroy(!0)}),this._textures.forEach(function(e,t){e.destroy(!0)}),this._shaders.forEach(function(e,t){e.destroy(!0)}),this._buffers.forEach(function(e,t){e.destroy(!0)}),this._textures=null,this._meshes=null,this._framebuffers=null,this._buffers=null,this._shaders=null,delete this._textures,delete this._meshes,delete this._framebuffers,delete this._shaders,delete this._buffers},e.prototype.getBitmapFont=function(){return this._bitmapFont},e.prototype.getTexture=function(e){this._textures.has(e)||this._textures.set(e,new n.default(e,this));var t=this._textures.get(e);return t.ref(),t},e.prototype.renameTexture=function(e,t){this._textures.has(e)&&(this._textures.set(t,this._textures.get(e)),this._textures.delete(e))},e.prototype.getFramebuffer=function(e){this._framebuffers.has(e)||this._framebuffers.set(e,new a.default(e,this));var t=this._framebuffers.get(e);return t.ref(),t},e.prototype.getShader=function(e,t){(t=t||[]).sort(),t&&(e+=t.join("_")),this._shaders.has(e)||this._shaders.set(e,new o.default(e,this));var r=this._shaders.get(e);return r.ref(),r},e.prototype.getBuffer=function(e){this._buffers.has(e)||this._buffers.set(e,new s.default(e,this));var t=this._buffers.get(e);return t.ref(),t},e.prototype.getMesh=function(e){this._meshes.has(e)||this._meshes.set(e,new i.default(e,this));var t=this._meshes.get(e);return t.ref(),t},e.prototype.hasTexture=function(e){return this._textures.has(e)},e.prototype.hasFramebuffer=function(e){return this._framebuffers.hasOwnProperty(e)},e.prototype.hasShader=function(e,t){return(t=t||[]).sort(),t&&(e+=t.join("_")),this._shaders.has(e)},e.prototype.hasBuffer=function(e){return this._buffers.has(e)},e.prototype.hasMesh=function(e){return this._meshes.has(e)},e.prototype.deleteTexture=function(e){this._textures.delete(e)},e.prototype.deleteFramebuffer=function(e){this._framebuffers.delete(e)},e.prototype.deleteShader=function(e){this._shaders.delete(e)},e.prototype.deleteBuffer=function(e){this._buffers.delete(e)},e.prototype.deleteMesh=function(e){this._meshes.delete(e)},e.prototype.discard=function(){this._framebuffers.forEach(function(e){e.discard()})},e.prototype.restore=function(){this._framebuffers.forEach(function(e){e.restore()})},e.prototype.getMemStats=function(e){e.textureKBytes=0,e.textureCount=0,this._textures.forEach(function(t){t.ready&&(e.textureKBytes+=t.getSize()/1024,e.textureCount++)}),e.meshKBytes=0,e.meshCount=0,this._meshes.forEach(function(t){t.ready&&(e.meshKBytes+=t.bytes/1024,e.meshCount++)}),e.framebufferCount=0,this._framebuffers.forEach(function(t){t.ready&&e.framebufferCount++}),e.shaderCount=0,this._shaders.forEach(function(t){t.ready&&e.shaderCount++})},e}();t.default=u},"./02resource/Shader.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./00utility/m3d_utils.ts"),a=r("./02resource/Resource.ts"),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(){function e(e){this.loc=e,this.upload=null}return e.prototype.initialize=function(e,t,r){this.uniforms=new Map;var n=r.getUniformBlockIndex(t,e);r.uniformBlockBinding(t,n,this.loc);var i=r.getActiveUniformBlockParameter(t,n,r.UNIFORM_BLOCK_DATA_SIZE);this.blockSize=0;for(var a=r.getActiveUniformBlockParameter(t,n,r.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES),o=0,s=a.length;o<s;o++){var u=r.getActiveUniform(t,a[o]),c=u.name.replace(/[_\w]+./,"");switch(this.uniforms[c]={type:u.type,size:u.size},u.type){case r.INT:case r.FLOAT:this.blockSize+=4*u.size;break;case r.INT_VEC2:case r.FLOAT_VEC2:this.blockSize+=8*u.size;break;case r.INT_VEC3:case r.FLOAT_VEC3:this.blockSize+=12*u.size;break;case r.INT_VEC4:case r.FLOAT_VEC4:this.blockSize+=16*u.size;break;case r.FLOAT_MAT4:this.blockSize+=64*u.size;break;case r.FLOAT_MAT3:this.blockSize+=48*u.size}}this.blockSize!==i&&console.warn("uniform block "+e+" has packing problem!"),r.isWebGL2&&(this.blockBuffer=null,this.blockBuffer=r.createBuffer(),r.bindBuffer(r.UNIFORM_BUFFER,this.blockBuffer),l=new Float32Array(this.blockSize),r.bufferData(r.UNIFORM_BUFFER,l,r.DYNAMIC_DRAW),r.bindBuffer(r.UNIFORM_BUFFER,null))},e.prototype.destroy=function(){this.uniforms=null,delete this.uniforms},e.prototype.UniformUpload1fv=function(e,t){t.uniform1fv(this.loc,e)},e.prototype.UniformUpload1f=function(e,t){t.uniform1f(this.loc,e)},e.prototype.UniformUpload2f=function(e,t){t.uniform2fv(this.loc,e)},e.prototype.UniformUpload3f=function(e,t){t.uniform3fv(this.loc,e)},e.prototype.UniformUpload4f=function(e,t){t.uniform4fv(this.loc,e)},e.prototype.UniformUpload1b=function(e,t){t.uniform1i(this.loc,e?1:0)},e.prototype.UniformUpload1i=function(e,t){t.uniform1i(this.loc,e)},e.prototype.UniformUpload2i=function(e,t){t.uniform2i(this.loc,e[0],e[1])},e.prototype.UniformUpload3i=function(e,t){t.uniform3i(this.loc,e[0],e[1],e[2])},e.prototype.UniformUpload4i=function(e,t){t.uniform4i(this.loc,e[0],e[1],e[2],e[3])},e.prototype.UniformUploadMat4=function(e,t){t.uniformMatrix4fv(this.loc,!1,e)},e.prototype.UniformUploadMat3=function(e,t){t.uniformMatrix3fv(this.loc,!1,e)},e.prototype.UniformBlockUpload=function(e,t){t.bindBufferBase(t.UNIFORM_BUFFER,this.loc,this.blockBuffer),t.bindBuffer(t.UNIFORM_BUFFER,this.blockBuffer),t.bufferSubData(t.UNIFORM_BUFFER,0,e,0,e.byteLength/4),t.bindBuffer(t.UNIFORM_BUFFER,null)},e}(),l=null,u=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n._program=null,n.reservedUniforms={},n.userUniforms={},n.shaderSource=null,n.flags=[],n.attributes={},n}return o(t,e),t.prototype.destroy=function(t){if(void 0===t&&(t=!1),t||(this._ref--,!(this._ref>0))){if(this.ready){for(var r,n=this._manager.gl,i=0,a=this.reservedUniforms.length;i<a;i++)this.reservedUniforms[i].destroy();this.reservedUniforms=null,delete this.reservedUniforms;for(i=0,a=this.userUniforms.length;i<a;i++)this.userUniforms[i].destroy();this.userUniforms=null,delete this.userUniforms,this.shaderSource=null,delete this.shaderSource,this.attributes=null,delete this.attributes,n.deleteProgram(this._program),delete this._program,(r=n.getError())!==n.NO_ERROR&&console.log("GL error in shader.destroy(): "+r)}this._manager&&this._manager.deleteShader(this.name),e.prototype.destroy.call(this)}},t.prototype.createFromSource=function(e,t,r){this._manager.gl;if(!this.ready){this.flags=r?r.slice(0):[];var n=this._preprocess(e,r),i=this._preprocess(t,r);this._compile(n,i)}},t.prototype._preprocess=function(e,t){var r,n,a,o,s,l,u=[!0],c=!0,d=e.split("\n"),h=[];for(r=0,a=d.length;r<a;r++){var f=d[r];if(""!==f)if("#"===f[0]&&"v"!==f[1]){if("i"===f[1]&&"f"===f[2]){c=!0;var p=f.substr(4).replace(/^\s+|\s+$/g,"");if(s=null,-1!==p.indexOf("||"))for(c=!1,n=0,o=(s=p.split("||")).length;n<o;n++){var m=s[n].replace(/^\s+|\s+$/g,"");l=!1,"!"===m[0]&&(l=!0,m=m.substring(1)),-1!==i.default.indexOf(t,m)&&(c=!l)}else if(-1!==p.indexOf("&&")){for(c=!0,n=0,o=(s=p.split("&&")).length;n<o;n++)if("!"===(m=s[n].replace(/^\s+|\s+$/g,""))[0]){if(m=m.substring(1),-1!==i.default.indexOf(t,m)){c=!1;break}}else if(-1===i.default.indexOf(t,m)){c=!1;break}}else l=!1,"!"===p[0]&&(l=!0,p=p.substring(1)),c=-1!==i.default.indexOf(t,p)?!l:l;u.push(c)}else"e"===f[1]&&"l"===f[2]&&"s"===f[3]&&"e"===f[4]?u[u.length-1]=!u[u.length-1]:"e"===f[1]&&"n"===f[2]&&"d"===f[3]&&"i"===f[4]&&"f"===f[5]&&u.pop();for(c=!0,n=0,o=u.length;n<o&&(c=u[n]&&c);++n);}else c&&h.push(f)}return h.join("\n")},t.prototype.createFromShaderSource=function(e,t){var r=this._manager.gl;this.ready||(t=t||[],r.isWebGL2&&-1===t.indexOf("WEBGL2")&&t.push("WEBGL2"),this.shaderSource=e,this.shaderSource.ready?this.createFromSource(e.vsSource,e.fsSource,t):console.warn(name+"'s source is not ready"))},t.prototype._compile=function(e,t){var r=this._manager.gl;if(!this.ready){this.ready=!1,this._program&&r.deleteProgram(this._program),this._program=r.createProgram();var n=r.createShader(r.VERTEX_SHADER),i=r.createShader(r.FRAGMENT_SHADER);if(r.shaderSource(n,e),r.compileShader(n),r.shaderSource(i,t),r.compileShader(i),!r.getShaderParameter(n,r.COMPILE_STATUS)){var a="failed to compile vertex shader "+this.name+"\n\n"+r.getShaderInfoLog(n);return console.log(e),console.error(a),r.deleteProgram(this._program),void r.deleteShader(n)}if(!r.getShaderParameter(i,r.COMPILE_STATUS)){a="failed to compile fragment shader "+this.name+"\n\n"+r.getShaderInfoLog(i);return console.log(t),console.error(a),r.deleteProgram(this._program),void r.deleteShader(i)}if(r.attachShader(this._program,n),r.attachShader(this._program,i),r.bindAttribLocation(this._program,0,"m_aPosition"),r.bindAttribLocation(this._program,1,"m_aNormal0"),r.bindAttribLocation(this._program,2,"m_aNormal1"),r.bindAttribLocation(this._program,3,"m_aNormal2"),r.bindAttribLocation(this._program,4,"m_aTexCoord"),r.bindAttribLocation(this._program,5,"m_aColor"),r.bindAttribLocation(this._program,6,"m_aMaterial"),r.bindAttribLocation(this._program,7,"m_aTangent"),r.bindAttribLocation(this._program,8,"m_aJoint0"),r.bindAttribLocation(this._program,9,"m_aWeight0"),r.bindAttribLocation(this._program,10,"m_aModelMatrix"),r.linkProgram(this._program),r.deleteShader(n),r.deleteShader(i),r.getError()===r.NO_ERROR){if(!r.getProgramParameter(this._program,r.LINK_STATUS)){var o=r.getProgramInfoLog(this._program);return console.log("%s linking error:\n"+o,this.name),void r.deleteProgram(this._program)}this.ready=!0;var l,u=r.getProgramParameter(this._program,r.ACTIVE_ATTRIBUTES);for(l=0;l<u;++l){var c=r.getActiveAttrib(this._program,l);this.attributes[c.name]=l}var d=r.getProgramParameter(this._program,r.ACTIVE_UNIFORMS);for(l=0;l<d;++l){var h=r.getActiveUniform(this._program,l),f=r.getUniformLocation(this._program,h.name),p=new s(f);if("m"===h.name[0]&&"_"===h.name[1]){if(null===f&&r.isWebGL2)continue;this.reservedUniforms[h.name]=p}else this.userUniforms[h.name]=p;switch(h.type){case r.FLOAT:h.size>1?p.upload=p.UniformUpload1fv:p.upload=p.UniformUpload1f;break;case r.FLOAT_VEC2:p.upload=p.UniformUpload2f;break;case r.FLOAT_VEC3:p.upload=p.UniformUpload3f;break;case r.FLOAT_VEC4:p.upload=p.UniformUpload4f;break;case r.BOOL:p.upload=p.UniformUpload1b;break;case r.INT:case r.SAMPLER_2D:case r.SAMPLER_CUBE:p.upload=p.UniformUpload1i;break;case r.INT_VEC2:case r.BOOL_VEC2:p.upload=p.UniformUpload2i;break;case r.INT_VEC3:case r.BOOL_VEC3:p.upload=p.UniformUpload3i;break;case r.INT_VEC4:case r.BOOL_VEC4:p.upload=p.UniformUpload4i;break;case r.FLOAT_MAT4:p.upload=p.UniformUploadMat4;break;case r.FLOAT_MAT3:p.upload=p.UniformUploadMat3;break;default:console.error("unsupported shader uniform type for "+h.name)}}if(r.isWebGL2)for(var m=r.getProgramParameter(this._program,r.ACTIVE_UNIFORM_BLOCKS),v=0;v<m;v++){var _=r.getActiveUniformBlockName(this._program,v),g=void 0;"m"===_[0]&&"_"===_[1]?((g=new s(v)).initialize(_,this._program,r),g.upload=g.UniformBlockUpload,_=_.replace(/m_b/,"m_u"),this.reservedUniforms[_]=g):((g=new s(v)).initialize(_,this._program,r),g.upload=g.UniformBlockUpload,this.userUniforms[_]=g)}}else r.deleteProgram(this._program)}},t.prototype.use=function(){this.ready?this._manager.gl.useProgram(this._program):console.error("shader "+this.name+" is not ready.")},t}(a.default);t.default=u},"./02resource/Texture.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./02resource/Resource.ts"),a=r("./02resource/DDS.ts"),o=r("./03scene/model/m3d_load_misc.js"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(e){function t(t,r){var n=e.call(this,t,r)||this,i=r.gl;return n._texture=null,n._internalFormat=i.RGBA,n._format=i.RGBA,n._type=i.UNSIGNED_BYTE,n._wrap=i.CLAMP_TO_EDGE,n._filter=i.LINEAR,n._mipmap=!1,n._rbo=!1,n._target=i.TEXTURE_2D,n._samples=1,n._is3d=!1,n.width=1,n.height=1,n.depth=1,n.bytes=0,n.url=null,n}return s(t,e),t.prototype.useTexture3d=function(){this._is3d=!0},t.prototype.destroy=function(t){if(void 0===t&&(t=!1),t||(this._ref--,!(this._ref>0))){if(this.ready){var r,n=this._manager.gl;this._rbo?n.deleteRenderbuffer(this._texture):n.deleteTexture(this._texture),this._texture=null,delete this._texture,(r=n.getError())!==n.NO_ERROR&&console.log("GL error in texture.destroy(): "+r)}this._manager&&this._manager.deleteTexture(this.name),e.prototype.destroy.call(this)}},t.prototype._create=function(e){var t=this._manager.gl;this._texture=t.createTexture();var r=t.NEAREST;this._filter!==t.LINEAR_MIPMAP_NEAREST&&this._filter!==t.NEAREST_MIPMAP_LINEAR&&this._filter!==t.LINEAR_MIPMAP_LINEAR&&this._filter!==t.LINEAR||(r=t.LINEAR),t.activeTexture(t.TEXTURE0+7),t.bindTexture(t.TEXTURE_2D,this._texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this._filter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this._wrap),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this._wrap),e?t.texImage2D(t.TEXTURE_2D,0,this._format,this._format,this._type,e):t.texImage2D(t.TEXTURE_2D,0,this._internalFormat,this.width,this.height,0,this._format,this._type,null),this._mipmap&&t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},t.prototype.updateImage=function(e,t,r,n,i){this.ready=!1,this.createFromImage(e,t,r,n,i)},t.prototype.createFromImage=function(e,t,r,n,i){var a=this._manager.gl;this.ready||(this._format=t,this._type=r,this.width=e.width,this.height=e.height,this._filter=n,this._wrap=i,this._filter!==a.LINEAR_MIPMAP_NEAREST&&this._filter!==a.NEAREST_MIPMAP_LINEAR&&this._filter!==a.LINEAR_MIPMAP_LINEAR&&this._filter!==a.NEAREST_MIPMAP_NEAREST||(this._mipmap=!0),this._create(e),a.getError()===a.NO_ERROR?this.ready=!0:a.deleteTexture(this._texture))},t.prototype.createFromCanvas=function(e,t,r,n,i){var a=this._manager.gl;if(!this.ready){this._format=t,this._type=r,this.width=e.width,this.height=e.height,this._filter=n,this._wrap=i,this._filter!==a.LINEAR_MIPMAP_NEAREST&&this._filter!==a.NEAREST_MIPMAP_LINEAR&&this._filter!==a.LINEAR_MIPMAP_LINEAR&&this._filter!==a.NEAREST_MIPMAP_NEAREST||(this._mipmap=!0),this._texture=a.createTexture();var o=a.NEAREST;this._filter!==a.LINEAR_MIPMAP_NEAREST&&this._filter!==a.NEAREST_MIPMAP_LINEAR&&this._filter!==a.LINEAR_MIPMAP_LINEAR&&this._filter!==a.LINEAR||(o=a.LINEAR),a.activeTexture(a.TEXTURE0+7),a.bindTexture(a.TEXTURE_2D,this._texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,this._filter),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,o),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,this._wrap),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,this._wrap),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),a.texImage2D(a.TEXTURE_2D,0,this._format,this._format,this._type,e),this._mipmap&&a.generateMipmap(a.TEXTURE_2D),a.bindTexture(a.TEXTURE_2D,null),a.getError()===a.NO_ERROR?this.ready=!0:a.deleteTexture(this._texture)}},t.prototype.createFromImages=function(e,t,r,n,i){var a=this._manager.gl;if(!this.ready){this._target=a.TEXTURE_CUBE_MAP,this._format=t,this._type=r,this.width=e[0].width,this.height=e[0].height,this._filter=n,this._wrap=i,this._filter!==a.LINEAR_MIPMAP_NEAREST&&this._filter!==a.NEAREST_MIPMAP_LINEAR&&this._filter!==a.LINEAR_MIPMAP_LINEAR&&this._filter!==a.NEAREST_MIPMAP_NEAREST||(this._mipmap=!0),this._texture=a.createTexture();var o=a.NEAREST;this._filter!==a.LINEAR_MIPMAP_NEAREST&&this._filter!==a.NEAREST_MIPMAP_LINEAR&&this._filter!==a.LINEAR_MIPMAP_LINEAR&&this._filter!==a.LINEAR||(o=a.LINEAR),a.activeTexture(a.TEXTURE0+7),a.bindTexture(a.TEXTURE_CUBE_MAP,this._texture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,this._filter),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,o),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,this._wrap),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,this._wrap),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_X,0,this._format,this._format,this._type,e[0]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,this._format,this._format,this._type,e[1]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,this._format,this._format,this._type,e[2]),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X,0,this._format,this._format,this._type,e[3]),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Y,0,this._format,this._format,this._type,e[4]),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Z,0,this._format,this._format,this._type,e[5]),this._mipmap&&a.generateMipmap(a.TEXTURE_CUBE_MAP),a.bindTexture(a.TEXTURE_CUBE_MAP,null),a.getError()===a.NO_ERROR?this.ready=!0:a.deleteTexture(this._texture)}},t.prototype.createFromDDS=function(e,t){var r=this;o.default.OpenFile1(e,"arraybuffer",Promise).downloadFile().then(function(e){var n=a.DDSTools.GetDDSInfo(e.data);r.width=n.width,r.height=n.height;var i=n.isRGB||n.isLuminance||n.mipmapCount>1,o=r._manager.gl;r._texture=o.createTexture(),n.isCube?(r._target=o.TEXTURE_CUBE_MAP,r._filter=o.LINEAR_MIPMAP_LINEAR):(r._target=o.TEXTURE_2D,r._filter=o.LINEAR);var s=o.LINEAR;r._wrap=o.CLAMP_TO_EDGE,o.activeTexture(o.TEXTURE0+7),o.bindTexture(r._target,r._texture),o.texParameteri(r._target,o.TEXTURE_MIN_FILTER,r._filter),o.texParameteri(r._target,o.TEXTURE_MAG_FILTER,s),o.texParameteri(r._target,o.TEXTURE_WRAP_S,r._wrap),o.texParameteri(r._target,o.TEXTURE_WRAP_T,r._wrap),a.DDSTools.UploadDDSLevels(o,r,e.data,n,i,6,-1),o.bindTexture(o.TEXTURE_CUBE_MAP,null),n.isFourCC||1!==n.mipmapCount||r.generateCubeMapMipMap(),o.getError()===o.NO_ERROR?r.ready=!0:o.deleteTexture(r._texture),t&&t()})},t.prototype.createFromFiles=function(e,t,r,n,i){var a=this;if(6===e.length){var o=[],s=0;e.forEach(function(l,u){var c=new Image;c.crossOrigin="anonymous",o.push(c),c.onload=function(){++s===e.length&&(a.createFromImages(o,t,a._manager.gl.UNSIGNED_BYTE,r,n),i&&i(a))},c.src=l})}else console.warn("file length should be 6.")},t.prototype.createFromFile=function(e,t,r,n,i){var a=this;if(!this.ready){var o=new Image;o.crossOrigin="anonymous",o.onload=function(){a.createFromImage(o,t,a._manager.gl.UNSIGNED_BYTE,r,n),null!==i&&i(a)},o.src=e}},t.prototype.create=function(e,t,r,n,i,a,o){var s=this._manager.gl;if(!this.ready){r=r||s.RGBA;var l=s.UNSIGNED_BYTE;this.width=e,this.height=t,this.depth,this._filter=n||s.LINEAR,this._wrap=i||s.CLAMP_TO_EDGE;var u=r;if(s.isWebGL2&&(this._samples=a||1),r===s.RGB32F||r===s.RGBA32F||r===s.R32F){if(!s.floatTextureExtension&&!s.isWebGL2)return void console.error("Unsupported texture format for texture "+this.name);l=s.FLOAT,r=r===s.RGB32F?s.RGB:r===s.RGBA32F?s.RGBA:s.RED}else if(r===s.RGB16F||r===s.RGBA16F||r===s.R16F)l=s.HALF_FLOAT,r=r===s.RGB16F?s.RGB:r===s.RGBA16F?s.RGBA:s.RED;else if(r===s.RGBA8||r===s.RGBA)l=s.UNSIGNED_BYTE,r=s.RGBA;else if(r===s.RGB8||r===s.RGB)l=s.UNSIGNED_BYTE,r=s.RGB;else if(r===s.R8)l=s.UNSIGNED_BYTE,r=s.isWebGL2?s.RED:s.ALPHA;else if(r===s.DEPTH_COMPONENT16||r===s.DEPTH_COMPONENT24||r===s.DEPTH_COMPONENT32||r===s.DEPTH_COMPONENT){if(!s.depthTextureExtension&&!s.isWebGL2)return void console.error("Unsupported texture format for texture "+this.name);l=s.UNSIGNED_INT,r===s.DEPTH_COMPONENT16?l=s.UNSIGNED_SHORT:r!==s.DEPTH_COMPONENT24&&r!==s.DEPTH_COMPONENT32||(l=s.UNSIGNED_INT),r=s.DEPTH_COMPONENT}else if(r===s.DEPTH24_STENCIL8||r===s.DEPTH_STENCIL)l=s.isWebGL2?s.UNSIGNED_INT_24_8:s.depthTextureExtension.UNSIGNED_INT_24_8_WEBGL,r=s.DEPTH_STENCIL;else{if(r!==s.ALPHA&&r!==s.LUMINANCE_ALPHA&&r!==s.LUMINANCE)return void console.error("Unsupported texture format for texture "+this.name);l=s.UNSIGNED_BYTE}this._format=r,this._internalFormat=s.isWebGL2?u:r,this._type=l;var c=s.NEAREST;if(this._filter!==s.LINEAR_MIPMAP_NEAREST&&this._filter!==s.NEAREST_MIPMAP_LINEAR&&this._filter!==s.LINEAR_MIPMAP_LINEAR&&this._filter!==s.LINEAR||(c=s.LINEAR),s.isWebGL2)if(a>1){if(this._texture=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,this._texture),s.renderbufferStorageMultisample(s.RENDERBUFFER,this._samples,this._internalFormat,this.width,this.height),s.getError()!==s.NO_ERROR)return void s.deleteRenderbuffer(this._texture);this._rbo=!0}else this._texture=s.createTexture(),s.activeTexture(s.TEXTURE0+7),this._is3d?(s.bindTexture(s.TEXTURE_3D,this._texture),s.texParameteri(s.TEXTURE_3D,s.TEXTURE_MIN_FILTER,this._filter),s.texParameteri(s.TEXTURE_3D,s.TEXTURE_MAG_FILTER,c),s.texParameteri(s.TEXTURE_3D,s.TEXTURE_WRAP_S,this._wrap),s.texParameteri(s.TEXTURE_3D,s.TEXTURE_WRAP_T,this._wrap),s.texStorage2D(s.TEXTURE_3D,1,this._internalFormat,this.width,this.height,this.depth)):(s.bindTexture(s.TEXTURE_2D,this._texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,this._filter),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,c),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,this._wrap),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,this._wrap),s.texStorage2D(s.TEXTURE_2D,1,this._internalFormat,this.width,this.height));else if(this._format!==s.DEPTH24_STENCIL8||s.depthTextureExtension)this._texture=s.createTexture(),s.activeTexture(s.TEXTURE0+7),s.bindTexture(s.TEXTURE_2D,this._texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,this._filter),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,c),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,this._wrap),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,this._wrap),s.texImage2D(s.TEXTURE_2D,0,this._internalFormat,this.width,this.height,0,this._internalFormat,this._type,null);else{if(this._texture=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,this._texture),s.renderbufferStorage(s.RENDERBUFFER,this._internalFormat,e,t),s.getError()!==s.NO_ERROR)return void s.deleteRenderbuffer(this._texture);this._rbo=!0}s.getError()===s.NO_ERROR?this.ready=!0:s.deleteTexture(this._texture)}},t.prototype.update=function(e){var t=this._manager.gl;t.activeTexture(t.TEXTURE0+7),t.bindTexture(t.TEXTURE_2D,this._texture),this._format===t.LUMINANCE&&t.pixelStorei(t.UNPACK_ALIGNMENT,1),t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,this._format,this._type,e),this._format===t.LUMINANCE&&t.pixelStorei(t.UNPACK_ALIGNMENT,4),t.getError()===t.NO_ERROR?this.ready=!0:t.deleteTexture(this._texture)},t.prototype.copy=function(){var e=this._manager.gl;if(!this._rbo){this.ready=!1;var t=this.width,r=this.height;e.activeTexture(e.TEXTURE0+7),e.bindTexture(e.TEXTURE_2D,this._texture),e.copyTexSubImage2D(e.TEXTURE_2D,0,0,0,0,0,t,r),e.getError()===e.NO_ERROR&&(this.ready=!0),e.bindTexture(e.TEXTURE_2D,null)}},t.prototype.resize=function(e,t){var r=this._manager.gl;if(this.ready&&(this.width!==e||this.height!==t)){if(e>4096&&(e=4096),t>4096&&(t=4096),this.width=e,this.height=t,-1!==this.name.search(/-[0-9]+x[0-9]+-/)){var n=this.name.split("-"),i=n[0]+"-"+this.width+"x"+this.height+"-"+n[2];this._manager.renameTexture(this.name,i),this.name=i}this.ready=!1,this._rbo?(r.bindRenderbuffer(r.RENDERBUFFER,this._texture),this._samples<=1?r.renderbufferStorage(r.RENDERBUFFER,this._internalFormat,e,t):r.renderbufferStorageMultisample(r.RENDERBUFFER,this._samples,this._internalFormat,this.width,this.height),r.getError()===r.NO_ERROR?this.ready=!0:r.deleteRenderbuffer(this._texture),r.bindRenderbuffer(r.RENDERBUFFER,null)):(r.deleteTexture(this._texture),this._create(null),r.getError()===r.NO_ERROR?this.ready=!0:r.deleteTexture(this._texture))}},t.prototype.generateMipmap=function(){var e=this._manager.gl;!this.ready||this._rbo||this._mipmap||(this._mipmap=!0,e.activeTexture(e.TEXTURE0+7),e.bindTexture(e.TEXTURE_2D,this._texture),e.generateMipmap(e.TEXTURE_2D),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.bindTexture(e.TEXTURE_2D,null))},t.prototype.generateCubeMapMipMap=function(){var e=this._manager.gl;!this.ready||this._rbo||this._mipmap||(this._mipmap=!0,e.activeTexture(e.TEXTURE0+7),e.bindTexture(e.TEXTURE_CUBE_MAP,this._texture),e.generateMipmap(e.TEXTURE_CUBE_MAP),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.bindTexture(e.TEXTURE_CUBE_MAP,null))},t.prototype.use=function(e){var t=this._manager.gl;this.ready&&!this._rbo?(t.activeTexture(t.TEXTURE0+e),t.bindTexture(this._target,this._texture)):console.warn("texture "+this.name+" is either not ready or not bindable.")},t.prototype.isFloating=function(){var e=this._manager.gl;return this._type===e.FLOAT||this._type===e.isWebGL2?e.UNSIGNED_INT_24_8:e.depthTextureExtension.UNSIGNED_INT_24_8_WEBGL},t.prototype.isMultisamples=function(){return this._samples>1},t.prototype.hasAlpha=function(){var e=this._manager.gl;return this._format===e.RGBA||this._format===e.RGBA32F||this._format===e.RGBA16F||this._format===e.RGBA8},t.prototype.getSize=function(){var e=this._manager.gl;if(!this.ready)return 0;var t=this.width*this.height;switch(this._format){case e.RG:t*=2;break;case e.RGB:t*=3;break;case e.RGBA:t*=4}switch(this._type){case e.FLOAT:case e.isWebGL2?e.UNSIGNED_INT_24_8:e.depthTextureExtension.UNSIGNED_INT_24_8_WEBGL:t*=4;break;case e.DEPTH_COMPONENT16:t*=2}return this.bytes=t,this.bytes},t.prototype.discard=function(){var e=this._manager.gl;this.ready&&(this._rbo?e.deleteRenderbuffer(this._texture):e.deleteTexture(this._texture),this._texture=null,this.ready=!1)},t.prototype.getFilter=function(){return this._filter},t.prototype.getWrap=function(){return this._wrap},t.prototype.restore=function(){var e=this._manager.gl;this.ready||(this._rbo?this.create(this.width,this.height,this._internalFormat,this._filter,this._wrap,this._samples):this._create(null),e.getError()===e.NO_ERROR?this.ready=!0:e.deleteTexture(this._texture))},t}(i.default);t.default=l},"./02resource/m3d_geometric_shape.js":function(e,t,r){"use strict";r.r(t);var n=r("./01wrapper/glenum.ts"),i=r("./02resource/MeshAttributes.ts"),a=r("./glMatrix.js");t.default=function(){function e(){this.vertices=null,this.indices=null,this.attributes=null,this.indexType=null,this.primitive=null}return e.prototype.transform=function(e){if(this.attributes)for(var t=this.attributes.values[0].stride/4,r=this.attributes.hasNormal,n=[0,0,0,0],i=[0,0,0],o=0,s=this.vertices.length;o<s;o+=t)i[0]=this.vertices[o],i[1]=this.vertices[o+1],i[2]=this.vertices[o+2],a.vec3.transformMat4(n,i,e),this.vertices[o]=n[0],this.vertices[o+1]=n[1],this.vertices[o+2]=n[2],r&&(i[0]=this.vertices[o+3],i[1]=this.vertices[o+4],i[2]=this.vertices[o+5],i[3]=0,a.vec4.transformMat4(n,i,e),a.vec3.normalize(n,n),this.vertices[o+3]=n[0],this.vertices[o+4]=n[1],this.vertices[o+5]=n[2])},e.prototype.rotate=function(e,t,r){var n=a.mat4.create(),i=a.mat4.create();a.mat4.rotateZ(n,i,r),a.mat4.rotateY(i,n,t),a.mat4.rotateX(n,i,e),this.transform(n)},e.prototype.translate=function(e,t,r){var n=a.mat4.create();a.mat4.fromTranslation(n,[e,t,r]),this.transform(n)},e.prototype.scale=function(e,t,r){var n=a.mat4.create();a.mat4.fromScaling(n,[e,t,r]),this.transform(n)},e.prototype.merge=function(e,t){if(e.attributes.values[0].stride===t.attributes.values[0].stride){var r,i,a=new Float32Array(e.vertices.length+t.vertices.length);for(r=0;r<e.vertices.length;r++)a[r]=e.vertices[r];for(r=0,i=e.vertices.length;r<t.vertices.length;r++,i++)a[i]=t.vertices[r];var o=new Uint16Array(e.indices.length+t.indices.length);for(r=0;r<e.indices.length;r++)o[r]=e.indices[r];var s=e.vertices.length/(e.attributes.values[0].stride/4);for(r=0,i=e.indices.length;r<t.indices.length;r++,i++)o[i]=t.indices[r]+s;this.vertices=a,this.indices=o,this.attributes=e.attributes,this.indexType=n.gl.UNSIGNED_SHORT}},e.prototype.createWiredCube=function(e=1){var t=new Float32Array(24),r=new Uint8Array(24);t[0]=-e,t[1]=-e,t[2]=-e,t[3]=e,t[4]=-e,t[5]=-e,t[6]=e,t[7]=e,t[8]=-e,t[9]=-e,t[10]=e,t[11]=-e,t[12]=-e,t[13]=-e,t[14]=e,t[15]=e,t[16]=-e,t[17]=e,t[18]=e,t[19]=e,t[20]=e,t[21]=-e,t[22]=e,t[23]=e,r[0]=0,r[1]=1,r[2]=1,r[3]=2,r[4]=2,r[5]=3,r[6]=3,r[7]=0,r[8]=0,r[9]=4,r[10]=1,r[11]=5,r[12]=2,r[13]=6,r[14]=3,r[15]=7,r[16]=4,r[17]=5,r[18]=5,r[19]=6,r[20]=6,r[21]=7,r[22]=7,r[23]=4,this.vertices=t,this.indices=r,this.indexType=n.gl.UNSIGNED_BYTE,this.primitive=n.gl.LINES,this.attributes=new i.default,this.attributes.builtin(n.gl.FLOAT)},e.prototype.createWiredCubeField=function(e,t){var r=new ArrayBuffer(96*e*t),a=new Float32Array(r,0,24*e*t),o=e*t*8;if(o<256)var s=new Uint8Array(24*e*t);else if(o<65536)s=new Uint16Array(24*e*t);else s=new Uint32Array(24*e*t);for(var l=0,u=0,c=0,d=1/e,h=1/t,f=0;f<e;f++)for(var p=0;p<t;p++){for(var m=d*(f+.5)*2-1,v=h*(p+.5)*2-1,_=0;_<8;_++)a[l]=m,a[l+1]=v,a[l+2]=0,l+=3;s[u+0]=0+c,s[u+1]=1+c,s[u+2]=1+c,s[u+3]=2+c,s[u+4]=2+c,s[u+5]=3+c,s[u+6]=0+c,s[u+7]=3+c,s[u+8]=4+c,s[u+9]=5+c,s[u+10]=5+c,s[u+11]=6+c,s[u+12]=6+c,s[u+13]=7+c,s[u+14]=4+c,s[u+15]=7+c,s[u+16]=0+c,s[u+17]=4+c,s[u+18]=1+c,s[u+19]=5+c,s[u+20]=2+c,s[u+21]=6+c,s[u+22]=3+c,s[u+23]=7+c,c+=8,u+=24}this.vertices=new Uint8Array(r),this.indices=s,this.primitive=n.gl.LINES,this.attributes=new i.default,this.attributes.builtin(n.gl.FLOAT),this.indexType=c<256?n.gl.UNSIGNED_BYTE:c<65536?n.gl.UNSIGNED_SHORT:n.gl.UNSIGNED_INT},e.prototype.createSolidCubeField=function(e,t){var r=new ArrayBuffer(576*e*t),a=new Float32Array(r,0,144*e*t),o=e*t*24;if(o<256)var s=new Uint8Array(36*e*t);else if(o<65536)s=new Uint16Array(36*e*t);else s=new Uint32Array(36*e*t);for(var l=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],u=0,c=0,d=0,h=1/e,f=1/t,p=0;p<e;p++)for(var m=0;m<t;m++)for(var v=h*(p+.5)*2-1,_=f*(m+.5)*2-1,g=0;g<6;g++){for(var y=0;y<4;y++)a[u+0]=v,a[u+1]=_,a[u+2]=0,a[u+3]=l[g][0],a[u+4]=l[g][1],a[u+5]=l[g][2],u+=6;g%2==0?(s[c+0]=0+d,s[c+1]=2+d,s[c+2]=1+d,s[c+3]=1+d,s[c+4]=2+d,s[c+5]=3+d):(s[c+0]=0+d,s[c+1]=1+d,s[c+2]=2+d,s[c+3]=2+d,s[c+4]=1+d,s[c+5]=3+d),d+=4,c+=6}this.vertices=new Uint8Array(r),this.indices=s,this.primitive=n.gl.TRIANGLES,this.attributes=new i.default,this.attributes.builtin(n.gl.FLOAT,n.gl.FLOAT),this.indexType=d<256?n.gl.UNSIGNED_BYTE:d<65536?n.gl.UNSIGNED_SHORT:n.gl.UNSIGNED_INT},e.prototype.createGrid=function(e,t){for(var r=new Float32Array((e+1)*(t+1)*5),a=new Uint32Array(6*e*t),o=0,s=0;s<e+1;s++)for(var l=s/e,u=2*(l-.5),c=0;c<t+1;c++){var d=c/t,h=2*(d-.5);r[0+o]=u,r[1+o]=h,r[2+o]=0,r[3+o]=l,r[4+o]=d,o+=5}var f=0,p=t+1;for(s=1;s<e+1;s++)for(c=0;c<t;c++){var m=[(s-1)*p+c,(s-1)*p+1+c,s*p+c,s*p+1+c];a[0+f]=m[0],a[1+f]=m[1],a[2+f]=m[2],a[3+f]=m[2],a[4+f]=m[1],a[5+f]=m[3],f+=6}this.vertices=r,this.indices=a,this.primitive=n.gl.TRIANGLES,this.attributes=new i.default,this.attributes.builtin(n.gl.FLOAT,null,n.gl.FLOAT),this.indexType=n.gl.UNSIGNED_INT},e.prototype.createSolidCube=function(e=1){var t,r,a=new Float32Array(144),o=new Uint8Array(36);r=0,a[(t=0)+0]=-e,a[t+1]=-e,a[t+2]=-e,a[t+3]=-1,a[t+4]=0,a[t+5]=0,a[t+6]=-e,a[t+7]=e,a[t+8]=-e,a[t+9]=-1,a[t+10]=0,a[t+11]=0,a[t+12]=-e,a[t+13]=-e,a[t+14]=e,a[t+15]=-1,a[t+16]=0,a[t+17]=0,a[t+18]=-e,a[t+19]=e,a[t+20]=e,a[t+21]=-1,a[t+22]=0,a[t+23]=0,o[r+0]=0,o[r+1]=2,o[r+2]=1,o[r+3]=1,o[r+4]=2,o[r+5]=3,r+=6,a[(t+=24)+0]=e,a[t+1]=-e,a[t+2]=-e,a[t+3]=1,a[t+4]=0,a[t+5]=0,a[t+6]=e,a[t+7]=e,a[t+8]=-e,a[t+9]=1,a[t+10]=0,a[t+11]=0,a[t+12]=e,a[t+13]=-e,a[t+14]=e,a[t+15]=1,a[t+16]=0,a[t+17]=0,a[t+18]=e,a[t+19]=e,a[t+20]=e,a[t+21]=1,a[t+22]=0,a[t+23]=0,o[r+0]=4,o[r+1]=5,o[r+2]=6,o[r+3]=5,o[r+4]=7,o[r+5]=6,r+=6,a[(t+=24)+0]=-e,a[t+1]=-e,a[t+2]=-e,a[t+3]=0,a[t+4]=-1,a[t+5]=0,a[t+6]=e,a[t+7]=-e,a[t+8]=-e,a[t+9]=0,a[t+10]=-1,a[t+11]=0,a[t+12]=-e,a[t+13]=-e,a[t+14]=e,a[t+15]=0,a[t+16]=-1,a[t+17]=0,a[t+18]=e,a[t+19]=-e,a[t+20]=e,a[t+21]=0,a[t+22]=-1,a[t+23]=0,o[r+0]=8,o[r+1]=9,o[r+2]=11,o[r+3]=11,o[r+4]=10,o[r+5]=8,r+=6,a[(t+=24)+0]=-e,a[t+1]=e,a[t+2]=-e,a[t+3]=0,a[t+4]=1,a[t+5]=0,a[t+6]=e,a[t+7]=e,a[t+8]=-e,a[t+9]=0,a[t+10]=1,a[t+11]=0,a[t+12]=-e,a[t+13]=e,a[t+14]=e,a[t+15]=0,a[t+16]=1,a[t+17]=0,a[t+18]=e,a[t+19]=e,a[t+20]=e,a[t+21]=0,a[t+22]=1,a[t+23]=0,o[r+0]=12,o[r+1]=14,o[r+2]=13,o[r+3]=13,o[r+4]=14,o[r+5]=15,r+=6,a[(t+=24)+0]=-e,a[t+1]=-e,a[t+2]=-e,a[t+3]=0,a[t+4]=0,a[t+5]=-1,a[t+6]=e,a[t+7]=-e,a[t+8]=-e,a[t+9]=0,a[t+10]=0,a[t+11]=-1,a[t+12]=-e,a[t+13]=e,a[t+14]=-e,a[t+15]=0,a[t+16]=0,a[t+17]=-1,a[t+18]=e,a[t+19]=e,a[t+20]=-e,a[t+21]=0,a[t+22]=0,a[t+23]=-1,o[r+0]=16,o[r+1]=19,o[r+2]=17,o[r+3]=19,o[r+4]=16,o[r+5]=18,r+=6,a[(t+=24)+0]=-e,a[t+1]=-e,a[t+2]=e,a[t+3]=0,a[t+4]=0,a[t+5]=1,a[t+6]=e,a[t+7]=-e,a[t+8]=e,a[t+9]=0,a[t+10]=0,a[t+11]=1,a[t+12]=-e,a[t+13]=e,a[t+14]=e,a[t+15]=0,a[t+16]=0,a[t+17]=1,a[t+18]=e,a[t+19]=e,a[t+20]=e,a[t+21]=0,a[t+22]=0,a[t+23]=1,o[r+0]=20,o[r+1]=21,o[r+2]=23,o[r+3]=23,o[r+4]=22,o[r+5]=20,this.vertices=a,this.indices=o,this.primitive=n.gl.TRIANGLES,this.attributes=new i.default,this.attributes.builtin(n.gl.FLOAT,n.gl.FLOAT),this.indexType=n.gl.UNSIGNED_BYTE},e.prototype.createTextGrid=function(e){var t,r=4*e.length,a=new Float32Array(5*r);r<256?(t=new Uint8Array(6*e.length),this.indexType=n.gl.UNSIGNED_BYTE):r<65536?(t=new Uint16Array(6*e.length),this.indexType=n.gl.UNSIGNED_SHORT):(t=new Uint32Array(6*e.length),this.indexType=n.gl.UNSIGNED_INT);var o=0,s=0,l=0,u=0;e.forEach(function(e){u+=e.size}),u/=2,e.forEach(function(e,r){a[0+o]=-u+l-e.xoffset,a[1+o]=0,a[2+o]=e.yoffset-.5,a[3+o]=e.x1,a[4+o]=e.y2,a[0+(o+=5)]=-u+e.width+l-e.xoffset,a[1+o]=0,a[2+o]=e.yoffset-.5,a[3+o]=e.x2,a[4+o]=e.y2,a[0+(o+=5)]=-u+e.width+l-e.xoffset,a[1+o]=0,a[2+o]=-e.height+e.yoffset-.5,a[3+o]=e.x2,a[4+o]=e.y1,a[0+(o+=5)]=-u+l-e.xoffset,a[1+o]=0,a[2+o]=-e.height+e.yoffset-.5,a[3+o]=e.x1,a[4+o]=e.y1,o+=5,l+=e.size,t[0+s]=0+4*r,t[1+s]=2+4*r,t[2+s]=1+4*r,t[3+s]=0+4*r,t[4+s]=3+4*r,t[5+s]=2+4*r,s+=6}),this.vertices=a,this.indices=t,this.primitive=n.gl.TRIANGLES,this.attributes=new i.default,this.attributes.builtin(n.gl.FLOAT,null,n.gl.FLOAT,null)},e.prototype.createQuad=function(e,t,r,a){var o=12,s=3;e&&(o+=8,s+=2),t&&(o+=12,s+=3),a&&(o+=16,s+=4);var l=new Float32Array(o),u=new Uint8Array(6),c=0;if(r?(l[0+c]=1,l[1+c]=0,l[2+c]=1,l[0+(c+=s)]=-1,l[1+c]=0,l[2+c]=1,l[0+(c+=s)]=-1,l[1+c]=0,l[2+c]=-1,l[0+(c+=s)]=1,l[1+c]=0,l[2+c]=-1):(l[0+c]=-1,l[1+c]=-1,l[2+c]=0,l[0+(c+=s)]=1,l[1+c]=-1,l[2+c]=0,l[0+(c+=s)]=1,l[1+c]=1,l[2+c]=0,l[0+(c+=s)]=-1,l[1+c]=1,l[2+c]=0),c=0,t){var d=[0,0,0];r?d[1]=1:d[2]=1;for(var h=0;h<4;h++)l[3+c]=d[0],l[4+c]=d[1],l[5+c]=d[2],c+=s}if(c=0,e){var f=s-2;r?(l[f+c]=1,l[f+1+c]=0,l[f+(c+=s)]=0,l[f+1+c]=0,l[f+(c+=s)]=0,l[f+1+c]=1,l[f+(c+=s)]=1,l[f+1+c]=1):(l[f+c]=0,l[f+1+c]=0,l[f+(c+=s)]=1,l[f+1+c]=0,l[f+(c+=s)]=1,l[f+1+c]=1,l[f+(c+=s)]=0,l[f+1+c]=1)}u[0]=0,u[1]=1,u[2]=2,u[3]=2,u[4]=3,u[5]=0,this.vertices=l,this.indices=u,this.primitive=n.gl.TRIANGLES,this.attributes=new i.default;var p=null,m=null,v=null;t&&(p=n.gl.FLOAT),e&&(m=n.gl.FLOAT),a&&(v=n.gl.FLOAT),this.attributes.builtin(n.gl.FLOAT,p,m,v),this.indexType=n.gl.UNSIGNED_BYTE},e.prototype.createPoint=function(){var e=new Float32Array(10),t=new Uint16Array(1);e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,t[0]=0,this.vertices=e,this.indices=t,this.primitive=n.gl.POINTS,this.attributes=new i.default,this.attributes.builtin(n.gl.FLOAT,null,null,null),this.indexType=n.gl.UNSIGNED_SHORT},e.prototype.createSphere=function(e,t){for(var r=new Float32Array((e+1)*(t+1)*8),o=new Uint16Array(6*e*(t+1)),s=new Float32Array(3),l=Math.PI/e,u=2*Math.PI/t,c=0,d=0,h=0,f=0;f<=e;++f)for(var p=Math.sin(f*l),m=Math.cos(f*l),v=0;v<=t;++v){var _=p*Math.cos(v*u),g=p*Math.sin(v*u);r[h++]=_,r[h++]=g,r[h++]=m,s[0]=_,s[1]=g,s[2]=m,a.vec3.normalize(s,s),r[h++]=s[0],r[h++]=s[1],r[h++]=s[2],r[h++]=v/t,r[h++]=f/e,f!==e&&(o[c++]=d+t+1,o[c++]=d,o[c++]=d+t,o[c++]=d+t+1,o[c++]=d+1,o[c++]=d,d++)}this.vertices=r,this.indices=o,this.attributes=new i.default,this.attributes.builtin(n.gl.FLOAT,n.gl.FLOAT,n.gl.FLOAT),this.primitive=n.gl.TRIANGLES,this.indexType=n.gl.UNSIGNED_SHORT},e.prototype.createLine=function(){var e=new Float32Array(6),t=new Uint8Array(2);e[0]=-.5,e[1]=0,e[2]=0,e[3]=.5,e[4]=0,e[5]=0,t[0]=0,t[1]=1,this.vertices=e,this.indices=t,this.attributes=new i.default,this.attributes.builtin(n.gl.FLOAT),this.attributes.primitive=n.gl.LINES,this.primitive=n.gl.LINES,this.indexType=n.gl.UNSIGNED_BYTE},e.prototype.createLineStrip=function(){var e=new Float32Array(6),t=new Uint8Array(2);e[0]=-.5,e[1]=0,e[2]=0,e[3]=.5,e[4]=0,e[5]=0,t[0]=0,t[1]=1,this.vertices=e,this.indices=t,this.attributes=new i.default,this.attributes.builtin(n.gl.FLOAT),this.attributes.primitive=n.gl.LINE_STRIP,this.primitive=n.gl.LINE_STRIP,this.indexType=n.gl.UNSIGNED_BYTE},e.prototype.createArc=function(e,t,r,a){for(var o=new Float32Array(3*(2*a+2)),s=new Uint16Array(2*a*3),l=r/a,u=0,c=[0,0,0],d=0;d<a+1;d++)c[0]=e*Math.sin(u),c[1]=e*Math.cos(u),o[6*d+0]=(e-t)*Math.sin(u),o[6*d+1]=(e-t)*Math.cos(u),o[6*d+2]=0,o[6*d+3]=(e+t)*Math.sin(u),o[6*d+4]=(e+t)*Math.cos(u),o[6*d+5]=0,u+=l;for(d=0;d<a;d++)s[6*d+0]=2*d+0,s[6*d+1]=2*d+1,s[6*d+2]=2*d+3,s[6*d+3]=2*d+0,s[6*d+4]=2*d+3,s[6*d+5]=2*d+2;this.attributes=new i.default,this.attributes.builtin(n.gl.FLOAT),this.primitive=n.gl.TRIANGLES,this.indexType=n.gl.UNSIGNED_SHORT,this.vertices=o,this.indices=s},e.prototype.createTorus=function(e,t,r,o){var s,l,u=2*Math.PI,c=new Float32Array(o*r*8),d=new Uint16Array(o*r*2*3),h=0,f=[0,0],p=[0,0,0],m=[0,0,0];for(l=0;l<o;l++)for(s=0;s<r;s++){var v=s/r*u,_=l/o*u;f[0]=e*Math.cos(v),f[1]=e*Math.sin(v),p[0]=(e+t*Math.cos(_))*Math.cos(v),p[1]=(e+t*Math.cos(_))*Math.sin(v),p[2]=t*Math.sin(_),a.vec3.subtract(m,p,f),a.vec3.normalize(m,m),c[h+0]=p[0],c[h+1]=p[1],c[h+2]=p[2],c[h+3]=m[0],c[h+4]=m[1],c[h+5]=m[2],c[h+6]=s/e,c[h+7]=l/t,h+=8}for(h=0,l=0;l<o;l++)for(s=0;s<r;s++){var g=(s+1)%r,y=(l+1)%o,b=r*l+s,x=r*l+g,w=r*y+s,E=r*y+g;d[h]=b,d[h+1]=w,d[h+2]=x,d[h+3]=w,d[h+4]=E,d[h+5]=x,h+=6}this.vertices=c,this.indices=d,this.attributes=new i.default,this.attributes.builtin(n.gl.FLOAT,n.gl.FLOAT,n.gl.FLOAT),this.primitive=n.gl.TRIANGLES,this.indexType=n.gl.UNSIGNED_SHORT},e.prototype.createCone=function(e,t,r){var o,s=2*Math.PI,l=new Float32Array(6*r*3+6),u=new Uint16Array(9*r),c=0,d=[0,0,0],h=e*t*t/(e*e+t*t),f=e*e*t/(e*e+t*t);for(o=0;o<r;o++){var p=o/r*s,m=Math.cos(p),v=Math.sin(p);l[c]=e*m,l[c+1]=e*v,l[c+2]=0,d[0]=h*m,d[1]=h*v,d[2]=f,a.vec3.normalize(d,d),l[c+3]=d[0],l[c+4]=d[1],l[c+5]=d[2],l[c+=6]=0,l[c+1]=0,l[c+2]=t,l[c+3]=d[0],l[c+4]=d[1],l[c+5]=d[2],l[c+=6]=0,l[c+1]=0,l[c+2]=t,l[c+3]=0,l[c+4]=0,l[c+5]=-1,c+=6}for(l[c+0]=0,l[c+1]=0,l[c+2]=0,c=0,o=0;o<r;o++){var _=(o+1)%r;u[c]=3*o+1,u[c+1]=3*o,u[c+2]=3*_,u[c+3]=3*_,u[c+4]=3*_+1,u[c+5]=3*o+1,c+=6}for(o=0;o<r;o++){_=(o+1)%r;u[c]=3*r,u[c+1]=3*_+2,u[c+2]=3*o+2,c+=3}this.vertices=l,this.indices=u,this.attributes=new i.default,this.attributes.builtin(n.gl.FLOAT,n.gl.FLOAT),this.primitive=n.gl.TRIANGLES,this.indexType=n.gl.UNSIGNED_SHORT},e.prototype.createCylinder=function(e,t,r){var a,o,s=2*Math.PI,l=new Float32Array(6*r*4+6),u=new Uint16Array(12*r),c=0;for(a=0;a<r;a++){var d=a/r*s,h=Math.cos(d),f=Math.sin(d);l[c]=e*h,l[c+1]=e*f,l[c+2]=0,l[c+3]=h,l[c+4]=f,l[c+5]=0,l[c+=6]=e*h,l[c+1]=e*f,l[c+2]=t,l[c+3]=h,l[c+4]=f,l[c+5]=0,l[c+=6]=e*h,l[c+1]=e*f,l[c+2]=0,l[c+3]=0,l[c+4]=0,l[c+5]=-1,l[c+=6]=e*h,l[c+1]=e*f,l[c+2]=t,l[c+3]=0,l[c+4]=0,l[c+5]=1,c+=6}for(l[c+0]=0,l[c+1]=0,l[c+2]=0,l[c+3]=0,l[c+4]=0,l[c+5]=t,c=0,a=0;a<r;a++)o=(a+1)%r,u[c]=4*a+1,u[c+1]=4*a,u[c+2]=4*o,u[c+3]=4*o,u[c+4]=4*o+1,u[c+5]=4*a+1,c+=6;for(a=0;a<r;a++)o=(a+1)%r,u[c]=4*r,u[c+1]=4*o+2,u[c+2]=4*a+2,u[c]=4*r+1,u[c+1]=4*o+3,u[c+2]=4*a+3,c+=6;this.vertices=l,this.indices=u,this.attributes=new i.default,this.attributes.builtin(n.gl.FLOAT,n.gl.FLOAT),this.primitive=n.gl.TRIANGLES,this.indexType=n.gl.UNSIGNED_SHORT},e.prototype.createArrow=function(t,r){var i=new e,a=new e;a.createCone(t,.1*r,8),i.createCylinder(.6*t,.9*r,8),a.translate(0,0,.9*r);var o=new e;o.merge(i,a),this.vertices=o.vertices,this.indices=o.indices,this.attributes=o.attributes,this.indexType=o.indexType,this.primitive=n.gl.TRIANGLES},e}()},"./02resource/m3d_shader_chunks.js":function(e,t,r){"use strict";r.r(t),t.default={"blit.fs":"uniform sampler2D m_uBlitTexture;\r\n#if MOBILE\r\nuniform sampler2D m_uBlitDepthTexture;\r\n#endif\r\nuniform vec2 m_uInvResolution;\r\n\r\n#if WEBGL2\r\n\r\nin vec2 m_vTexCoord;\r\nout vec4 out_color;\r\n\r\n#else \r\n\r\nvarying vec2 m_vTexCoord;\r\n\r\n#endif\r\n\r\n#include <uniform.inc>\r\n\r\n#if MOBILE\r\nvec4 shade(in sampler2D tex, in sampler2D tex2, in vec2 uv, in vec2 invResolution);\r\n#else\r\nvec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution);\r\n#endif\r\nvoid main() \r\n{ \r\n#if WEBGL2\r\n\r\n#if MOBILE\r\n out_color = shade(m_uBlitTexture, m_uBlitDepthTexture, m_vTexCoord, m_uInvResolution);\r\n#else\r\n out_color = shade(m_uBlitTexture, m_vTexCoord, m_uInvResolution);\r\n#endif\r\n\r\n#else\r\n\r\n#if MOBILE\r\n gl_FragColor = shade(m_uBlitTexture, m_uBlitDepthTexture, m_vTexCoord, m_uInvResolution);\r\n#else\r\n gl_FragColor = shade(m_uBlitTexture, m_vTexCoord, m_uInvResolution);\r\n#endif\r\n\r\n#endif\r\n}\r\n","blit.vs":"#if WEBGL2\r\n\r\nin vec3 m_aPosition;\r\nin vec2 m_aTexCoord;\r\nout vec2 m_vTexCoord;\r\n\r\n#else\r\n\r\nattribute vec3 m_aPosition;\r\nattribute vec2 m_aTexCoord;\r\nvarying vec2 m_vTexCoord;\r\n\r\n#endif\r\n\r\nvoid main() \r\n{ \r\n#if MODEL_TRANSFORM\r\n gl_Position = m_uPerNode.modelMatrix * vec4(m_aPosition.xy, 0.999999, 1.0); \r\n#else\r\n gl_Position = vec4(m_aPosition.xy, 0.999999, 1.0); \r\n#endif\r\n m_vTexCoord = m_aTexCoord;\r\n}\r\n\r\n","blit_accumulate.inc":"uniform sampler2D uTexture0;\r\nuniform float uFrameCount;\r\n\r\nfloat random( vec2 p )\r\n{\r\n return fract(sin(dot(p.xy, vec2(12.9898, 78.233))) * (43758.5453 + uFrameCount * 1231.3));\r\n}\r\n \r\nvec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\r\n{\r\n vec4 accum = sampleTexture2D(tex, uv);\r\n vec4 sampleColor = sampleTexture2D(uTexture0, uv); \r\n vec4 result = (sampleColor + (uFrameCount - 1.0) * accum) / uFrameCount;\r\n float dither = 1.0/255.0 * (random(uv - 0.5) - 0.5);\r\n result += vec4(dither,dither, dither, 0.0);\r\n\r\n return result;\r\n}\r\n\r\n","blit_contour.inc":"vec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\r\n{ \r\n vec2 coordCenter = uv; \r\n vec2 coordUp = uv + vec2(0.0, -invResolution.y); \r\n vec2 coordDown = uv + vec2(0.0, invResolution.y); \r\n vec2 coordLeft = uv + vec2(-invResolution.x, 0.0); \r\n vec2 coordRight = uv + vec2(invResolution.x, 0.0); \r\n vec2 coordUpLeft = uv + vec2(-invResolution.x, -invResolution.y); \r\n vec2 coordDownLeft = uv + vec2(-invResolution.x, invResolution.y); \r\n vec2 coordUpRight = uv + vec2(-invResolution.x, invResolution.y); \r\n vec2 coordDownRight = uv + vec2(invResolution.x, invResolution.y); \r\n float contour = 0.0; \r\n\r\n float d = sampleTexture2D(tex, coordCenter).r;\r\n if(d < 1.0 &&\r\n (sampleTexture2D(tex, coordUp).r > 0.5 || \r\n sampleTexture2D(tex, coordDown).r > 0.5 || \r\n sampleTexture2D(tex, coordLeft).r > 0.5 || \r\n sampleTexture2D(tex, coordRight).r > 0.5 || \r\n sampleTexture2D(tex, coordUpLeft).r > 0.5 || \r\n sampleTexture2D(tex, coordDownLeft).r > 0.5 || \r\n sampleTexture2D(tex, coordUpRight).r > 0.5 || \r\n sampleTexture2D(tex, coordDownRight).r > 0.5)) \r\n {\r\n contour = 1.0; \r\n }\r\n return vec4(contour); \r\n} \r\n","blit_contour_overlay.inc":"uniform vec4 uColor;\r\n\r\nvec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\r\n{\r\n vec4 scene = sampleTexture2D(tex, uv);\r\n vec2 coord00 = uv + vec2(-invResolution.x * 2.0, -invResolution.y * 2.0);\r\n vec2 coord01 = uv + vec2(-invResolution.x * 2.0, -invResolution.y);\r\n vec2 coord02 = uv + vec2(-invResolution.x * 2.0, 0.0);\r\n vec2 coord03 = uv + vec2(-invResolution.x * 2.0, invResolution.y);\r\n vec2 coord04 = uv + vec2(-invResolution.x * 2.0, invResolution.y * 2.0);\r\n\r\n vec2 coord10 = uv + vec2(-invResolution.x, -invResolution.y * 2.0);\r\n vec2 coord11 = uv + vec2(-invResolution.x, -invResolution.y);\r\n vec2 coord12 = uv + vec2(-invResolution.x, 0.0);\r\n vec2 coord13 = uv + vec2(-invResolution.x, invResolution.y);\r\n vec2 coord14 = uv + vec2(-invResolution.x, invResolution.y * 2.0);\r\n\r\n vec2 coord20 = uv + vec2(0.0, -invResolution.y * 2.0);\r\n vec2 coord21 = uv + vec2(0.0, -invResolution.y);\r\n vec2 coord22 = uv + vec2(0.0, 0.0);\r\n vec2 coord23 = uv + vec2(0.0, invResolution.y);\r\n vec2 coord24 = uv + vec2(0.0, invResolution.y * 2.0);\r\n vec2 coord30 = uv + vec2(invResolution.x, -invResolution.y * 2.0);\r\n vec2 coord31 = uv + vec2(invResolution.x, -invResolution.y);\r\n vec2 coord32 = uv + vec2(invResolution.x, 0.0);\r\n vec2 coord33 = uv + vec2(invResolution.x, invResolution.y);\r\n vec2 coord34 = uv + vec2(invResolution.x, invResolution.y * 2.0);\r\n vec2 coord40 = uv + vec2(invResolution.x * 2.0, -invResolution.y * 2.0);\r\n vec2 coord41 = uv + vec2(invResolution.x * 2.0, -invResolution.y);\r\n vec2 coord42 = uv + vec2(invResolution.x * 2.0, 0.0);\r\n vec2 coord43 = uv + vec2(invResolution.x * 2.0, invResolution.y);\r\n vec2 coord44 = uv + vec2(invResolution.x * 2.0, invResolution.y * 2.0);\r\n\r\n vec4 contour = sampleTexture2D(tex, coord00) * 0.0090 +\r\n sampleTexture2D(tex, coord01) * 0.0399 +\r\n sampleTexture2D(tex, coord02) * 0.0657 +\r\n sampleTexture2D(tex, coord03) * 0.0399 +\r\n sampleTexture2D(tex, coord04) * 0.0090 +\r\n sampleTexture2D(tex, coord10) * 0.0399 +\r\n sampleTexture2D(tex, coord11) * 0.1788 +\r\n sampleTexture2D(tex, coord12) * 0.2949 +\r\n sampleTexture2D(tex, coord13) * 0.1788 +\r\n sampleTexture2D(tex, coord14) * 0.0399 +\r\n sampleTexture2D(tex, coord20) * 0.0657 +\r\n sampleTexture2D(tex, coord21) * 0.2949 +\r\n sampleTexture2D(tex, coord22) * 0.4863 +\r\n sampleTexture2D(tex, coord23) * 0.2949 +\r\n sampleTexture2D(tex, coord24) * 0.0657 +\r\n sampleTexture2D(tex, coord30) * 0.0399 +\r\n sampleTexture2D(tex, coord31) * 0.1788 +\r\n sampleTexture2D(tex, coord32) * 0.2949 +\r\n sampleTexture2D(tex, coord33) * 0.1788 +\r\n sampleTexture2D(tex, coord34) * 0.0399 +\r\n sampleTexture2D(tex, coord40) * 0.0090 +\r\n sampleTexture2D(tex, coord41) * 0.0399 +\r\n sampleTexture2D(tex, coord42) * 0.0657 +\r\n sampleTexture2D(tex, coord43) * 0.0399 +\r\n sampleTexture2D(tex, coord44) * 0.0090;\r\n float a = min(1.0, contour.a);\r\n return uColor * a + scene * (1.0 - a);\r\n} \r\n\r\n","blit_direct.fs":"uniform vec3 uColor;\r\n\r\n#if WEBGL2\r\nout vec4 out_color;\r\n#endif\r\n\r\nvoid main() \r\n{ \r\n#if WEBGL2\r\n out_color = vec4(uColor, 1);\r\n#else\r\n gl_FragColor = vec4(uColor, 1);\r\n#endif\r\n}\r\n","blit_dof.inc":"uniform bool useDepth;\r\nuniform sampler2D m_uBlitDepthTexture;\r\nuniform float maxblur;\r\nuniform float aperture;\r\nuniform vec2 nearFar;\r\nuniform float focus;\r\n\r\nconst float UnpackDownscale = 255. / 256.; const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\r\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\r\n\r\nfloat unpackRGBAToDepth( const in vec4 v ) {\r\n return dot( v, UnpackFactors );\r\n}\r\n\r\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\r\n return ( near * far ) / ( ( far - near ) * invClipZ - far );\r\n}\r\n\r\nfloat getViewZ( const in float depth ) {\r\n\treturn perspectiveDepthToViewZ( depth, nearFar.x, nearFar.y );\r\n}\r\n\r\nvec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\r\n{\r\n vec2 dofblur;\r\n vec2 aspectcorrect = vec2(1.0, invResolution.y / invResolution.x);\r\n if (useDepth) \r\n {\r\n float viewZ = getViewZ(unpackRGBAToDepth(sampleTexture2D(m_uBlitDepthTexture, uv)));\r\n float factor = focus + viewZ;\r\n dofblur = vec2(clamp(factor * aperture, -maxblur, maxblur));\r\n }\r\n else \r\n {\r\n dofblur = vec2(clamp(sampleTexture2D(m_uBlitDepthTexture, vec2(uv.x, 1.0 - uv.y)).a * aperture, -maxblur, maxblur));\r\n }\r\n vec2 dofblur9 = dofblur * 0.9;\r\n vec2 dofblur7 = dofblur * 0.7;\r\n vec2 dofblur4 = dofblur * 0.4;\r\n vec4 col = vec4( 0.0 );\r\n col += sampleTexture2D(tex, uv);\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.0, 0.4 ) * aspectcorrect ) * dofblur );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.15, 0.37 ) * aspectcorrect ) * dofblur );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.29, 0.29 ) * aspectcorrect ) * dofblur );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( -0.37, 0.15 ) * aspectcorrect ) * dofblur );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.40, 0.0 ) * aspectcorrect ) * dofblur );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.37, -0.15 ) * aspectcorrect ) * dofblur );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.29, -0.29 ) * aspectcorrect ) * dofblur );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.0, -0.4 ) * aspectcorrect ) * dofblur );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( -0.15, 0.37 ) * aspectcorrect ) * dofblur );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( -0.29, 0.29 ) * aspectcorrect ) * dofblur );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.37, 0.15 ) * aspectcorrect ) * dofblur );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( -0.4, 0.0 ) * aspectcorrect ) * dofblur );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.15, -0.37 ) * aspectcorrect ) * dofblur );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.15, 0.37 ) * aspectcorrect ) * dofblur9 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( -0.37, 0.15 ) * aspectcorrect ) * dofblur9 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.37, -0.15 ) * aspectcorrect ) * dofblur9 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur9 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( -0.15, 0.37 ) * aspectcorrect ) * dofblur9 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.37, 0.15 ) * aspectcorrect ) * dofblur9 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur9 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.15, -0.37 ) * aspectcorrect ) * dofblur9 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.29, 0.29 ) * aspectcorrect ) * dofblur7 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.40, 0.0 ) * aspectcorrect ) * dofblur7 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.29, -0.29 ) * aspectcorrect ) * dofblur7 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.0, -0.4 ) * aspectcorrect ) * dofblur7 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( -0.29, 0.29 ) * aspectcorrect ) * dofblur7 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( -0.4, 0.0 ) * aspectcorrect ) * dofblur7 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur7 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.0, 0.4 ) * aspectcorrect ) * dofblur7 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.29, 0.29 ) * aspectcorrect ) * dofblur4 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.4, 0.0 ) * aspectcorrect ) * dofblur4 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.29, -0.29 ) * aspectcorrect ) * dofblur4 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.0, -0.4 ) * aspectcorrect ) * dofblur4 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( -0.29, 0.29 ) * aspectcorrect ) * dofblur4 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( -0.4, 0.0 ) * aspectcorrect ) * dofblur4 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur4 );\r\n col += sampleTexture2D( tex, uv.xy + ( vec2( 0.0, 0.4 ) * aspectcorrect ) * dofblur4 );\r\n col = col / 41.0;\r\n col.a = 1.0;\r\n return col;\r\n}\r\n","blit_fog.inc":"uniform vec4 uColor;\r\n\r\nvec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\r\n{\r\n vec4 color = sampleTexture2D(tex, uv);\r\n float depth = uv.y;\r\n\r\n return mix(color, uColor, depth);\r\n}\r\n","blit_glow.inc":"uniform float intensity;\r\nuniform float offset;\r\n#if MOBILE\r\nvec4 shade(in sampler2D tex, in sampler2D tex2, in vec2 uv, in vec2 invResolution)\r\n#else\r\nvec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\r\n#endif\r\n{\r\n vec4 color = sampleTexture2D(tex, uv);\r\n color.a = abs(offset - color.a);\r\n return color * intensity * 2.0;\r\n}\r\n","blit_glow_blur.inc":"uniform vec2 direction;\r\nuniform float radius;\r\nuniform float weights[7];\r\n\r\nfloat getLuminance(vec3 color)\r\n{\r\n return dot(color, vec3(0.2126, 0.7152, 0.0722));\r\n}\r\n\r\n#if MOBILE\r\nvec4 shade(in sampler2D tex, in sampler2D tex2, in vec2 uv, in vec2 invResolution)\r\n#else\r\nvec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\r\n#endif\r\n{\r\n\r\n\tvec2 texelStep = invResolution * direction * radius;\r\n\tvec2 start = uv - 3.0 * texelStep;\r\n\r\n\tvec4 baseColor = vec4(0., 0., 0., 0.);\r\n\tvec2 texelOffset = vec2(0., 0.);\r\n\r\n\tfor (int i = 0; i < 7; i++)\r\n\t{\r\n\t\t\t\tvec4 texel = sampleTexture2D(tex, start + texelOffset);\r\n\t\tbaseColor.a += texel.a * weights[i];\r\n\r\n\t\t\t\tfloat luminance = getLuminance(baseColor.rgb);\r\n\t\tfloat luminanceTexel = getLuminance(texel.rgb);\r\n\t\tfloat choice = step(luminanceTexel, luminance);\r\n\t\tbaseColor.rgb = choice * baseColor.rgb + (1.0 - choice) * texel.rgb;\r\n\r\n\t\ttexelOffset += texelStep;\r\n\t}\r\n\r\n\treturn baseColor;\r\n}\r\n","blit_gradient.inc":"uniform vec3 uColor;\r\n\r\nvec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\r\n{\r\n \r\n \r\n \r\n vec4 t = sampleTexture2D(tex, uv);\r\n return vec4(uColor, 1.0 - t.r);\r\n}\r\n","blit_metaball.inc":"uniform vec4 uColor;\r\nuniform vec4 uContourColor;\r\nuniform float uContourWidth;\r\nconst float uThreshold = 0.3;\r\n\r\n#if MOBILE\r\nvec4 shade(in sampler2D tex, in sampler2D tex2, in vec2 uv, in vec2 invResolution)\r\n#else\r\nvec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\r\n#endif\r\n{\r\n float contourThreshold = uThreshold * uContourWidth;\r\n float alpha = sampleTexture2D(tex, uv).r;\r\n\r\n vec4 ret;\r\n \r\n if (alpha < uThreshold) {\r\n\t discard;\r\n }\r\n\r\n#if CONTOUR\r\n if (alpha < contourThreshold) {\r\n ret = uContourColor;\r\n } else {\r\n#endif\r\n ret = uColor;\r\n#if CONTOUR\r\n }\r\n#endif\r\n\r\n return ret;\r\n}\r\n","blit_oit.inc":"uniform sampler2D uTexture1;\r\nvec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\r\n{\r\n vec4 rgbAlphaAdd = sampleTexture2D(m_uBlitTexture, uv);\r\n \r\n float alphaMulti = sampleTexture2D(uTexture1, uv).r; \r\n\r\n vec4 ret = vec4(rgbAlphaAdd.rgb / clamp(alphaMulti, 1e-4, 5e4), rgbAlphaAdd.a);\r\n\r\n return ret;\r\n}\r\n","blit_overlay.inc":"uniform sampler2D m_uForeground;\r\n\r\n#if MOBILE\r\nvec4 shade(in sampler2D tex, in sampler2D tex2, in vec2 uv, in vec2 invResolution)\r\n#else\r\nvec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\r\n#endif\r\n{\r\n vec4 ret = sampleTexture2D(m_uForeground, uv);\r\n return ret;\r\n}\r\n","blit_shadow.inc":"const float g0 = 0.0751; const float g1 = 0.1238; const float g2 = 0.0751; \r\nconst float g3 = 0.1238; const float g4 = 0.2042; const float g5 = 0.1238; \r\nconst float g6 = 0.0751; const float g7 = 0.1238; const float g8 = 0.0751; \r\nconst float C = 85.0;\r\n\r\nvec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\r\n{ \r\n float tmp = 0.0;\r\n vec2 coord; \r\n\r\n float pixelSize = invResolution.x;\r\n\r\n coord = uv + vec2(-pixelSize, -pixelSize); \r\n\r\n tmp += exp(C * sampleTexture2D(tex, coord).x) * g0;\r\n\r\n coord = uv + vec2(0.0, -pixelSize); \r\n \r\n tmp += exp(C * sampleTexture2D(tex, coord).x) * g1;\r\n \r\n coord = uv + vec2(pixelSize, -pixelSize); \r\n\r\n tmp += exp(C * sampleTexture2D(tex, coord).x) * g2;\r\n\r\n coord = uv + vec2(-pixelSize, 0.0); \r\n\r\n tmp += exp(C * sampleTexture2D(tex, coord).x) * g3; \r\n\r\n coord = uv; \r\n\r\n tmp += exp(C * sampleTexture2D(tex, coord).x) * g4;\r\n \r\n coord = uv + vec2(pixelSize, 0.0 ); \r\n \r\n tmp += exp(C * sampleTexture2D(tex, coord).x) * g5;\r\n\r\n coord = uv + vec2(-pixelSize, pixelSize); \r\n\r\n tmp += exp(C * sampleTexture2D(tex, coord).x) * g6;\r\n \r\n coord = uv + vec2(0.0, pixelSize); \r\n\r\n tmp += exp(C * sampleTexture2D(tex, coord).x) * g7;\r\n \r\n coord = uv + vec2(pixelSize, pixelSize); \r\n\r\n tmp += exp(C * sampleTexture2D(tex, coord).x) * g8;\r\n\r\n return vec4(tmp); \r\n} \r\n\r\n","blit_simple.inc":"#if MOBILE\r\nvec4 shade(in sampler2D tex, in sampler2D tex2, in vec2 uv, in vec2 invResolution)\r\n#else\r\nvec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\r\n#endif\r\n{\r\n return sampleTexture2D(tex, uv);\r\n}\r\n","blit_sketch.inc":"uniform float uThreshold; \r\nuniform float uContrast; \r\nuniform vec3 uNearAxis; \r\nuniform bool uIsPerspective; \r\n\r\n#if MOBILE\r\nuniform vec2 uNearFar;\r\n\r\nvoid getNormalPosition(in sampler2D tex, in sampler2D tex2, vec2 coord, out vec3 position, out vec3 normal) \r\n{\r\n vec2 uv = coord * 0.5 + vec2(0.5); \r\n vec4 n = sampleTexture2D(tex, uv); \r\n\r\n normal = normalize(n.xyz * 2.0 - 1.0); \r\n vec4 p = sampleTexture2D(tex2, uv);\r\n float depth = p.x * 2.0 -1.0;\r\n \r\n if (uIsPerspective) \r\n {\r\n position.z = -2.0 * uNearFar.x * uNearFar.y / (uNearFar.x + uNearFar.y - depth * (uNearFar.y - uNearFar.x));\r\n position.xy = uNearAxis.xy * coord.xy * position.z / uNearAxis.z; \r\n } \r\n else \r\n {\r\n position.xy = uNearAxis.xy * coord.xy;\r\n position.z = 0.5 * (depth * (uNearFar.y - uNearFar.x) + uNearFar.x + uNearFar.y);\r\n }\r\n} \r\n#else\r\nvoid getNormalPosition(in sampler2D tex, vec2 coord, out vec3 position, out vec3 normal) \r\n{\r\n vec2 uv = coord * 0.5 + vec2(0.5); \r\n vec4 p = sampleTexture2D(tex, uv); \r\n\r\n normal = normalize(p.xyz); \r\n position.z = p.w; \r\n if (uIsPerspective) \r\n { \r\n position.xy = uNearAxis.xy * coord.xy * p.w / uNearAxis.z; \r\n } \r\n else \r\n {\r\n position.xy = uNearAxis.xy * coord.xy;\r\n }\r\n}\r\n#endif\r\n\r\nfloat planeDistance(vec3 posA, vec3 norA, vec3 posB, vec3 norB) \r\n{ \r\n vec3 posDelta = normalize(posB - posA); \r\n float planeDist = max(abs(dot(posDelta, norA)), abs(dot(posDelta, norB))); \r\n float normalDist = max(1.0 - dot(norA, norB), 0.0); \r\n \r\n return max(planeDist, normalDist);\r\n} \r\n\r\nuniform vec3 uColor;\r\n\r\n#if MOBILE\r\nvec4 shade(in sampler2D tex, in sampler2D tex2, in vec2 uv, in vec2 invResolution)\r\n#else \r\nvec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\r\n#endif\r\n{\r\n vec2 vFragCoord = uv * 2.0 - vec2(1.0);\r\n vec2 coordCenter = vFragCoord.xy ; \r\n vec2 coordUp = vFragCoord - vec2(0.0, 2.0 * invResolution.y); \r\n vec2 coordDown = vFragCoord + vec2(0.0, 2.0 * invResolution.y); \r\n vec2 coordLeft = vFragCoord - vec2(2.0 * invResolution.x, 0.0); \r\n vec2 coordRight = vFragCoord + vec2(2.0 * invResolution.x, 0.0); \r\n vec3 posUp, norUp; \r\n vec3 posDown, norDown; \r\n vec3 posLeft, norLeft; \r\n vec3 posRight, norRight; \r\n#if MOBILE\r\n getNormalPosition(tex, tex2, coordUp, posUp, norUp); \r\n getNormalPosition(tex, tex2, coordDown, posDown, norDown); \r\n getNormalPosition(tex, tex2, coordLeft, posLeft, norLeft); \r\n getNormalPosition(tex, tex2, coordRight, posRight, norRight); \r\n#else \r\n getNormalPosition(tex, coordUp, posUp, norUp); \r\n getNormalPosition(tex, coordDown, posDown, norDown); \r\n getNormalPosition(tex, coordLeft, posLeft, norLeft); \r\n getNormalPosition(tex, coordRight, posRight, norRight);\r\n#endif\r\n vec2 planeDist = vec2(planeDistance(posLeft, norLeft, posRight, norRight), \r\n planeDistance(posUp, norUp, posDown, norDown)); \r\n float edge = length(planeDist); \r\n float sketch = step(edge, uThreshold); \r\n sketch = clamp(uContrast * (1.0 - sketch), 0.0, 1.0); \r\n \r\n return vec4(uColor, sketch);\r\n}\r\n","blit_solid.inc":"uniform vec3 uColor;\r\n\r\nvec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\r\n{\r\n return vec4(uColor, 1);\r\n}\r\n","blit_ssao.inc":"uniform vec3 uNearAxis;\r\nuniform vec2 uTexTransform;\r\nuniform vec2 SAMPLES[16];\r\nuniform float uRadius;\r\nuniform bool uIsPerspective;\r\n\r\nvec4 getNormalAndDepth(sampler2D tex, vec2 fragCoord)\r\n{\r\n vec2 texcoord = fragCoord * 0.5 + vec2(0.5);\r\n texcoord.x = texcoord.x * uTexTransform.x + uTexTransform.y;\r\n return sampleTexture2D(tex, texcoord);\r\n}\r\n\r\nvec3 getEyePosition(vec2 fragCoord, float depth)\r\n{\r\n vec3 eyeDirection = uNearAxis * vec3(fragCoord, 1.0);\r\n vec3 eyePosition;\r\n eyePosition.z = depth;\r\n if (uIsPerspective) \r\n {\r\n eyePosition.xy = eyeDirection.xy * depth / eyeDirection.z;\r\n } \r\n else \r\n {\r\n eyePosition.xy = eyeDirection.xy;\r\n }\r\n return eyePosition; \r\n}\r\n\r\nvec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\r\n{\r\n float ao = 0.0;\r\n float radius = uRadius;\r\n float radius2 = radius * radius;\r\n const float bias = 0.0001;\r\n const float epsilon = 0.0001;\r\n vec2 vFragCoord = uv * 2.0 - vec2(1.0);\r\n vec4 p = getNormalAndDepth(tex, vFragCoord);\r\n vec3 eyePosition = getEyePosition(vFragCoord, p.w);\r\n vec3 normal = p.xyz;\r\n for (int i = 0; i < 16; i++)\r\n {\r\n vec2 d = SAMPLES[i] - vec2(0.5);\r\n vec2 sample = vec2(vFragCoord + d * radius / eyePosition.z);\r\n float depth = getNormalAndDepth(tex, sample).w;\r\n vec3 samplePosition = getEyePosition(sample, depth);\r\n vec3 v_i = samplePosition - eyePosition;\r\n float v_v = dot(v_i, v_i);\r\n float f = max(radius2 - v_v, 0.0) / radius2;\r\n ao += f * f * f * max(0.0,(dot(v_i, normal) + eyePosition.z * bias)/(v_v + epsilon));\r\n }\r\n float occ = 1.0 - ao / (4.0 * 16.0);\r\n occ = clamp(pow(occ, 2.04), 0.0, 1.0);\r\n return vec4(occ);\r\n}\r\n\r\n","blit_ssao2.inc":"uniform vec3 uNearAxis; \r\nuniform vec2 uTexTransform; \r\nuniform float uRadius; \r\nuniform bool uIsPerspective; \r\nuniform float uFrameCount; \r\nuniform vec4 uTexSizeAndInv; \r\nuniform vec2 SAMPLES[8]; \r\n\r\n#if MOBILE\r\nuniform vec2 uNearFar;\r\n\r\nvec4 getNormalAndDepth(in sampler2D tex, in sampler2D tex2, vec2 fragCoord) \r\n{\r\n vec2 texcoord = fragCoord * 0.5 + vec2(0.5);\r\n texcoord.x = texcoord.x * uTexTransform.x + uTexTransform.y;\r\n \r\n vec4 ret = sampleTexture2D(tex, texcoord); \r\n ret.xyz = normalize(ret.xyz * 2.0 - 1.0); \r\n \r\n vec4 p = sampleTexture2D(tex2, texcoord);\r\n float depth = p.x * 2.0 -1.0;\r\n if (uIsPerspective) \r\n {\r\n ret.w = -2.0 * uNearFar.x * uNearFar.y / (uNearFar.x + uNearFar.y - depth * (uNearFar.y - uNearFar.x));\r\n } \r\n else \r\n {\r\n ret.w = 0.5 * (depth * (uNearFar.y - uNearFar.x) + uNearFar.x + uNearFar.y);\r\n }\r\n return ret;\r\n} \r\n#else\r\nvec4 getNormalAndDepth(in sampler2D tex, vec2 fragCoord) \r\n{\r\n vec2 texcoord = fragCoord * 0.5 + vec2(0.5);\r\n texcoord.x = texcoord.x * uTexTransform.x + uTexTransform.y;\r\n \r\n return sampleTexture2D(tex, texcoord); \r\n} \r\n#endif\r\n\r\n\r\nvec3 getEyePosition(vec2 fragCoord, float depth) \r\n{\r\n vec3 eyeDirection = uNearAxis * vec3(fragCoord, 1.0); \r\n vec3 eyePosition; \r\n eyePosition.z = depth; \r\n if (uIsPerspective) \r\n { \r\n eyePosition.xy = eyeDirection.xy * depth / eyeDirection.z; \r\n } \r\n else \r\n {\r\n eyePosition.xy = eyeDirection.xy; \r\n } \r\n return eyePosition; \r\n} \r\n\r\nvec3 getScreenPosition(vec3 eyePos) \r\n{ \r\n if (uIsPerspective)\r\n {\r\n return vec3(eyePos.xy * uNearAxis.z / uNearAxis.xy / eyePos.z, eyePos.z); \r\n }\r\n else\r\n {\r\n return vec3(eyePos.xy / uNearAxis.xy, eyePos.z); \r\n }\r\n} \r\n\r\n#if MOBILE\r\nvec3 getOffsetEyePosition(in sampler2D tex, in sampler2D tex2, vec3 viewPos, vec2 offset) \r\n#else\r\nvec3 getOffsetEyePosition(in sampler2D tex, vec3 viewPos, vec2 offset) \r\n#endif\r\n{ \r\n vec2 scnPos = getScreenPosition(viewPos).xy; \r\n vec2 scnOffset = getScreenPosition(vec3(offset, viewPos.z)).xy; \r\n vec2 pixOffset = scnOffset * uTexSizeAndInv.xy * 0.5;\r\n if(length(pixOffset) > 2.0) \r\n {\r\n scnOffset = (floor(pixOffset + 0.5) ) * uTexSizeAndInv.zw * 2.0;\r\n }\r\n#if MOBILE\r\nfloat sampDepth = getNormalAndDepth(tex, tex2, scnPos + scnOffset).w; \r\n#else\r\nfloat sampDepth = getNormalAndDepth(tex, scnPos + scnOffset).w; \r\n#endif\r\n return getEyePosition(scnPos + scnOffset, sampDepth); \r\n} \r\n\r\nvec3 computeMultiBounceColor(float x, vec3 albedo) \r\n{ \r\n vec3 a = 2.0404 * albedo - 0.3324; \r\n vec3 b = -4.7951 * albedo + 0.6417; \r\n vec3 c = 2.7552 * albedo + 0.6903; \r\n return max( vec3(x,x,x), ( ( x * a + b ) * x + c ) * x ); \r\n} \r\n\r\nfloat random(vec2 p) \r\n{ \r\n return fract(sin(dot(p.xy, vec2(12.9898, 78.233))) * (43758.5453 + (uFrameCount) * 1231.3));\r\n} \r\n\r\n#if MOBILE\r\nvec4 shade(in sampler2D tex, in sampler2D tex2, in vec2 uv, in vec2 invResolution)\r\n#else \r\nvec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\r\n#endif\r\n{ \r\n float maxScreenRadius = 0.4; float falloffDist = 0.0; float randScale = 0.4; const float aoStrength = 1.1; const float PI = 3.1415926535898; \r\n const float HalfPI = 1.570796326794895; \r\n\r\n vec2 vFragCoord = uv * 2.0 - vec2(1.0);\r\n#if MOBILE\r\n vec4 p = getNormalAndDepth(tex, tex2, vFragCoord); \r\n#else\r\n vec4 p = getNormalAndDepth(tex, vFragCoord); \r\n#endif\r\n vec3 eyePosition = getEyePosition(vFragCoord, p.w); \r\n vec3 normal = p.xyz; \r\n float xx = p.w;\r\n if (length(normal) < 0.95) {\r\n return vec4(1.0);\r\n }\r\n\r\n vec2 projScrRadius = getEyePosition(vec2(1.0, 1.0) * maxScreenRadius, p.w).xy; \r\n vec3 viewDir = vec3(0.0, 0.0, 1.0);\r\n\r\n float radiusScale = 1.0 + randScale * (random(vFragCoord * 0.5 - 0.5) - 0.5); \r\n float radius = radiusScale * min(uRadius, min(projScrRadius.x, projScrRadius.y)); \r\n\r\n if (uIsPerspective) {\r\n viewDir = normalize(-uNearAxis * vec3(vFragCoord, 1.0)); \r\n } \r\n\r\n vec3 sliceTan = normalize(vec3(SAMPLES[7], 0.0));\r\n vec3 sliceNorm = normalize(cross(viewDir, sliceTan)); \r\n vec3 normalSliceProj = normal - dot(normal, sliceNorm) * sliceNorm; \r\n vec3 normalSliceDir = normalize(normalSliceProj); \r\n float thetaN = acos(dot(normalSliceDir, viewDir)) * sign(dot(cross(sliceNorm, viewDir), normalSliceDir)); \r\n\r\n float horizon1 = thetaN + HalfPI;\r\n for (int i = 0; i < 8; ++i) \r\n { \r\n vec2 p = SAMPLES[i];\r\n#if MOBILE\r\nvec3 offsetPosition = getOffsetEyePosition(tex, tex2, eyePosition, p * radius); \r\n#else\r\nvec3 offsetPosition = getOffsetEyePosition(tex, eyePosition, p * radius); \r\n#endif\r\n vec3 v_i = offsetPosition - eyePosition; \r\n float h1 = min(acos(dot(normalize(v_i), viewDir)), HalfPI + thetaN); \r\n float weight = 1.0 - clamp((length(v_i) / radius - falloffDist), 0.0, 1.0); \r\n horizon1 = mix(horizon1, min(horizon1, h1), weight); \r\n } \r\n\r\n float horizon2 = -thetaN + HalfPI;\r\n for(int i = 0; i < 8; ++i) \r\n { \r\n vec2 p = -SAMPLES[i]; \r\n#if MOBILE\r\nvec3 offsetPosition = getOffsetEyePosition(tex, tex2, eyePosition, p * radius); \r\n#else\r\nvec3 offsetPosition = getOffsetEyePosition(tex, eyePosition, p * radius); \r\n#endif\r\n vec3 v_i = offsetPosition - eyePosition; \r\n float h2 = min(acos(dot(normalize(v_i), viewDir)), HalfPI - thetaN); \r\n float weight = 1.0 - clamp((length(v_i) / radius - falloffDist), 0.0, 1.0); \r\n horizon2 = mix(horizon2, min(horizon2, h2), weight); \r\n } \r\n\r\n \r\n float occ = 1.0 - (cos(horizon1) + cos(horizon2)) * 0.5 * aoStrength; \r\n vec3 ao = computeMultiBounceColor(occ, vec3(1.0,1.0,1.0));\r\n\r\n return vec4(ao, 1.0); \r\n}\r\n","blit_transparent.inc":"uniform vec4 uColor;\r\n\r\n#if MOBILE\r\nvec4 shade(in sampler2D tex, in sampler2D tex2, in vec2 uv, in vec2 invResolution)\r\n#else \r\nvec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\r\n#endif\r\n{\r\n float x = uColor.a;\r\n return uColor;\r\n}\r\n","blit_vr_wrap.inc":"uniform vec2 uLeftCenterOffset; \r\nuniform vec2 uRightCenterOffset; \r\nuniform vec4 uWarpScaleParam; \r\nuniform vec3 uHmdWarpParam; \r\nuniform bool uCalibration;\r\n\r\nvec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\r\n{\r\n vec4 res;\r\n if(m_vTexCoord.x <= 0.5){ \r\n vec2 coord = vec2(m_vTexCoord.x * 2.0, m_vTexCoord.y); \r\n vec2 offset = (coord.xy - uLeftCenterOffset) * uWarpScaleParam.xy;\r\n float dist2 = offset.x * offset.x + offset.y * offset.y;\r\n \r\n vec2 offsetWarp = offset * (uHmdWarpParam.x + uHmdWarpParam.y * dist2 + uHmdWarpParam.z * dist2 * dist2);\r\n vec2 sampLoc = uLeftCenterOffset + offsetWarp * uWarpScaleParam.zw;\r\n \r\n if(all(equal(clamp(sampLoc, 0.0, 1.0), sampLoc)))\r\n res = sampleTexture2D(tex, vec2(sampLoc.x * 0.5, sampLoc.y)); \r\n else\r\n res = vec4(0.0);\r\n \r\n if (uCalibration) {\r\n if(res.w > 0.0 && (mod(sampLoc.x - uLeftCenterOffset.x, 0.1) < 0.002 || mod(sampLoc.y, 0.1) < 0.002))\r\n res = vec4(0.0,0.0,1.0,1.0);\r\n \r\n if(length(coord.xy - uLeftCenterOffset) < 0.01) \r\n res = vec4(0.0, 0.0, 0.0, 1.0);\r\n }\r\n } else { \r\n vec2 coord = vec2((m_vTexCoord.x - 0.5) * 2.0, m_vTexCoord.y); \r\n vec2 offset = (coord.xy - uRightCenterOffset) * uWarpScaleParam.xy;\r\n float dist2 = offset.x * offset.x + offset.y * offset.y;\r\n vec2 offsetWarp = offset * (uHmdWarpParam.x + \r\n uHmdWarpParam.y * dist2 + uHmdWarpParam.z * dist2 * dist2);\r\n vec2 sampLoc = uRightCenterOffset + offsetWarp * uWarpScaleParam.zw;\r\n if(all(equal(clamp(sampLoc, 0.0, 1.0), sampLoc)))\r\n res = sampleTexture2D(tex, vec2(sampLoc.x* 0.5 + 0.5, sampLoc.y));\r\n else\r\n res = vec4(0.0, 0.0, 0.0, 1.0);\r\n\r\n if (uCalibration) {\r\n if(res.w > 0.0 && (mod(sampLoc.x - uRightCenterOffset.x, 0.1) < 0.002 || mod(sampLoc.y, 0.1) < 0.002))\r\n res = vec4(0.0,0.0,1.0,1.0);\r\n if(length(coord.xy - uRightCenterOffset) < 0.01)\r\n res = vec4(1.0,0.0,0.0,1.0);\r\n }\r\n\r\n }\r\n return res;\r\n}\r\n","clipping.inc":"#if CLIPPING\r\n if (dot(m_vVertex.xyz, m_uGlobal.clipPlanes[0].xyz) > m_uGlobal.clipPlanes[0].w ||\r\n dot(m_vVertex.xyz, m_uGlobal.clipPlanes[1].xyz) > m_uGlobal.clipPlanes[1].w ||\r\n dot(m_vVertex.xyz, m_uGlobal.clipPlanes[2].xyz) > m_uGlobal.clipPlanes[2].w ||\r\n dot(m_vVertex.xyz, m_uGlobal.clipPlanes[3].xyz) > m_uGlobal.clipPlanes[3].w ||\r\n dot(m_vVertex.xyz, m_uGlobal.clipPlanes[4].xyz) > m_uGlobal.clipPlanes[4].w ||\r\n dot(m_vVertex.xyz, m_uGlobal.clipPlanes[5].xyz) > m_uGlobal.clipPlanes[5].w) {\r\n discard;\r\n }\r\n#endif","depth_main.fs":"#include <globalvars.inc>\r\n\r\n#if ENCODE_DEPTH\r\nvec4 encodeDepth(float depth)\r\n{\r\n const vec4 bitShift = vec4(255.0*255.0*255.0, 255.0*255.0, 255.0, 1.0);\r\n const vec4 bitMask = vec4(0.0, 1.0/255.0, 1.0/255.0, 1.0/255.0);\r\n vec4 res = fract(depth * bitShift); \r\n res -= res.xxyz * bitMask; \r\n return res;\r\n}\r\n#endif\r\n\r\n#if WEBGL2\r\n out vec4 out_color;\r\n#endif\r\n\r\n#if ALPHATEST\r\n uniform sampler2D m_uDiffuseTexture;\r\n#endif\r\n\r\nvoid main()\r\n{\r\n#include <clipping.inc>\r\n\r\n#if ALPHATEST\r\n vec4 texel = sampleTexture2D(m_uDiffuseTexture, m_vTexCoord.xy);\r\n if (texel.a < 0.15)\r\n {\r\n discard;\r\n }\r\n#endif\r\n\r\n#if ENCODE_DEPTH\r\n vec4 o = encodeDepth(gl_FragCoord.z); \r\n#else\r\n vec4 o = gl_FragCoord.zzzz;\r\n#endif\r\n\r\n#if WEBGL2\r\n out_color = o;\r\n#else\r\n gl_FragColor = o;\r\n#endif\r\n}\r\n","gamma.inc":"float linearTosRGB1(const in float c, const in float gamma)\r\n{\r\n float v = 0.0;\r\n if (c < 0.0031308) \r\n {\r\n if ( c > 0.0) \r\n {\r\n v = c * 12.92;\r\n }\r\n } \r\n else \r\n {\r\n v = 1.055 * pow(c, 1.0 / gamma) - 0.055;\r\n }\r\n return v;\r\n}\r\n\r\nvec3 linearTosRGB(const in vec3 rgb, const in float gamma)\r\n{\r\n vec3 ret;\r\n ret.r = linearTosRGB1(rgb.r, gamma);\r\n ret.g = linearTosRGB1(rgb.g, gamma);\r\n ret.b = linearTosRGB1(rgb.b, gamma);\r\n return ret;\r\n}\r\n\r\nfloat sRGBToLinear1(const in float c, const in float gamma)\r\n{\r\n float v = 0.0;\r\n if (c < 0.04045)\r\n {\r\n if (c >= 0.0)\r\n {\r\n v = c * ( 1.0 / 12.92);\r\n }\r\n } \r\n else \r\n {\r\n v = pow((c + 0.055) * (1.0 / 1.055), gamma);\r\n }\r\n return v;\r\n}\r\n\r\nvec3 sRGBToLinear(const in vec3 srgb, const in float gamma)\r\n{\r\n vec3 ret;\r\n ret.r = sRGBToLinear1(srgb.r, gamma);\r\n ret.g = sRGBToLinear1(srgb.g, gamma);\r\n ret.b = sRGBToLinear1(srgb.b, gamma);\r\n\r\n return ret;\r\n}\r\n","globalvars.inc":"#if CLIPPING\r\nstruct GlobalStruct\r\n{\r\n vec4 clipPlanes[6];\r\n};\r\nuniform GlobalStruct m_uGlobal;\r\n#endif\r\n","lights.inc":"struct SunLightStruct\r\n{\r\n mat4 diffuseMatrix[3];\r\n float intensity;\r\n vec3 direction;\r\n mat4 shadowMatrix0;\r\n mat4 shadowMatrix1;\r\n};\r\nuniform SunLightStruct m_uSunLight;\r\nuniform sampler2D m_uSunLightProbe;\r\n\r\nstruct PointLightStruct\r\n{\r\n vec3 color;\r\n vec3 position;\r\n float radius;\r\n};\r\n\r\nstruct DirectionalLightStruct\r\n{\r\n vec3 color;\r\n vec3 direction;\r\n};\r\n\r\nstruct SpotLightStruct\r\n{\r\n vec3 color;\r\n vec3 position;\r\n vec3 direction;\r\n float cutoff;\r\n float radius;\r\n};\r\n\r\n#if POINT_LIGHT0\r\nuniform PointLightStruct m_uPointLight0;\r\n#endif\r\n#if POINT_LIGHT1\r\nuniform PointLightStruct m_uPointLight1;\r\n#endif\r\n#if POINT_LIGHT2\r\nuniform PointLightStruct m_uPointLight2;\r\n#endif\r\n\r\n#if DIRECTIONAL_LIGHT0\r\nuniform DirectionalLightStruct m_uDirectionalLight0;\r\n#endif\r\n#if DIRECTIONAL_LIGHT1\r\nuniform DirectionalLightStruct m_uDirectionalLight1;\r\n#endif\r\n#if DIRECTIONAL_LIGHT2\r\nuniform DirectionalLightStruct m_uDirectionalLight2;\r\n#endif\r\n\r\n#if SPOT_LIGHT0\r\nuniform SpotLightStruct m_uSpotLight0;\r\n#endif\r\n#if SPOT_LIGHT1\r\nuniform SpotLightStruct m_uSpotLight1;\r\n#endif\r\n#if SPOT_LIGHT2\r\nuniform SpotLightStruct m_uSpotLight2;\r\n#endif\r\n","main.fs":"#if WEBGL2\r\nin vec3 m_vVertex;\r\nin vec3 m_vNormal;\r\nin vec3 m_vTexCoord;\r\nin vec4 m_vColor;\r\nflat in vec4 m_vId;\r\nin float m_vDepth;\r\nin float m_vColorIndex;\r\n#else \r\n\r\nvarying vec3 m_vVertex;\r\nvarying vec3 m_vNormal;\r\nvarying vec3 m_vTexCoord;\r\nvarying vec4 m_vColor;\r\nvarying float m_vDepth;\r\nvarying float m_vColorIndex;\r\n#endif\r\n\r\n#include <uniform.inc>\r\n\r\n\r\n\r\n\r\n","main.vs":"#if WEBGL2\r\nlayout (location = 0) in vec3 m_aPosition;\r\n\r\n#if COMPRESSION\r\nlayout (location = 1) in float m_aNormal0;\r\n#else\r\nlayout (location = 1) in vec3 m_aNormal0;\r\n#endif\r\n\r\nlayout (location = 2) in float m_aNormal1;\r\nlayout (location = 3) in float m_aNormal2;\r\nlayout (location = 4) in vec2 m_aTexCoord;\r\nlayout (location = 5) in vec4 m_aColor;\r\nlayout (location = 6) in float m_aMaterial;\r\nlayout (location = 7) in vec3 m_aTangent;\r\nlayout (location = 8) in vec4 m_aJoint0;\r\nlayout (location = 9) in vec4 m_aWeight0;\r\n\r\n#if INSTANCING\r\nlayout (location = 10) in mat4 m_aModelMatrix;\r\n#endif\r\n\r\n\r\n\r\n#else\r\nattribute vec3 m_aPosition;\r\n\r\n#if COMPRESSION\r\nattribute float m_aNormal0;\r\n#else\r\nattribute vec3 m_aNormal0;\r\n#endif\r\n\r\nattribute float m_aNormal1;\r\nattribute float m_aNormal2;\r\nattribute vec2 m_aTexCoord;\r\nattribute vec4 m_aColor;\r\nattribute float m_aMaterial;\r\nattribute vec3 m_aTangent;\r\nattribute vec4 m_aJoint0;\r\nattribute vec4 m_aWeight0;\r\n#if INSTANCING\r\nattribute mat4 m_aModelMatrix;\r\n#endif\r\n\r\n\r\n#endif\r\n\r\n","mark_main.fs":"#include <globalvars.inc>\r\n\r\nout vec4 out_color;\r\n\r\nvoid main()\r\n{\r\n#include <clipping.inc>\r\n \r\n out_color = m_vId;\r\n}","material_animating_ribbon.inc":"struct MaterialStruct\r\n{\r\n float values[6]; \r\n};\r\nuniform MaterialStruct m_uMaterial;\r\n\r\nuniform sampler2D m_uPlatteTexture;\r\nuniform float m_uTime;\r\nuniform float m_uSpeed;\r\n\r\nconst vec3 dielectricColor = vec3(0.04); \r\nvoid parseMaterial(out vec3 diffuse, out vec3 specular, out float transparent, out float roughness)\r\n{\r\n vec4 texel = sampleTexture2D(m_uPlatteTexture, m_vTexCoord.xy + m_uTime * vec2(0.001 * m_uSpeed, 0.0));\r\n transparent = texel.a;\r\n diffuse = texel.rgb;\r\n specular = dielectricColor;\r\n}\r\n","material_barchart.inc":"struct MaterialStruct\r\n{\r\n float values[6]; \r\n};\r\nuniform MaterialStruct m_uMaterial;\r\n\r\nconst vec3 dielectricColor = vec3(1.0); \r\n#if ALPHATEST\r\n uniform sampler2D m_uDiffuseTexture;\r\n#endif\r\n\r\nvoid parseMaterial(out vec3 diffuse, out vec3 specular, out float transparent, out float roughness)\r\n{\r\n diffuse = m_vColor.xyz;\r\n specular = dielectricColor;\r\n transparent = 1.0;\r\n}\r\n","material_color.inc":"struct MaterialStruct\r\n{\r\n float values[6]; \r\n};\r\nuniform MaterialStruct m_uMaterial;\r\n\r\nconst vec3 dielectricColor = vec3(0.04); \r\nvoid parseMaterial(out vec3 diffuse, out vec3 specular, out float transparent, out float roughness)\r\n{\r\n vec3 albedo = m_vColor.rgb;\r\n\r\n transparent = m_vColor.a * m_uMaterial.values[3];\r\n \r\n#if GAMMA\r\n albedo = sRGBToLinear(albedo, 2.2); \r\n#endif\r\n\r\n diffuse = albedo;\r\n specular = dielectricColor;\r\n}\r\n\r\n","material_dummy.inc":"struct MaterialStruct\r\n{\r\n float values[6]; \r\n};\r\nuniform MaterialStruct m_uMaterial;\r\n\r\nvoid parseMaterial(out vec3 diffuse, out vec3 specular, out float transparent, out float roughness)\r\n{\r\n transparent = 0.5;\r\n return;\r\n}\r\n","material_heatmap.inc":"const vec3 dielectricColor = vec3(1.0);\r\n\r\nuniform sampler2D m_uData;\r\nuniform sampler2D m_uPlatte;\r\n#if ENABLE_FOREGROUND\r\nuniform sampler2D m_uForeground;\r\n#endif\r\n\r\nvoid parseMaterial(out vec3 diffuse, out vec3 specular, out float transparent, out float roughness)\r\n{\r\n float intensity = sampleTexture2D(m_uData, m_vTexCoord.xy).x;\r\n diffuse = sampleTexture2D(m_uPlatte, vec2(intensity, 0.0)).rgb;\r\n#if ENABLE_FOREGROUND\r\n vec4 foregroundColor = sampleTexture2D(m_uForeground, m_vTexCoord.xy);\r\n diffuse = foregroundColor.rgb * foregroundColor.a + diffuse * (1.0 - foregroundColor.a);\r\n#endif\r\n specular = dielectricColor;\r\n#if DISABLE_BLEND\r\n transparent = 1.0;\r\n#else\r\n transparent = intensity * 100.0; \r\n#endif\r\n}\r\n","material_heightmap.inc":"const vec3 dielectricColor = vec3(1.0);\r\n\r\nvoid parseMaterial(out vec3 diffuse, out vec3 specular, out float transparent, out float roughness)\r\n{\r\n diffuse = m_vColor.xyz;\r\n specular = dielectricColor;\r\n transparent = 1.0;\r\n}\r\n","material_pbr.inc":"#if HAS_BASECOLORMAP\r\nuniform sampler2D m_uBaseColorTexture;\r\n#endif\r\n\r\n#if HAS_METALROUGHNESSMAP\r\nuniform sampler2D m_uMetallicRoughnessTexture;\r\n#endif\r\n\r\n#if HAS_NORMALMAP\r\nuniform sampler2D m_uNormalTexture;\r\n#endif\r\n\r\n#if HAS_EMISSIVEMAP\r\nuniform sampler2D m_uEmissiveTexture;\r\n#endif\r\n\r\n#if HAS_OCCLUSIONMAP\r\n uniform sampler2D m_uOcclusionTexture;\r\n#endif\r\n\r\nstruct MaterialStruct\r\n{\r\n float values[10]; \r\n};\r\n\r\nuniform MaterialStruct m_uMaterial;\r\n\r\nvoid parseMaterial(out vec4 baseColor, out vec3 normal, out vec2 metallicRoughness, out vec3 emissiveColor, out float occlusion)\r\n{\r\n baseColor = vec4(m_uMaterial.values[0], m_uMaterial.values[1], m_uMaterial.values[2], m_uMaterial.values[3]); \r\n#if HAS_BASECOLORMAP\r\n baseColor *= sampleTexture2D(m_uBaseColorTexture, m_vTexCoord.xy);\r\n#endif\r\n\r\n metallicRoughness = vec2(m_uMaterial.values[5], m_uMaterial.values[4]);\r\n#if HAS_METALROUGHNESSMAP\r\n metallicRoughness *= sampleTexture2D(m_uMetallicRoughnessTexture, m_vTexCoord.xy).bg;\r\n#endif\r\n\r\n#if HAS_NORMALMAP\r\n normal = sampleTexture2D(m_uNormalTexture, m_vTexCoord.xy).xyz * 2.0 - vec3(1.0);\r\n#else \r\n normal = m_vNormal;\r\n#endif\r\n\r\n emissiveColor = vec3(m_uMaterial.values[6], m_uMaterial.values[7], m_uMaterial.values[8]);\r\n#if HAS_EMISSIVEMAP\r\n emissiveColor *= sampleTexture2D(m_uEmissiveTexture, m_vTexCoord.xy).xyz;\r\n#endif\r\n\r\n#if HAS_OCCLUSIONMAP\r\n occlusion = sampleTexture2D(m_uOcclusionTexture, m_vTexCoord.xy).r;\r\n#endif\r\n}\r\n\r\n","material_skybox.inc":"#if EQUIRECTANGLE || WALLPAPER\r\nuniform sampler2D m_uSkyTexture;\r\n#else \r\nuniform samplerCube m_uSkyTexture;\r\n#endif \r\n\r\nuniform float m_uTransparency;\r\n\r\nvoid parseMaterial(out vec3 diffuse, out vec3 specular, out float transparent, out float roughness)\r\n{\r\n#if EQUIRECTANGLE || WALLPAPER \r\n diffuse = sampleTexture2D(m_uSkyTexture, m_vTexCoord.xy).xyz; \r\n#endif\r\n#if CUBEMAP\r\n diffuse = sampleTexture3D(m_uSkyTexture, normalize(m_vTexCoord.xyz)).xyz; \r\n#endif \r\n\r\n#if GAMMA\r\n diffuse = sRGBToLinear(diffuse, 2.2); \r\n#endif\r\n transparent = m_uTransparency;\r\n}\r\n","material_solid.inc":"struct MaterialStruct\r\n{\r\n float values[6]; \r\n};\r\nuniform MaterialStruct m_uMaterial;\r\n\r\nconst vec3 dielectricColor = vec3(0.04); \r\n#if ALPHATEST\r\n uniform sampler2D m_uDiffuseTexture;\r\n#endif\r\n\r\nvoid parseMaterial(out vec3 diffuse, out vec3 specular, out float transparent, out float roughness)\r\n{\r\n vec3 albedo = vec3(m_uMaterial.values[0], m_uMaterial.values[1], m_uMaterial.values[2]);\r\n transparent = m_uMaterial.values[3];\r\n\r\n#if ALPHATEST\r\n vec4 texel = sampleTexture2D(m_uDiffuseTexture, m_vTexCoord.xy);\r\n float alphatest = texel.a * transparent;\r\n\r\n if (alphatest < 0.15)\r\n {\r\n discard;\r\n }\r\n#endif\r\n \r\n#if GAMMA\r\n albedo = sRGBToLinear(albedo, 2.2); \r\n#endif\r\n \r\n diffuse = albedo;\r\n specular = dielectricColor;\r\n}\r\n\r\n","material_texture.inc":"struct MaterialStruct\r\n{\r\n float values[6]; \r\n};\r\nuniform MaterialStruct m_uMaterial;\r\n\r\nuniform sampler2D m_uDiffuseTexture;\r\n\r\n#if SECOND_TEXTURE\r\nuniform sampler2D m_uDiffuseTexture2;\r\n#endif\r\n\r\nconst vec3 dielectricColor = vec3(0.04); \r\nvoid parseMaterial(out vec3 diffuse, out vec3 specular, out float transparent, out float roughness)\r\n{\r\n vec4 texel = sampleTexture2D(m_uDiffuseTexture, m_vTexCoord.xy);\r\n#if SECOND_TEXTURE\r\n vec4 texel2 = sampleTexture2D(m_uDiffuseTexture2, m_vTexCoord.xy);\r\n#endif\r\n\r\n transparent = texel.a * m_uMaterial.values[3];\r\n#if SECOND_TEXTURE\r\n transparent = transparent * (1.0 - texel2.a) + texel2.a;\r\n#endif\r\n\r\n#if ALPHATEST\r\n if (transparent < 0.15) \r\n {\r\n discard;\r\n }\r\n#endif\r\n\r\n vec3 albedo = texel.rgb * vec3(m_uMaterial.values[0], m_uMaterial.values[1], m_uMaterial.values[2]);\r\n#if SECOND_TEXTURE \r\n albedo = albedo * texel.a * m_uMaterial.values[3];\r\n albedo = albedo * (1.0 - texel2.a) + texel2.rgb * texel2.a;\r\n#endif\r\n\r\n#if GAMMA\r\n albedo = sRGBToLinear(albedo, 2.2); \r\n#endif\r\n\r\n diffuse = albedo;\r\n specular = dielectricColor;\r\n\r\n}\r\n\r\n","modelo_dark.fs":"#include <globalvars.inc>\r\n#include <gamma.inc>\r\n#include <lights.inc>\r\n#include <shadow.inc>\r\n\r\n#if WEBGL2\r\nlayout(location=0) out vec4 out_color;\r\n#endif\r\n\r\nstruct MaterialStruct\r\n{\r\n float values[6]; \r\n};\r\nuniform MaterialStruct m_uMaterial;\r\n\r\nvoid main()\r\n{\r\n#include <clipping.inc>\r\n\r\n vec3 N = normalize(m_vNormal);\r\n vec3 V = normalize(m_vVertex * m_uPerFrame.cameraPosition.w - m_uPerFrame.cameraPosition.xyz);\r\n vec3 P = m_vVertex;\r\n\r\n#if DOUBLESIDED \r\n N *= -sign(dot(N, V));\r\n#endif\r\n\r\n vec3 diffuse; \r\n float transparent;\r\n vec3 specular;\r\n\r\n diffuse = vec3(m_uMaterial.values[0], m_uMaterial.values[1], m_uMaterial.values[2]);\r\n transparent = m_uMaterial.values[3];\r\n\r\n\r\n float diffuseTerm = dot(vec4(N, 1), m_uSunLight.diffuseMatrix[0] * vec4(N, 1));\r\n \r\n float nv = max(dot(N, -V), 0.0);\r\n float vl = max(dot(V, m_uSunLight.direction), 0.0);\r\n diffuseTerm = diffuseTerm + (nv * (1.0 - vl)) * 0.8;\r\n \r\n vec3 color = m_uSunLight.intensity * vec3(0.5, 0.497, 0.49) * (diffuse * diffuseTerm) + diffuse * 0.5;\r\n \r\n float specularTerm = 0.0;\r\n float nh;\r\n \r\n#if SPECULAR\r\n vec3 H = -normalize(m_uSunLight.direction + V);\r\n nh = max(dot(vec3(0.0, 0.0, N.z), H), 0.0); specularTerm = pow(nh, 10.0); \r\n color += m_uSunLight.intensity * vec3(10.0) * specularTerm;\r\n#endif\r\n\r\n transparent = max(specularTerm, transparent);\r\n\r\n#if SHADOW\r\n color *= shadow(P, N, m_uSunLight.direction);\r\n#endif\r\n \r\n#if WEBGL2\r\n out_color = vec4(color, transparent);\r\n#else\r\n gl_FragColor = vec4(color, transparent); \r\n#endif\r\n \r\n}\r\n\r\n","modelo_main.fs":"#include <globalvars.inc>\r\n#include <gamma.inc>\r\n#include <lights.inc>\r\n#include <shadow.inc>\r\n\r\nvoid parseMaterial(out vec3 diffuse, out vec3 specular, out float transparent, out float roughness);\r\n\r\nvec3 shade(in vec3 diffuse, in vec3 specular, in float roughness, inout float transparent, in vec3 P, in vec3 N, in vec3 V, out vec4 secondColor); \r\n\r\n#if WEBGL2\r\nlayout(location=0) out vec4 out_color;\r\nlayout(location=1) out vec4 out_color1; \r\n#endif\r\n\r\n#if USE_PLATTE\r\nuniform sampler2D m_uPlatteTexture;\r\n#endif\r\n\r\n#if TONE_MAPPING\r\n\r\n#include <tone_mapping.inc>\r\n\r\n#endif\r\n\r\nvoid main()\r\n{\r\n#include <clipping.inc>\r\n\r\n vec3 N = normalize(m_vNormal);\r\n vec3 V = normalize(m_vVertex * m_uPerFrame.cameraPosition.w - m_uPerFrame.cameraPosition.xyz);\r\n vec3 P = m_vVertex;\r\n\r\n#if DOUBLESIDED \r\n N *= -sign(dot(N, V));\r\n#endif\r\n\r\n vec3 diffuse; \r\n float transparent;\r\n vec3 specular;\r\n float roughness;\r\n#if USE_PLATTE\r\n if (m_vColorIndex < 0.495)\r\n {\r\n vec4 platteColor = sampleTexture2D(m_uPlatteTexture, vec2(m_vColorIndex, 0));\r\n diffuse = platteColor.xyz;\r\n transparent = platteColor.w;\r\n }\r\n else\r\n {\r\n parseMaterial(diffuse, specular, transparent, roughness); \r\n }\r\n#else\r\n parseMaterial(diffuse, specular, transparent, roughness);\r\n#endif\r\n\r\n#if !WEBGL2\r\n vec4 out_color1;\r\n#endif\r\n vec3 color = shade(diffuse, specular, roughness, transparent, P, N, V, out_color1); \r\n\r\n#if TONE_MAPPING\r\n color.rgb = toneMapping(color.rgb);\r\n#endif\r\n\r\n#if GAMMA\r\n color = linearTosRGB(color, 2.2);\r\n#endif\r\n\r\n#if WEBGL2\r\n out_color = vec4(color, transparent);\r\n#else\r\n gl_FragColor = vec4(color, transparent); \r\n#endif\r\n \r\n}\r\n","modelo_main.vs":"#if WEBGL2\r\nout vec3 m_vVertex;\r\nout vec3 m_vNormal;\r\nout vec3 m_vTexCoord;\r\nout vec4 m_vColor;\r\nflat out vec4 m_vId;\r\nout float m_vDepth;\r\nout float m_vColorIndex;\r\n#else\r\nvarying vec3 m_vVertex;\r\nvarying vec3 m_vNormal;\r\nvarying vec3 m_vTexCoord;\r\nvarying vec4 m_vColor;\r\nvarying float m_vDepth;\r\nvarying float m_vColorIndex;\r\n#endif\r\n\r\nvoid transform(inout vec4 position, inout vec4 normal, inout vec3 uv, out vec4 worldPosition);\r\n\r\nvoid main()\r\n{\r\n vec4 position = vec4(m_aPosition, 1.0);\r\n#if COMPRESSION\r\nvec4 normal = vec4(m_aNormal0, m_aNormal1, m_aNormal2, 0.0);\r\n#else\r\nvec4 normal = vec4(m_aNormal0, 0.0);\r\n#endif\r\n vec3 uv = vec3(m_aTexCoord, 1.0);\r\n\r\n vec4 worldPosition;\r\n\r\n transform(position, normal, uv, worldPosition);\r\n\r\n#if VISIBILITY\r\n position.z -= step(0.5, m_aMaterial) * position.w * 10000.0;\r\n#endif\r\n\r\n#if USE_PLATTE\r\n m_vColorIndex = m_aMaterial; \r\n#endif\r\n\r\n#include <varying.inc>\r\n\r\n gl_Position = position;\r\n\r\n gl_PointSize = 4.0;\r\n}\r\n\r\n","modelo_ribbon.vs":"#if WEBGL2\r\nout vec3 m_vVertex;\r\nout vec3 m_vNormal;\r\nout vec3 m_vTexCoord;\r\nout vec4 m_vColor;\r\nflat out vec4 m_vId;\r\nout float m_vDepth;\r\nout float m_vColorIndex;\r\n#else\r\nvarying vec3 m_vVertex;\r\nvarying vec3 m_vNormal;\r\nvarying vec3 m_vTexCoord;\r\nvarying vec4 m_vColor;\r\nvarying float m_vDepth;\r\nvarying float m_vColorIndex;\r\n#endif\r\n\r\nuniform vec4 uTexSizeAndInv;\r\nuniform float m_uWidth;\r\nvec2 project(vec4 device)\r\n{\r\n vec3 devicePos = device.xyz / device.w;\r\n vec2 clipPos = (devicePos * 0.5 + 0.5).xy;\r\n return clipPos * uTexSizeAndInv.xy;\r\n}\r\n\r\nvec4 unproject(vec2 screen, float z, float w) \r\n{\r\n vec2 clipPos = screen * uTexSizeAndInv.zw;\r\n vec2 devicePos = clipPos * 2.0 - 1.0;\r\n return vec4(devicePos * w, z, w);\r\n}\r\n\r\nconst float PI = 3.14159;\r\nvoid main()\r\n{\r\n vec2 sLast = project(m_uPerFrame.vpMatrix * vec4(m_aNormal0.xyz, 1.0));\r\n vec2 sNext = project(m_uPerFrame.vpMatrix * vec4(m_aColor.xyz, 1.0));\r\n vec4 dCurrent = m_uPerFrame.vpMatrix * vec4(m_aPosition.xyz, 1.0);\r\n vec2 sCurrent = project(dCurrent);\r\n\r\n vec2 normal1 = (sLast - sCurrent);\r\n vec2 normal2 = (sCurrent - sNext);\r\n vec2 normal = normalize(normal1 + normal2);\r\n float off = m_aColor.w;\r\n \r\n vec2 dir = vec2(normal.y, -normal.x) * off;\r\n vec2 pos = sCurrent + dir * m_uWidth;\r\n\r\n vec4 worldPosition = vec4(m_aPosition.xyz, 1.0);\r\n\r\n vec3 uv = vec3(m_aTexCoord.x, (off + 1.0) * 0.5, 1.0);\r\n\r\n#include <varying.inc>\r\n\r\n gl_Position = unproject(pos, dCurrent.z, dCurrent.w);\r\n}\r\n\r\n","normaldepth_main.fs":"#include <globalvars.inc>\r\n\r\n#if WEBGL2\r\n out vec4 out_color;\r\n#endif\r\n\r\n#if ALPHATEST\r\n uniform sampler2D m_uDiffuseTexture;\r\n#endif\r\n\r\nvoid main()\r\n{\r\n#include <clipping.inc>\r\n\r\n#if ALPHATEST\r\n vec4 texel = sampleTexture2D(m_uDiffuseTexture, m_vTexCoord.xy);\r\n if (texel.a < 0.15)\r\n {\r\n discard;\r\n }\r\n#endif\r\n\r\n vec4 normal = vec4(m_vNormal, 0.0);\r\n\r\n#if !WORLDSPACE_NORMAL\r\n normal = m_uPerFrame.viewMatrix * normal;\r\n#endif\r\n\r\n#if DOUBLESIDED\r\n \r\n#if WORLDSPACE_NORMAL\r\n vec4 eyeNormal = m_uPerFrame.viewMatrix * normal;\r\n#else\r\n vec4 eyeNormal = normal;\r\n#endif\r\n\r\n vec4 eyeDir = m_uPerFrame.viewMatrix * vec4(m_vVertex, 1.0);\r\n normal *= -sign(dot(eyeNormal.xyz, eyeDir.xyz));\r\n\r\n#endif\r\n \r\n vec3 n = normalize(normal.xyz);\r\n\r\n#if ENCODE_NORMAL\r\n n = (n + vec3(1.0)) * 0.5;\r\n#endif\r\n\r\n#if WEBGL2\r\n out_color = vec4(n, m_vDepth); \r\n#else\r\n gl_FragColor = vec4(n, m_vDepth);\r\n#endif\r\n \r\n}\r\n","pbr.fs":"#if WEBGL2\r\nin vec3 m_vVertex;\r\nin vec3 m_vNormal;\r\nin vec3 m_vTexCoord;\r\nin mat3 m_vTBN;\r\nin vec4 m_vColor;\r\nflat in vec4 m_vId;\r\nin float m_vDepth;\r\nin float m_vColorIndex;\r\n#else \r\n\r\nvarying vec3 m_vVertex;\r\nvarying vec3 m_vNormal;\r\nvarying vec3 m_vTexCoord;\r\nvarying mat3 m_vTBN;\r\nvarying vec4 m_vColor;\r\nvarying float m_vDepth;\r\nvarying float m_vColorIndex;\r\n#endif\r\n\r\n#include <uniform.inc>\r\n\r\n\r\n\r\n\r\n","pbr_main.fs":"#include <globalvars.inc>\r\n#include <gamma.inc>\r\n#include <lights.inc>\r\n#include <shadow.inc>\r\n\r\nvoid parseMaterial(out vec4 baseColor, out vec3 normal, out vec2 metallicRoughness, out vec3 emissiveColor, out float occlusion);\r\n\r\nvec4 shade(in vec4 baseColor, in vec3 normal, in vec3 V, in vec2 metallicRoughness, in vec3 emissiveColor, in float occlusion); \r\n\r\n#if WEBGL2\r\nlayout(location=0) out vec4 out_color;\r\nlayout(location=1) out vec4 out_color1; \r\n#endif\r\n\r\n#if USE_PLATTE\r\nuniform sampler2D m_uPlatteTexture;\r\n#endif\r\n\r\n#if TONE_MAPPING \r\n\r\n#include <tone_mapping.inc>\r\n\r\n#endif \r\n\r\nvoid main()\r\n{\r\n#include <clipping.inc>\r\n\r\n vec3 N = normalize(m_vNormal);\r\n vec3 V = normalize(m_vVertex - m_uPerFrame.cameraPosition.xyz);\r\n vec3 P = m_vVertex;\r\n\r\n#if DOUBLESIDED \r\n N *= -sign(dot(N, V));\r\n#endif\r\n\r\n vec4 baseColor; \r\n vec3 normal;\r\n vec2 metallicRoughness;\r\n vec3 emissiveColor;\r\n float occlusion;\r\n#if USE_PLATTE\r\n if (m_vColorIndex < 0.495)\r\n {\r\n vec4 platteColor = sampleTexture2D(m_uPlatteTexture, vec2(m_vColorIndex, 0));\r\n baseColor = platteColor;\r\n }\r\n else\r\n {\r\n parseMaterial(baseColor, normal, metallicRoughness, emissiveColor, occlusion);\r\n }\r\n#else\r\n parseMaterial(baseColor, normal, metallicRoughness, emissiveColor, occlusion);\r\n#endif\r\n vec4 color = shade(baseColor, normal, V, metallicRoughness, emissiveColor, occlusion);\r\n\r\n#if TONE_MAPPING\r\n color.rgb = toneMapping(color.rgb);\r\n#endif\r\n#if GAMMA\r\n color.xyz = linearTosRGB(color.xyz, 2.2);\r\n#endif\r\n\r\n#if WEBGL2\r\n out_color = color;\r\n#else\r\n gl_FragColor = color; \r\n#endif\r\n \r\n}\r\n","pbr_main.vs":"#if WEBGL2\r\nout vec3 m_vVertex;\r\nout vec3 m_vNormal;\r\nout vec3 m_vTexCoord;\r\nout mat3 m_vTBN;\r\nout vec4 m_vColor;\r\nflat out vec4 m_vId;\r\nout float m_vDepth;\r\nout float m_vColorIndex;\r\n#else\r\nvarying vec3 m_vVertex;\r\nvarying vec3 m_vNormal;\r\nvarying vec3 m_vTexCoord;\r\nvarying mat3 m_vTBN;\r\nvarying vec4 m_vColor;\r\nvarying float m_vDepth;\r\nvarying float m_vColorIndex;\r\n#endif\r\n\r\nvoid transform(inout vec4 position, inout vec4 normal, inout vec3 uv, out vec4 worldPosition);\r\n\r\nvoid main()\r\n{\r\n vec4 position = vec4(m_aPosition, 1.0);\r\n#if COMPRESSION\r\n vec4 normal = vec4(m_aNormal0, m_aNormal1, m_aNormal2);\r\n#else\r\n vec4 normal = vec4(m_aNormal0, 0.0);\r\n#endif\r\n vec3 uv = vec3(m_aTexCoord, 1.0);\r\n\r\n vec4 worldPosition;\r\n\r\n transform(position, normal, uv, worldPosition);\r\n\r\n#if VISIBILITY\r\n position.z -= step(0.5, m_aMaterial) * position.w * 10000.0;\r\n#endif\r\n\r\n#if HAS_TANGENT\r\n vec3 tangent = (m_uPerNode.modelMatrix * vec4(m_aTangent, 0.0)).xyz;\r\n vec3 biTangent = normalize(cross(normal.xyz, tangent));\r\n m_vTBN = mat3(normalize(tangent), biTangent, normal.xyz);\r\n#endif\r\n\r\n#if USE_PLATTE\r\n m_vColorIndex = m_aMaterial; \r\n#endif\r\n\r\n#include <varying.inc>\r\n\r\n gl_Position = position;\r\n\r\n gl_PointSize = 4.0;\r\n}\r\n\r\n","shade_adhoc.inc":"\r\n\r\nvec3 shade(in vec3 diffuse, in vec3 specular, in float roughness, inout float transparent, in vec3 P, in vec3 N, in vec3 V, out vec4 secondColor)\r\n{\r\n#if BASE\r\n vec3 color = diffuse;\r\n#else\r\n float diffuseTerm = dot(vec4(N, 1), m_uSunLight.diffuseMatrix[0] * vec4(N, 1));\r\n \r\n float nv = max(dot(N, -V), 0.0);\r\n float vl = max(dot(V, m_uSunLight.direction), 0.0);\r\n diffuseTerm = diffuseTerm + (nv * (1.0 - vl)) * 0.8;\r\n \r\n vec3 color = m_uSunLight.intensity * vec3(0.5, 0.497, 0.49) * (diffuse * diffuseTerm) + diffuse * 0.5;\r\n \r\n float specularTerm = 0.0;\r\n float nh;\r\n \r\n#if SPECULAR\r\n vec3 H = -normalize(m_uSunLight.direction + V);\r\n nh = max(dot(vec3(0.0, 0.0, N.z), H), 0.0);\r\n specularTerm = pow(nh, 20.0); \r\n color += m_uSunLight.intensity * vec3(0.5) * specularTerm;\r\n#endif\r\n\r\n#if SHADOW\r\n color *= shadow(P, N, m_uSunLight.direction);\r\n#endif\r\n\r\n#endif\r\n return color;\r\n}\r\n\r\n\r\n","shade_color_multi_layer.inc":"uniform sampler2D m_uPlatteTexture;\r\nuniform sampler2D m_uDensityTexture;\r\nuniform vec2 m_uInvResolution;\r\nuniform float m_uAlphaCorrection;\r\nuniform mat4 m_uInvTransform;\r\nuniform float m_uLayers;\r\nuniform vec2 m_uGridSize;\r\nuniform float m_uSampleNumber;\r\nuniform float m_uInstanceFilter;\r\nconst float STEP = 1.73205081 / 256.0;\r\n\r\nvec4 getColor(float intensity) {\r\n vec2 _uv = vec2(intensity, 0);\r\n vec4 color = sampleTexture2D(m_uPlatteTexture, _uv);\r\n float alpha = 1.0;\r\n return vec4(color.r, color.g, color.b, alpha); \r\n}\r\n\r\nfloat sampleAs3DTexture( vec3 texCoord ) {\r\n texCoord += vec3(0.5); float z = clamp(texCoord.z, 0.0, 0.99);\r\n float sliceNumber = floor(z * m_uLayers);\r\n\r\n float top = min(m_uSampleNumber + sliceNumber + 1.0, m_uLayers - 1.0);\r\n float bottom = max(sliceNumber - m_uSampleNumber, 0.0);\r\n float totalSamples = 0.0;\r\n\r\n texCoord.y = 1.0 - texCoord.y;\r\n texCoord.xy /= m_uGridSize;\r\n float intensity = 0.0;\r\n float heightLength = 0.0;\r\n int i;\r\n for (i = int(bottom); i <= int(top); i++)\r\n {\r\n vec2 texCoordSlice = texCoord.xy;\r\n texCoordSlice.x += mod(float(i), m_uGridSize.x) / m_uGridSize.x;\r\n texCoordSlice.y += floor(float(i) / m_uGridSize.x) / m_uGridSize.y;\r\n float tempIntensity = sampleTexture2D(m_uDensityTexture, texCoordSlice).x;\r\n intensity += tempIntensity;\r\n heightLength += 1.0;\r\n }\r\n intensity /= max(heightLength,1.0);\r\n\treturn intensity;\r\n}\r\n\r\n vec2 boxIntersection(vec3 orig, vec3 dir) \r\n{\r\n\tconst vec3 box_min = vec3( - 0.5 );\r\n\tconst vec3 box_max = vec3( 0.5 );\r\n\tvec3 inv_dir = 1.0 / dir;\r\n\tvec3 tmin_tmp = ( box_min - orig ) * inv_dir;\r\n vec3 tmax_tmp = ( box_max - orig ) * inv_dir;\r\n\tvec3 tmin = min( tmin_tmp, tmax_tmp );\r\n\tvec3 tmax = max( tmin_tmp, tmax_tmp );\r\n\tfloat t0 = max( tmin.x, max( tmin.y, tmin.z ) );\r\n\tfloat t1 = min( tmax.x, min( tmax.y, tmax.z ) );\r\n\treturn vec2( t0, t1 );\r\n}\r\n\r\nvec3 shade(in vec3 diffuse, in vec3 specular, in float roughness, inout float transparent, in vec3 P, in vec3 N, in vec3 V, out vec4 secondColor)\r\n{\r\n vec2 texc = vec2(gl_FragCoord.x * m_uInvResolution.x,\r\n gl_FragCoord.y * m_uInvResolution.y);\r\n\r\n vec3 frontPos = (m_uInvTransform * vec4(P.x, P.y, P.z, 1.0)).xyz;\r\n vec3 cameraPos = (m_uInvTransform * vec4(m_uPerFrame.cameraPosition.xyz, 1.0)).xyz;\r\n vec3 rayDir = normalize((m_uInvTransform * vec4(V.xyz, 0.0)).xyz);\r\n vec3 backPos = frontPos;\r\n vec2 bounds = boxIntersection(cameraPos, rayDir);\r\n if ( bounds.x > bounds.y ) discard;\r\n bounds.x = max( bounds.x, 0.0 );\r\n vec3 p = cameraPos + bounds.x * rayDir;\r\n vec3 inc = 1.0 / abs( rayDir );\r\n float delta = min( inc.x, min( inc.y, inc.z ) );\r\n\tdelta /= 100.0;\r\n\r\n vec4 accumulatedColor = vec4(0.0);\r\n vec4 tempColor = vec4(0.0);\r\n float d = 0.0;\r\n float widthLength = 0.0;\r\n for ( float t = bounds.x; t < bounds.y; t += delta ) {\r\n\t\td += sampleAs3DTexture( p );\r\n p += rayDir * delta;\r\n widthLength += 1.0;\r\n }\r\n d /= widthLength;\r\n if ( d > m_uInstanceFilter ) {\r\n accumulatedColor = getColor(d);\r\n\t\t accumulatedColor.a = 1.0;\r\n transparent = 1.0;\r\n }else{\r\n\t\t accumulatedColor.a = 0.0;\r\n transparent = 0.0;\r\n }\r\n return accumulatedColor.xyz;\r\n}\r\n","shade_glass.inc":"\r\nvec3 shade(in vec3 diffuse, in vec3 specular, in float roughness, inout float transparent, in vec3 P, in vec3 N, in vec3 V, out vec4 secondColor)\r\n{\r\n#if BASE\r\n vec3 color = diffuse;\r\n#else\r\n vec3 color = diffuse * m_uSunLight.intensity;\r\n \r\n#if SPECULAR\r\n vec3 H = -normalize(m_uSunLight.direction + V);\r\n float nh = max(dot(N, H), 0.0);\r\n color += vec3(pow(nh, roughness));\r\n#endif\r\n#endif\r\n return color;\r\n}\r\n","shade_glyph.inc":"uniform sampler2D m_uFontBitmap;\r\nuniform vec2 m_uTextureSize;\r\nuniform vec3 m_uColor;\r\n\r\nfloat bilinear(vec2 frac2, vec4 v)\r\n{\r\n vec2 cc = mix(v.xz, v.yw, frac2.x);\r\n return mix(cc.x, cc.y, frac2.y);\r\n}\r\n\r\nvec3 shade(in vec3 diffuse, in vec3 specular, in float roughness, inout float transparent, in vec3 P, in vec3 N, in vec3 V, out vec4 secondColor)\r\n{\r\n \r\n vec2 coord = m_vTexCoord.xy * m_uTextureSize;\r\n vec2 p = floor(coord - vec2(0.5)) + vec2(0.5);\r\n vec2 f = coord - p;\r\n vec2 p0 = p / m_uTextureSize;\r\n vec2 pixel = 1.0 / m_uTextureSize;\r\n\r\n vec4 c;\r\n c.x = sampleTexture2D(m_uFontBitmap, p0).x;\r\n c.y = sampleTexture2D(m_uFontBitmap, p0 + vec2(pixel.x, 0)).x;\r\n c.z = sampleTexture2D(m_uFontBitmap, p0 + vec2(0, pixel.y)).x;\r\n c.w = sampleTexture2D(m_uFontBitmap, p0 + vec2(pixel.x, pixel.y)).x;\r\n\r\n float value = bilinear(f, c);\r\n\r\n transparent = step(0.45, value);\r\n if (transparent < 0.5) {\r\n discard;\r\n }\r\n return m_uColor;\r\n}\r\n","shade_oit.inc":"\r\nfloat weight(float z, float a) {\r\n return pow(a, 1.0) * clamp(0.03 / (1e-5 + pow(abs(z) / 200.0, 4.0)), 1e-2, 3e3);\r\n}\r\n\r\nvec3 shade(in vec3 diffuse, in vec3 specular, in float roughness, inout float transparent, in vec3 P, in vec3 N, in vec3 V, out vec4 secondColor)\r\n{\r\n#if BASE\r\n vec3 color = diffuse;\r\n#else\r\n float diffuseTerm = dot(vec4(N, 1), m_uSunLight.diffuseMatrix[0] * vec4(N, 1));\r\n \r\n float nv = max(dot(N, -V), 0.0);\r\n float vl = max(dot(V, m_uSunLight.direction), 0.0);\r\n diffuseTerm = diffuseTerm + (nv * (1.0 - vl)) * 0.8;\r\n \r\n vec3 color = m_uSunLight.intensity * vec3(0.5, 0.497, 0.49) * (diffuse * diffuseTerm) + diffuse * 0.5;\r\n \r\n float specularTerm = 0.0;\r\n float nh;\r\n\r\n#if SPECULAR\r\n vec3 H = -normalize(m_uSunLight.direction + V);\r\n nh = max(dot(N, H), 0.0);\r\n specularTerm = pow(nh, 100.0); \r\n color += m_uSunLight.intensity * vec3(0.5, 0.497, 0.49) * specularTerm;\r\n#endif\r\n\r\n float w = weight(m_vDepth, transparent);\r\n color = diffuse * w * transparent;\r\n secondColor = vec4(vec3(transparent * w), 1.0);\r\n\r\n#endif\r\n return color;\r\n}\r\n","shade_pbr.inc":"uniform sampler2D m_uBrdfLut;\r\nuniform samplerCube m_uDiffuseEnvMap;\r\nuniform samplerCube m_uSpecularEnvMap;\r\nuniform float m_uTotalLod;\r\nconst float M_PI = 3.1416926;\r\nvec3 specularReflection(vec3 reflectance0, vec3 reflectance90, float VdotH)\r\n{\r\n return reflectance0 + (reflectance90 - reflectance0) * pow(clamp(1.0 - VdotH, 0.0, 1.0), 5.0);\r\n}\r\n\r\n\r\nfloat geometricOcclusion(float NdotL, float NdotV, float alphaRoughness)\r\n{\r\n float r = alphaRoughness;\r\n\r\n float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\r\n float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\r\n return attenuationL * attenuationV;\r\n}\r\n\r\nfloat microfacetDistribution(float alphaRoughness, float NdotH)\r\n{\r\n float roughnessSq = alphaRoughness * alphaRoughness;\r\n float f = (NdotH * roughnessSq - NdotH) * NdotH + 1.0;\r\n return roughnessSq / (M_PI * f * f);\r\n}\r\n\r\nvec3 diffuse(vec3 diffuseColor)\r\n{\r\n return diffuseColor / M_PI;\r\n}\r\n\r\nvec3 getIBLContribution(float perceptualRoughness, vec3 n, float NdotV, vec3 diffuseColor, vec3 specularColor, vec3 reflection)\r\n{\r\n \r\n vec3 brdf = sampleTexture2D(m_uBrdfLut, vec2(NdotV, 1.0 - perceptualRoughness)).rgb;\r\n brdf = pow(brdf,vec3(2.2));\r\n \r\n#if DIFFUSE_EVN_MAP\r\n vec3 diffuseLight = sampleTexture3D(m_uDiffuseEnvMap, vec3(n.x, n.z, -n.y)).rgb;\r\n#else\r\n vec3 diffuseLight = vec3(1.0);\r\n\r\n#if SPECULAR_ENV_MAP\r\n float lod = (perceptualRoughness * m_uTotalLod);\r\n vec3 specularLight = sampleTexture3D(m_uSpecularEnvMap, vec3(-reflection.x, -reflection.z, reflection.y), lod).rgb;\r\n#else\r\n vec3 specularLight = vec3(1.0);\r\n#endif\r\n\r\n vec3 diffuse = diffuseLight * diffuseColor;\r\n vec3 specular = specularLight * (specularColor * brdf.x + brdf.y);\r\n\r\n return diffuse + specular;\r\n}\r\n\r\nvec4 shade(in vec4 baseColor, in vec3 normal, in vec3 V, in vec2 metallicRoughness, in vec3 emissiveColor, in float occlusion)\r\n{\r\n#if BASE\r\n vec3 color = baseColor;\r\n#else\r\n float roughness = clamp(metallicRoughness.y, 0.04, 1.0);\r\n float metallic = clamp(metallicRoughness.x, 0.0, 1.0);\r\n\r\n#if HAS_NORMALMAP\r\n\r\n#if HAS_TANGENT\r\n vec3 worldNormal = normalize(m_vTBN * normal);\r\n#else\r\n vec3 pos_dx = dFdx(m_vVertex);\r\n vec3 pos_dy = dFdy(m_vVertex);\r\n vec3 tex_dx = dFdx(m_vTexCoord);\r\n vec3 tex_dy = dFdy(m_vTexCoord);\r\n vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\r\n t = normalize(t - m_vNormal * dot(m_vNormal, t));\r\n vec3 b = normalize(cross(m_vNormal, t));\r\n mat3 tbn = mat3(t, b, m_vNormal);\r\n vec3 worldNormal = normalize(tbn * normal);\r\n#endif\r\n\r\n#else\r\n vec3 worldNormal = normalize(m_vNormal);\r\n#endif\r\n\r\n vec3 l = normalize(m_uSunLight.direction); vec3 h = normalize(l + V); vec3 reflection = -normalize(reflect(V, worldNormal));\r\n\r\n float NdotL = clamp(dot(worldNormal, l), 0.001, 1.0);\r\n float NdotV = abs(dot(worldNormal, V)) + 0.001;\r\n float NdotH = clamp(dot(worldNormal, h), 0.0, 1.0);\r\n float LdotH = clamp(dot(l, h), 0.0, 1.0);\r\n float VdotH = clamp(dot(V, h), 0.0, 1.0);\r\n\r\n vec3 f0 = vec3(0.04);\r\n vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\r\n diffuseColor *= 1.0 - metallic;\r\n vec3 specularColor = mix(f0, baseColor.rgb, metallic);\r\n float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\r\n\r\n float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\r\n vec3 specularEnvironmentR0 = specularColor.rgb;\r\n vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\r\n\r\n float alphaRoughness = roughness * roughness;\r\n vec3 F = specularReflection(specularEnvironmentR0, specularEnvironmentR90, VdotH);\r\n float G = geometricOcclusion(NdotL, NdotV, alphaRoughness);\r\n float D = microfacetDistribution(alphaRoughness, NdotH);\r\n vec3 diffuseContrib = (1.0 - F) * diffuse(diffuseColor);\r\n vec3 specContrib = max(vec3(0.0), F * G * D / (4.0 * NdotL * NdotV));\r\n vec3 color = NdotL * (diffuseContrib + specContrib);\r\n\r\n diffuseColor *= m_uSunLight.intensity;\r\n specularColor *= m_uSunLight.intensity;\r\n color += m_uMaterial.values[9] * getIBLContribution(roughness, worldNormal, NdotV, diffuseColor, specularColor, reflection);\r\n\r\n#if SHADOW\r\n color *= shadow(m_vVertex, normal, m_uSunLight.direction);\r\n#endif\r\n\r\n#if HAS_EMISSIVEMAP\r\n color += emissiveColor;\r\n#endif\r\n\r\n#if HAS_OCCLUSIONMAP\r\n color *= occlusion;\r\n#endif\r\n#endif\r\n return vec4(color, baseColor.a);\r\n}\r\n","shade_pbs.inc":"","shade_plain.inc":"vec3 shade(in vec3 diffuse, in vec3 specular, in float roughness, inout float transparent, in vec3 P, in vec3 N, in vec3 V, out vec4 secondColor)\r\n{\r\n return diffuse;\r\n}\r\n","shade_volume.inc":"uniform sampler2D m_uGradientTexture;\r\nuniform sampler2D m_uPlatteTexture;\r\nuniform sampler2D m_uDensityTexture;\r\nuniform vec2 m_uInvResolution;\r\nuniform float m_uAlphaCorrection;\r\nuniform mat4 m_uInvTransform;\r\n\r\nconst float STEP = 1.73205081 / 256.0;\r\n\r\nvec4 getColor(float density) \r\n{\r\n density = min(0.26, density) / 0.26;\r\n vec4 color = sampleTexture2D(m_uPlatteTexture, vec2(density, 0.0));\r\n\r\n float alpha = max(density, 0.02);\r\n \r\n return vec4(color.rgb, alpha); \r\n}\r\n\r\nvec4 sampleDensity(vec3 position) \r\n{\r\n \r\n \r\n \r\n \r\n \r\n vec3 xyz = position + vec3(0.5);\r\n \r\n float density = sampleTexture2D(m_uDensityTexture, xyz.xy).x;\r\n \r\n vec4 res = getColor(density);\r\n\r\n \r\n res.w *= 2.0 * (xyz.z * xyz.z * xyz.z) - 3.0 * (xyz.z * xyz.z) + 1.0; \r\n return res;\r\n}\r\n\r\n vec2 boxIntersection(vec3 ro, vec3 rd) \r\n{\r\n vec3 m = 1.0 / rd; vec3 n = m * ro; vec3 k = abs(m) * 0.5;\r\n \r\n vec3 t1 = -n - k;\r\n vec3 t2 = -n + k;\r\n\r\n float tN = max(max(t1.x, t1.y), t1.z);\r\n float tF = min(min(t2.x, t2.y), t2.z);\r\n \r\n if( tN > tF || tF < 0.0) return vec2(-1.0); \r\n return vec2(tN, tF);\r\n}\r\n\r\nvec3 shade(in vec3 diffuse, in vec3 specular, in float roughness, inout float transparent, in vec3 P, in vec3 N, in vec3 V, out vec4 secondColor)\r\n{\r\n vec3 frontPos = (m_uInvTransform * vec4(P.x, P.y, P.z, 1.0)).xyz;\r\n vec3 cameraPos = (m_uInvTransform * vec4(m_uPerFrame.cameraPosition.xyz, 1.0)).xyz;\r\n vec3 rayDir = normalize((m_uInvTransform * vec4(V.xyz, 0.0)).xyz);\r\n vec3 backPos = frontPos;\r\n vec2 t = boxIntersection(cameraPos, rayDir);\r\n if (t.x > -1.0 && t.y > -1.0)\r\n {\r\n backPos = cameraPos + rayDir * t.y;\r\n }\r\n \r\n float rayLength = length(backPos - frontPos);\r\n\r\n int steps = int(max(1.0, floor(rayLength / STEP)));\r\n \r\n float delta = rayLength / float(steps);\r\n \r\n vec3 deltaDirection = rayDir * delta;\r\n \r\n vec3 currentPosition = frontPos;\r\n \r\n vec4 accumulatedColor = vec4(0.0);\r\n \r\n float accumulatedAlpha = 0.0;\r\n \r\n vec4 colorSample;\r\n float alphaSample;\r\n \r\n#if WEBGL2\r\n for (int i = 0; i < steps; i++)\r\n {\r\n#else\r\n for (int i = 0; i < 256; i++) \r\n {\r\n if (i >= steps) \r\n {\r\n break;\r\n }\r\n#endif\r\n colorSample = sampleDensity(currentPosition);\r\n \r\n alphaSample = colorSample.a * m_uAlphaCorrection;\r\n \r\n alphaSample *= (1.0 - accumulatedAlpha);\r\n \r\n accumulatedColor += colorSample * alphaSample;\r\n \r\n accumulatedAlpha += alphaSample;\r\n \r\n currentPosition += deltaDirection;\r\n }\r\n \r\n transparent = accumulatedAlpha;\r\n \r\n return accumulatedColor.xyz;\r\n}\r\n","shade_volume_multi_layer.inc":"uniform sampler2D m_uDensityTexture;\r\nuniform sampler2D m_uPlatteTexture;\r\nuniform vec2 m_uInvResolution;\r\nuniform float m_uAlphaCorrection;\r\nuniform mat4 m_uInvTransform;\r\nuniform float m_uLayers;\r\nuniform vec2 m_uGridSize;\r\nuniform float m_uSampleNumber;\r\nconst float STEP = 1.73205081 / 256.0;\r\n\r\nvec4 getColor(float intensity) {\r\n intensity = min(0.26, intensity) / 0.26;\r\n vec2 _uv = vec2(intensity, 0);\r\n vec4 color = sampleTexture2D(m_uPlatteTexture, _uv);\r\n float alpha = intensity;\r\n if (alpha < 0.03)\r\n {\r\n alpha = 0.02;\r\n }\r\n\r\n return vec4(color.r, color.g, color.b, alpha); \r\n}\r\n\r\nvec4 sampleAs3DTexture(vec3 texCoord) {\r\n texCoord += vec3(0.5);\r\n vec4 heightSlice1;\r\n vec4 heightSlice2;\r\n vec4 colorSlice1;\r\n vec4 colorSlice2;\r\n vec2 texCoordSlice1;\r\n vec2 texCoordSlice2;\r\n\r\n float z = clamp(texCoord.z, 0.0, 0.99);\r\n\r\n float sliceNumber = floor(z * m_uLayers);\r\n\r\n float top = min(m_uSampleNumber + sliceNumber + 1.0, m_uLayers - 1.0);\r\n float bottom = max(sliceNumber - m_uSampleNumber, 0.0);\r\n\r\n float totalSamples = 0.0;\r\n\r\n texCoord.y = 1.0 - texCoord.y;\r\n texCoord.xy /= m_uGridSize;\r\n\r\n float intensity = 0.0;\r\n float sampleWeight;\r\n int i;\r\n#if WEBGL2\r\n for (i = int(bottom); i <= int(top); i++)\r\n {\r\n#else\r\n for (int j = 0; j < 256; j++)\r\n {\r\n i = int(bottom) + j;\r\n if (i > int(top))\r\n {\r\n break;\r\n }\r\n#endif\r\n vec2 texCoordSlice = texCoord.xy;\r\n texCoordSlice.x += (mod(float(i), m_uGridSize.x) / m_uGridSize.x);\r\n texCoordSlice.y += floor(float(i) / m_uGridSize.x) / m_uGridSize.y;\r\n\r\n float tempIntensity = sampleTexture2D(m_uDensityTexture, texCoordSlice).x;\r\n sampleWeight = (m_uSampleNumber + 1.0) - abs(z * m_uLayers - (float(i)));\r\n intensity += sampleWeight * tempIntensity;\r\n totalSamples += sampleWeight;\r\n }\r\n\r\n if (totalSamples != 0.0)\r\n {\r\n intensity /= totalSamples; \r\n } \r\n\r\n return getColor(intensity);\r\n}\r\n\r\n\r\n vec2 boxIntersection(vec3 ro, vec3 rd) \r\n{\r\n vec3 m = 1.0 / rd; vec3 n = m * ro; vec3 k = abs(m) * 0.5;\r\n \r\n vec3 t1 = -n - k;\r\n vec3 t2 = -n + k;\r\n\r\n float tN = max(max(t1.x, t1.y), t1.z);\r\n float tF = min(min(t2.x, t2.y), t2.z);\r\n \r\n if( tN > tF || tF < 0.0) return vec2(-1.0); \r\n return vec2(tN, tF);\r\n}\r\n\r\nvec3 shade(in vec3 diffuse, in vec3 specular, in float roughness, inout float transparent, in vec3 P, in vec3 N, in vec3 V, out vec4 secondColor)\r\n{\r\n vec2 texc = vec2(gl_FragCoord.x * m_uInvResolution.x,\r\n gl_FragCoord.y * m_uInvResolution.y);\r\n\r\n vec3 frontPos = (m_uInvTransform * vec4(P.x, P.y, P.z, 1.0)).xyz;\r\n vec3 cameraPos = (m_uInvTransform * vec4(m_uPerFrame.cameraPosition.xyz, 1.0)).xyz;\r\n vec3 rayDir = normalize((m_uInvTransform * vec4(V.xyz, 0.0)).xyz);\r\n vec3 backPos = frontPos;\r\n vec2 t = boxIntersection(cameraPos, rayDir);\r\n \r\n if (t.x > -1.0 && t.y > -1.0)\r\n {\r\n backPos = cameraPos + rayDir * t.y;\r\n }\r\n\r\n float rayLength = length(backPos - frontPos);\r\n\r\n int steps = int(max(1.0, floor(rayLength / STEP)));\r\n\r\n float delta = rayLength / float(steps);\r\n\r\n vec3 deltaDirection = rayDir * delta;\r\n\r\n vec3 currentPosition = frontPos;\r\n\r\n vec4 accumulatedColor = vec4(0.0);\r\n\r\n float accumulatedAlpha = 0.0;\r\n\r\n vec4 colorSample;\r\n float alphaSample;\r\n\r\n \r\n#if WEBGL2\r\n for (int i = 0; i < steps; i++)\r\n {\r\n#else\r\n for (int i = 0; i < 256; i++) \r\n {\r\n if (i >= steps)\r\n {\r\n break;\r\n }\r\n#endif\r\n colorSample = sampleAs3DTexture(currentPosition);\r\n\r\n alphaSample = colorSample.a * m_uAlphaCorrection;\r\n\r\n alphaSample *= (1.0 - accumulatedAlpha);\r\n\r\n accumulatedColor += colorSample * alphaSample;\r\n\r\n accumulatedAlpha += alphaSample;\r\n\r\n currentPosition += deltaDirection;\r\n }\r\n\r\n transparent = accumulatedAlpha;\r\n\r\n return accumulatedColor.xyz;\r\n}\r\n","shadow.inc":"#if SHADOW\r\nuniform sampler2D m_uShadowTexture0;\r\nuniform sampler2D m_uShadowTexture1;\r\n#if MOBILE\r\n\r\nfloat shadow(vec3 P, vec3 N, vec3 L)\r\n{\r\n mat4 matrix = m_uSunLight.shadowMatrix0;\r\n \r\n float backside = min(1.0, max(0.0, dot(N, -L) * 10.0));\r\n vec4 v = matrix * vec4(P, 1);\r\n vec3 t = (v.xyz / v.w + vec3(1.0)) * 0.5;\r\n\r\n vec2 coord = t.xy;\r\n float fz = sampleTexture2D(m_uShadowTexture0, coord).x;\r\n float fd = exp(85.0 * (fz - t.z));\r\n float lit = min(fd, 1.0) * backside; return lit * 0.2 + 0.8; }\r\n\r\n#else\r\n\r\nuniform float m_uShadowFine;\r\nuniform float m_uShadowSize;\r\nuniform float m_uShadowSplit;\r\n\r\nfloat bilinear(vec2 frac2, vec4 v)\r\n{\r\n vec2 cc = mix(v.xz, v.yw, frac2.x);\r\n return mix(cc.x, cc.y, frac2.y);\r\n}\r\n\r\nfloat pcf2x(float depth, vec2 coord, in float shadowMapSize, in sampler2D shadowTexture, in float isFineShadow)\r\n{\r\n coord = coord * shadowMapSize;\r\n vec2 p = floor(coord - vec2(0.5)) + vec2(0.5);\r\n vec2 f = coord - p;\r\n vec2 p0 = p / shadowMapSize;\r\n float pixel = 1.0 / shadowMapSize;\r\n \r\n vec4 c;\r\n c.x = sampleTexture2D(shadowTexture, p0).x;\r\n c.y = sampleTexture2D(shadowTexture, p0 + vec2(pixel, 0)).x;\r\n c.z = sampleTexture2D(shadowTexture, p0 + vec2(0, pixel)).x;\r\n c.w = sampleTexture2D(shadowTexture, p0 + vec2(pixel, pixel)).x;\r\n \r\n if (isFineShadow > 0.5) {\r\n c = exp(300.0 * c + vec4(-300.0 * depth));\r\n return bilinear(f, c);\r\n } \r\n \r\n float z = bilinear(f, c);\r\n return z * exp(-85.0 * depth);\r\n}\r\n\r\nfloat shadow1(vec3 P, vec3 N, vec3 L, sampler2D shadowTexture, mat4 shadowMatrix)\r\n{\r\n vec4 v = shadowMatrix * vec4(P, 1);\r\n vec3 t = (v.xyz / v.w + vec3(1.0)) * 0.5;\r\n float fd = pcf2x(t.z, t.xy, m_uShadowSize, shadowTexture, m_uShadowFine);\r\n \r\n float backside = min(1.0, max(0.0, dot(N, -L) * 10.0));\r\n float lit = min(fd, 1.0) * backside; return lit * 0.2 + 0.8; }\r\n\r\n\r\nfloat shadow(vec3 P, vec3 N, vec3 L)\r\n{\r\n if (gl_FragCoord.z < m_uShadowSplit) {\r\n return shadow1(P, N, L, m_uShadowTexture0, m_uSunLight.shadowMatrix0);\r\n } else {\r\n return shadow1(P, N, L, m_uShadowTexture1, m_uSunLight.shadowMatrix1);\r\n }\r\n}\r\n\r\n#endif\r\n\r\n#endif\r\n","tone_mapping.inc":"uniform float uExposure;\r\n\r\nfloat getLuminance(vec3 c)\r\n{\r\n return dot(c, vec3(0.22, 0.707, 0.071));\r\n}\r\n\r\nvec3 toneMapping(vec3 color) \r\n{\r\n float lum = getLuminance(color);\r\n float lumTm = lum * uExposure;\r\n float scale = lumTm / (1.0 + lumTm);\r\n\r\n return color * scale / lum;\r\n}\r\n","transform_barchart.inc":"uniform sampler2D m_uData;\r\nuniform ivec2 m_uRes;\r\nuniform float m_uThickness;\r\nuniform sampler2D m_uPlatte;\r\n \r\nconst vec2 offsets[4] = vec2[](vec2(-1, -1), vec2(1, -1), vec2(-1, 1), vec2(1, 1));\r\nconst int columns[6] = int[](0, 0, 1, 1, 2, 2);\r\nconst float signs[6] = float[](-1.0, 1.0, -1.0, 1.0, -1.0, 1.0);\r\n\r\nvoid transform(inout vec4 position, inout vec4 normal, inout vec3 uv, out vec4 worldPosition)\r\n{\r\n float height = textureLod(m_uData, (position.xy + 1.0) * 0.5, 0.0).r;\r\n \r\n float xSize = m_uThickness / float(m_uRes.x); float ySize = m_uThickness / float(m_uRes.y);\r\n int vertexId = gl_VertexID % 24;\r\n\r\n int faceIndex = vertexId / 4;\r\n int vertIndex = vertexId % 4;\r\n\r\n int c0 = columns[faceIndex];\r\n int c1 = (c0 + 1) % 3;\r\n int c2 = (c0 + 2) % 3;\r\n\r\n float stretch[3];\r\n stretch[c0] = signs[faceIndex];\r\n stretch[c1] = offsets[vertIndex][0];\r\n stretch[c2] = offsets[vertIndex][1];\r\n\r\n position.x += stretch[0] * xSize;\r\n position.y += stretch[1] * ySize;\r\n position.z += (stretch[2] + 1.0) * 0.5 * height;\r\n\r\n#if MODEL_TRANSFORM\r\n position = m_uPerNode.modelMatrix * position;\r\n normal = m_uPerNode.modelMatrix * normal;\r\n#endif\r\n\r\n m_vColor = textureLod(m_uPlatte, vec2(height, 0.0), 0.0);\r\n\r\n worldPosition = position;\r\n position = m_uPerFrame.vpMatrix * position;\r\n}\r\n","transform_barchart_wireframe.inc":"uniform sampler2D m_uData;\r\nuniform ivec2 m_uRes;\r\nuniform float m_uThickness;\r\n \r\nconst vec2 offsets[4] = vec2[](vec2(1, -1), vec2(1, 1), vec2(-1, 1), vec2(-1, -1));\r\nconst float signs[2] = float[](0.0, 1.0);\r\n\r\nvoid transform(inout vec4 position, inout vec4 normal, inout vec3 uv, out vec4 worldPosition)\r\n{\r\n float height = textureLod(m_uData, (position.xy + 1.0) * 0.5, 0.0).r;\r\n \r\n float xSize = m_uThickness / float(m_uRes.x); float ySize = m_uThickness / float(m_uRes.y);\r\n int vertexId = gl_VertexID % 8;\r\n\r\n int heightIndex = vertexId / 4;\r\n int vertIndex = vertexId % 4;\r\n\r\n float stretch[3];\r\n stretch[0] = offsets[vertIndex][0];\r\n stretch[1] = offsets[vertIndex][1];\r\n stretch[2] = signs[heightIndex];\r\n\r\n position.x += 1.005 * stretch[0] * xSize; position.y += 1.005 * stretch[1] * ySize;\r\n position.z += 1.005 * stretch[2] * height;\r\n\r\n#if MODEL_TRANSFORM\r\n position = m_uPerNode.modelMatrix * position;\r\n normal = m_uPerNode.modelMatrix * normal;\r\n#endif\r\n\r\n worldPosition = position;\r\n position = m_uPerFrame.vpMatrix * position;\r\n}\r\n","transform_heightmap.inc":"uniform sampler2D m_uData;\r\nuniform sampler2D m_uPlatte;\r\nvoid transform(inout vec4 position, inout vec4 normal, inout vec3 uv, out vec4 worldPosition)\r\n{\r\n#if WEBGL2\r\n float height = texture(m_uData, uv.xy).x;\r\n#else\r\n float height = texture2DLod(m_uData, uv.xy, 0.0).a;\r\n#endif\r\n position.z = height;\r\n\r\n#if MODEL_TRANSFORM\r\n position = m_uPerNode.modelMatrix * position;\r\n normal = m_uPerNode.modelMatrix * normal;\r\n#endif\r\n\r\n#if WEBGL2\r\n m_vColor = textureLod(m_uPlatte, vec2(height, 0.0), 0.0);\r\n#else\r\n m_vColor = texture2DLod(m_uPlatte, vec2(height, 0.0), 0.0);\r\n#endif\r\n position = m_uPerFrame.vpMatrix * position;\r\n}\r\n","transform_mark.inc":"\r\nvoid transform(inout vec4 position, inout vec4 normal, inout vec3 uv, out vec4 worldPosition)\r\n{\r\n#if MODEL_TRANSFORM\r\n position = m_uPerNode.modelMatrix * position;\r\n#endif\r\n \r\n position = m_uPerFrame.vpMatrix * position;\r\n}\r\n","transform_nonormal.inc":"\r\nvoid transform(inout vec4 position, inout vec4 normal, inout vec3 uv, out vec4 worldPosition)\r\n{\r\n#if MODEL_TRANSFORM\r\n#if INSTANCING\r\n position = m_aModelMatrix * position;\r\n#else\r\n position = m_uPerNode.modelMatrix * position;\r\n#endif\r\n#endif\r\n\r\n worldPosition = position;\r\n position = m_uPerFrame.vpMatrix * position;\r\n}\r\n","transform_simple.inc":"#if HAS_SKIN\r\n#if WEBGL2\r\nuniform m_bJointMatrix\r\n{\r\n mat4 matrix[128];\r\n} m_uJointMatrix;\r\n#else\r\nuniform sampler2D m_uTransformTexture;\r\n\r\nmat4 transpose(in mat4 inMatrix) {\r\n highp vec4 i0 = inMatrix[0];\r\n highp vec4 i1 = inMatrix[1];\r\n highp vec4 i2 = inMatrix[2];\r\n highp vec4 i3 = inMatrix[3];\r\n\r\n highp mat4 outMatrix = mat4(\r\n vec4(i0.x, i1.x, i2.x, i3.x),\r\n vec4(i0.y, i1.y, i2.y, i3.y),\r\n vec4(i0.z, i1.z, i2.z, i3.z),\r\n vec4(i0.w, i1.w, i2.w, i3.w)\r\n );\r\n\r\n return outMatrix;\r\n}\r\n\r\nmat4 inverse(mat4 m) {\r\n float\r\n a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\r\n a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\r\n a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\r\n a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\r\n\r\n b00 = a00 * a11 - a01 * a10,\r\n b01 = a00 * a12 - a02 * a10,\r\n b02 = a00 * a13 - a03 * a10,\r\n b03 = a01 * a12 - a02 * a11,\r\n b04 = a01 * a13 - a03 * a11,\r\n b05 = a02 * a13 - a03 * a12,\r\n b06 = a20 * a31 - a21 * a30,\r\n b07 = a20 * a32 - a22 * a30,\r\n b08 = a20 * a33 - a23 * a30,\r\n b09 = a21 * a32 - a22 * a31,\r\n b10 = a21 * a33 - a23 * a31,\r\n b11 = a22 * a33 - a23 * a32,\r\n\r\n det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\r\n\r\n return mat4(\r\n a11 * b11 - a12 * b10 + a13 * b09,\r\n a02 * b10 - a01 * b11 - a03 * b09,\r\n a31 * b05 - a32 * b04 + a33 * b03,\r\n a22 * b04 - a21 * b05 - a23 * b03,\r\n a12 * b08 - a10 * b11 - a13 * b07,\r\n a00 * b11 - a02 * b08 + a03 * b07,\r\n a32 * b02 - a30 * b05 - a33 * b01,\r\n a20 * b05 - a22 * b02 + a23 * b01,\r\n a10 * b10 - a11 * b08 + a13 * b06,\r\n a01 * b08 - a00 * b10 - a03 * b06,\r\n a30 * b04 - a31 * b02 + a33 * b00,\r\n a21 * b02 - a20 * b04 - a23 * b00,\r\n a11 * b07 - a10 * b09 - a12 * b06,\r\n a00 * b09 - a01 * b07 + a02 * b06,\r\n a31 * b01 - a30 * b03 - a32 * b00,\r\n a20 * b03 - a21 * b01 + a22 * b00) / det;\r\n}\r\n#endif\r\n#endif\r\n\r\n#if HAS_SKIN\r\nmat4 getJointMatrix(in vec4 indices) {\r\n#if WEBGL2\r\n return m_aWeight0.x * m_uJointMatrix.matrix[int(indices.x)] +\r\n m_aWeight0.y * m_uJointMatrix.matrix[int(indices.y)] +\r\n m_aWeight0.z * m_uJointMatrix.matrix[int(indices.z)] +\r\n m_aWeight0.w * m_uJointMatrix.matrix[int(indices.w)];\r\n#else\r\n vec4 col1, col2, col3, col4;\r\n col1 = texture2DLod(m_uTransformTexture, vec2((indices.x * 4.0 ) / 511.0, 0.0), 0.0);\r\n col2 = texture2DLod(m_uTransformTexture, vec2((indices.x * 4.0 + 1.0) / 511.0, 0.0), 0.0);\r\n col3 = texture2DLod(m_uTransformTexture, vec2((indices.x * 4.0 + 2.0) / 511.0, 0.0), 0.0);\r\n col4 = texture2DLod(m_uTransformTexture, vec2((indices.x * 4.0 + 3.0) / 511.0, 0.0), 0.0);\r\n mat4 matrix1 = mat4(col1, col2, col3, col4); \r\n col1 = texture2DLod(m_uTransformTexture, vec2((indices.y * 4.0 ) / 511.0, 0.0), 0.0);\r\n col2 = texture2DLod(m_uTransformTexture, vec2((indices.y * 4.0 + 1.0) / 511.0, 0.0), 0.0);\r\n col3 = texture2DLod(m_uTransformTexture, vec2((indices.y * 4.0 + 2.0) / 511.0, 0.0), 0.0);\r\n col4 = texture2DLod(m_uTransformTexture, vec2((indices.y * 4.0 + 3.0) / 511.0, 0.0), 0.0);\r\n mat4 matrix2 = mat4(col1, col2, col3, col4);\r\n col1 = texture2DLod(m_uTransformTexture, vec2((indices.z * 4.0 ) / 511.0, 0.0), 0.0);\r\n col2 = texture2DLod(m_uTransformTexture, vec2((indices.z * 4.0 + 1.0) / 511.0, 0.0), 0.0);\r\n col3 = texture2DLod(m_uTransformTexture, vec2((indices.z * 4.0 + 2.0) / 511.0, 0.0), 0.0);\r\n col4 = texture2DLod(m_uTransformTexture, vec2((indices.z * 4.0 + 3.0) / 511.0, 0.0), 0.0);\r\n mat4 matrix3 = mat4(col1, col2, col3, col4);\r\n col1 = texture2DLod(m_uTransformTexture, vec2((indices.w * 4.0 ) / 511.0, 0.0), 0.0);\r\n col2 = texture2DLod(m_uTransformTexture, vec2((indices.w * 4.0 + 1.0) / 511.0, 0.0), 0.0);\r\n col3 = texture2DLod(m_uTransformTexture, vec2((indices.w * 4.0 + 2.0) / 511.0, 0.0), 0.0);\r\n col4 = texture2DLod(m_uTransformTexture, vec2((indices.w * 4.0 + 3.0) / 511.0, 0.0), 0.0);\r\n mat4 matrix4 = mat4(col1, col2, col3, col4);\r\n return m_aWeight0.x * matrix1 + \r\n m_aWeight0.y * matrix2 + \r\n m_aWeight0.z * matrix3 + \r\n m_aWeight0.w * matrix4;\r\n#endif\r\n}\r\n#endif\r\n\r\nvoid transform(inout vec4 position, inout vec4 normal, inout vec3 uv, out vec4 worldPosition)\r\n{\r\n#if HAS_SKIN\r\n mat4 jointMatrix = getJointMatrix(m_aJoint0);\r\n#endif\r\n\r\n#if MODEL_TRANSFORM\r\n#if INSTANCING\r\n position = m_aModelMatrix * position;\r\n normal = (m_aModelMatrix * normal);\r\n#else\r\n\r\n#if HAS_SKIN\r\n normal = m_uPerNode.normalMatrix * vec4(normalize(transpose(inverse(jointMatrix)) * normal).xyz, 0.0);\r\n position = m_uPerNode.modelMatrix * jointMatrix * position;\r\n#else\r\n position = m_uPerNode.modelMatrix * position;\r\n normal = m_uPerNode.normalMatrix * vec4(normalize(normal.xyz), 0.0);\r\n#endif\r\n#endif\r\n#endif\r\n\r\n worldPosition = position;\r\n position = m_uPerFrame.vpMatrix * position;\r\n}\r\n","transform_skybox.inc":"\r\nvoid transform(inout vec4 position, inout vec4 normal, inout vec3 uv, out vec4 worldPosition)\r\n{\r\n#if EQUIRECTANGLE\r\n uv = vec3(1.0 - uv.x, uv.y, 1.0);\r\n#endif\r\n#if WALLPAPER\r\n uv = vec3(uv.x, 1.0 - uv.y, 1.0);\r\n#endif\r\n#if CUBEMAP\r\n#if FLIP\r\n uv = vec3(position.x, -position.z, -position.y);\r\n#else\r\n uv = vec3(position.x, position.z, -position.y);\r\n#endif\r\n#endif\r\n\r\n#if MODEL_TRANSFORM\r\n position = m_uPerNode.modelMatrix * position;\r\n#endif\r\n#if EQUIRECTANGLE || CUBEMAP\r\n position = m_uPerFrame.vpMatrix * vec4(position.xyz, 0.0);\r\n#endif\r\n\r\n position = position.xyww; \r\n}\r\n\r\n\r\n","uniform.inc":"#if WEBGL2\r\nvec4 sampleTexture2D(sampler2D tex, vec2 coord)\r\n{\r\n return texture(tex, coord);\r\n}\r\n\r\nvec4 sampleTexture2D(samplerCube tex, vec3 coord, float LOD) \r\n{\r\n return textureLod(tex, coord, LOD);\r\n}\r\n#else\r\nvec4 sampleTexture2D(sampler2D tex, vec2 coord)\r\n{\r\n return texture2D(tex, coord);\r\n}\r\n\r\nvec4 sampleTexture2D(samplerCube tex, vec3 coord, float LOD) \r\n{\r\n return textureCube(tex, coord);\r\n}\r\n#endif\r\n\r\n#if WEBGL2\r\nvec4 sampleTexture3D(samplerCube tex, vec3 coord)\r\n{\r\n return texture(tex, coord);\r\n}\r\n\r\nvec4 sampleTexture3D(samplerCube tex, vec3 coord, float LOD) \r\n{\r\n return textureLod(tex, coord, LOD);\r\n}\r\n\r\n#else\r\nvec4 sampleTexture3D(samplerCube tex, vec3 coord)\r\n{\r\n return textureCube(tex, coord);\r\n}\r\n\r\nvec4 sampleTexture3D(samplerCube tex, vec3 coord, float LOD) \r\n{\r\n return textureCube(tex, coord);\r\n}\r\n#endif\r\n\r\n"}},"./02resource/m3d_shader_library.js":function(e,t,r){"use strict";r.r(t);var n,i=r("./02resource/m3d_shader_source.js");t.default=((n={}).pbr=new i.default("pbr",["main.vs","pbr_main.vs","transform_simple.inc"],["pbr.fs","pbr_main.fs","material_pbr.inc","shade_pbr.inc"],{highPrecision:!0,vpMatrix:!0,position:!0,normal:!0,modelMatrix:!0,uv:!0}),n["animating-stripe"]=new i.default("animating-stripe",["main.vs","modelo_main.vs","transform_simple.inc"],["main.fs","modelo_main.fs","material_animating_ribbon.inc","shade_plain.inc"],{highPrecision:!0,vpMatrix:!0,modelMatrix:!0,position:!0,uv:!0}),n["animating-ribbon"]=new i.default("animating-ribbon",["main.vs","modelo_ribbon.vs"],["main.fs","modelo_main.fs","material_animating_ribbon.inc","shade_plain.inc"],{highPrecision:!0,vpMatrix:!0,modelMatrix:!0,position:!0,uv:!0}),n.heightmap=new i.default("heightmap",["main.vs","modelo_main.vs","transform_heightmap.inc"],["main.fs","modelo_main.fs","material_heightmap.inc","shade_plain.inc"],{highPrecision:!0,vpMatrix:!0,modelMatrix:!0,position:!0,normal:!0,uv:!0}),n.heatmap=new i.default("heatmap",["main.vs","modelo_main.vs","transform_simple.inc"],["main.fs","modelo_main.fs","material_heatmap.inc","shade_plain.inc"],{highPrecision:!0,vpMatrix:!0,modelMatrix:!0,position:!0,normal:!1,uv:!0}),n.volume=new i.default("volume",["main.vs","modelo_main.vs","transform_simple.inc"],["main.fs","modelo_main.fs","material_dummy.inc","shade_volume.inc"],{highPrecision:!0,vpMatrix:!0,modelMatrix:!0,position:!0,normal:!0,uv:!0}),n.volume_multi_layer=new i.default("volume_multi_layer",["main.vs","modelo_main.vs","transform_simple.inc"],["main.fs","modelo_main.fs","material_dummy.inc","shade_volume_multi_layer.inc"],{highPrecision:!0,vpMatrix:!0,modelMatrix:!0,position:!0,normal:!0,uv:!0}),n.color_multi_layer=new i.default("color_multi_layer",["main.vs","modelo_main.vs","transform_simple.inc"],["main.fs","modelo_main.fs","material_dummy.inc","shade_color_multi_layer.inc"],{highPrecision:!0,vpMatrix:!0,modelMatrix:!0,position:!0,normal:!0,uv:!0}),n.barchart_wireframe=new i.default("barchart_wireframe",["main.vs","modelo_main.vs","transform_barchart_wireframe.inc"],["main.fs","modelo_main.fs","material_solid.inc","shade_plain.inc"],{highPrecision:!0,vpMatrix:!0,modelMatrix:!0,position:!0,normal:!1,uv:!1}),n.barchart=new i.default("barchart",["main.vs","modelo_main.vs","transform_barchart.inc"],["main.fs","modelo_main.fs","material_barchart.inc","shade_plain.inc"],{highPrecision:!0,vpMatrix:!0,modelMatrix:!0,position:!0,normal:!0,uv:!0}),n.blit=new i.default("blit","blit.vs",["blit.fs","blit_simple.inc"],{highPrecision:!0,position:!0,modelMatrix:!0,uv:!0}),n.blit_dof=new i.default("blit_dof","blit.vs",["blit.fs","blit_dof.inc"],{highPrecision:!0,position:!0,modelMatrix:!0,uv:!0}),n.blit_multiply=new i.default("blit","blit.vs",["blit.fs","blit_multiply.inc"],{highPrecision:!0,position:!0,modelMatrix:!0,uv:!0}),n.blit_glow=new i.default("blit_glow","blit.vs",["blit.fs","blit_glow.inc"],{highPrecision:!0,position:!0,modelMatrix:!0,uv:!0}),n.accumulate=new i.default("accumulate","blit.vs",["blit.fs","blit_accumulate.inc"],{highPrecision:!0,position:!0,uv:!0}),n.normaldepth=new i.default("normaldepth",["main.vs","modelo_main.vs","transform_simple.inc"],["main.fs","normaldepth_main.fs"],{highPrecision:!0,vpMatrix:!0,viewMatrix:!0,modelMatrix:!0,position:!0,normal:!0,depth:!0,uv:!0}),n.depth=new i.default("depth",["main.vs","modelo_main.vs","transform_simple.inc"],["main.fs","depth_main.fs"],{highPrecision:!0,vpMatrix:!0,viewMatrix:!0,modelMatrix:!0,position:!0,depth:!0,uv:!0}),n.solid=new i.default("solid",["main.vs","modelo_main.vs","transform_simple.inc"],["main.fs","modelo_main.fs","material_solid.inc","shade_adhoc.inc"],{highPrecision:!0,vpMatrix:!0,modelMatrix:!0,position:!0,normal:!0,uv:!0}),n.dark=new i.default("dark",["main.vs","modelo_main.vs","transform_simple.inc"],["main.fs","modelo_dark.fs"],{highPrecision:!0,vpMatrix:!0,modelMatrix:!0,position:!0,normal:!0,uv:!0}),n.mark=new i.default("mark",["main.vs","modelo_main.vs","transform_mark.inc"],["main.fs","mark_main.fs"],{highPrecision:!0,modelMatrix:!0,vpMatrix:!0,vertexid:!0}),n.color=new i.default("color",["main.vs","modelo_main.vs","transform_simple.inc"],["main.fs","modelo_main.fs","material_color.inc","shade_adhoc.inc"],{highPrecision:!0,vpMatrix:!0,modelMatrix:!0,position:!0,normal:!0,color:!0}),n.texture=new i.default("texture",["main.vs","modelo_main.vs","transform_simple.inc"],["main.fs","modelo_main.fs","material_texture.inc","shade_adhoc.inc"],{highPrecision:!0,vpMatrix:!0,modelMatrix:!0,position:!0,normal:!0,uv:!0}),n.glass=new i.default("glass",["main.vs","modelo_main.vs","transform_simple.inc"],["main.fs","modelo_main.fs","material_solid.inc","shade_glass.inc"],{highPrecision:!0,vpMatrix:!0,modelMatrix:!0,position:!0,normal:!0}),n.plain=new i.default("plain",["main.vs","modelo_main.vs","transform_nonormal.inc"],["main.fs","modelo_main.fs","material_solid.inc","shade_plain.inc"],{highPrecision:!0,vpMatrix:!0,modelMatrix:!0,position:!0}),n.plain_texture=new i.default("plain_texture",["main.vs","modelo_main.vs","transform_nonormal.inc"],["main.fs","modelo_main.fs","material_texture.inc","shade_plain.inc"],{highPrecision:!0,vpMatrix:!0,modelMatrix:!0,position:!0,uv:!0}),n.df_text=new i.default("df_text",["main.vs","modelo_main.vs","transform_nonormal.inc"],["main.fs","modelo_main.fs","material_dummy.inc","shade_glyph.inc"],{highPrecision:!0,vpMatrix:!0,modelMatrix:!0,position:!0,uv:!0}),n.constant=new i.default("constant",["main.vs","modelo_main.vs","transform_nonormal.inc"],["main.fs","modelo_main.fs","material_solid.inc","shade_plain.inc"],{highPrecision:!0,vpMatrix:!0,modelMatrix:!0,position:!0}),n.constant2d=new i.default("constant2d","blit.vs","blit_direct.fs",{highPrecision:!0,position:!0}),n.skybox=new i.default("skybox",["main.vs","modelo_main.vs","transform_skybox.inc"],["main.fs","modelo_main.fs","material_skybox.inc","shade_plain.inc"],{highPrecision:!0,vpMatrix:!0,modelMatrix:!0,uv:!0}),n.woit_accum_texture=new i.default("woit_accum_texture",["main.vs","modelo_main.vs","transform_simple.inc"],["main.fs","modelo_main.fs","material_texture.inc","shade_oit.inc"],{highPrecision:!0,vpMatrix:!0,viewMatrix:!0,modelMatrix:!0,position:!0,normal:!0,depth:!0,uv:!0}),n.woit_accum_solid=new i.default("woit_accum_solid",["main.vs","modelo_main.vs","transform_simple.inc"],["main.fs","modelo_main.fs","material_solid.inc","shade_oit.inc"],{highPrecision:!0,vpMatrix:!0,viewMatrix:!0,modelMatrix:!0,position:!0,normal:!0,depth:!0}),n.woit_accum_color=new i.default("woit_accum_color",["main.vs","modelo_main.vs","transform_simple.inc"],["main.fs","modelo_main.fs","material_color.inc","shade_oit.inc"],{highPrecision:!0,vpMatrix:!0,viewMatrix:!0,modelMatrix:!0,position:!0,normal:!0,depth:!0}),n.woit_reveal=new i.default("woit_reveal","blit.vs",["blit.fs","blit_oit.inc"],{highPrecision:!0,modelMatrix:!0,position:!0}),n.ssao=new i.default("ssao","blit.vs",["blit.fs","blit_ssao2.inc"],{highPrecision:!0}),n.shadowsmooth=new i.default("shadowsmooth","blit.vs",["blit.fs","blit_shadow.inc"],{highPrecision:!0,position:!0,uv:!0}),n.sketch=new i.default("sketch","blit.vs",["blit.fs","blit_sketch.inc"],{highPrecision:!0,position:!0,uv:!0}),n.contour=new i.default("contour","blit.vs",["blit.fs","blit_contour.inc"],{highPrecision:!0,position:!0,uv:!0}),n.contouroverlay=new i.default("contouroverlay","blit.vs",["blit.fs","blit_contour_overlay.inc"],{highPrecision:!0,position:!0,uv:!0}),n.vr_wrap=new i.default("vr_wrap","blit.vs",["blit.fs","blit_vr_wrap.inc"],{highPrecision:!0,position:!0,uv:!0}),n.gradient=new i.default("gradient","blit.vs",["blit.fs","blit_gradient.inc"],{highPrecision:!0,position:!0,uv:!0}),n.glow=new i.default("glow","blit.vs",["blit.fs","blit_glow.inc"],{highPrecision:!0,position:!0,uv:!0}),n.glow_blur=new i.default("glow_blur","blit.vs",["blit.fs","blit_glow_blur.inc"],{highPrecision:!0,position:!0,uv:!0}),n.fog=new i.default("fog","blit.vs",["blit.fs","blit_fog.inc"],{highPrecision:!0,position:!0,uv:!0}),n.metaball=new i.default("metaball","blit.vs",["blit.fs","blit_metaball.inc"],{highPrecision:!0,position:!0,uv:!0}),n.overlay=new i.default("overlay","blit.vs",["blit.fs","blit_overlay.inc"],{highPrecision:!0,position:!0,uv:!0}),n.background=new i.default("background","blit.vs",["blit.fs","blit_transparent.inc"],{highPrecision:!0,position:!0,uv:!0}),n)},"./02resource/m3d_shader_source.js":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/m3d_utils.ts"),i=r("./02resource/m3d_shader_chunks.js");t.default=function(){function e(e,t,r,a){this.name=e,this.vsSource=null,this.fsSource=null,this.ready=!1;var o,s,l="";if(n.default.isArray(t))for(o=0,s=t.length;o<s;++o)i.default[t[o]]?l+=i.default[t[o]]:l+=t[o];else i.default[t]?l+=i.default[t]:l+=t;var u="";if(n.default.isArray(r))for(o=0,s=r.length;o<s;++o)i.default[r[o]]?u+=i.default[r[o]]:u+=r[o];else i.default[r]?u+=i.default[r]:u+=r;this._precompile(l,u,a)}return e.prototype.destroy=function(){this.ready&&(this.vsSource=null,this.fsSource=null,this.ready=!1)},e.prototype._precompile=function(e,t,r){if(!this.ready){try{this.vsSource=this._dissolve(e,!0,r),this.fsSource=this._dissolve(t,!1,r)}catch(e){return void console.warn(e)}this.ready=!0}},e.prototype._dissolve=function(e,t,r){var n="";n+="#if WEBGL2 \n#version 300 es \n#endif \n",r.highPrecision?n+="precision highp float;\nprecision highp sampler2D;\n":n+="precision mediump float;\nprecision mediump sampler2D;\n",t?((r.viewMatrix||r.vpMatrix||r.projectionMatrix||r.mvpMatrix)&&(n+="#if WEBGL2 \nuniform m_bPerFrame { \n    mat4 viewMatrix;\n    mat4 vpMatrix;\n    vec4 cameraPosition;\n} m_uPerFrame; \n#else \nstruct PerFrameStruct {\n",r.viewMatrix&&(n+="    mat4 viewMatrix;\n"),r.vpMatrix&&(n+="    mat4 vpMatrix;\n"),n+="    vec4 cameraPosition;\n};\nuniform PerFrameStruct m_uPerFrame; \n#endif \n"),r.modelMatrix&&(n+="#if WEBGL2 && MODEL_TRANSFORM\nuniform m_bPerNode { \n    mat4 modelMatrix;\n    mat4 normalMatrix;\n} m_uPerNode; \n#endif\n#if !WEBGL2 && MODEL_TRANSFORM\nstruct PerNodeStruct {\n    mat4 modelMatrix;\n    mat4 normalMatrix;\n};\nuniform PerNodeStruct m_uPerNode;\n#endif\n"),r.vertexid&&(n+="uniform int m_uBaseVertexOffset; \n")):(r.viewMatrix||r.vpMatrix||r.projectionMatrix||r.mvpMatrix)&&(n+="#if WEBGL2 \nuniform m_bPerFrame { \n    mat4 viewMatrix;\n    mat4 vpMatrix;\n    vec4 cameraPosition;\n} m_uPerFrame; \n#else \nstruct PerFrameStruct {\n",r.viewMatrix&&(n+="    mat4 viewMatrix;\n"),r.vpMatrix&&(n+="    mat4 vpMatrix;\n"),n+="    vec4 cameraPosition;\n};\nuniform PerFrameStruct m_uPerFrame; \n#endif \n");for(var a="",o=e.split("\n"),s=/<([\w\d\.]+)>/g,l=0,u=o.length;l<u;l++){var c=o[l];if(c.match(/#include/g)){var d=c.match(s);if(!d)throw new Error("Can not resolve #include <"+h+">");var h=d[0].substring(1,d[0].length-1);"varying.inc"===h?(t&&r.normal&&(a+="    m_vNormal = normal.xyz; \n"),t&&r.position&&(a+="    m_vVertex = worldPosition.xyz; \n"),t&&r.uv&&(a+="    m_vTexCoord = uv; \n"),t&&r.vertexid&&(a+="    int objectID = gl_VertexID + m_uBaseVertexOffset; \n",a+="    m_vId = vec4( \n",a+="    float(objectID & 0xFF) / 255.0,  \n",a+="    float((objectID >> 8) & 0xFF) / 255.0,  \n",a+="    float((objectID >> 16) & 0xFF) / 255.0,  \n",a+="    float((objectID >> 24) & 0xFF) / 255.0); \n"),t&&r.color&&(a+="    m_vColor = m_aColor; \n"),t&&r.material&&(a+="    m_vMaterial = m_aMaterial;\n"),t&&r.depth&&(a+="m_vDepth = (m_uPerFrame.viewMatrix * worldPosition).z;\n")):a+=i.default[h]}else a+=c+"\n"}return s=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,n+(a=a.replace(s,function(e,t,r,n){var i="";for(l=parseInt(t);l<parseInt(r);l++)i+=n.replace(/\[i\]/g,"["+l+"]");return i}))},e}()},"./03scene/Background.ts":function(e,t,r){"use strict";r.r(t);var n=r("./03scene/drawables/Skybox.ts"),i=function(){function e(e){this._resourceManager=e,this.color=new Float32Array([1,1,1,1]),this.mode=n.SkyBoxMode.SKYBOX_SOLIDCOLOR,this.skybox=null}return e.prototype.destroy=function(){null!==this.skybox&&this.skybox.destroy(),this.skybox=null,delete this.skybox,this.color=null,delete this.color},e.prototype.setColor=function(e){this.color[0]=e[0],this.color[1]=e[1],this.color[2]=e[2],this.color[3]=e[3]},e.prototype.setImages=function(e){this.skybox||(this.skybox=new n.default(this._resourceManager)),this.skybox.setImage(e)},e.prototype.setMode=function(e){e!==n.SkyBoxMode.SKYBOX_SOLIDCOLOR?(this.skybox||(this.skybox=new n.default(this._resourceManager)),this.skybox.setMode(e),this.skybox.visible=!0):this.skybox&&(this.skybox.visible=!1),this.mode=e},e}();t.default=i},"./03scene/Entity.ts":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/m3d_math.js"),i=r("./glMatrix.js"),a=function(){function e(e,t,r){this.materialDrawablesMap=new Map,this.drawables=[],this.name=e,this.bbox=null,this.faces=1,this.hasContours=!1,this._matrix=i.mat4.create(),this._invertMatrix=i.mat4.create(),this._drawableMatrx=i.mat4.create(),this.initMatrix=null,this._resourceManager=t,this._materialManager=r,this._rotate_matrix=new Float32Array(16),this._rotate_point=new Float32Array(3),this.skeletons=[]}return e.prototype.initlize=function(){this._matrix=i.mat4.create(),this.initMatrix=i.mat4.create(),this.updateBBox(),this.initMatrix[12]=this._matrix[12]=.5*(this.bbox[0]+this.bbox[3]),this.initMatrix[13]=this._matrix[13]=.5*(this.bbox[1]+this.bbox[4]),this.initMatrix[14]=this._matrix[14]=.5*(this.bbox[2]+this.bbox[5])},e.prototype.destroy=function(){this.drawables.forEach(function(e){e.destroy()}),this.drawables=null,delete this.drawables,this.materialDrawablesMap=null,delete this.materialDrawablesMap,this.bbox=null,delete this.bbox,this.name=null,delete this.name,this.faces=null,delete this.faces,this.hasContours=null,delete this.hasContours,this._resourceManager=null,delete this._resourceManager,this._materialManager=null,delete this._materialManager,this.skeletons=null,delete this.skeletons},e.prototype.addDrawable=function(e){this.materialDrawablesMap.has(e.material.name)?this.materialDrawablesMap.get(e.material.name).push(e):this.materialDrawablesMap.set(e.material.name,[e]),this.drawables.push(e)},e.prototype.updateBBox=function(){var e=this;this.bbox=n.default.aabb.create(),this.drawables.forEach(function(t){t.visible&&n.default.aabb.union(e.bbox,t.bbox,e.bbox)})},e.prototype.translate=function(e,t,r){this.drawables.forEach(function(n){n.translate(e,t,r)}),n.default.aabb.move(this.bbox,this.bbox,[e,t,r])},e.prototype.rotate=function(e,t,r){var n=this;i.mat4.fromRotation(this._rotate_matrix,e,t),i.vec3.transformMat4(this._rotate_point,r,this._rotate_matrix),this._rotate_matrix[12]=r[0]-this._rotate_point[0],this._rotate_matrix[13]=r[1]-this._rotate_point[1],this._rotate_matrix[14]=r[2]-this._rotate_point[2],i.mat4.multiply(this._matrix,this._rotate_matrix,this._matrix),this.drawables.forEach(function(e){e.multiply(n._rotate_matrix)}),this.updateBBox()},e.prototype.getRotate=function(){var e=this._rotate_matrix,t=[];return t[0]=Math.atan2(e[9],e[10]),t[1]=Math.atan2(-e[8],Math.sqrt(e[9]*e[9]+e[10]*e[10])),t[2]=Math.atan2(e[4],e[0]),t},e.prototype.setTranslation=function(e,t,r){this._matrix[12]=e,this._matrix[13]=t,this._matrix[14]=r,this.drawables.forEach(function(n){n.setTranslation(e,t,r)}),n.default.aabb.moveTo(this.bbox,this.bbox,[e,t,r])},e.prototype.getTranslation=function(){return[this._matrix[12],this._matrix[13],this._matrix[14]]},e.prototype.setScaling=function(e,t,r){var a=this;i.mat4.scale(this._matrix,this._matrix,[e,t,r]),n.default.aabb.invalidate(this.bbox),this.drawables.forEach(function(i){i.setScaling(e,t,r),n.default.aabb.union(a.bbox,a.bbox,i.bbox)})},e.prototype.getScaling=function(){var e=i.vec3.create(),t=[this._matrix[0],this._matrix[1],this._matrix[2]],r=[this._matrix[4],this._matrix[5],this._matrix[6]],n=[this._matrix[8],this._matrix[9],this._matrix[10]];return e[0]=Math.sqrt(i.vec3.dot(t,t)),e[1]=Math.sqrt(i.vec3.dot(r,r)),e[2]=Math.sqrt(i.vec3.dot(n,n)),e},e.prototype.getTransformMatrix=function(){return this._matrix},e.prototype.getTransformArray=function(){i.mat4.invert(this._invertMatrix,this.initMatrix),i.mat4.multiply(this._drawableMatrx,this._matrix,this._invertMatrix);for(var e=[],t=0;t<this._drawableMatrx.length;t++)e[t]=this._drawableMatrx[t];return e},e.prototype.setTransformMatrix=function(e){var t=this;i.mat4.copy(this._matrix,e),i.mat4.invert(this._invertMatrix,this.initMatrix),i.mat4.multiply(this._drawableMatrx,this._matrix,this._invertMatrix),this.drawables.forEach(function(e){e.setTransformMatrix(t._drawableMatrx)})},e}();t.default=a},"./03scene/GLTFLoader.ts":function(e,t,r){"use strict";r.r(t);var n=r("./glMatrix.js"),i=r("./node_modules/axios/index.js"),a=r.n(i),o=r("./02resource/MeshAttributes.ts"),s=r("./02resource/m3d_shader_library.js"),l=r("./03scene/drawables/Drawable.ts"),u=r("./03scene/animations/skeletonAnimation/Skeleton.ts"),c=r("./03scene/animations/skeletonAnimation/Joint.ts"),d=r("./03scene/animations/skeletonAnimation/Animation.ts"),h=r("./03scene/animations/skeletonAnimation/KeyFrame.ts"),f=r("./03scene/animations/skeletonAnimation/JointTransform.ts"),p=100,m={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},v=function(){function e(e,t,r){e=e||n.vec3.fromValues(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),t=t||n.vec3.fromValues(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),void 0===r||!0===r?(this.min=n.vec3.clone(e),this.max=n.vec3.clone(t)):(this.min=e,this.max=t),this.transform=n.mat4.create()}return e.prototype.updateBoundingBox=function(e){n.vec3.min(this.min,this.min,e.min),n.vec3.max(this.max,this.max,e.max)},e.prototype.calculateTransform=function(){this.transform[0]=this.max[0]-this.min[0],this.transform[5]=this.max[1]-this.min[1],this.transform[10]=this.max[2]-this.min[2],this.transform[12]=this.min[0],this.transform[13]=this.min[1],this.transform[14]=this.min[2]},e.getAABBFromOBB=function(t,r){var i=n.vec3.create(),a=n.vec3.create(),o=n.vec3.create(),s=n.vec3.create(),l=n.vec3.create();n.vec3.set(i,r[0],r[1],r[2]),n.vec3.set(a,r[4],r[5],r[6]),n.vec3.set(o,r[8],r[9],r[10]);var u=n.vec3.fromValues(r[12],r[13],r[14]),c=n.vec3.clone(u);n.vec3.scale(s,i,t.min[0]),n.vec3.scale(l,i,t.max[0]),n.vec3.min(i,s,l),n.vec3.add(u,u,i),n.vec3.max(i,s,l),n.vec3.add(c,c,i),n.vec3.scale(s,a,t.min[1]),n.vec3.scale(l,a,t.max[1]),n.vec3.min(a,s,l),n.vec3.add(u,u,a),n.vec3.max(a,s,l),n.vec3.add(c,c,a),n.vec3.scale(s,o,t.min[2]),n.vec3.scale(l,o,t.max[2]),n.vec3.min(o,s,l),n.vec3.add(u,u,o),n.vec3.max(o,s,l),n.vec3.add(c,c,o);var d=new e(u,c,!1);return d.calculateTransform(),d},e}(),_=function(){function e(e,t){this.bufferView=t,this.componentType=e.componentType,this.byteOffset=void 0!==e.byteOffset?e.byteOffset:0,this.byteStride=t.byteStride,this.normalized=void 0!==e.normalized&&e.normalized,this.count=e.count,this.type=e.type,this.size=m[this.type],this.min=e.min,this.max=e.max}return e.prototype._arrayBuffer2TypedArray=function(e,t,r,n){switch(n){case 5122:return new Int16Array(e,t,r);case 5123:return new Uint16Array(e,t,r);case 5124:return new Int32Array(e,t,r);case 5125:return new Uint32Array(e,t,r);case 5126:return new Float32Array(e,t,r);default:return null}},e.prototype.getAccessorData=function(){return this._arrayBuffer2TypedArray(this.bufferView.data,this.byteOffset,this.count*m[this.type],this.componentType)},e}(),g=function(){function e(e,t){this.byteLength=e.byteLength,this.byteOffset=void 0!==e.byteOffset?e.byteOffset:0,this.byteStride=void 0!==e.byteStride?e.byteStride:0,this.target=void 0!==e.target?e.target:null,this.data=t.slice(this.byteOffset,this.byteOffset+this.byteLength),this._glBuffer=null}return e.prototype.getBuffer=function(e,t){return this._glBuffer||(this._glBuffer=e.createBuffer(),e.bindBuffer(t,this._glBuffer),e.bufferData(t,this.data,e.STATIC_DRAW),e.bindBuffer(t,null)),this._glBuffer},e}(),y=function(){function e(e,t,r){if(this.name=void 0!==t.name?t.name:null,this.nodeID=r,this.camera=void 0!==t.camera?t.camera:null,this.matrix=n.mat4.create(),t.hasOwnProperty("matrix")){for(var i=0;i<16;++i)this.matrix[i]=t.matrix[i];this.translation=n.vec3.create(),n.mat4.getTranslation(this.translation,this.matrix),this.rotation=n.quat.create(),n.mat4.getRotation(this.rotation,this.matrix),this.scale=n.vec3.create(),n.mat4.getScaling(this.scale,this.matrix)}else this.getTransformMatrixFromTRS(t.translation,t.rotation,t.scale);this.children=t.children||[],this.mesh=void 0!==t.mesh?e.model.meshes[t.mesh]:null,this.skin=void 0!==t.skin?t.skin:null,this.inverseBindMatrix=null,this.weights=void 0!==t.weights?t.weights:null,this.extensions=void 0!==t.extensions?t.extensions:null,this.extras=void 0!==t.extras?t.extras:null,this.aabb=null,this.bvh=new v}return e.prototype.traverse=function(e,t){t(this,e);for(var r=0,n=this.children.length;r<n;r++)this.children[r].traverse(this,t)},e.prototype.traversePostOrder=function(e,t){for(var r=0,n=this.children.length;r<n;r++)this.children[r].traversePostOrder(this,t);t(this,e)},e.prototype.traverseTwoExecFun=function(e,t,r){t(this,e);for(var n=0,i=this.children.length;n<i;n++)this.children[n].traverseTwoExecFun(this,t,r);r(this,e)},e.prototype.getTransformMatrixFromTRS=function(e,t,r){this.translation=void 0!==e?n.vec3.fromValues(e[0],e[1],e[2]):n.vec3.fromValues(0,0,0),this.rotation=void 0!==t?n.vec4.fromValues(t[0],t[1],t[2],t[3]):n.vec4.fromValues(0,0,0,1),this.scale=void 0!==r?n.vec3.fromValues(r[0],r[1],r[2]):n.vec3.fromValues(1,1,1),this.updateMatrixFromTRS()},e.prototype.updateMatrixFromTRS=function(){n.mat4.fromScaling(this.matrix,this.scale);n.mat4.create();var e=n.mat4.create();n.mat4.fromQuat(e,this.rotation),n.mat4.multiply(this.matrix,e,this.matrix),this.matrix[12]=this.translation[0],this.matrix[13]=this.translation[1],this.matrix[14]=this.translation[2]},e}(),b=function(){return function(e,t,r){var n,i;this.meshID=r,this.name=void 0!==t.name?t.name:null,this.primitives=[],this.boundingBox=null;for(var a=0,o=t.primitives.length;a<o;++a)n=t.primitives[a],i=new x(e.model,n,a),this.primitives.push(i),i.boundingBox&&(this.boundingBox||(this.boundingBox=new v),this.boundingBox.updateBoundingBox(i.boundingBox));this.boundingBox&&this.boundingBox.calculateTransform(),this.weights=void 0!==t.weights?t.weights:null,this.extensions=void 0!==t.extensions?t.extensions:null,this.extras=void 0!==t.extras?t.extras:null}}(),x=function(){return function(e,t,r){var i;for(i in this.index=r,this.attributes=t.attributes,this.indices=void 0!==t.indices?t.indices:null,null!==this.indices?(this.indicesComponentType=e.json.accessors[this.indices].componentType,this.indicesLength=e.json.accessors[this.indices].count,this.indicesOffset=e.json.accessors[this.indices].byteOffset||0):(this.drawArraysCount=e.json.accessors[this.attributes.POSITION].count,this.drawArraysOffset=e.json.accessors[this.attributes.POSITION].byteOffset||0),this.attributes)this.attributes[i]=e.accessors[this.attributes[i]];if(this.material=void 0!==t.material?e.materials[t.material]:null,this.mode=void 0!==t.mode?t.mode:4,this.targets=t.targets,this.extensions=void 0!==t.extensions?t.extensions:null,this.extras=void 0!==t.extras?t.extras:null,this.vertexArray=null,this.vertexBuffer=null,this.indexBuffer=null,this.shader=null,this.boundingBox=null,void 0!==this.attributes.POSITION){var a=this.attributes.POSITION;a.max&&"VEC3"===a.type&&(this.boundingBox=new v(n.vec3.fromValues(a.min[0],a.min[1],a.min[2]),n.vec3.fromValues(a.max[0],a.max[1],a.max[2]),!1),this.boundingBox.calculateTransform())}}}(),w=function(){function e(e,t){this.name=void 0!==t.name?t.name:null,this.sampler=void 0!==t.sampler?e.model.samplers[t.sampler]:null,this.source=void 0!==t.source?e.model.images[t.source]:null,this.extensions=void 0!==t.extensions?t.extensions:null,this.extras=void 0!==t.extras?t.extras:null,this.texture=null}return e.prototype.createTexture=function(e){this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.source),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)},e}(),E=function(){function e(e){this.name=void 0!==e.name?e.name:null,this.magFilter=void 0!==e.magFilter?e.magFilter:null,this.minFilter=void 0!==e.minFilter?e.minFilter:null,this.wrapS=void 0!==e.wrapS?e.wrapS:10497,this.wrapT=void 0!==e.wrapT?e.wrapT:10497,this.extensions=void 0!==e.extensions?e.extensions:null,this.extras=void 0!==e.extras?e.extras:null,this.sampler=null}return e.prototype.createSampler=function(e){this.sampler=e.createSampler(),this.minFilter?e.samplerParameteri(this.sampler,e.TEXTURE_MIN_FILTER,this.minFilter):e.samplerParameteri(this.sampler,e.TEXTURE_MIN_FILTER,e.NEAREST_MIPMAP_LINEAR),this.magFilter?e.samplerParameteri(this.sampler,e.TEXTURE_MAG_FILTER,this.magFilter):e.samplerParameteri(this.sampler,e.TEXTURE_MAG_FILTER,e.LINEAR),e.samplerParameteri(this.sampler,e.TEXTURE_WRAP_S,this.wrapS),e.samplerParameteri(this.sampler,e.TEXTURE_WRAP_T,this.wrapT)},e}(),M=function(){return function(e){this.index=e.index,this.texCoord=void 0!==e.texCoord?e.texCoord:0,this.extensions=void 0!==e.extensions?e.extensions:null,this.extras=void 0!==e.extras?e.extras:null}}(),A=function(){return function(e){this.baseColorFactor=void 0!==e.baseColorFactor?e.baseColorFactor:[1,1,1,1],this.baseColorTexture=void 0!==e.baseColorTexture?new M(e.baseColorTexture):null,this.metallicFactor=void 0!==e.metallicFactor?e.metallicFactor:1,this.roughnessFactor=void 0!==e.roughnessFactor?e.roughnessFactor:1,this.metallicRoughnessTexture=void 0!==e.metallicRoughnessTexture?new M(e.metallicRoughnessTexture):null,this.extensions=void 0!==e.extensions?e.extensions:null,this.extras=void 0!==e.extras?e.extras:null}}(),T=function(){return function(e){this.index=e.index,this.texCoord=void 0!==e.texCoord?e.texCoord:0,this.scale=void 0!==e.scale?e.scale:1,this.extensions=void 0!==e.extensions?e.extensions:null,this.extras=void 0!==e.extras?e.extras:null}}(),S=function(){return function(e){this.index=e.index,this.texCoord=void 0!==e.texCoord?e.texCoord:0,this.strength=void 0!==e.strength?e.strength:1,this.extensions=void 0!==e.extensions?e.extensions:null,this.extras=void 0!==e.extras?e.extras:null}}(),k=function(){return function(e){this.name=void 0!==e.name?e.name:null,this.pbrMetallicRoughness=void 0!==e.pbrMetallicRoughness?new A(e.pbrMetallicRoughness):new A({baseColorFactor:[1,1,1,1],metallicFactor:1,metallicRoughnessTexture:1}),this.normalTexture=void 0!==e.normalTexture?new T(e.normalTexture):null,this.occlusionTexture=void 0!==e.occlusionTexture?new S(e.occlusionTexture):null,this.emissiveTexture=void 0!==e.emissiveTexture?new M(e.emissiveTexture):null,this.emissiveFactor=void 0!==e.emissiveFactor?e.emissiveFactor:[0,0,0],this.alphaMode=void 0!==e.alphaMode?e.alphaMode:"OPAQUE",this.alphaCutoff=void 0!==e.alphaCutoff?e.alphaCutoff:.5,this.doubleSided=e.doubleSided||!1,this.extensions=void 0!==e.extensions?e.extensions:null,this.extras=void 0!==e.extras?e.extras:null}}(),D=function(){return function(e,t,r){var i,a,o;for(this.mySkeleton=null,this.name=void 0!==t.name?t.name:null,this.skinID=r,this.joints=new Array(t.joints.length),i=0,o=this.joints.length;i<o;i++)this.joints[i]=e.nodes[t.joints[i]];if(this.skeleton=void 0!==t.skeleton?e.nodes[t.skeleton]:null,this.inverseBindMatrices=void 0!==t.inverseBindMatrices?e.accessors[t.inverseBindMatrices]:null,this.extensions=void 0!==t.extensions?t.extensions:null,this.extras=void 0!==t.extras?t.extras:null,this.inverseBindMatrices)for(this.inverseBindMatricesData=this.inverseBindMatrices.getAccessorData(),this.inverseBindMatrix=[],this.jointMatrixUniformBuffer=null,this.jointMatrixUnidormBufferData=new Float32Array(16*p),i=0,a=0,o=this.inverseBindMatricesData.length;i<o;i+=16,a++)this.joints[a].inverseBindMatrix=n.mat4.fromValues(this.inverseBindMatricesData[i],this.inverseBindMatricesData[i+1],this.inverseBindMatricesData[i+2],this.inverseBindMatricesData[i+3],this.inverseBindMatricesData[i+4],this.inverseBindMatricesData[i+5],this.inverseBindMatricesData[i+6],this.inverseBindMatricesData[i+7],this.inverseBindMatricesData[i+8],this.inverseBindMatricesData[i+9],this.inverseBindMatricesData[i+10],this.inverseBindMatricesData[i+11],this.inverseBindMatricesData[i+12],this.inverseBindMatricesData[i+13],this.inverseBindMatricesData[i+14],this.inverseBindMatricesData[i+15])}}(),P=function(){return function(e,t){this.name=void 0!==t.name?t.name:null,this.nodes=new Array(t.nodes.length);for(var r=0,n=t.nodes.length;r<n;r++)this.nodes[r]=e.nodes[t.nodes[r]];this.extensions=void 0!==t.extensions?t.extensions:null,this.extras=void 0!==t.extras?t.extras:null,this.boundingBox=null}}(),I=function(){return function(e){this.nodeID=void 0!==e.node?e.node:null,this.path=e.path,this.extensions=void 0!==e.extensions?e.extensions:null,this.extras=void 0!==e.extras?e.extras:null}}(),N=function(){return function(e,t){this.sampler=t.samplers[e.sampler],this.target=new I(e.target),this.extensions=void 0!==e.extensions?e.extensions:null,this.extras=void 0!==e.extras?e.extras:null}}(),O=function(){return function(e,t){this.input=e.accessors[t.input],this.output=e.accessors[t.output],this.inputTypedArray=this.input.getAccessorData(),this.outputTypedArray=this.output.getAccessorData(),this.interpolation=void 0!==t.interpolation?t.interpolation:"LINEAR",this.extensions=void 0!==t.extensions?t.extensions:null,this.extras=void 0!==t.extras?t.extras:null,this.curIdx=0,this.curValue=n.vec4.create(),this.endT=this.inputTypedArray[this.inputTypedArray.length-1],this.inputMax=this.endT-this.inputTypedArray[0]}}(),R=function(){return function(e,t){var r,n;for(this.name=void 0!==t.name?t.name:null,this.samplers=[],r=0,n=t.samplers.length;r<n;r++)this.samplers[r]=new O(e,t.samplers[r]);for(this.channels=[],r=0,n=t.channels.length;r<n;r++)this.channels[r]=new N(t.channels[r],this);this.extensions=void 0!==t.extensions?t.extensions:null,this.extras=void 0!==t.extras?t.extras:null}}(),F=function(){return function(e){this.json=e,this.defaultScene=void 0!==e.scene?e.scene:0,this.version=Number(e.asset.version),e.accessors&&(this.accessors=new Array(e.accessors.length)),e.bufferViews&&(this.bufferViews=new Array(e.bufferViews.length)),e.scenes&&(this.scenes=new Array(e.scenes.length)),e.nodes&&(this.nodes=new Array(e.nodes.length)),e.meshes&&(this.meshes=new Array(e.meshes.length)),e.materials&&(this.materials=new Array(e.materials.length)),e.textures&&(this.textures=new Array(e.textures.length)),e.samplers&&(this.samplers=new Array(e.samplers.length)),e.images&&(this.images=new Array(e.images.length)),e.skins&&(this.skins=new Array(e.skins.length)),e.animations&&(this.animations=new Array(e.animations.length)),e.cameras&&(this.cameras=new Array(e.cameras.length)),this.extensions=void 0!==e.extensions?e.extensions:null,this.extras=void 0!==e.extras?e.extras:null}}(),C=function(){function e(e,t,r){this._buffers=[],this._gltfModel=e,this._resourceManager=t,this._materialManager=r}return e.prototype._parse=function(){var e,t,r,i,a,o,s;if(this.model.bufferViews)for(e=0,t=this.model.bufferViews.length;e<t;e++)this.model.bufferViews[e]=new g(this.model.json.bufferViews[e],this._buffers[this.model.json.bufferViews[e].buffer]);if(this.model.accessors)for(e=0,t=this.model.accessors.length;e<t;e++)this.model.accessors[e]=new _(this.model.json.accessors[e],this.model.bufferViews[this.model.json.accessors[e].bufferView]);if(this.model.materials)for(e=0,t=this.model.materials.length;e<t;e++)this.model.materials[e]=new k(this.model.json.materials[e]);if(this.model.samplers)for(e=0,t=this.model.samplers.length;e<t;e++)this.model.samplers[e]=new E(this.model.json.samplers[e]);if(this.model.textures)for(e=0,t=this.model.textures.length;e<t;e++)this.model.textures[e]=new w(this,this.model.json.textures[e]);for(e=0,t=this.model.meshes.length;e<t;e++)this.model.meshes[e]=new b(this,this.model.json.meshes[e],e);for(e=0,t=this.model.nodes.length;e<t;e++)this.model.nodes[e]=new y(this,this.model.json.nodes[e],e);for(e=0,t=this.model.nodes.length;e<t;e++)for(r=0,i=(o=this.model.nodes[e]).children.length;r<i;r++)o.children[r]=this.model.nodes[o.children[r]];var l,u=new Array(this.model.nodes.length);for(e=0,t=u.length;e<t;e++)u[e]=n.mat4.create();function c(e,t){var r=u[e.nodeID];if(null!==t)n.mat4.mul(r,u[t.nodeID],e.matrix);else{n.mat4.mul(r,[1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1],e.matrix)}e.matrixWorld=n.mat4.clone(r),e.matrixParent=n.mat4.clone(null!==t?u[t.nodeID]:n.mat4.create())}function d(e,t){var r,i=u[e.nodeID];r=null!==t?t.bvh:a.boundingBox,e.mesh&&(s=e.mesh).boundingBox&&(e.aabb=v.getAABBFromOBB(s.boundingBox,i),0===e.children.length&&(n.vec3.copy(e.bvh.min,e.aabb.min),n.vec3.copy(e.bvh.max,e.aabb.max))),n.vec3.min(r.min,r.min,e.bvh.min),n.vec3.max(r.max,r.max,e.bvh.max)}for(e=0,t=this.model.scenes.length;e<t;e++){for((a=this.model.scenes[e]=new P(this.model,this.model.json.scenes[e])).boundingBox=new v,r=0,i=a.nodes.length;r<i;r++)(o=a.nodes[r]).traverseTwoExecFun(null,c,d);a.boundingBox.calculateTransform()}for(r=0,i=this.model.nodes.length;r<i;r++)null!==(o=this.model.nodes[r]).bvh&&o.bvh.calculateTransform();if(this.model.animations)for(e=0,t=this.model.animations.length;e<t;e++)this.model.animations[e]=new R(this.model,this.model.json.animations[e]);if(this.model.json.skins)for(e=0,t=this.model.skins.length;e<t;e++)for(this.model.skins[e]=new D(this.model,this.model.json.skins[e],e),r=0,i=(l=this.model.skins[e].joints).length;r<i;r++)l[r].jointID=r;for(e=0,t=this.model.nodes.length;e<t;e++)null!==(o=this.model.nodes[e]).skin&&"number"==typeof o.skin&&(o.skin=this.model.skins[o.skin])},e.prototype._createTexture=function(e){var t=this.model.textures[e.index],r=this._modelUrl+"-"+e.index;if(this._resourceManager.hasTexture(r))return this._resourceManager.getTexture(r);var n=this._resourceManager.getTexture(r),i=t.source,a=this._resourceManager.gl,o=a.LINEAR,s=a.REPEAT;return t.sampler&&t.sampler.minFilter&&(o=t.sampler.minFilter),t.sampler&&t.sampler.wrapS&&(s=t.sampler.wrapS),n.createFromImage(i,-1===i.src.indexOf(".png")?a.RGB:a.RGBA,a.UNSIGNED_BYTE,o,s),n},e.prototype._createShader=function(e,t){var r=[];r.push("MODEL_TRANSFORM");var n=e.material;n&&(n.pbrMetallicRoughness.baseColorTexture&&r.push("HAS_BASECOLORMAP"),n.pbrMetallicRoughness.metallicRoughnessTexture&&r.push("HAS_METALROUGHNESSMAP"),n.normalTexture&&r.push("HAS_NORMALMAP"),n.occlusionTexture&&r.push("HAS_OCCLUSIONMAP"),n.emissiveTexture&&r.push("HAS_EMISSIVEMAP"),t&&r.push("HAS_SKIN")),void 0!==e.attributes.TANGENT&&r.push("HAS_TANGENT");var i=this._resourceManager.getShader("pbr",r);if(!i.ready){var a=s.default.pbr;if(i.createFromShaderSource(a,r),!i.ready)throw"modelo3d error at creating shader 'pbr'!"}return i},e.prototype._createMaterial=function(e,t){var r,n=this._resourceManager.gl,i=e.material,a=this._materialManager.createMaterialPbr(this._modelUrl+"-"+e.material.name);if(a.attachShader(t,this._resourceManager),a.setBaseColor(i.pbrMetallicRoughness.baseColorFactor),a.setMetallic(i.pbrMetallicRoughness.metallicFactor),a.setRoughness(i.pbrMetallicRoughness.roughnessFactor),a.setEmissive(i.emissiveFactor),this._resourceManager.hasTexture("modelo-brdf-lut")?r=this._resourceManager.getTexture("modelo-brdf-lut"):(r=this._resourceManager.getTexture("modelo-brdf-lut")).createFromFile("data:image/png;base64,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",n.RGBA,n.LINEAR,n.CLAMP_TO_EDGE,function(){}),a.setBrdfLut(r),i.pbrMetallicRoughness.baseColorTexture){var o=i.pbrMetallicRoughness.baseColorTexture,s=this._createTexture(o);a.setBaseColorTexture(s)}if(i.normalTexture){o=i.normalTexture,s=this._createTexture(o);a.setNormalTexture(s)}if(i.pbrMetallicRoughness.metallicRoughnessTexture){o=i.pbrMetallicRoughness.metallicRoughnessTexture,s=this._createTexture(o);a.setMetallicRoughnessTexture(s)}if(i.emissiveTexture){o=i.emissiveTexture,s=this._createTexture(o);a.setEmissiveTexture(s)}if(i.occlusionTexture){o=i.occlusionTexture,s=this._createTexture(o);a.setOcclusionTexture(s)}return a},e.prototype._createMesh=function(e){var t=this._resourceManager.gl,r=new o.default,n=[],i=e.attributes.POSITION;r.add("m_aPosition",0,i.componentType,i.normalized,i.size,i.byteStride,i.byteOffset),n.push(i.bufferView.getBuffer(t,t.ARRAY_BUFFER)),void 0!==e.attributes.NORMAL&&(i=e.attributes.NORMAL,r.add("m_aNormal",1,i.componentType,i.normalized,i.size,i.byteStride,i.byteOffset),n.push(i.bufferView.getBuffer(t,t.ARRAY_BUFFER))),void 0!==e.attributes.TEXCOORD_0&&(i=e.attributes.TEXCOORD_0,r.add("m_aTexCoord",4,i.componentType,i.normalized,i.size,i.byteStride,i.byteOffset),n.push(i.bufferView.getBuffer(t,t.ARRAY_BUFFER))),void 0!==e.attributes.TANGENT&&(i=e.attributes.TANGENT,r.add("m_aTangent",7,i.componentType,i.normalized,i.size,i.byteStride,i.byteOffset),n.push(i.bufferView.getBuffer(t,t.ARRAY_BUFFER))),void 0!==e.attributes.JOINTS_0&&(i=e.attributes.JOINTS_0,r.add("m_aJoint0",8,i.componentType,i.normalized,i.size,i.byteStride,i.byteOffset),n.push(i.bufferView.getBuffer(t,t.ARRAY_BUFFER))),void 0!==e.attributes.WEIGHTS_0&&(i=e.attributes.WEIGHTS_0,r.add("m_aWeight0",9,i.componentType,i.normalized,i.size,i.byteStride,i.byteOffset),n.push(i.bufferView.getBuffer(t,t.ARRAY_BUFFER)));var a=this._resourceManager.getMesh(this._modelUrl+e.index),s=(i=this.model.accessors[e.indices]).bufferView.getBuffer(t,t.ELEMENT_ARRAY_BUFFER);return a.createFromBufferObject(n,s,r,e.mode,e.indicesComponentType,e.indicesLength,i.byteOffset),a},e.prototype._createDrawable=function(e,t,r,n,i){var a=t.boundingBox,o=new l.default(r,n,i,null,new Float32Array([a.min[0],a.min[1],a.min[2],a.max[0],a.max[1],a.max[2]]));return o.transform.set(e.matrixWorld),this._gltfModel.addDrawable(o),o},e.prototype._traverseNode=function(e){var t=this;if(e.mesh&&e.mesh.primitives.forEach(function(r){var n=t._createMesh(r),i=t._createShader(r,!!e.skin),a=t._createMaterial(r,i),o=t._createDrawable(e,r,n,i,a);e.skin&&(o.skeleton=e.skin.mySkeleton)}),e.children.length>0)for(var r=0;r<e.children.length;r++)this._traverseNode(e.children[r])},e.prototype._buildSkeleton=function(e,t,r){var n=this;t.children.forEach(function(t){var i=r.get(t.nodeID.toString());e.addChild(i),n._buildSkeleton(i,t,r)})},e.prototype._setupScene=function(){var e=this;this.model.skins&&this.model.skins.length>0&&(this.model.skins.forEach(function(t){var r=new Map,i=new c.default(e._modelUrl+t.skeleton.nodeID.toString(),t.skeleton.inverseBindMatrix?t.skeleton.inverseBindMatrix:n.mat4.create(),t.skeleton.matrixWorld);r.set(i.getName(),i);var a=new u.default(i,e._resourceManager);a.setRootMatrix(t.skeleton.matrixParent),t.joints.forEach(function(e){var t=r.get(e.nodeID.toString());t||(t=new c.default(e.nodeID.toString(),e.inverseBindMatrix,e.matrixWorld),r.set(t.getName(),t)),a.addJoint(t)}),e._buildSkeleton(i,t.skeleton,r),e._gltfModel.skeletons.push(a),t.mySkeleton=a}),this.model.animations.forEach(function(t,r){var n=new Map,i=0,a=new Set;t.channels.forEach(function(e){var t=e.sampler,r=f.INTERPOLATION.LINEAR;switch(t.interpolation){case"LINEAR":r=f.INTERPOLATION.LINEAR;break;case"STEP":r=f.INTERPOLATION.STEP;break;case"CATMULLROMSPLINE":r=f.INTERPOLATION.CATMULLROMSPLINE;break;case"CUBICSPLINE":r=f.INTERPOLATION.CUBICSPLINE}for(var o=0,s=0;s<t.inputTypedArray.length;s++){var l=t.inputTypedArray[s];l>i&&(i=l);var u=n.get(l);u||(u=new h.default(l),n.set(l,u));for(var c=u.getJointKeyFrames(),d=t.output.size,p=[],m=0;m<d;m++)p[m]=t.outputTypedArray[o+m];var v=e.target.nodeID.toString();a.has(v)||a.add(v);var _=c.get(v);switch(_||(_=new f.default,c.set(v,_)),_.setInterpolationMethod(r),e.target.path){case"translation":_.setTranslation(p);break;case"rotation":_.setRotation(p);break;case"scale":_.setScale(p)}o+=d}});var o=Array.from(n.values());o.sort(function(e,t){return e.getTimeStamp()-t.getTimeStamp()}),o.forEach(function(t){t.getJointKeyFrames().forEach(function(t,r){var n=parseInt(r),i=e.model.nodes[n];null===t.getTranslation()&&t.setTranslation(i.translation),null===t.getRotation()&&t.setRotation(i.rotation),null===t.getScale()&&t.setScale(i.scale)})}),o[0].getJointKeyFrames().forEach(function(e,t){for(var r=1;r<o.length;r++)o[r].getJointKeyFrames().has(t)||o[r].getJointKeyFrames().set(t,e)});var s=new d.default(r.toString(),i,o);a.forEach(function(t){for(var r=0;r<e._gltfModel.skeletons.length;r++){var n=e._gltfModel.skeletons[r];if(-1!==n.joints.findIndex(function(e){return e.getName()===t})){n.addAnimation(s);break}}})})),this.model.scenes.forEach(function(t){t.nodes.forEach(function(t){e._traverseNode(t)})});var t=this.model.scenes[0].boundingBox;this._gltfModel.bbox=new Float32Array([t.min[0],t.min[1],t.min[2],t.max[0],t.max[1],t.max[2]])},e.prototype.load=function(e,t){var r=this;this._modelUrl=e,this._baseUrl=this._getBaseUrl(e),a.a.get(e,{responseType:"json"}).then(function(e){var n=e.data;r.model=new F(n);var i=[];n.images&&i.push(r._loadImages(n.images)),n.buffers&&i.push(r._loadArraybuffer(n.buffers)),Promise.all(i).then(function(){r._parse(),r._setupScene(),t()})})},e.prototype._loadImages=function(e){var t=this;return new Promise(function(r,n){for(var i=e.length,a=function(){var a=new Image;a.src=t._baseUrl+e[o].uri,a.onload=function(){0===--i&&r()},a.onerror=function(){console.error("failed to load image: "+a.src),n()},t.model.images[o]=a},o=0;o<e.length;o++)a()})},e.prototype._loadArraybuffer=function(e){var t=this;return new Promise(function(r,n){for(var i=[],o=0;o<e.length;o++){var s=e[o].uri;if("data:application/octet-stream;base64,"===s.substring(0,37)){var l=s.substring(37),u=t.base64toArrayBuffer(l);t._buffers[o]=u.buffer}else{var c=t._baseUrl+e[o].uri,d=a.a.get(c,{responseType:"arraybuffer"});i.push(d)}}Promise.all(i).then(function(e){e.forEach(function(e,r){t._buffers[r]=e.data}),r()})})},e.prototype._getBaseUrl=function(e){var t="",r=e.lastIndexOf("/");return-1!==r&&(t=e.substring(0,r+1)),t},e.prototype.base64toArrayBuffer=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=window.atob(t),n=new Uint8Array(r.length),i=0;i<r.length;++i)n[i]=r.charCodeAt(i);return n},e}();t.default=C},"./03scene/MaterialManager.ts":function(e,t,r){"use strict";r.r(t);var n=r("./03scene/materials/MaterialAdhoc.ts"),i=r("./03scene/materials/MaterialPbr.ts"),a=function(){function e(e){this._materials={},this._customColors={},this._customColorCount=0,this._buffer=new Uint8Array(1024),this._resourceManager=e;var t=e.gl;this.texture=e.getTexture("texturemanager"),this.texture.create(256,1,t.RGBA8,t.NEAREST,t.CLAMP_TO_EDGE),this.texture.use(3)}return e.prototype.destroy=function(){for(var e in this._materials)this._materials[e].destroy();this._materials=null,delete this._materials,this.texture=null,delete this.texture,this._buffer=null,delete this._buffer},e.prototype.createMaterialPbr=function(e){return this._materials[e]?this._materials[e]:(this._materials[e]=new i.default(e,this._resourceManager),this._materials[e])},e.prototype.createMaterialAdhoc=function(e){return this._materials[e]?this._materials[e]:(this._materials[e]=new n.default(e,this._resourceManager),this._materials[e])},e.prototype.addCustomColor=function(e){var t=e.toString();return this._customColors[t]||(this._customColors[t]={index:this._customColorCount,color:e},this._customColorCount++),this._customColors[t].index},e.prototype.getMaterial=function(e){return this._materials[e]},e.prototype.upload=function(){for(var e in this._customColors){var t=4*this._customColors[e].index;this._buffer[t]=Math.floor(255*this._customColors[e].color[0]),this._buffer[t+1]=Math.floor(255*this._customColors[e].color[1]),this._buffer[t+2]=Math.floor(255*this._customColors[e].color[2]),this._buffer[t+3]=Math.floor(255*this._customColors[e].color[3])}this.texture.update(this._buffer)},e.prototype.getAllMaterials=function(){return this._materials},e}();t.default=a},"./03scene/Scene.ts":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/m3d_math.js"),i=r("./03scene/m3d_light.js"),a=r("./03scene/m3d_scene_clip.js"),o=r("./03scene/Background.ts"),s=r("./03scene/model/Element.ts"),l=r("./03scene/materials/MaterialAdhoc.ts"),u=r("./03scene/materials/MaterialPbr.ts"),c=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},d=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e},h=new Float32Array([1e10,1e10,1e10,-1e10,-1e10,-1e10]),f=function(){function e(e,t){this._exposure=1,this._lights=[],this.models={},this.pawns={},this.text3Ds=[],this.background=new o.default(e),this.materialManager=t,this.bbox=n.default.aabb.create(),this.scale=1,this.radius=1.732,this._lights[0]=new i.default,this.clipping=new a.default(this)}return e.prototype.destroy=function(){for(var e in this.background&&this.background.destroy(),this.background=null,delete this.background,this.models)this.models[e].destroy();for(var t in this.models=null,delete this.models,this.pawns)this.pawns[t].destroy();this.pawns=null,delete this.pawns,this.bbox=null,this._lights=null,this.clipping=null},e.prototype.updateBBox=function(e){var t;if(e)n.default.aabb.union(this.bbox,this.bbox,e),t=this.bbox;else{for(var r in t=n.default.aabb.create(),this.models){var i=this.models[r];i.updateBBox(),n.default.aabb.union(t,t,i.bbox)}for(var a in this.pawns){var o=this.pawns[a];o.updateBBox(),n.default.aabb.union(t,t,o.bbox)}}this.setBBox(t)},e.prototype.setLightingIntensity=function(e){this._lights[0].setIntensity(e)},e.prototype.setSpecularShinness=function(e){this._lights[0].setSpecularShinness(e)},e.prototype.setLightingLatitude=function(e){this._lights[0].setLatitude(e)},e.prototype.setLightingLongitude=function(e){this._lights[0].setLongitude(e)},e.prototype.setMainLight=function(e){this._lights[0]=e},e.prototype.getMainLight=function(){return this._lights[0]},e.prototype.setBBox=function(e){this.bbox=n.default.aabb.createFromArray(e),n.default.aabb.expand(this.bbox);var t=n.default.aabb.size(this.bbox);this.scale=.5*Math.max(t.width,Math.max(t.height,t.depth)),this.radius=.5*n.default.aabb.length(this.bbox),this.clipping.initialize(this.bbox)},e.prototype.setElementsVisibility=function(e,t,r){null==r&&(r=t);for(var n=[],i=0,a=e.length;i<a;i++){var o=e[i],s=o.split("+")[0],l=this.models[s].tree.elements[o];if(l){var u=l.getNodes();n.push.apply(n,d(u))}}for(var c=new Set,h=0;h<n.length;h++){var f=n[h];f.drawable.mesh.isLine()?f.visible=r:f.visible=t,c.add(f.drawable)}c.forEach(function(e){e.updateVisibility()})},e.prototype.isElementVisible=function(e){var t=e.split("+")[0],r=this.models[t].tree.elements[e];return!!r&&r.getNodes()[0].visible},e.prototype.getElementBBox=function(e){var t=e.split("+")[0],r=this.models[t].tree.elements[e];return r?r.bbox:h},e.prototype.getElementMaterials=function(e){var t=e.split("+")[0],r=this.models[t].tree.elements[e];if(r){var n=new Set;return r.getNodes().forEach(function(e){n.has(e.drawable.material)||n.add(e.drawable.material)}),Array.from(n)}},e.prototype.getElementMaterialNames=function(e){var t=e.split("+")[0],r=this.models[t].tree.elements[e];if(r){var n=new Set;return r.getNodes().forEach(function(e){e.drawable.mesh.isLine()||n.has(e.drawable.material.name)||n.add(e.drawable.material.name)}),Array.from(n)}},e.prototype.getPawnMaterialNames=function(e){var t=new Set;return e.drawables.forEach(function(e){e.mesh.isLine()||t.has(e.material.name)||t.add(e.material.name)}),Array.from(t)},e.prototype.getMaterialType=function(e){var t=this.materialManager.getMaterial(e);if(t)return t instanceof l.default?"MaterialAdhoc":t instanceof u.default?"MaterialPbr":void 0;console.warn("no material named "+e+" found!")},e.prototype.getModelMaterialNames=function(){var e={};for(var t in this.models)e[t]=[],this.models[t].materialDrawablesMap.forEach(function(r,n){for(var i=!1,a=0;a<r.length;a++)if(r[a].mesh.isLine()){i=!0;break}i||e[t].push(n)});return e},e.prototype.getDrawablesByMaterialName=function(e){for(var t in this.models)return this.models[t].materialDrawablesMap.has(e)?this.models[t].materialDrawablesMap.get(e):[]},e.prototype.getElementNamesByMaterialName=function(e){var t=[];for(var r in this.models)if(this.models[r].materialDrawablesMap.has(e))return this.models[r].materialDrawablesMap.get(e).forEach(function(e){e.mesh.isLine()||e.nodes.forEach(function(e){var n=e.getElement(),i=r+"+"+n.getDocument().id+"/"+n.id;t.push(i)})}),t;return console.warn("no material named "+e+"was found!"),null},e.prototype.getMaterialParameter=function(e,t){var r=this.materialManager.getMaterial(e);switch(t){case"color":if(r instanceof l.default)return r.getDiffuse();if(r instanceof u.default)return r.getBaseColor();break;case"colorTexture":var n=null;return r instanceof l.default?n=r.getDiffuseTexture():r instanceof u.default&&(n=r.getBaseColorTexture()),n?n.url:null;case"opacity":if(r instanceof l.default||r instanceof u.default)return r.getTransparent();break;case"roughness":if(r instanceof u.default)return r.getRoughness();break;case"metallic":if(r instanceof u.default)return r.getMetallic()}console.warn("parameter name "+t+" does not exist in material: "+e)},e.prototype.setMaterialParameter=function(e,t,r){var n=this.materialManager.getMaterial(e);switch(t){case"color":n instanceof l.default?n.setDiffuse(r):n instanceof u.default?n.setBaseColor(r):console.warn("material "+e+" should be MaterialAhoc or MaterialPbr!");break;case"opacity":n instanceof l.default||n instanceof u.default?n.setTransparent(r):console.warn("material "+e+" should be MaterialAhoc or MaterialPbr!");break;case"colorTexture":for(var i=this.getDrawablesByMaterialName(n.name),a=0;a<i.length;a++)if(!i[a].mesh.attributes.hasUV)return void console.warn("A drawable using this material doesn't has uv coord.");for(a=0;a<i.length;a++)i[a].recompileShader("HAS_BASECOLORMAP",!0);null===r&&(r=n.originTextureUrl),n instanceof l.default?n.setDiffuseTexture(r):n instanceof u.default?n.setBaseColorTexture(r):console.warn("material "+e+" should be MaterialAhoc or MaterialPbr!");break;case"roughness":n instanceof u.default?n.setRoughness(r):console.warn("material "+e+" should be MaterialPbr!");break;case"metallic":n instanceof u.default?n.setMetallic(r):console.warn("material "+e+" should be MaterialPbr!");break;case"metallicRoughnessTexture":for(i=this.getDrawablesByMaterialName(n.name),a=0;a<i.length;a++)if(!i[a].mesh.attributes.hasUV)return void console.warn("A drawable using this material doesn't has uv coord.");for(a=0;a<i.length;a++)i[a].recompileShader("HAS_METALROUGHNESSMAP",!0);n instanceof u.default?n.setMetallicRoughnessTexture(r):console.warn("material "+e+" should be MaterialPbr");break;case"emissiveTexture":for(i=this.getDrawablesByMaterialName(n.name),a=0;a<i.length;a++)if(!i[a].mesh.attributes.hasUV)return void console.warn("A drawable using this material doesn't has uv coord.");for(a=0;a<i.length;a++)i[a].recompileShader("HAS_EMISSIVEMAP",!0);n instanceof u.default?n.setEmissiveTexture(r):console.warn("material "+e+" should be MaterialPbr");break;case"normalTexture":for(i=this.getDrawablesByMaterialName(n.name),a=0;a<i.length;a++)if(!i[a].mesh.attributes.hasUV)return void console.warn("A drawable using this material doesn't has uv coord.");for(a=0;a<i.length;a++)i[a].recompileShader("HAS_NORMALMAP",!0);n instanceof u.default?n.setNormalTexture(r):console.warn("material "+e+" should be MaterialPbr");break;case"reflectionIntensity":n instanceof u.default?n.setReflectIntensity(r):console.warn("Material type is not MaterialPbr;")}},e.prototype.getElementsBBox=function(e){var t=this,r=n.default.aabb.createFromArray([1/0,1/0,1/0,-1/0,-1/0,-1/0]);return e.forEach(function(e){var i=e.split("+")[0],a=t.models[i];if(a){var o=a.tree.elements[e];o&&n.default.aabb.union(r,r,o.bbox)}}),r},e.prototype.getElements=function(e,t){void 0===e&&(e=s.ElementType.ANY),void 0===t&&(t=!1);var r=[];for(var n in this.models){var i=this.models[n];for(var a in i.tree.elements){var o=i.tree.elements[a];e===s.ElementType.ANY?r.push(o):o.etype!==e||t?o.etype!==e&&t&&r.push(o):r.push(o)}}return r},e.prototype.getElementsNames=function(e,t){void 0===e&&(e=s.ElementType.ANY),void 0===t&&(t=!1);var r=[];for(var n in this.models){var i=this.models[n];for(var a in i.tree.elements){var o=i.tree.elements[a];e===s.ElementType.ANY?r.push(a):o.etype!==e||t?o.etype!==e&&t&&r.push(a):r.push(a)}}return r},e.prototype.setElementsColor=function(e,t){for(var r=this,n=new Set,i=new Map,a=null,o=function(t,r){var o=e[t],l=o.split("+")[0],u=s.models[l].tree.elements[o];if(u){var c=u.getNodes();c.forEach(function(e){n.add(e)}),c.forEach(function(e){i.has(e.drawable)?(a=i.get(e.drawable)).has(o)||a.add(o):i.set(e.drawable,new Set([o]))})}},s=this,l=0,u=e.length;l<u;l++)o(l);t?i.forEach(function(e,i){var a=1;if(null!==t[3]&&void 0!==t[3]&&(t[3]<.99&&!i.material.transparent?e.forEach(function(e){console.warn("Can not set opaque elements to transparent: "+e)}):a=t[3]),1===i.nodes.length){var o=i.material.clone();o.setDiffuse(t),o.setTransparent(a),i.originalMaterial||(i.originalMaterial=i.material),i.material=o}else{var s=r.materialManager.addCustomColor([t[0],t[1],t[2],a]);if(s>126)return void console.warn("color count out of index");r.materialManager.upload();for(var l=0;l<i.nodes.length;l++){var u=i.nodes[l];n.has(u)&&(u.platteIndex=(128&u.platteIndex)+s)}i.updateColor()}}):i.forEach(function(e,t){if(1!==t.nodes.length){for(var r=0;r<t.nodes.length;r++){var n=t.nodes[r];n.platteIndex=127+(128&n.platteIndex)}t.updateColor()}else t.originalMaterial&&(t.material=t.originalMaterial)})},e.prototype.setModelVisibility=function(e,t,r){null==r&&(r=t);var n=this.models[e];n?this.setElementsVisibility(Object.keys(n.tree.elements),t,r):console.warn("no model named "+n+" is found.")},e.prototype.addPawn=function(e){this.pawns[e.name]=e,this.updateBBox(e.bbox)},e.prototype.addModel=function(e){this.models[e.name]?console.error("can not load same model twice: "+e.name+"!"):(this.models[e.name]=e,this.updateBBox(e.bbox))},e.prototype.removePawn=function(e){this.pawns.hasOwnProperty(e.name)&&delete this.pawns[e.name]},e.prototype.addText3D=function(e){this.text3Ds.push(e),this.updateBBox()},e.prototype.removeText3D=function(e){var t=this.text3Ds.indexOf(e);-1!==t?(this.text3Ds.splice(t,1),this.updateBBox()):console.warn("text3D is not found!")},e.prototype.needRenderDoubleSided=function(){var e=2;for(var t in this.models)e&=this.models[t].faces;for(var r in this.pawns)e&=this.pawns[r].faces;return this._needRenderDoubleSided=e<1||e<=1&&this.clipping.isEnabled(),this._needRenderDoubleSided},e.prototype.setRenderDoubleSided=function(e){this._needRenderDoubleSided=e},e.prototype.hasContours=function(){for(var e in this.models)if(this.models[e].hasContours)return!0;return!1},e.prototype.setReflectionMap=function(e){if(e)for(var t in this.models){this.models[t].drawables.forEach(function(t){t.mesh.isLine()||(t.recompileShader("SPECULAR_ENV_MAP",!0),t.material.setSpecularEnvMap(e))})}else for(var t in this.models){this.models[t].drawables.forEach(function(e){e.mesh.isLine()||e.recompileShader("SPECULAR_ENV_MAP",!1)})}},e.prototype.setToneMappingEnabled=function(e){var t=this;for(var r in this.models){this.models[r].drawables.forEach(function(r){r.recompileShader("TONE_MAPPING",e),r.material.parameters.uExposure.value=t._exposure})}this.background&&this.background.skybox&&(this.background.skybox.recompileShader("TONE_MAPPING",e),this.background.skybox.material.parameters.uExposure.value=this._exposure)},e.prototype.setToneMappingExposure=function(e){var t=this;for(var r in this._exposure=e,this.models){this.models[r].drawables.forEach(function(e){e.material.parameters.uExposure&&(e.material.parameters.uExposure.value=t._exposure)})}this.background&&this.background.skybox&&this.background.skybox.material.parameters.uExposure&&(this.background.skybox.material.parameters.uExposure.value=this._exposure)},e}();t.default=f},"./03scene/animations/skeletonAnimation/Animation.ts":function(e,t,r){"use strict";r.r(t);var n=function(){function e(e,t,r){this._name=e,this._keyFrames=r,this._length=t,this._speed=.0167}return e.prototype.getSpeed=function(){return this._speed},e.prototype.setSpeed=function(e){this._speed=e},e.prototype.getName=function(){return this._name},e.prototype.getLength=function(){return this._length},e.prototype.getKeyFrames=function(){return this._keyFrames},e}();t.default=n},"./03scene/animations/skeletonAnimation/Animator.ts":function(e,t,r){"use strict";r.r(t);var n=r("./glMatrix.js"),i=r("./03scene/animations/skeletonAnimation/JointTransform.ts"),a=function(){function e(e){this._skeleton=e,this._animationTime=0}return e.prototype.doAnimation=function(e){this._animationTime=0,this._currentAnimation=e},e.prototype.update=function(){if(null!=this._currentAnimation){this._increaseAnimationTime();var e=this._calculateCurrentAnimationPose();this._applyPoseToJoints(e,this._skeleton.getRoot(),this._skeleton._rootMatrix)}},e.prototype._increaseAnimationTime=function(){this._animationTime+=this._currentAnimation.getSpeed(),this._animationTime>this._currentAnimation.getLength()&&(this._animationTime%=this._currentAnimation.getLength())},e.prototype._calculateCurrentAnimationPose=function(){var e=this._getPreviousAndNextFrames(),t=this._calculateProgression(e[0],e[1]);return this._interpolatePoses(e[0],e[1],t)},e.prototype._applyPoseToJoints=function(e,t,r){var i=this,a=e.get(t.getName());a||(a=n.mat4.create());var o=n.mat4.create();n.mat4.multiply(o,r,a),t.children.forEach(function(t){i._applyPoseToJoints(e,t,o)}),n.mat4.multiply(o,o,t.getInverseBindTransform()),t.setAnimationTransform(o)},e.prototype._getPreviousAndNextFrames=function(){for(var e=this._currentAnimation.getKeyFrames(),t=e[0],r=e[0],n=1;n<e.length&&!((r=e[n]).getTimeStamp()>this._animationTime);n++)t=e[n];return[t,r]},e.prototype._calculateProgression=function(e,t){var r=t.getTimeStamp()-e.getTimeStamp();return(this._animationTime-e.getTimeStamp())/r},e.prototype._interpolatePoses=function(e,t,r){var n=new Map,a=e.getJointKeyFrames(),o=t.getJointKeyFrames();return a.forEach(function(e,t){var a,s=o.get(t);a=e.getInterpolationMethod()==i.INTERPOLATION.STEP?e:i.default.interpolate(e,s,r),n.set(t,a.getLocalTransform())}),n},e}();t.default=a},"./03scene/animations/skeletonAnimation/Joint.ts":function(e,t,r){"use strict";r.r(t);var n=r("./glMatrix.js"),i=function(){function e(e,t,r){this._name=e,this._inverseBindMatrix=t,this.children=[],this._animatedTransform=n.mat4.create(),this._matrixWorld=r}return e.prototype.getName=function(){return this._name},e.prototype.addChild=function(e){this.children.push(e)},e.prototype.getAnimatedTransform=function(){return this._animatedTransform},e.prototype.setAnimationTransform=function(e){n.mat4.copy(this._animatedTransform,e)},e.prototype.getInverseBindTransform=function(){return this._inverseBindMatrix},e}();t.default=i},"./03scene/animations/skeletonAnimation/JointTransform.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"INTERPOLATION",function(){return n});var n,i=r("./glMatrix.js");!function(e){e[e.LINEAR=0]="LINEAR",e[e.STEP=1]="STEP",e[e.CATMULLROMSPLINE=2]="CATMULLROMSPLINE",e[e.CUBICSPLINE=3]="CUBICSPLINE"}(n||(n={}));var a=function(){function e(e,t,r){this._position=e||null,this._rotation=t||null,this._scale=r||null,this._interpolationMethod=n.LINEAR,this._matrix=i.mat4.create()}return e.prototype.getInterpolationMethod=function(){return this._interpolationMethod},e.prototype.setTranslation=function(e){this._position=e},e.prototype.getTranslation=function(){return this._position},e.prototype.setRotation=function(e){this._rotation=e},e.prototype.getRotation=function(){return this._rotation},e.prototype.setScale=function(e){this._scale=e},e.prototype.getScale=function(){return this._scale},e.prototype.setInterpolationMethod=function(e){this._interpolationMethod=e},e.interpolate=function(t,r,n){var a=new e(i.vec3.create(),i.quat.create(),i.vec3.fromValues(1,1,1));return i.vec3.lerp(a._position,t._position,r._position,n),i.quat.slerp(a._rotation,t._rotation,r._rotation,n),i.vec3.lerp(a._scale,t._scale,r._scale,n),a},e.prototype.getLocalTransform=function(){i.mat4.fromScaling(this._matrix,this._scale);var e=i.mat4.create();return i.mat4.fromQuat(e,this._rotation),i.mat4.multiply(this._matrix,e,this._matrix),this._matrix[12]=this._position[0],this._matrix[13]=this._position[1],this._matrix[14]=this._position[2],this._matrix},e}();t.default=a},"./03scene/animations/skeletonAnimation/KeyFrame.ts":function(e,t,r){"use strict";r.r(t);var n=function(){function e(e){this._timeStamp=e,this._pose=new Map}return e.prototype.getTimeStamp=function(){return this._timeStamp},e.prototype.getJointKeyFrames=function(){return this._pose},e}();t.default=n},"./03scene/animations/skeletonAnimation/Skeleton.ts":function(e,t,r){"use strict";r.r(t);var n=r("./03scene/animations/skeletonAnimation/Animator.ts"),i=r("./glMatrix.js"),a=function(){function e(e,t){this._lastFrame=-1,this._animator=new n.default(this),this._rootJoint=e,this.joints=[],this._animations=[],t.gl.isWebGL2?this._transformTexture=null:(this._transformTexture=t.getTexture("skeleton-transform-"+e.getName()),t.gl.floatTextureExtension||console.warn("skeleton animation not supported in webgl1.0 without float texture extension!"),this._transformTexture.create(512,1,t.gl.RGBA32F,t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._transformTexture.use(4),this.gl=t.gl)}return e.prototype.use=function(e){var t,r=e.getGL();this._transformTexture?(this._transformTexture.update(this._jointMatrices),(t=e.reservedUniforms.m_uTransformTexture).upload(4,this.gl)):(t=e.reservedUniforms.m_uJointMatrix)&&t.upload(this._jointMatrices,r)},e.prototype.updateJointMatrices=function(){var e=this;return this._jointMatrices||(this._transformTexture?this._jointMatrices=new Float32Array(2048):this._jointMatrices=new Float32Array(16*this.joints.length)),this.joints.forEach(function(t,r){var n=t.getAnimatedTransform();e._jointMatrices.set(n,16*r)}),this._jointMatrices},e.prototype.setRootMatrix=function(e){this._rootMatrix=i.mat4.clone(e)},e.prototype.addJoint=function(e){this.joints.push(e)},e.prototype.getRoot=function(){return this._rootJoint},e.prototype.addAnimation=function(e){this._animations.push(e)},e.prototype.getAnimations=function(){return this._animations},e.prototype.doAnimation=function(e){this._animator.doAnimation(e)},e.prototype.update=function(){this._animator.update(),this.updateJointMatrices()},e}();t.default=a},"./03scene/camera/m3d_base_camera.js":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/Environment.ts"),i=(r("./00utility/m3d_math.js"),r("./glMatrix.js"));t.default=function(){function e(e){if(arguments.length<1)throw new Error("BaseCamera requires viewport.");this._at=[0,0,0],this._theta=Math.PI,this._phi=0,this._distance=15,this._firstPerson=!1,this._fov=46,this._invTanFov=1/Math.tan(.00872665*this._fov),this._znear=.1,this._zfar=1e3,this._perspective=!0,this._twoPointsPerpective=!1,this._yVanishFactor=1,this._height=1,this.viewport=i.vec4.create(),this.viewMatrix=i.mat4.create(),this.projectMatrix=i.mat4.create(),this.vpMatrix=i.mat4.create(),this.eye=new Float32Array([15,0,0,1]),this.viewport[0]=e[0],this.viewport[1]=e[1],this.viewport[2]=e[2],this.viewport[3]=e[3],e[3]<1&&(e[3]=1),this._aspect=e[2]/e[3],i.mat4.perspective(this.projectMatrix,this._fov*Math.PI/180,this._aspect,this._znear,this._zfar),i.mat4.identity(this.viewMatrix),this.uniformBlock=new Float32Array(36)}e.prototype.destroy=function(){this.viewport=null,delete this.viewport,this.viewMatrix=null,delete this.viewMatrix,this.projectMatrix=null,delete this.projectMatrix,this.vpMatrix=null,delete this.vpMatrix,this._at=null,delete this._at,this.eye=null,delete this.eye},e.prototype.update=function(){var t,r,n=Math.sin(this._phi),a=Math.cos(this._phi),o=Math.sin(this._theta),s=Math.cos(this._theta),l=this.viewMatrix;l[2]=a*s,l[6]=a*o,this._yVanishFactor=n,this._firstPerson&&(l[2]=-l[2],l[6]=-l[6],this._yVanishFactor=-this._yVanishFactor),Math.abs(this._phi)>=.499999*Math.PI?(l[0]=s*this._yVanishFactor,l[4]=o*this._yVanishFactor,l[8]=-o*l[6]-s*l[2]):(l[0]=-l[6],l[4]=l[2],l[8]=0),(t=e.prototype._length.call(this,l[0],l[4],l[8]))>0&&(r=1/t,l[0]*=r,l[4]*=r,l[8]*=r),l[1]=-this._yVanishFactor*l[4],l[5]=this._yVanishFactor*l[0],l[9]=l[2]*l[4]-l[6]*l[0],(t=e.prototype._length.call(this,l[1],l[5],l[9]))>0&&(r=1/t,l[1]*=r,l[5]*=r,l[9]*=r),this._twoPointsPerpective?(l[8]=0,l[9]=1,l[10]=0,l[11]=0):l[10]=this._yVanishFactor,this._firstPerson?(this._at[0]=this.eye[0]-l[2]*this._distance,this._at[1]=this.eye[1]-l[6]*this._distance,this._at[2]=this.eye[2]-this._yVanishFactor*this._distance):(this.eye[0]=this._at[0]+l[2]*this._distance,this.eye[1]=this._at[1]+l[6]*this._distance,this.eye[2]=this._at[2]+this._yVanishFactor*this._distance),l[12]=-(l[0]*this.eye[0]+l[4]*this.eye[1]+l[8]*this.eye[2]),l[13]=-(l[1]*this.eye[0]+l[5]*this.eye[1]+l[9]*this.eye[2]),l[14]=-(l[2]*this.eye[0]+l[6]*this.eye[1]+this._yVanishFactor*this.eye[2]),i.mat4.multiply(this.vpMatrix,this.projectMatrix,this.viewMatrix)},e.prototype.cull=function(){return!1},e.prototype.setViewport=function(e){var t=e[2],r=e[3];if((t>8192||r>8192)&&(t>=r?(r=Math.floor(8192*r/t),t=8192):(t=Math.floor(8192*t/r),r=8192)),r<1&&(r=1),e[0]!==this.viewport[0]||e[1]!==this.viewport[1]||t!==this.viewport[2]||r!==this.viewport[3]){if(this.viewport[0]=e[0],this.viewport[1]=e[1],this.viewport[2]=t,this.viewport[3]=r,r<1&&(r=1),this._aspect=t/r,this._perspective)this.projectMatrix[0]=this._invTanFov/this._aspect,this.projectMatrix[5]=this._invTanFov;else{var n=this._height*this._aspect,a=this._height;this.projectMatrix[0]=1/n,this.projectMatrix[5]=1/a}i.mat4.multiply(this.vpMatrix,this.projectMatrix,this.viewMatrix)}},e.prototype.isPerspective=function(){return this._perspective},e.prototype.setPerspective=function(e){if(this._perspective!==e){if(this._perspective=e,this._perspective)this.projectMatrix[1]=this.projectMatrix[2]=this.projectMatrix[3]=this.projectMatrix[4]=this.projectMatrix[6]=this.projectMatrix[7]=this.projectMatrix[8]=this.projectMatrix[9]=this.projectMatrix[12]=this.projectMatrix[13]=this.projectMatrix[15]=0,this.projectMatrix[11]=-1,this.projectMatrix[0]=this._invTanFov/this._aspect,this.projectMatrix[5]=this._invTanFov;else{this.projectMatrix[1]=this.projectMatrix[2]=this.projectMatrix[3]=this.projectMatrix[4]=this.projectMatrix[6]=this.projectMatrix[7]=this.projectMatrix[8]=this.projectMatrix[9]=this.projectMatrix[11]=0,this.projectMatrix[12]=0,this.projectMatrix[13]=0,this.projectMatrix[15]=1;var t=this._height*this._aspect,r=this._height;this.projectMatrix[0]=1/t,this.projectMatrix[5]=1/r}i.mat4.multiply(this.vpMatrix,this.projectMatrix,this.viewMatrix)}},e.prototype._setFov=function(e){this._fov!==e&&(this._fov=e,this._invTanFov=1/Math.tan(.00872665*this._fov),this._perspective&&(this.projectMatrix[0]=this._invTanFov/this._aspect,this.projectMatrix[5]=this._invTanFov))},e.prototype._setHeight=function(e){if(this._height!==e&&(this._height=e,!this._perspective)){var t=this._height*this._aspect,r=this._height;this.projectMatrix[0]=1/t,this.projectMatrix[5]=1/r}},e.prototype._updateProjection=function(e,t){var r;this._znear=e||this._znear,this._zfar=t||this._zfar,this._perspective?(r=1/(this._znear-this._zfar),this.projectMatrix[10]=(this._zfar+this._znear)*r,this.projectMatrix[14]=2*this._zfar*this._znear*r):(r=1/(this._znear-this._zfar),this.projectMatrix[10]=2*r,this.projectMatrix[14]=(this._znear+this._zfar)*r),i.mat4.multiply(this.vpMatrix,this.projectMatrix,this.viewMatrix)},e.prototype.reset=function(){this._firstPerson=!1,this._theta=Math.PI,this._phi=0,this._distance=15,this._fov=46,this._invTanFov=1/Math.tan(.00872665*this._fov),this._perspective=!0,i.mat4.perspective(this.projectMatrix,this._fov*Math.PI/180,this._aspect,this._znear,this._zfar),this._at[0]=0,this._at[1]=0,this._at[2]=0,this.eye[0]=-this._distance,this.eye[1]=0,this.eye[2]=0},e.prototype.resetDefaultCam=function(){if(this._defaultCameraInfo.height&&!this._defaultCameraInfo.fov)return console.warn("Reset camera info can't be ortho."),!1;this._firstPerson=!1;var e=this._defaultCameraInfo.phi;e>=.49999*Math.PI&&(e=.49999*Math.PI),e<=-.49999*Math.PI&&(e=-.49999*Math.PI);var t=this._defaultCameraInfo.theta;(t%=2*Math.PI)>Math.PI?t-=2*Math.PI:t<-Math.PI&&(t+=2*Math.PI),this._theta=t,this._phi=e,this._distance=this._defaultCameraInfo.distance,this._fov=this._defaultCameraInfo.fov,this._invTanFov=1/Math.tan(.00872665*this._fov),this._perspective=!0,this._at=this._defaultCameraInfo.at;var r=Math.sin(this._phi),n=Math.cos(this._phi),i=Math.sin(this._theta),a=Math.cos(this._theta);this.eye[0]=this._at[0]+n*a*this._distance,this.eye[1]=this._at[1]+n*i*this._distance,this.eye[2]=this._at[2]+r*this._distance,this._updateProjection();if(this._defaultCameraInfo.theta-this._targetTheta<1e-4&&this._defaultCameraInfo.phi-this._targetPhi<1e-4&&this._defaultCameraInfo.distance-this._targetDistance<1e-4){var o=this._defaultCameraInfo.at[0]-this._targetAt[0],s=this._defaultCameraInfo.at[1]-this._targetAt[1],l=this._defaultCameraInfo.at[2]-this._targetAt[2];Math.sqrt(o*o+s*s+l*l)<=1e-4&&(this._distance+=3*1e-4)}return!0},e.prototype.unproject=function(e,t,r){var i=[0,0,0],a=[0,0,0];e=Math.floor(e*n.Environment.devicePixelRatio),t=Math.floor(t*n.Environment.devicePixelRatio);var o,s=this.viewport[2]-this.viewport[0],l=this.viewport[3]-this.viewport[1];o=void 0!==r?r:this._znear;var u,c,d=e/s*2-1,h=(l-1-t)/l*2-1;return this._perspective?(u=d*o/this.projectMatrix[0],c=h*o/this.projectMatrix[5]):(u=(d-this.projectMatrix[12])/this.projectMatrix[0],c=(h-this.projectMatrix[13])/this.projectMatrix[5]),i[0]=this.eye[0]-this.viewMatrix[2]*o,i[1]=this.eye[1]-this.viewMatrix[6]*o,i[2]=this.eye[2]-this.viewMatrix[10]*o,a[0]=i[0]+u*this.viewMatrix[0]+c*this.viewMatrix[1],a[1]=i[1]+u*this.viewMatrix[4]+c*this.viewMatrix[5],a[2]=i[2]+u*this.viewMatrix[8]+c*this.viewMatrix[9],a},e.prototype.project=function(e,t){var r=i.vec4.fromValues();null!=t?i.vec3.transformMat4(r,e,t):(r[0]=e[0],r[1]=e[1],r[2]=e[2]),r[3]=1;var a=i.vec4.fromValues();i.vec4.transformMat4(a,r,this.vpMatrix),a[0]/=a[3],a[1]/=a[3],a[2]/=a[3];var o=this.viewport[3]-this.viewport[1],s=(a[0]+1)/2*this.viewport[2]+this.viewport[0],l=(a[1]+1)/2*o;return[s/=n.Environment.devicePixelRatio,l=(o-1-l)/n.Environment.devicePixelRatio,Math.sign(r[3])]},e.prototype.setFirstPerson=function(e){this._firstPerson!==e&&(this._theta=Math.PI+this._theta,this._phi=-this._phi,this._firstPerson=e)},e.prototype._length=function(e,t,r){return Math.sqrt(e*e+t*t+r*r)};var t=new Float32Array([0,0,0,0]);e.prototype.getViewDirection=function(){return t[0]=-this.viewMatrix[2],t[1]=-this.viewMatrix[6],t[2]=-this.viewMatrix[10],t},e.prototype.jitter=function(e,t){this._perspective?(this.projectMatrix[8]+=2*e,this.projectMatrix[9]+=2*t):(this.projectMatrix[12]+=2*e,this.projectMatrix[13]+=2*t),i.mat4.multiply(this.vpMatrix,this.projectMatrix,this.viewMatrix)},e.prototype.getNearPlaneSize=function(){if(this._perspective){var e=Math.tan(.017453293*this._fov*.5)*this._znear;return[e*this._aspect,e,-this._znear]}return[1/this.projectMatrix[0],1/this.projectMatrix[5],1]},e.prototype.getFarPlaneSize=function(){if(this._perspective){var e=Math.tan(.017453293*this._fov*.5)*this._zfar;return[e*this._aspect,e,-this._zfar]}return[1/this.projectMatrix[0],1/this.projectMatrix[5],1]},e.prototype.transformPerspectiveToOrthogonal=function(){if(this._perspective){var e=this.getFarPlaneSize();this.setPerspective(!1),this._setHeight(e[1]),this._distance+=3e-4}},e.prototype.shootRay=function(e,t,r,n){var a=this.unproject(e,t);this._perspective?(r[0]=this.eye[0],r[1]=this.eye[1],r[2]=this.eye[2],n[0]=a[0]-r[0],n[1]=a[1]-r[1],n[2]=a[2]-r[2]):(r[0]=a[0],r[1]=a[1],r[2]=a[2],n[0]=-this.viewMatrix[2],n[1]=-this.viewMatrix[6],n[2]=-this.viewMatrix[10]),i.vec3.normalize(n,n)},e.prototype.transformOrthogonalToPerspective=function(){this._perspective||(this.setPerspective(!0),this._distance+=15e-5)},e.prototype.copy=function(e){this._at[0]=e._at[0],this._at[1]=e._at[1],this._at[2]=e._at[2],this._theta=e._theta,this._phi=e._phi,this._distance=e._distance,this._firstPerson=e._firstPerson,this._fov=e._fov,this._invTanFov=e._invTanFov,this._znear=e._znear,this._zfar=e._zfar,this._aspect=e._aspect,this._perspective=e._perspective,this._height=e._height,i.vec4.copy(this.viewport,e.viewport),i.mat4.copy(this.viewMatrix,e.viewMatrix),i.mat4.copy(this.projectMatrix,e.projectMatrix),i.mat4.copy(this.vpMatrix,e.vpMatrix),i.vec4.copy(this.eye,e.eye)};var r=new Array(5);return e.prototype.split=function(e,t){for(var n=this._znear,a=this._zfar,o=n,s=.1*(a-n),l=1;l<e;l++){var u=l/e,c=.5*(n*Math.pow(a/n,u)+n+Math.pow(a-n,u))+s;(d=t[l-1]).copy(this),d._updateProjection(o,c),i.mat4.multiply(d.vpMatrix,d.projectMatrix,d.viewMatrix),o=c,r[l-1]=c}var d;return(d=t[e-1]).copy(this),d._updateProjection(o,a),i.mat4.multiply(d.vpMatrix,d.projectMatrix,d.viewMatrix),r},e.prototype.enabledTwoPointsPerspective=function(t){t&&this.setPerspective(!0),this._twoPointsPerpective=t,e.prototype.update.call(this)},e}()},"./03scene/camera/m3d_camera_animator.js":function(e,t,r){"use strict";r.r(t),t.default=function(){function e(e){this.name=e,this._camera=null,this._saved=null}return e.prototype.destroy=function(){this._camera=null,delete this._camera},e.prototype.attach=function(e,t){this._camera=e,(null==this._saved||t)&&(this._saved=this._camera.animator,this._camera.animator=this)},e.prototype.detach=function(e){this._camera.animator=this._saved,this._saved=null,this._camera=null},e.prototype.update=function(){},e.prototype._onStart=function(){},e.prototype._onEnd=function(){},e}()},"./03scene/camera/m3d_camera_animator_morphing.js":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/m3d_math.js"),i=r("./03scene/camera/m3d_camera_animator.js"),a=r("./03scene/camera/m3d_base_camera.js");t.default=function(){function e(e){i.default.apply(this,["morphing"]),this._speed=0,this._eventEmitter=e}return e.prototype=Object.create(i.default.prototype),e.prototype.constructor=e,e.prototype.update=function(){var e=this._camera;return Math.abs(e._targetFov-e._fov)<Math.abs(this._speed)?(a.default.prototype._setFov.apply(e,[e._targetFov]),a.default.prototype.update.apply(e,arguments),e._cull.update(),this.detach(),this._eventEmitter&&this._eventEmitter.emit("Tour360-MorphingOver"),!1):(a.default.prototype._setFov.apply(e,[e._fov+this._speed]),a.default.prototype.update.apply(e,arguments),e._cull.update(),!0)},e.prototype.start=function(e,t,r,i){var a=this._camera;e&&(a._phi=a._targetPhi=e),t&&(a._theta=a._targetTheta=t),null!=r&&(r=n.default.clamp(r,1,170),a._fov=r),i&&(a._targetFov=i),this._fovDiff=a._targetFov-a._fov,this._speed=(a._targetFov-a._fov)/50},e.prototype.getProgress=function(){var e=this._camera;return(e._targetFov-e._fov)/this._fovDiff},e}()},"./03scene/camera/m3d_camera_animator_navigate.js":function(e,t,r){"use strict";r.r(t);var n=r("./03scene/camera/m3d_base_camera.js"),i=r("./03scene/camera/m3d_camera_animator.js"),a=r("./glMatrix.js");t.default=function(){function e(){i.default.apply(this,["navigate"])}return e.prototype=Object.create(i.default.prototype),e.prototype.constructor=e,e.prototype.update=function(){var e=this._camera;e.eye[0]+=.15*(e._targetEye[0]-e.eye[0]),e.eye[1]+=.15*(e._targetEye[1]-e.eye[1]),e.eye[2]+=.15*(e._targetEye[2]-e.eye[2]),e._at[0]+=.15*(e._targetAt[0]-e._at[0]),e._at[1]+=.15*(e._targetAt[1]-e._at[1]),e._at[2]+=.15*(e._targetAt[2]-e._at[2]),e._distance=a.vec3.distance(e.eye,e._at),a.mat4.lookAt(e.viewMatrix,e.eye,e._at,[0,0,1]);var t=e._targetFov-e._fov;return n.default.prototype._setFov.apply(e,[e._fov+.15*t]),e._updateProjection(),a.mat4.multiply(e.vpMatrix,e.projectMatrix,e.viewMatrix),e._cull.update(),!0},e.prototype.stop=function(e){var t=this._camera;if(!e){if(!t)return;var r=a.vec3.distance(t.eye,t._targetEye)>.001||a.vec3.distance(t._at,t._targetAt)>.001||Math.abs(t._targetFov-t._fov)>.001,n=this;if(r)return void window.setTimeout(function(){n.stop()},100)}t._distance=t._targetDistance;var i=t.eye[0]-t._at[0],o=t.eye[1]-t._at[1],s=t.eye[2]-t._at[2];t._targetPhi=t._phi=Math.asin(Math.min(s/t._targetDistance,1)),t._targetPhi>=.49999*Math.PI&&(t._targetPhi=.49999*Math.PI),t._targetPhi<=-.49999*Math.PI&&(t._targetPhi=-.49999*Math.PI),t._targetTheta=t._theta=Math.atan2(o,i),t._firstPerson&&(t._targetPhi=t._phi=-t._targetPhi,t._targetTheta=t._theta=t._targetTheta+Math.PI),this.detach()},e.prototype.start=function(e,t,r,n,i){var a=this._camera,o=t[0]-e[0],s=t[1]-e[1],l=t[2]-e[2],u=Math.sqrt(o*o+s*s+l*l);if(u>1e-6?(a._targetAt[0]=t[0],a._targetAt[1]=t[1],a._targetAt[2]=t[2]):(o=a._targetAt[0]-e[0],s=a._targetAt[1]-e[1],l=a._targetAt[2]-e[2],u=Math.sqrt(o*o+s*s+l*l)),a._targetEye[0]=e[0],a._targetEye[1]=e[1],a._targetEye[2]=e[2],r&&(a._targetTheta=r),n&&(a._targetPhi=n),i&&a.setTargetFov(i),a._targetDistance=u,u<.001*a._scene.radius){var c=.001*a._scene.radius/u;a._targetDistance=.001*a._scene.radius,a._targetAt[0]=c*o+a._targetEye[0],a._targetAt[1]=c*s+a._targetEye[1],a._targetAt[2]=c*l+a._targetEye[2]}},e}()},"./03scene/camera/m3d_camera_animator_normal.js":function(e,t,r){"use strict";r.r(t);var n=r("./03scene/camera/m3d_base_camera.js"),i=r("./03scene/camera/m3d_camera_animator.js");t.default=function(){function e(){i.default.apply(this,["normal"]),this._updateThreshold=1e-4,this._acceleration=.15}return e.prototype=Object.create(i.default.prototype),e.prototype.constructor=e,e.prototype.update=function(){var e,t=this._camera,r=t._targetDistance-t._distance,i=t._targetTheta-t._theta,a=t._targetPhi-t._phi,o=t._targetFov-t._fov,s=0;if(!t._firstPerson){var l=t._targetAt[0]-t._at[0],u=t._targetAt[1]-t._at[1],c=t._targetAt[2]-t._at[2];t._at[0]+=l*this._acceleration,t._at[1]+=u*this._acceleration,t._at[2]+=c*this._acceleration,s=Math.abs(l)+Math.abs(u)+Math.abs(c)}var d=Math.abs(i)+Math.abs(a)>1e-4,h=Math.abs(r)+s>this._updateThreshold,f=Math.abs(o)>1e-4;return(e=d||h||f)&&(t._distance+=r*this._acceleration,t._theta+=i*this._acceleration,t._phi+=a*this._acceleration,t._phi>=.499999*Math.PI&&(t._phi=.499999*Math.PI),t._phi<=-.499999*Math.PI&&(t._phi=-.499999*Math.PI),n.default.prototype._setFov.apply(t,[t._fov+o*this._acceleration]),n.default.prototype.update.apply(t,arguments),t._scene&&t._updateProjection(),t._cull.update()),e},e}()},"./03scene/camera/m3d_camera_animator_panorama.js":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/m3d_interpolator.js"),i=r("./03scene/camera/m3d_camera_animator.js"),a=r("./glMatrix.js");t.default=function(){function e(e){i.default.apply(this,["panorama"]),this._srcAt=a.vec3.create(),this._dstAt=a.vec3.create(),this._srcTheta=0,this._dstTheta=0,this._srcPhi=0,this._dstPhi=0,this._curTheta=0,this._curPhi=0,this._eventEmitter=e,this._startTime=0,this._duration=0,this._speed=15}return e.prototype=Object.create(i.default.prototype),e.prototype.constructor=e,e.prototype.update=function(){var e=(new Date).getTime()-this._startTime;if(e>=this._duration)return e>3*this._duration?(this.stop(),this._eventEmitter&&this._eventEmitter.emit("Tour360-TransitionOver")):this._updateCamera(this._dstTheta,this._dstPhi)||(this.stop(),this._eventEmitter&&this._eventEmitter.emit("Tour360-TransitionOver")),!0;var t=e/this._duration;return this._curPhi=n.default.linear.scalar(this._srcPhi,this._dstPhi,t),this._curTheta=n.default.linear.scalar(this._srcTheta,this._dstTheta,t),this._updateCamera(this._curTheta,this._curPhi)},e.prototype.stop=function(){var e=this._camera;e._targetDistance=e._distance;var t=e.eye[0]-e._at[0],r=e.eye[1]-e._at[1],n=e.eye[2]-e._at[2];e._targetPhi=e._phi=Math.asin(Math.min(n/e._targetDistance,1)),e._targetPhi>=.49999*Math.PI&&(e._targetPhi=.49999*Math.PI),e._targetPhi<=-.49999*Math.PI&&(e._targetPhi=-.49999*Math.PI),e._targetTheta=e._theta=Math.atan2(r,t),e._firstPerson&&(e._targetPhi=e._phi=-e._targetPhi,e._targetTheta=e._theta=e._targetTheta+Math.PI),this.detach()},e.prototype.start=function(e){var t=this._camera;a.vec3.normalize(t._at,t._at),a.vec3.scale(t._at,t._at,15);var r=Math.atan2(t._at[1],t._at[0]);r<0&&(r+=2*Math.PI),t._targetTheta=t._theta=r,a.vec3.copy(this._srcAt,t._at);var n=a.vec3.clone(e);a.vec3.normalize(n,n),a.vec3.scale(n,n,15),a.vec3.copy(this._dstAt,n),this._srcTheta=t._theta,this._srcPhi=t._phi,this._dstTheta=Math.atan2(n[1],n[0]),this._dstTheta<0&&(this._dstTheta+=2*Math.PI);var i,o,s=this._dstTheta-this._srcTheta;Math.abs(s)>Math.PI&&(this._dstTheta-=2*Math.PI*Math.sign(s)),this._dstPhi=Math.asin(Math.min(n[2]/15,1)),this._dstPhi>=.49999*Math.PI&&(this._dstPhi=.49999*Math.PI),this._dstPhi<=-.49999*Math.PI&&(this._dstPhi=-.49999*Math.PI),i=Math.abs(this._srcTheta-this._dstTheta),o=Math.abs(this._srcPhi-this._dstPhi),i=Math.ceil(i/Math.PI*90),o=Math.ceil(o/Math.PI*90);var l=Math.max(i,o);return this._duration=l*this._speed,this._startTime=(new Date).getTime(),!0},e.prototype._updateCamera=function(e,t){var r=this._camera,n=Math.sin(t),i=Math.cos(t),o=Math.sin(e),s=Math.cos(e);r._targetAt[0]=i*s*r._distance,r._targetAt[1]=i*o*r._distance,r._targetAt[2]=n*r._distance,r._targetTheta=e,r._targetPhi=t;r._targetTheta,r._theta,r._targetPhi,r._phi;var l=r._targetEye[0]-r.eye[0],u=r._targetEye[1]-r.eye[1],c=r._targetEye[2]-r.eye[2],d=r._targetAt[0]-r._at[0],h=r._targetAt[1]-r._at[1],f=r._targetAt[2]-r._at[2],p=Math.abs(l)+Math.abs(u)+Math.abs(c)+Math.abs(d)+Math.abs(h)+Math.abs(f)>1e-4;return r.eye[0]+=.15*l,r.eye[1]+=.15*u,r.eye[2]+=.15*c,r._at[0]+=.15*d,r._at[1]+=.15*h,r._at[2]+=.15*f,r._distance=a.vec3.distance(r.eye,r._at),a.mat4.lookAt(r.viewMatrix,r.eye,r._at,[0,0,1]),a.mat4.multiply(r.vpMatrix,r.projectMatrix,r.viewMatrix),p},e.prototype.setTransitionSpeed=function(e){this._speed=e},e}()},"./03scene/camera/m3d_camera_animator_transition.js":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/Environment.ts"),i=r("./00utility/m3d_interpolator.js"),a=r("./03scene/camera/m3d_camera_animator.js"),o=r("./03scene/camera/m3d_base_camera.js"),s=r("./glMatrix.js");t.default=function(){function e(e){a.default.apply(this,["transition"]),this._srcAt=s.vec3.create(),this._srcEye=s.vec3.create(),this._dstAt=s.vec3.create(),this._dstEye=s.vec3.create(),this._curAt=s.vec3.create(),this._curEye=s.vec3.create(),this._eventEmitter=e,this._srcTheta=0,this._dstTheta=0,this._srcPhi=0,this._dstPhi=0,this._curTheta=0,this._curPhi=0,this._srcDistance=0,this._dstDistance=0,this._startTime=0,this._duration=0,this._speed=15,this._isPano=!1}return e.prototype=Object.create(a.default.prototype),e.prototype.constructor=e,e.prototype.update=function(){var e=(new Date).getTime()-this._startTime;if(e>=this._duration)return e>3*this._duration?(this._eventEmitter&&(this._eventEmitter.emit("Comment-TransitionOver"),this._eventEmitter.emit("Camera-TransitionOver")),this.stop()):this._updateCamera(this._dstEye,this._dstAt,this._dstTheta,this._dstPhi)||(this._eventEmitter&&(this._eventEmitter.emit("Comment-TransitionOver"),this._eventEmitter.emit("Camera-TransitionOver")),this.stop()),!0;var t=e/this._duration;return t=Math.sin(t*Math.PI-Math.PI/2)/2+.5,i.default.linear.vec3(this._curAt,this._srcAt,this._dstAt,t),i.default.linear.vec3(this._curEye,this._srcEye,this._dstEye,t),this._curPhi=i.default.linear.scalar(this._srcPhi,this._dstPhi,t),this._curTheta=i.default.linear.scalar(this._srcTheta,this._dstTheta,t),s.vec3.distance(this._curEye,this._curAt)>.001&&this._updateCamera(this._curEye,this._curAt,this._curTheta,this._curPhi)},e.prototype.stop=function(){var e=this._camera;e._targetDistance=e._distance;var t=e.eye[0]-e._at[0],r=e.eye[1]-e._at[1],n=e.eye[2]-e._at[2];e._targetPhi=e._phi=Math.asin(Math.min(n/e._targetDistance,1)),e._targetPhi>=.49999*Math.PI&&(e._targetPhi=.49999*Math.PI),e._targetPhi<=-.49999*Math.PI&&(e._targetPhi=-.49999*Math.PI),e._targetTheta=e._theta=Math.atan2(r,t),e._firstPerson&&(e._targetPhi=e._phi=-e._targetPhi,e._targetTheta=e._theta=e._targetTheta+Math.PI),this.detach()},e.prototype.start=function(e,t,r){var n=this._camera;return t&&n.restore(e),this._setStartPoint(n._at,n.eye,n._distance,e.at,n._theta,n._phi),t||n.restore(e),this._setEndPoint(n._targetDistance,n._targetTheta,n._targetPhi,n._firstPerson,n._scene?n._scene.radius:100,r),s.vec3.copy(n._at,this._srcAt),s.vec3.copy(n.eye,this._srcEye),t?(this._updateCamera(this._dstEye,this._dstAt,this._dstTheta,this._dstPhi),!0):(this._startTime=(new Date).getTime(),this._updateCamera(this._srcEye,this._srcAt,this._srcTheta,this._srcPhi),!0)},e.prototype.startPano=function(e){var t,r,n=this._camera;this._isPano=!0,s.vec3.normalize(e,e),s.vec3.scale(e,e,15),s.vec3.copy(this._srcAt,n._at),s.vec3.copy(this._srcEye,n.eye),this._srcDistance=s.vec3.distance(n.eye,n._at),s.vec3.copy(this._dstAt,e),this._srcTheta=n._theta,this._srcPhi=n._phi,this._dstDistance=s.vec3.distance(n.eye,e),this._dstTheta=n._theta,this._dstPhi=n._phi,s.vec3.copy(this._dstEye,n.eye),t=s.vec3.distance(this._srcAt,this._dstAt),r=Math.abs(this._srcDistance-this._dstDistance);t=Math.ceil(t/100*450),r=Math.ceil(r/100*450);var i=Math.max(t,r);return i=Math.min(Math.max(i,1),266),this._duration=i*this._speed,this._startTime=(new Date).getTime(),this._updateCamera(this._srcEye,this._srcAt,this._srcTheta,this._srcPhi),!0},e.prototype._setStartPoint=function(e,t,r,n,i,a){s.vec3.copy(this._srcAt,e),s.vec3.copy(this._srcEye,t),this._srcDistance=r,s.vec3.copy(this._dstAt,n),this._srcTheta=i,this._srcPhi=a},e.prototype._setEndPoint=function(e,t,r,i,a,o){var l,u,c;this._dstDistance=e,this._dstTheta=t,this._dstPhi=r;var d,h,f,p,m,v=Math.sin(this._dstPhi),_=Math.cos(this._dstPhi),g=Math.sin(this._dstTheta);l=_*Math.cos(this._dstTheta),u=_*g,c=v,i&&(l=-l,u=-u,c=-c),this._dstEye[0]=this._dstAt[0]+l*this._dstDistance,this._dstEye[1]=this._dstAt[1]+u*this._dstDistance,this._dstEye[2]=this._dstAt[2]+c*this._dstDistance,d=s.vec3.distance(this._srcAt,this._dstAt),h=s.vec3.distance(this._srcEye,this._dstEye),f=Math.abs(this._srcDistance-this._dstDistance),p=Math.abs(this._srcTheta-this._dstTheta),m=Math.abs(this._srcPhi-this._dstPhi);var y=n.Environment.isMobile?300:450,b=o||266;d=Math.ceil(d/a*y),h=Math.ceil(h/a*y),f=Math.ceil(f/a*y),p=Math.ceil(p/Math.PI*90),m=Math.ceil(m/Math.PI*90);var x=Math.max(f,Math.max(d,h));x=Math.max(x,Math.max(p,m)),x=Math.min(Math.max(x,1),b),this._duration=x*this._speed},e.prototype._updateCamera=function(e,t,r,n){var i=this._camera;i._targetAt[0]=t[0],i._targetAt[1]=t[1],i._targetAt[2]=t[2],i._targetEye[0]=e[0],i._targetEye[1]=e[1],i._targetEye[2]=e[2],r&&(i._targetTheta=r),n&&(i._targetPhi=n);var a=i._targetAt[0]-i._targetEye[0],l=i._targetAt[1]-i._targetEye[1],u=i._targetAt[2]-i._targetEye[2],c=Math.sqrt(a*a+l*l+u*u);i._targetDistance=c;var d=i._scene?i._scene.radius:100;if(c<.001*d){var h=.001*d/c;i._targetDistance=.001*d,i._targetAt[0]=h*a+i._targetEye[0],i._targetAt[1]=h*l+i._targetEye[1],i._targetAt[2]=h*u+i._targetEye[2]}var f=i._targetFov-i._fov,p=i._targetTheta-i._theta,m=i._targetPhi-i._phi,v=i._targetEye[0]-i.eye[0],_=i._targetEye[1]-i.eye[1],g=i._targetEye[2]-i.eye[2],y=i._targetAt[0]-i._at[0],b=i._targetAt[1]-i._at[1],x=i._targetAt[2]-i._at[2],w=!1;Math.abs(1-Math.abs(i._targetPhi/(.49999*Math.PI)))<1e-4&&(w=!0);var E=Math.abs(p)+Math.abs(m)>1e-4,M=Math.abs(v)+Math.abs(_)+Math.abs(g)+Math.abs(y)+Math.abs(b)+Math.abs(x)>(w?6e-7:1e-4),A=Math.abs(f)>1e-4,T=E||M||A;return i.eye[0]+=.15*v,i.eye[1]+=.15*_,i.eye[2]+=.15*g,i._at[0]+=.15*y,i._at[1]+=.15*b,i._at[2]+=.15*x,i._distance=s.vec3.distance(i.eye,i._at),s.mat4.lookAt(i.viewMatrix,i.eye,i._at,[0,0,1]),o.default.prototype._setFov.apply(i,[i._fov+.15*f]),i._scene&&i._updateProjection(),s.mat4.multiply(i.vpMatrix,i.projectMatrix,i.viewMatrix),i._cull.update(),T},e.prototype.setTransitionSpeed=function(e){this._speed=e},e}()},"./03scene/camera/m3d_scene_camera.js":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/m3d_math.js"),i=r("./03scene/culling/m3d_cull.js"),a=r("./03scene/camera/m3d_base_camera.js"),o=r("./03scene/camera/m3d_camera_animator_normal.js"),s=r("./glMatrix.js");t.default=function(){s.vec3.create(),s.vec3.create();function e(e,t){a.default.apply(this,[t]),this._scene=e,this._targetAt=[0,0,0],this._targetEye=[0,0,0],this._targetFov=46,this._targetTheta=-Math.PI/4,this._targetPhi=Math.PI/18,this._targetDistance=15,this._initDistance=15,this._maxZoomOffset=.6,this._minZoomOffset=.15,this.animator=new o.default,this.animator.attach(this),this._cull=new i.default(this),this.updated=!0,this._prevUpdated=this.updated,this._updateStopListeners=[],this._minPitchAngle=-.499999*Math.PI,this._maxPitchAngle=.499999*Math.PI,this._maxTargetDistanceRatio=1/0,this._minTargetDistanceRatio=-1/0,this._minZnearRatio=.001,this._defaultCameraInfo=null}return e.prototype=Object.create(a.default.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._cull.destroy(),this._cull=null,delete this._cull,this.animator.destroy(),this.animator=null,delete this.animator,this._targetAt=null,delete this._targetAt,this._targetEye=null,delete this._targetEye,this._updateStopListeners=null,delete this._updateStopListeners,a.default.prototype.destroy(this,arguments)},e.prototype.setDefaultCam=function(e){this._defaultCameraInfo=e},e.prototype.setMinPitchAngle=function(e){e=Math.max(e,-.499999*Math.PI),this._minPitchAngle=e},e.prototype.setMaxPitchAngle=function(e){e=Math.min(e,.499999*Math.PI),this._maxPitchAngle=e},e.prototype.setMaxTargetDistanceRatio=function(e){this._maxTargetDistanceRatio=e},e.prototype.setMinTargetDistanceRatio=function(e){this._minTargetDistanceRatio=e},e.prototype.setMinZnearRatio=function(e){this._minZnearRatio=e},e.prototype.setViewport=function(e){a.default.prototype.setViewport.call(this,e);for(var t=0;t<this._updateStopListeners.length;t++)this._updateStopListeners[t](this)},e.prototype.update=function(){if(this._prevUpdated=this.updated,this.updated=this.animator.update(),this._prevUpdated&&!this.updated)for(var e=0;e<this._updateStopListeners.length;e++)this._updateStopListeners[e](this);return this.updated},e.prototype.addUpdateStopListener=function(e){this._updateStopListeners.push(e)},e.prototype.removeUpdateStopListener=function(e){var t=this._updateStopListeners.indexOf(e);t>=0&&this._updateStopListeners.splice(t,1)},e.prototype.rotate=function(e,t){this._firstPerson&&(t=-t),this._targetTheta-=.006*e,this._targetPhi+=.006*t,this._targetPhi>=this._maxPitchAngle&&(this._targetPhi=this._maxPitchAngle),this._targetPhi<=this._minPitchAngle&&(this._targetPhi=this._minPitchAngle)},e.prototype.setCullingEnabled=function(e){this._cull.setEnabled(e),e&&this._cull.update()},e.prototype.setBimCullingEnabled=function(e){this._cull.setBimCullingEnabled(e),this.isBimCullingEnabled()&&this._cull.update()},e.prototype.isBimCullingEnabled=function(){return this._cull.isBimCullingEnabled()},e.prototype.setTargetFov=function(e){this._targetFov=e,this._targetFov>=179.9&&(this._targetFov=179.9),this._targetFov<=.1&&(this._targetFov=.1)},e.prototype.getTargetFov=function(){return this._targetFov},e.prototype.zoom=function(e,t,r){if(this._perspective){var n=Math.abs(e*this._targetDistance*.35);if(n=(e>0?1:-1)*Math.min(Math.max(n,this._minZoomOffset),this._maxZoomOffset),this._targetDistance<n){var i=this.getViewDirection();this._targetAt[0]+=i[0]*n,this._targetAt[1]+=i[1]*n,this._targetAt[2]+=i[2]*n}else this._targetDistance-=n,this._targetDistance>this._scene.radius*this._maxTargetDistanceRatio&&(this._targetDistance=this._scene.radius*this._maxTargetDistanceRatio),this._targetDistance<this._scene.radius*this._minTargetDistanceRatio&&(this._targetDistance=this._scene.radius*this._minTargetDistanceRatio)}else{var o=this._height*Math.max(1-.1*e*.35,1e-5);if(void 0!==t&&void 0!==r){var l=t/this.viewport[2],u=(this.viewport[3]-1-r)/this.viewport[3],c=-(this.projectMatrix[12]+1)/this.projectMatrix[0],d=-(this.projectMatrix[13]+1)/this.projectMatrix[5],h=c+2*this._height*this._aspect*l;d=d+2*this._height*u-2*u*o;var f=(c=h-l*o*2*this._aspect)+2*o*this._aspect,p=d+2*o;this._height=o,s.mat4.ortho(this.projectMatrix,c,f,d,p,this._znear,this._zfar)}else a.default.prototype._setHeight.call(this,o);this._targetDistance-=e>0?15e-5:-15e-5}},e.prototype.pan=function(e,t){var r=.001*this._targetDistance;this._targetAt[0]+=-e*this.viewMatrix[0]*r+t*this.viewMatrix[1]*r,this._targetAt[1]+=-e*this.viewMatrix[4]*r+t*this.viewMatrix[5]*r,this._targetAt[2]+=-e*this.viewMatrix[8]*r+t*this.viewMatrix[9]*r},e.prototype.forward=function(e,t){t||((t=this.getViewDirection())[2]=0);var r=t[0]*e*this._scene.radius,n=t[1]*e*this._scene.radius,i=t[2]*e*this._scene.radius;this._targetAt[0]+=r,this._targetAt[1]+=n,this._targetAt[2]+=i,this.eye[0]+=r,this.eye[1]+=n,this.eye[2]+=i},e.prototype._updateProjection=function(){var e=n.default.aabb.center(this._scene.bbox),t=this.viewMatrix[2]*e[0]+this.viewMatrix[6]*e[1]+this.viewMatrix[10]*e[2]+this.viewMatrix[14],r=-(t+this._scene.radius),i=-(t-this._scene.radius);this._perspective&&r<this._minZnearRatio*this._scene.radius&&(r=this._minZnearRatio*this._scene.radius),a.default.prototype._updateProjection.call(this,r,i)},e.prototype.reset=function(e,t){this.animator.stop&&this.animator.stop(),this.animator=new o.default,this.animator.attach(this),t?(this._targetAt=t.at,this._at[0]=this._targetAt[0],this._at[1]=this._targetAt[1],this._at[2]=this._targetAt[2],this._distance=this._targetDistance=t.distance,this.setTargetFov(t.fov),this.rotateTo(t.phi,t.theta),this._fov=this._targetFov,this._phi=this._targetPhi,this._theta=this._targetTheta,this._distance+=3*1e-4,this._initDistance=this._targetDistance,this._maxZoomOffset=.025*this._targetDistance,this._minZoomOffset=.0025*this._targetDistance,this.update()):(this._scene.clipping.isEnabled()?s.vec3.copy(this._targetAt,this._scene.clipping.getCenter()):this._targetAt=n.default.aabb.center(this._scene.bbox),this._targetDistance=this._getViewDistance(),this._initDistance=this._targetDistance,this._maxZoomOffset=.025*this._targetDistance,this._minZoomOffset=.0025*this._targetDistance,e&&(this._defaultCameraInfo&&a.default.prototype.resetDefaultCam.apply(this,arguments)||(this.rotateTo(Math.PI/18,-Math.PI/4),a.default.prototype.reset.apply(this,arguments),s.vec3.copy(this._at,this._targetAt))))},e.prototype.rotateTo=function(e,t){var r=t-this._theta;(r%=2*Math.PI)>Math.PI?r-=2*Math.PI:r<-Math.PI&&(r+=2*Math.PI),this._targetTheta=this._theta+r,this._targetPhi=e},e.prototype.lookTo=function(e,t){if(this._targetAt[0]=e[0],this._targetAt[1]=e[1],this._targetAt[2]=e[2],t)if(this._perspective)this._targetDistance=t/Math.sin(this._fov*Math.PI/360);else{var r=1.5*t;a.default.prototype._setHeight.call(this,r)}else{var n=this._targetAt[0]-this.eye[0],i=this._targetAt[1]-this.eye[1],o=this._targetAt[2]-this.eye[2];this._distance=Math.sqrt(n*n+i*i+o*o),this._targetDistance=Math.min(.35*this._scene.radius,this._distance)}},e.prototype.zoomTo=function(e,t,r){this._distance=e,this._targetDistance=t||e,r&&s.vec3.copy(this._targetAt,r)},e.prototype.zoomBy=function(e){if(!this._perspective){var t=this._height*e;a.default.prototype._setHeight.call(this,t),this._targetDistance-=e<1?15e-5:-15e-5}},e.prototype.dump=function(){var e,t;return this._firstPerson?(e=-this._targetPhi,t=this._targetTheta-Math.PI):(e=this._targetPhi,t=this._targetTheta),this._perspective?{fov:this._fov,distance:this._targetDistance,phi:e,theta:t,at:[this._at[0],this._at[1],this._at[2]]}:{height:this._height,distance:this._targetDistance,phi:e,theta:t,at:[this._at[0],this._at[1],this._at[2]]}},e.prototype.restore=function(e){var t=e.height?1.2*this._scene.radius:e.distance;Math.abs(t-this._targetDistance),Math.max(t,this._targetDistance);if(this._distance=this._targetDistance=t,e.phi>=.49999*Math.PI&&(e.phi=.49999*Math.PI),e.phi<=-.49999*Math.PI&&(e.phi=-.49999*Math.PI),this._firstPerson){Math.abs(-e.phi-this._targetPhi),this._phi=this._targetPhi=-e.phi;var r,n,i,o=e.theta+Math.PI-this._theta;(o%=2*Math.PI)>Math.PI?o-=2*Math.PI:o<-Math.PI&&(o+=2*Math.PI),Math.abs(this._theta+o-this._targetTheta),this._targetTheta=this._theta+o,this._theta=this._targetTheta;var s=Math.sin(this._targetPhi),l=Math.cos(this._targetPhi),u=Math.sin(this._targetTheta);r=l*Math.cos(this._targetTheta),n=l*u,i=s,this.eye[0]=e.at[0]-r*this._targetDistance,this.eye[1]=e.at[1]-n*this._targetDistance,this.eye[2]=e.at[2]-i*this._targetDistance}else{Math.abs(e.phi-this._targetPhi),this._phi=this._targetPhi=e.phi;o=e.theta-this._theta;(o%=2*Math.PI)>Math.PI?o-=2*Math.PI:o<-Math.PI&&(o+=2*Math.PI),Math.abs(this._theta+o-this._targetTheta),this._targetTheta=this._theta+o,this._theta=this._targetTheta}this._at[0]=this._targetAt[0]=e.at[0],this._at[1]=this._targetAt[1]=e.at[1],this._at[2]=this._targetAt[2]=e.at[2],e.height?(a.default.prototype._setHeight.call(this,e.height),a.default.prototype.setPerspective.call(this,!1)):a.default.prototype.setPerspective.call(this,!0),this._scene&&this._updateProjection(),a.default.prototype.update.apply(this,arguments),this._cull.update()},e.prototype.cull=function(e,t){return this._cull.isCulled(e,t)},e.prototype.setFirstPerson=function(e){this._firstPerson!==e&&(this._targetTheta=Math.PI+this._targetTheta,this._targetPhi=-this._targetPhi),e||(this._targetAt[0]=this._at[0],this._targetAt[1]=this._at[1],this._targetAt[2]=this._at[2],this._at[0]-=1e-6,this._at[1]-=1e-6,this._at[2]-=1e-6),a.default.prototype.setFirstPerson.apply(this,arguments)},e.prototype.isFirstPerson=function(){return this._firstPerson},e.prototype.isPerspective=function(){return this._perspective},e.prototype._getViewDistance=function(){var e=-Number.MAX_VALUE,t=1/Math.sin(.00872665*this._fov),r=t/Math.cos(.00872665*this._fov),n=Math.tan(.00872665*this._fov),i=this.getTargetViewDirection(),a=s.vec3.create(),o=s.vec3.create();let l=(e,l)=>{s.vec3.subtract(a,l.bsphere,this._targetAt);var u=s.vec3.dot(a,i);s.vec3.scaleAndAdd(o,this._targetAt,i,u);var c=s.vec3.distance(o,l.bsphere),d=l.bsphere[3],h=u+(c*r+d*t-c*n),f=1.05*Math.max(d,h);return Math.max(e,f)};for(var u in this._scene.models){const t=this._scene.models[u];if(t.visible)for(var c=0,d=t.drawables.length;c<d;c++)e=l(e,t.drawables[c])}for(var h in this._scene.pawns){const t=this._scene.pawns[h];for(c=0,d=t.drawables.length;c<d;c++)e=l(e,t.drawables[c])}if(this._scene.clipping.isEnabled()){var f=(p=this._scene.clipping.getRadius())*t;e=Math.min(e,1.05*Math.max(p,f))}if(e<0){var p;f=(p=this._scene.radius)*t;e=1.05*Math.max(p,f)}return e},e.prototype.getTargetViewDirection=function(){var e=Math.sin(this._targetPhi),t=Math.cos(this._targetPhi),r=Math.sin(this._targetTheta),n=Math.cos(this._targetTheta),i=s.vec3.create();return i[0]=-t*n,i[1]=-t*r,i[2]=-e,this._firstPerson&&(i[0]=-i[0],i[1]=-i[1],i[2]=-i[2]),i},e.prototype.setZoomMinMax=function(e){this._maxZoomOffset=.025*this._initDistance*e},e}()},"./03scene/camera/m3d_shadow_camera.js":function(e,t,r){"use strict";r.r(t);var n=r("./03scene/culling/m3d_cull.js"),i=r("./00utility/m3d_math.js"),a=r("./03scene/camera/m3d_base_camera.js"),o=r("./glMatrix.js");t.default=function(){function e(e,t){a.default.apply(this,[t]),this._scene=e,this._cull=new n.default(this),this._perspective=!1,o.mat4.ortho(this.projectMatrix,-1,1,-1,1,-100,100),o.mat4.multiply(this.vpMatrix,this.projectMatrix,this.viewMatrix)}return e.prototype=Object.create(a.default.prototype),e.prototype.constructor=e,e.prototype.createFromLight=function(e,t,r){this._at=i.default.aabb.center(t),this._distance=i.default.aabb.length(t),this.eye=[],this.eye[0]=-e[0]*this._distance+this._at[0],this.eye[1]=-e[1]*this._distance+this._at[1],this.eye[2]=-e[2]*this._distance+this._at[2],r?o.mat4.lookAt(this.viewMatrix,this.eye,this._at,r):o.mat4.lookAt(this.viewMatrix,this.eye,this._at,[0,0,1]);var n=.505*this._distance,a=n,s=n;this._znear=this._distance-1.02*n,this._zfar=this._distance+1.02*n,this._height=s,this._aspect=1,this._perspective=!1,o.mat4.ortho(this.projectMatrix,-a,a,-s,s,this._znear,this._zfar),o.mat4.multiply(this.vpMatrix,this.projectMatrix,this.viewMatrix)},e.prototype.createFromLightTight=function(e,t,r){var n,a=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],s=[-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE],l=o.vec3.create();for(n=0;n<r.length;n++)o.vec3.min(a,a,r[n]),o.vec3.max(s,s,r[n]);var u=i.default.aabb.create(a,s),c=i.default.aabb.points(u);o.vec3.lerp(this._at,a,s,.5),this._distance=i.default.aabb.length(t);var d=.505*this._distance;for(this.eye=[],this.eye[0]=-e[0]*this._distance+this._at[0],this.eye[1]=-e[1]*this._distance+this._at[1],this.eye[2]=-e[2]*this._distance+this._at[2],o.mat4.lookAt(this.viewMatrix,this.eye,this._at,[0,0,1]),a=[Number.MAX_VALUE,Number.MAX_VALUE],s=[-Number.MAX_VALUE,-Number.MAX_VALUE],n=0;n<c.length;n++)null!==c[n]&&(l[0]=this.viewMatrix[0]*c[n][0]+this.viewMatrix[4]*c[n][1]+this.viewMatrix[8]*c[n][2]+this.viewMatrix[12],l[1]=this.viewMatrix[1]*c[n][0]+this.viewMatrix[5]*c[n][1]+this.viewMatrix[9]*c[n][2]+this.viewMatrix[13],o.vec2.min(a,a,l),o.vec2.max(s,s,l));this._znear=this._distance-1.02*d,this._zfar=this._distance+1.02*d,this._aspect=1,this._perspective=!1,o.mat4.ortho(this.projectMatrix,a[0],s[0],a[1],s[1],this._znear,this._zfar),o.mat4.multiply(this.vpMatrix,this.projectMatrix,this.viewMatrix)},e.prototype.setCullingEnabled=function(e){this._cull.setEnabled(e),e&&this._cull.update()},e.prototype.setBimCullingEnabled=function(e){this._cull.setBimCullingEnabled(this._scene.isBimCullingNeeded&&e),this.isBimCullingEnabled()&&this._cull.update()},e.prototype.isBimCullingEnabled=function(){return this._scene.isBimCullingNeeded&&this._cull.isBimCullingEnabled()},e.prototype.cull=function(e,t){return this._cull.isCulled(e,t)},e}()},"./03scene/culling/m3d_bim_cull.js":function(e,t,r){"use strict";r.r(t),t.default=function(){function e(e){this._camera=e,this.enabled=!1}return e.prototype.update=function(){},e.prototype.isCulled=function(e,t){return!!this.enabled&&(e.hidables>0&&(t[1]=e.nodes[e.hidables].indicesOffset/e.mesh.indexSize),0===e.hidables)},e}()},"./03scene/culling/m3d_clip_cull.js":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/m3d_math.js");t.default=function(){function e(e){this._camera=e,this._scene=e._scene}return e.prototype.isCulled=function(e){if(!this._scene.clipping.isEnabled())return!1;var t=this._scene.clipping.get();return!!n.default.outside.aabb_aabb(e.bbox,t)},e}()},"./03scene/culling/m3d_cull.js":function(e,t,r){"use strict";r.r(t);var n=r("./03scene/culling/m3d_clip_cull.js"),i=r("./03scene/culling/m3d_zeroarea_cull.js"),a=r("./03scene/culling/m3d_frustum_cull.js"),o=r("./03scene/culling/m3d_bim_cull.js");t.default=function(){function e(e){this._clippingCull=new n.default(e),this._frustumCull=new a.default(e),this._zeroAreaCull=new i.default(e,this._frustumCull),this._bimCull=new o.default(e),this._enabled=!1}return e.prototype.destroy=function(){this._clippingCull=null,delete this._clippingCull,this._frustumCull=null,delete this._frustumCull,this._bimCull=null,delete this._bimCull,this._zeroAreaCull=null,delete this._zeroAreaCull},e.prototype.setEnabled=function(e){this._enabled=e},e.prototype.isCulled=function(e,t){return!!this._enabled&&!!(this._clippingCull.isCulled(e)||this._frustumCull.isCulled(e)||this._bimCull.isCulled(e,t)||this._zeroAreaCull.isCulled(e))},e.prototype.update=function(){this._enabled&&(this._frustumCull.update(),this._zeroAreaCull.update(),this._bimCull.update())},e.prototype.setBimCullingEnabled=function(e){this._bimCull.enabled=e},e.prototype.isBimCullingEnabled=function(){return this._bimCull.enabled},e}()},"./03scene/culling/m3d_frustum_cull.js":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/m3d_math.js");t.default=function(){function e(e){this._camera=e,this._scene=e._scene,this._frustum=n.default.frustum.createFromMatrix(e.vpMatrix),this._contain=!1,this._p=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],this._t=[0,0,0,0,0,0]}return e.prototype.isCulled=function(e){if(this._contain)return!1;var t=this._frustum,r=e.bbox;return r[this._p[0][0]]*t[0][0]+r[this._p[0][1]]*t[0][1]+r[this._p[0][2]]*t[0][2]>this._t[0]||r[this._p[1][0]]*t[1][0]+r[this._p[1][1]]*t[1][1]+r[this._p[1][2]]*t[1][2]>this._t[1]||r[this._p[2][0]]*t[2][0]+r[this._p[2][1]]*t[2][1]+r[this._p[2][2]]*t[2][2]>this._t[2]||r[this._p[3][0]]*t[3][0]+r[this._p[3][1]]*t[3][1]+r[this._p[3][2]]*t[3][2]>this._t[3]||r[this._p[4][0]]*t[4][0]+r[this._p[4][1]]*t[4][1]+r[this._p[4][2]]*t[4][2]>this._t[4]||r[this._p[5][0]]*t[5][0]+r[this._p[5][1]]*t[5][1]+r[this._p[5][2]]*t[5][2]>this._t[5]},e.prototype.update=function(){this._frustum=n.default.frustum.createFromMatrix(this._camera.vpMatrix);for(var e=0;e<6;e++)this._p[e][0]=this._frustum[e][0]>0?0:3,this._p[e][1]=this._frustum[e][1]>0?1:4,this._p[e][2]=this._frustum[e][2]>0?2:5,this._t[e]=-this._frustum[e][3];this._contain=n.default.inside.aabb_frustum(this._scene.bbox,this._frustum)},e}()},"./03scene/culling/m3d_zeroarea_cull.js":function(e,t,r){"use strict";r.r(t);r("./00utility/m3d_math.js");var n=r("./glMatrix.js");t.default=function(){function e(e){this._camera=e,this._scene=e._scene,this._threshold=new Float32Array(1)}e.prototype.update=function(e,t){var r=2/e,n=2/t;this._threshold=4*Math.min(r,n)};var t=[];t[0]=[0,0,0,0],t[1]=[0,0,0,0],t[2]=[0,0,0,0],t[3]=[0,0,0,0],t[4]=[0,0,0,0],t[5]=[0,0,0,0];var r=new Float32Array(3);return e.prototype.isCulled=function(e){if(!this._camera.isPerspective())return!1;var t=function(e,t){var i=e[3],a=t.projectMatrix[5];return n.vec3.subtract(r,e,t.eye),i*a/-(r[0]*t.viewMatrix[2]+r[1]*t.viewMatrix[6]+r[2]*t.viewMatrix[10])}(e.bsphere,this._camera);if(t>0&&t<this._threshold)return!0;if(e.meshRadius){var i=this._camera.projectMatrix[5];if(e.meshRadius*i/this._camera._distance<this._threshold)return!0}return!1},e}()},"./03scene/drawables/Billboard.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/drawables/Drawable.ts"),a=r("./03scene/drawables/BillboardTransform.ts"),o=r("./00utility/m3d_math.js"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(e){function t(t,r,n,i,s){var l=e.call(this,t,r,n,i,s)||this;return l.faceCamera=!0,l.transform=new a.default(i),l.bbox=o.default.aabb.createFromSphere(l.bsphere),l._center=o.default.aabb.center(l.bbox),l}return s(t,e),t.prototype.destroy=function(){this._center=null,delete this._center,e.prototype.destroy.call(this)},t.prototype.isShadowCaster=function(){return!0},t.prototype.update=function(e){this.transform.update(e,this._center)},t.prototype.setTranslation=function(t,r,n){e.prototype.setTranslation.call(this,t,r,n),this._center=o.default.aabb.center(this.bbox)},t.prototype.translate=function(t,r,n){e.prototype.translate.call(this,t,r,n),this._center=o.default.aabb.center(this.bbox)},t.prototype.clone=function(){var e=new t(this.mesh,this.shader,this.material.clone(this.material.name+"-cloned"),this.transform.matrix,this.bbox);return e.faceCamera=this.faceCamera,e.bsphere=this.bsphere,e.distance=this.distance,e.nodes=this.nodes,e.hidables=this.hidables,e.originalMaterial=this.originalMaterial,e._center=this._center,e},t}(i.default);t.default=l},"./03scene/drawables/BillboardTransform.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/drawables/Transform.ts"),a=r("./glMatrix.js"),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=(a.vec3.fromValues(0,0,0),a.mat4.create(),function(e){function t(t){var r=e.call(this,t)||this;return r._up=a.vec3.create(),r._forward=a.vec3.create(),r._right=a.vec3.create(),r._translate=a.vec3.create(),r._transformMatrix=a.mat4.create(),r.matrix&&(a.mat4.copy(r._transformMatrix,r.matrix),a.mat4.copy(r.matrix,r.matrix)),r}return o(t,e),t.prototype.setTranslation=function(t,r,n){a.mat4.copy(this.matrix,this._transformMatrix),e.prototype.setTranslation.call(this,t,r,n),a.mat4.copy(this._transformMatrix,this.matrix)},t.prototype.setScaling=function(t,r,n){a.mat4.copy(this.matrix,this._transformMatrix),e.prototype.setScaling.call(this,t,r,n),a.mat4.copy(this._transformMatrix,this.matrix)},t.prototype.setFaceCameraZ=function(e){this._faceCameraZ=e},t.prototype.update=function(e,t){this._up=a.vec3.create(),this._forward=a.vec3.create(),this._right=a.vec3.create(),this._faceCameraZ?(this._forward[0]=e._at[0]-e.eye[0],this._forward[1]=e._at[1]-e.eye[1],this._forward[2]=e._at[2]-e.eye[2]):(this._forward[0]=t[0]-e.eye[0],this._forward[1]=t[1]-e.eye[1],this._forward[2]=0),a.vec3.normalize(this._forward,this._forward),this._up[2]=1,a.vec3.cross(this._right,this._forward,this._up),a.vec3.normalize(this._right,this._right),a.vec3.cross(this._up,this._right,this._forward),a.vec3.normalize(this._up,this._up);var r=a.mat4.create();r[0]=this._right[0],r[1]=this._right[1],r[2]=this._right[2],r[3]=0,r[4]=this._forward[0],r[5]=this._forward[1],r[6]=this._forward[2],r[7]=0,r[8]=this._up[0],r[9]=this._up[1],r[10]=this._up[2],r[11]=0,this._translate=a.vec3.create(),this._translate[0]=this._transformMatrix[12],this._translate[1]=this._transformMatrix[13],this._translate[2]=this._transformMatrix[14],this._transformMatrix[12]=this._transformMatrix[13]=this._transformMatrix[14]=0,a.mat4.multiply(this.matrix,r,this._transformMatrix),this.matrix[12]=this._translate[0],this.matrix[13]=this._translate[1],this.matrix[14]=this._translate[2],this._transformMatrix[12]=this._translate[0],this._transformMatrix[13]=this._translate[1],this._transformMatrix[14]=this._translate[2],this._updateMatrixBuffer()},t}(i.default));t.default=s},"./03scene/drawables/Drawable.ts":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/m3d_math.js"),i=r("./03scene/drawables/Transform.ts"),a=r("./glMatrix.js"),o=function(){function e(e,t,r,o,s){if(this.mesh=e,this.material=r,this.shader=t,this.transform=new i.default(o),this.worldTransform=new i.default(o),this._parent=null,this._dirty=!1,this.faceCamera=!1,this.visible=!0,this.bbox=null,this.bsphere=null,this.distance=0,this.nodes=[],this.hidables=-1,this.originalMaterial=null,this.material){var l=this.material.attachShader(this.shader,this.mesh.getManager());this.shader=this.shader||l}if(s){this.bbox=n.default.aabb.createFromArray(s),this.bsphere=n.default.sphere.createFromAABB(this.bbox);var u=a.mat4.create();a.mat4.invert(u,this.transform.matrix),this._originBBox=n.default.aabb.create(),n.default.aabb.transform(this._originBBox,this.bbox,u)}}return e.prototype.destroy=function(){this.transform.destroy(),this.transform=null,delete this.transform,this.worldTransform.destroy(),this.worldTransform=null,delete this.worldTransform,this.bbox=null,delete this.bbox,this.bsphere=null,delete this.bsphere,this.mesh=null,delete this.mesh,this.material=null,delete this.material,this.originalMaterial=null,delete this.originalMaterial,this.nodes=null,delete this.nodes},e.prototype.isShadowCaster=function(){return(!this.material.transparent||this.material.parameters.hasOwnProperty("uMaterialDiffuseTexture"))&&this.mesh.isTriangle()},e.prototype.setShader=function(e){this.shader!==e&&(this.shader=e,this.material.attachShader(e))},e.prototype.setParent=function(e){this._parent=e},e.prototype.setTranslation=function(e,t,r){this.transform.setTranslation(e,t,r),this.updateBBox(),this.recompileShader("MODEL_TRANSFORM",!this.transform.identity)},e.prototype.translate=function(e,t,r){this.transform.translate(e,t,r),this.bbox[0]+=e,this.bbox[1]+=t,this.bbox[2]+=r,this.bbox[3]+=e,this.bbox[4]+=t,this.bbox[5]+=r,this.bsphere[0]+=e,this.bsphere[1]+=t,this.bsphere[2]+=r,this.recompileShader("MODEL_TRANSFORM",!this.transform.identity)},e.prototype.setScaling=function(e,t,r){var n=this.transform.getScaling();this.transform.setScaling(e,t,r);var i=.5*(this.bbox[3]+this.bbox[0]),a=.5*(this.bbox[4]+this.bbox[1]),o=.5*(this.bbox[5]+this.bbox[2]),s=e/n[0]*(this.bbox[3]-this.bbox[0])*.5,l=t/n[1]*(this.bbox[4]-this.bbox[1])*.5,u=r/n[2]*(this.bbox[5]-this.bbox[2])*.5;this.bbox[0]=i-s,this.bbox[1]=a-l,this.bbox[2]=o-u,this.bbox[3]=i+s,this.bbox[4]=a+l,this.bbox[5]=o+u,this.bsphere[3]=Math.sqrt(s*s+l*l+u*u)},e.prototype.multiply=function(e){a.vec3.transformMat4(this.bsphere,this.bsphere,e),this.transform.multiply(e),this.updateBBox(),this.recompileShader("MODEL_TRANSFORM",!this.transform.identity)},e.prototype.setTransformMatrix=function(e){this.transform.setTransform(e),this.updateBBox(),this.recompileShader("MODEL_TRANSFORM",!this.transform.identity)},e.prototype.recompileShader=function(e,t){var r,n=this.shader.flags.lastIndexOf(e),i=!1;if(t?-1===n&&(r=this.shader.flags.concat(e),i=!0):-1!==n&&((r=this.shader.flags.slice(0)).splice(n,1),i=!0),i){var a=this.shader.shaderSource.name,o=this.shader.getManager().getShader(a,r);if(!o.ready&&(o.createFromShaderSource(this.shader.shaderSource,r),!o.ready))throw new Error("Failed to create shader '"+a+"'!");this.shader=o,this.material.attachShader(this.shader)}},e.prototype.updateVisibility=function(){if(1!==this.nodes.length){for(var e=this.mesh.attributes.values[0].stride,t=0,r=0,n=0,i=this.nodes.length;n<i;n++){r+=(s=this.nodes[n]).verticesCount*e,t+=s.verticesCount}var a=0,o=new Uint8Array(t);for(n=0,i=this.nodes.length;n<i;n++){var s;(s=this.nodes[n]).visible?s.platteIndex&=127:s.platteIndex|=128,o.fill(s.platteIndex,a,a+s.verticesCount),a+=s.verticesCount}this.mesh.vbSubData(r,o);var l=0;for(n=0,i=this.nodes.length;n<i;n++)this.nodes[n].visible&&l++;if(0===l||this.nodes.length===l)return this.visible=l===this.nodes.length,void this.recompileShader("VISIBILITY",!1);this.visible=!0,-1==this.shader.flags.lastIndexOf("VISIBILITY")&&this.recompileShader("VISIBILITY",!0)}else this.visible=this.nodes[0].visible},e.prototype.updateColor=function(){for(var e=!1,t=0,r=this.nodes.length;t<r;t++)if(127!=(127&this.nodes[t].platteIndex)){e=!0;break}var n=this.shader.flags.lastIndexOf("USE_PLATTE");if(-1==n&&e)this.recompileShader("USE_PLATTE",!0);else if(-1!=n&&!e)return void this.recompileShader("USE_PLATTE",!1);var i=this.mesh.attributes.values[0].stride,a=0,o=0;for(t=0,r=this.nodes.length;t<r;t++){o+=(u=this.nodes[t]).verticesCount*i,a+=u.verticesCount}var s=0,l=new Uint8Array(a);for(t=0,r=this.nodes.length;t<r;t++){var u=this.nodes[t];l.fill(u.platteIndex,s,s+u.verticesCount),s+=u.verticesCount}this.mesh.vbSubData(o,l)},e.prototype.updateTransformMatrix=function(){this._dirty&&this.worldTransform.multiply(this._parent)},e.prototype.render=function(e,t,r){this.transform.use(e,t),this.skeleton&&this.skeleton.use(t),this.mesh.renderSub(r[0],r[1])},e.prototype.updateBBox=function(){n.default.aabb.transform(this.bbox,this._originBBox,this.transform.matrix),this.bsphere=n.default.sphere.createFromAABB(this.bbox)},e.prototype.clone=function(){var t=new e(this.mesh,this.shader,this.material.clone(this.material.name+"-cloned"),a.mat4.create(),this.bbox);return t.faceCamera=this.faceCamera,t.bsphere=this.bsphere,t.distance=this.distance,t.nodes=this.nodes,t.hidables=this.hidables,t.originalMaterial=this.originalMaterial,t},e}();t.default=o},"./03scene/drawables/Gizmo.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./02resource/m3d_shader_library.js"),a=r("./03scene/materials/MaterialAdhoc.ts"),o=r("./03scene/drawables/Drawable.ts"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(e){function t(t,r,n){var o=e.call(this,t,null,null,null,n)||this;o.name=null;var s=r.getShader("gizmo",["MODEL_TRANSFORM"]);s.ready||s.createFromShaderSource(i.default.constant,["MODEL_TRANSFORM"]);var l=new a.default(name,r);return l.attachShader(s,r),o.shader=s,o.material=l,o}return s(t,e),t.prototype.setColor=function(e){this.material.setDiffuse(e)},t.prototype.setTransparent=function(e){this.material.setTransparent(e)},t}(o.default);t.default=l},"./03scene/drawables/Gizmo2D.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./02resource/m3d_shader_library.js"),a=r("./03scene/materials/MaterialBlit.ts"),o=r("./03scene/drawables/Drawable.ts"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(e){function t(t,r){var n=e.call(this,t,null,null,null,null)||this;n._resourceManager=r;var o=r.getShader("gizmo2d",[]);o.ready||o.createFromShaderSource(i.default.constant2d,[]);var s=new a.default(name);return s.attachShader(o,n._resourceManager),n.shader=o,n.material=s,n._textured=!1,n}return s(t,e),t.prototype.destroy=function(){this._textured=null,delete this._textured,this._resourceManager=null,delete this._resourceManager,e.prototype.destroy.call(this)},t.prototype.setColor=function(e){this._textured&&(this.shader=this._resourceManager.getShader("gizmo2d",[]),this.shader.ready||this.shader.createFromShaderSource(i.default.constant2d,[]),this.material.attachShader(this.shader),this._textured=!1),this.material.parameters.uColor.value=e},t.prototype.setTransparent=function(e){console.warn("not supported yet."),this._textured&&(this.shader=this._resourceManager.getShader("gizmo2d",[]),this.shader.ready||this.shader.createFromShaderSource(i.default.constant2d,[]),this.material.attachShader(this.shader),this._textured=!1)},t.prototype.setTexture=function(e){this._textured||(this.shader=this._resourceManager.getShader("blit",["MODEL_TRANSFORM"]),this.shader.ready||this.shader.createFromShaderSource(i.default.blit,["MODEL_TRANSFORM"]),this.material.attachShader(this.shader),this._textured=!0),this.material.setTexture(e)},t}(o.default);t.default=l},"./03scene/drawables/Skybox.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"SkyBoxMode",function(){return i});var n,i,a=r("./00utility/m3d_utils.ts"),o=r("./02resource/m3d_shader_library.js"),s=r("./03scene/materials/MaterialSkyBox.ts"),l=r("./03scene/camera/m3d_base_camera.js"),u=r("./03scene/drawables/Drawable.ts"),c=r("./glMatrix.js"),d=r("./01wrapper/glenum.ts"),h=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){e[e.SKYBOX_SOLIDCOLOR=0]="SKYBOX_SOLIDCOLOR",e[e.SKYBOX_WALLPAPER=1]="SKYBOX_WALLPAPER",e[e.SKYBOX_EQUIRECTANGLE=2]="SKYBOX_EQUIRECTANGLE",e[e.SKYBOX_CUBEMAP=3]="SKYBOX_CUBEMAP",e[e.SKYBOX_WALLPAPER_TILED=4]="SKYBOX_WALLPAPER_TILED"}(i||(i={}));var f=function(e){function t(t){var r=e.call(this,null,null,null,null,null)||this;r._resourceManager=t,r._mode=-1,r._flipY=!1,r.camera=new l.default([0,0,1,1]);for(var n=0,a="model-skybox-texture-"+n;r._resourceManager.hasTexture(a);)a="model-skybox-texture-"+ ++n;return r._texture=r._resourceManager.getTexture(a),r.material=new s.default(a),r.setMode(i.SKYBOX_EQUIRECTANGLE),r}return h(t,e),t.prototype.destroy=function(){this._texture&&this._texture.destroy(),delete this._texture,this.camera.destroy(),delete this.camera,this._resourceManager=null,delete this._resourceManager,this._flipY=null,delete this._flipY,e.prototype.destroy.call(this)},t.prototype.update=function(e){if(this._mode===i.SKYBOX_WALLPAPER_TILED&&this.visible){var t=this.camera.viewport[3]-this.camera.viewport[1],r=this._texture.height/this._texture.width*(n/t),n=this.camera.viewport[2]-this.camera.viewport[0];this.transform.setScaling(1,r,1),this.transform.setTranslation(0,1-r,1)}else c.mat4.copy(this.camera.viewMatrix,e),this.camera.viewMatrix[12]=0,this.camera.viewMatrix[13]=0,this.camera.viewMatrix[14]=0,c.mat4.multiply(this.camera.vpMatrix,this.camera.projectMatrix,e)},t.prototype.resize=function(e,t){this.camera.setViewport([0,0,e,t])},t.prototype._updateMaterial=function(){this.visible=this._texture.ready,this.visible?this.material.setTexture(this._texture):console.warn("skybox sees a corrupted image.")},t.prototype.setImage=function(e){var t=this;if(e){if(this._texture&&this._texture.ready){this._texture.destroy();for(var r=0,n="model-skybox-texture-"+r;this._resourceManager.hasTexture(n);)n="model-skybox-texture-"+ ++r;this._texture=this._resourceManager.getTexture(n)}if(e&&a.default.isArray(e))e[0]instanceof HTMLImageElement?(this._texture.createFromImages(e,d.gl.RGB,d.gl.UNSIGNED_BYTE,d.gl.LINEAR,d.gl.CLAMP_TO_EDGE),this._updateMaterial()):this._texture.createFromFiles(e,d.gl.RGB,d.gl.LINEAR,d.gl.CLAMP_TO_EDGE,function(){t._updateMaterial()}),this.visible=this._texture.ready,this.visible?this.material.setTexture(this._texture):console.warn("skybox sees a corrupted image.");else if(e instanceof HTMLImageElement)this._texture.createFromImage(e,d.gl.RGB,d.gl.UNSIGNED_BYTE,d.gl.LINEAR,d.gl.CLAMP_TO_EDGE),this._updateMaterial(),this.visible=this._texture.ready,this.visible?this.material.setTexture(this._texture):console.warn("skybox sees a corrupted image.");else{var i=e.split(".");"dds"==i[i.length-1].toLocaleLowerCase()&&this._texture.createFromDDS(e,function(){t._updateMaterial(),t.visible=t._texture.ready,t.visible?t.material.setTexture(t._texture):console.warn("skybox sees a corrupted image.")})}}else this.visible=!1},t.prototype.getMode=function(){return this._mode},t.prototype.setMode=function(e){if(this._mode!==e){this._mode=e;var t=o.default.skybox;if(this._mode===i.SKYBOX_WALLPAPER)this.mesh=this._resourceManager.getMesh("quad"),this.mesh.ready||this.mesh.createQuad(),this.shader=this._resourceManager.getShader("skybox",["WALLPAPER"]),this.shader.ready||this.shader.createFromShaderSource(t,["WALLPAPER"]),this.transform.reset();else if(this._mode===i.SKYBOX_WALLPAPER_TILED)this.mesh=this._resourceManager.getMesh("quad"),this.mesh.ready||this.mesh.createQuad(),this.shader=this._resourceManager.getShader("skybox",["WALLPAPER","MODEL_TRANSFORM"]),this.shader.ready||this.shader.createFromShaderSource(t,["WALLPAPER","MODEL_TRANSFORM"]),this.transform.reset();else if(this._mode===i.SKYBOX_EQUIRECTANGLE)this.mesh=this._resourceManager.getMesh("sphere-64-128"),this.mesh.ready||this.mesh.createSphere(64,128),this.shader=this._resourceManager.getShader("skybox",["EQUIRECTANGLE"]),this.shader.ready||this.shader.createFromShaderSource(t,["EQUIRECTANGLE"]);else if(this._mode===i.SKYBOX_CUBEMAP){this.mesh=this._resourceManager.getMesh("sphere-64-128"),this.mesh.ready||this.mesh.createSphere(64,i.SKYBOX_CUBEMAP);var r=["CUBEMAP"];this._flipY&&r.push("FLIP"),this.shader=this._resourceManager.getShader("skybox",r),this.shader.ready||this.shader.createFromShaderSource(t,r)}this.material.attachShader(this.shader),this.material.setTexture(this._texture),this.material.setTransparency(1)}},t.prototype.setTransparency=function(e){this.material.setTransparency(e)},t.prototype.setFlipYEnabled=function(e){this._flipY=e,this._mode=-1,this.setMode(i.SKYBOX_CUBEMAP)},t.prototype.getTexture=function(){return this._texture},t}(u.default);t.default=f},"./03scene/drawables/Transform.ts":function(e,t,r){"use strict";r.r(t);var n=r("./glMatrix.js"),i=[0,0,0],a=function(){function e(e){this._default=null,this._buffer=null,this.identity=!0,this.normalMatrix=null,e?(this.identity=!1,this.matrix=n.mat4.clone(e)):this.matrix=n.mat4.create(),this._default=this.matrix,this._buffer=new Float32Array(32),this._updateMatrixBuffer()}return e.prototype.destroy=function(){this._buffer=null,delete this._buffer,this._default=null,delete this._default,this.matrix=null,delete this.matrix,this.identity=null,delete this.identity},e.prototype._updateMatrixBuffer=function(){this.identity?this.normalMatrix=n.mat4.create():(this.normalMatrix=n.mat4.create(),n.mat4.invert(this.normalMatrix,this.matrix),n.mat4.transpose(this.normalMatrix,this.normalMatrix));for(var e=0;e<16;e++)this._buffer[e]=this.matrix[e];for(e=0;e<16;e++)this._buffer[e+16]=this.normalMatrix[e]},e.prototype.use=function(e,t){var r=null,n=t.getGL();n.isWebGL2?(r=t.reservedUniforms.m_uPerNode)&&r.upload(this._buffer,n):((r=t.reservedUniforms["m_uPerNode.modelMatrix"])&&r.upload(this.matrix,n),(r=t.reservedUniforms["m_uPerNode.normalMatrix"])&&r.upload(this.normalMatrix,n))},e.prototype.setRotation=function(e,t){this._default===this.matrix&&(this._default=n.mat4.clone(this.matrix)),this.identity=!1;var r=[this.matrix[12],this.matrix[13],this.matrix[14]],i=this.getScaling();n.mat4.identity(this.matrix),this.setScaling(i[0],i[1],i[2]);var a=n.mat4.create(),o=n.quat.create();n.quat.setAxisAngle(o,[e[0],e[1],e[2]],t),n.mat4.fromQuat(a,o),this.multiply(a),this.matrix[12]=r[0],this.matrix[13]=r[1],this.matrix[14]=r[2],this._updateMatrixBuffer()},e.prototype.setRotationByQuat=function(e){this._default===this.matrix&&(this._default=n.mat4.clone(this.matrix)),this.identity=!1;var t=[this.matrix[12],this.matrix[13],this.matrix[14]],r=this.getScaling();n.mat4.identity(this.matrix),this.setScaling(r[0],r[1],r[2]);var i=n.mat4.create();n.mat4.fromQuat(i,e),this.multiply(i),this.matrix[12]=t[0],this.matrix[13]=t[1],this.matrix[14]=t[2],this._updateMatrixBuffer()},e.prototype.translate=function(e,t,r){this._default===this.matrix&&(this._default=n.mat4.clone(this.matrix)),this.identity=!1,this.matrix[12]+=e,this.matrix[13]+=t,this.matrix[14]+=r,this._updateMatrixBuffer()},e.prototype.setTranslation=function(e,t,r){this._default===this.matrix&&(this._default=n.mat4.clone(this.matrix)),this.identity=!1,this.matrix[12]=this._default[12]+e,this.matrix[13]=this._default[13]+t,this.matrix[14]=this._default[14]+r,this._updateMatrixBuffer()},e.prototype.setScaling=function(e,t,r){this.identity=!1;var i=[this.matrix[0],this.matrix[1],this.matrix[2]],a=[this.matrix[4],this.matrix[5],this.matrix[6]],o=[this.matrix[8],this.matrix[9],this.matrix[10]],s=e/Math.sqrt(n.vec3.dot(i,i)),l=t/Math.sqrt(n.vec3.dot(a,a)),u=r/Math.sqrt(n.vec3.dot(o,o));this.matrix[0]*=s,this.matrix[1]*=s,this.matrix[2]*=s,this.matrix[4]*=l,this.matrix[5]*=l,this.matrix[6]*=l,this.matrix[8]*=u,this.matrix[9]*=u,this.matrix[10]*=u,this._updateMatrixBuffer()},e.prototype.getScaling=function(){var e=[this.matrix[0],this.matrix[1],this.matrix[2]],t=[this.matrix[4],this.matrix[5],this.matrix[6]],r=[this.matrix[8],this.matrix[9],this.matrix[10]];return i[0]=Math.sqrt(n.vec3.dot(e,e)),i[1]=Math.sqrt(n.vec3.dot(t,t)),i[2]=Math.sqrt(n.vec3.dot(r,r)),i},e.prototype.set=function(e){this._default===this.matrix&&(this._default=n.mat4.clone(this.matrix)),e?(this.identity=!1,n.mat4.copy(this.matrix,e)):n.mat4.identity(this.matrix),this._updateMatrixBuffer()},e.prototype.setTransform=function(e){this._default===this.matrix&&(this._default=n.mat4.clone(this.matrix)),e?(this.identity=!1,n.mat4.multiply(this.matrix,e,this._default)):n.mat4.identity(this.matrix),this._updateMatrixBuffer()},e.prototype.reset=function(){n.mat4.copy(this.matrix,this._default),this.identity=Math.abs(this.matrix[0]-1)<1e-5&&Math.abs(this.matrix[5]-1)<1e-5&&Math.abs(this.matrix[10]-1)<1e-5&&Math.abs(this.matrix[12])<1e-5&&Math.abs(this.matrix[13])<1e-5&&Math.abs(this.matrix[14])<1e-5,this._updateMatrixBuffer()},e.prototype.getInverted=function(e){n.mat4.invert(e,this.matrix)},e.prototype.multiply=function(e){this._default===this.matrix&&(this._default=n.mat4.clone(this.matrix)),this.identity?n.mat4.copy(this.matrix,e):n.mat4.multiply(this.matrix,e,this.matrix),this.identity=Math.abs(this.matrix[0]-1)<1e-5&&Math.abs(this.matrix[5]-1)<1e-5&&Math.abs(this.matrix[10]-1)<1e-5&&Math.abs(this.matrix[12])<1e-5&&Math.abs(this.matrix[13])<1e-5&&Math.abs(this.matrix[14])<1e-5,this._updateMatrixBuffer()},e.prototype.multiplyMatrices=function(e,t){n.mat4.multiply(this.matrix,e,t),this.identity=Math.abs(this.matrix[0]-1)<1e-5&&Math.abs(this.matrix[5]-1)<1e-5&&Math.abs(this.matrix[10]-1)<1e-5&&Math.abs(this.matrix[12])<1e-5&&Math.abs(this.matrix[13])<1e-5&&Math.abs(this.matrix[14])<1e-5,this._updateMatrixBuffer()},e}();t.default=a},"./03scene/m3d_light.js":function(e,t,r){"use strict";r.r(t);var n=r("./glMatrix.js");t.default=function(){function e(){this._initialDirection=n.vec3.clone([.81961,-.28627,-.49804]),this._latitude=Math.asin(-this._initialDirection[2]),this._longitude=Math.atan2(-this._initialDirection[1],-this._initialDirection[0]),this._constantEnvmapMatrix=null,this._initialEnvmapMatrix=null,this.direction=n.vec3.clone(this._initialDirection),this.intensity=1.05,this.shinness=100,this.envmapMatrix=n.mat4.create();var e=n.mat4.clone([1.586253,-.725169,.70441,-2.30068,-.725169,-1.586253,-.359456,1.623691,.70441,-.359456,-.237555,-.893975,-2.30068,1.623691,-.893975,6.141995]),t=n.mat4.clone([1.329145,-.730669,.591031,-2.126058,-.730669,-1.329145,-.403495,1.890295,.591031,-.403495,-.159067,-.888839,-2.126058,1.890295,-.888839,6.193693]),r=n.mat4.clone([.870924,-.654664,.433506,-1.748137,-.654664,-.870924,-.440849,2.254821,.433506,-.440849,-.109753,-.848042,-1.748137,2.254821,-.848042,6.301804]);n.mat4.multiplyScalar(e,e,.0299),n.mat4.multiplyScalar(t,t,.0587),n.mat4.multiplyScalar(r,r,.0114),n.mat4.add(this.envmapMatrix,e,t),n.mat4.add(this.envmapMatrix,this.envmapMatrix,r),this._constantEnvmapMatrix=n.mat4.clone(this.envmapMatrix),this._initialEnvmapMatrix=n.mat4.clone(this.envmapMatrix),this._initialDirection=n.vec3.clone([.81961,-.49804,.28627]),this._initialEnvmapMatrix=n.mat4.clone(this._constantEnvmapMatrix),this._setFlipYZ(!1),this.setLatitude(.45),this.setLongitude(3.14)}return e.prototype._setFlipYZ=function(e){if(this._flipYZ=e,e)this._initialDirection=n.vec3.clone([.81961,-.49804,.28627]),this._initialEnvmapMatrix=n.mat4.clone(this._constantEnvmapMatrix);else{this._initialDirection=n.vec3.clone([.81961,-.28627,-.49804]);var t=n.mat4.clone([1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1]),r=n.mat4.create();n.mat4.transpose(r,t);var i=n.mat4.create();n.mat4.multiply(this._initialEnvmapMatrix,n.mat4.multiply(i,r,this._constantEnvmapMatrix),t)}},e.prototype.setIntensity=function(e){this.intensity=e},e.prototype.getIntensity=function(){return this.intensity},e.prototype.setSpecularShinness=function(e){this.shinness=e},e.prototype.getIntensity=function(){return this.intensity},e.prototype.setLatitude=function(e){this._latitude=e;var t=Math.cos(this._latitude);this.direction[0]=-t*Math.cos(this._longitude),this.direction[1]=-t*Math.sin(this._longitude),this.direction[2]=-Math.sin(this._latitude),this._updateEnvmapMatrix()},e.prototype.setLongitude=function(e){this._longitude=e;var t=Math.cos(this._latitude);this.direction[0]=-t*Math.cos(this._longitude),this.direction[1]=-t*Math.sin(this._longitude),this.direction[2]=-Math.sin(this._latitude),this._updateEnvmapMatrix()},e.prototype.getLongitude=function(){return this._longitude},e.prototype.getLatitude=function(){return this._latitude},e.prototype._updateEnvmapMatrix=function(){var e=n.quat.create(),t=n.vec3.create();n.vec3.cross(t,this.direction,this._initialDirection),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+n.vec3.dot(this.direction,this._initialDirection),n.quat.normalize(e,e);var r=n.mat4.create();n.mat4.fromQuat(r,e);var i=n.mat4.create();n.mat4.transpose(i,r);var a=n.mat4.create();n.mat4.multiply(this.envmapMatrix,n.mat4.multiply(a,i,this._initialEnvmapMatrix),r)},e}()},"./03scene/m3d_scene_clip.js":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/m3d_math.js"),i=r("./glMatrix.js");t.default=function(){function e(e){this._enabled=!1,this._bbox=n.default.aabb.createFromArray([-1,-1,-1,1,1,1]),this._clip=n.default.aabb.createFromArray([0,0,0,0,0,0]),this._points=[],this._planes=[]}return e.prototype.initialize=function(e){this._enabled||(this._bbox=n.default.aabb.createFromArray(e),this._bbox[0]-=2e-5,this._bbox[1]-=2e-5,this._bbox[2]-=2e-5,this._bbox[3]+=2e-5,this._bbox[4]+=2e-5,this._bbox[5]+=2e-5,this.reset())},e.prototype.reset=function(){this._enabled=!1;var e=n.default.aabb.min(this._bbox),t=n.default.aabb.max(this._bbox);this._clip=n.default.aabb.create(e,t),this._points=n.default.aabb.points(this._clip),this._planes=n.default.aabb.planes(this._clip)},e.prototype.getCenter=function(){return n.default.aabb.center(this._clip)},e.prototype.getRadius=function(){return.5*n.default.aabb.length(this._clip)},e.prototype.get=function(){return this._clip},e.prototype.getBBox=function(){return this._bbox},e.prototype.getClippingPlanes=function(e){if(e){var t=[];return t.push(i.vec4.clone(this._planes[0])),t.push(i.vec4.clone(this._planes[1])),t.push(i.vec4.clone(this._planes[2])),t.push(i.vec4.clone(this._planes[3])),t.push(i.vec4.clone(this._planes[4])),t.push(i.vec4.clone(this._planes[5])),t}return this._planes},e.prototype.getClippingPoints=function(e){if(e){var t=[];return t.push(i.vec3.clone(this._points[0])),t.push(i.vec3.clone(this._points[1])),t.push(i.vec3.clone(this._points[2])),t.push(i.vec3.clone(this._points[3])),t.push(i.vec3.clone(this._points[4])),t.push(i.vec3.clone(this._points[5])),t.push(i.vec3.clone(this._points[6])),t.push(i.vec3.clone(this._points[7])),t}return this._points},e.prototype.getMin=function(){return n.default.aabb.min(this._clip)},e.prototype.getMax=function(){return n.default.aabb.max(this._clip)},e.prototype.update=function(e){for(var t=0;t<e.length;t++)i.vec3.copy(this._points[t],e[t]);n.default.aabb.createFromPoints(this._clip,e),i.vec4.copy(this._planes[0],n.default.plane.create(e[0],e[4],e[7])),i.vec4.copy(this._planes[1],n.default.plane.create(e[1],e[2],e[6])),i.vec4.copy(this._planes[2],n.default.plane.create(e[0],e[1],e[5])),i.vec4.copy(this._planes[3],n.default.plane.create(e[2],e[3],e[7])),i.vec4.copy(this._planes[4],n.default.plane.create(e[0],e[3],e[2])),i.vec4.copy(this._planes[5],n.default.plane.create(e[4],e[5],e[6]))},e.prototype.set=function(e,t){this._enabled=!0,"number"==typeof t[0]?(this._clip=n.default.aabb.create(e,t),this._points=n.default.aabb.points(this._clip),this._planes=n.default.aabb.planes(this._clip)):this.update(t)},e.prototype.isEnabled=function(){return this._enabled},e.prototype.setEnabled=function(e){this._enabled=e},e}()},"./03scene/materials/Material.ts":function(e,t,r){"use strict";r.r(t);var n=r("./03scene/materials/MaterialParameter.ts"),i=function(){function e(e){this.name=e,this.transparent=!1,this.hasMask=!1,this.hasTexture=!1,this.parameters={},this.reservedParameters={}}return e.prototype.destroy=function(){this.name=null,delete this.name,this.parameters=null,delete this.parameters,this.reservedParameters=null,delete this.reservedParameters},e.prototype.attachShader=function(e,t){if(e&&e.ready){for(var r in e.userUniforms)if(!this.parameters.hasOwnProperty(r))if(this.parameters[r]=new n.default,r.match(/uTexture\d/)){this.hasTexture=!0;var i=parseInt(r.substr(8));if(i>2){console.error("can't support >3 user textures. See shader '"+e.name+"'");continue}this.parameters[r].texUnit=i,this.parameters[r].upload=this.parameters[r].uploadTexture}else this.parameters[r].upload=this.parameters[r].uploadValue;var a;for(a in this.parameters)e.userUniforms[a]||delete this.parameters[a];for(a in this.reservedParameters)e.reservedUniforms[a]||delete this.reservedParameters[a];return e}},e.prototype.use=function(e){var t;for(t in this.reservedParameters)this.reservedParameters[t].upload(e.reservedUniforms[t],e.getGL());for(t in this.parameters)this.parameters[t].upload(e.userUniforms[t],e.getGL())},e.prototype.absorb=function(e){var t;for(t in this.reservedParameters)this.reservedParameters[t].value=e.reservedParameters[t].value,this.reservedParameters[t].texUnit=e.reservedParameters[t].texUnit;for(t in this.parameters)this.parameters[t].value=e.parameters[t].value,this.parameters[t].texUnit=e.parameters[t].texUnit},e}();t.default=i},"./03scene/materials/MaterialAdhoc.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./02resource/Texture.ts"),a=r("./02resource/m3d_shader_library.js"),o=r("./03scene/materials/Material.ts"),s=r("./03scene/materials/MaterialParameter.ts"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=[1,0,1,.5,100,0,0,0],c=function(e){function t(t,r){var n=e.call(this,t)||this;return n._resourceManager=r,n._reservedParameters2={},n._materialParameters=null,n}return l(t,e),t.prototype.destroy=function(){this._reservedParameters2=null,delete this._reservedParameters2,this._materialParameters=null,delete this._materialParameters,e.prototype.destroy.call(this)},t.prototype.attachShader=function(t,r){if(!t&&!r)return null;if(!t){if(!(t=r.getShader("solid",[])).ready){var n=a.default.solid;if(t.createFromShaderSource(n,["MODEL_TRANSFORM"]),!t.ready)throw"modelo3d error at creating shader 'solid'!"}}if(!t||!t.ready)return null;for(var i in e.prototype.attachShader.call(this,t,r),t.reservedUniforms)this.reservedParameters.hasOwnProperty(i)||("m_uDiffuseTexture"===i?(this.reservedParameters[i]=new s.default,this.hasTexture=!0,this.reservedParameters[i].texUnit=5,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uDiffuseTexture2"===i?(this.reservedParameters[i]=new s.default,this.hasTexture=!0,this.reservedParameters[i].texUnit=6,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):i.indexOf("m_uMaterial")>=0&&(this.reservedParameters[i]=new s.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue,this._materialParameters=new Float32Array(u),this.reservedParameters[i].value=this._materialParameters));return t},t.prototype.equal=function(e){return this._materialParameters[0]===e[0]&&this._materialParameters[0]===e[0]&&this._materialParameters[2]===e[2]&&this._materialParameters[3]===e[3]},t.prototype.hash=function(){var e="",t=this._materialParameters;return e=e+t[0].toString()+t[1].toString()+t[2].toString()+t[3].toString()},t.prototype.setDiffuse=function(e){var t=this._materialParameters;t[0]=e[0],t[1]=e[1],t[2]=e[2]},t.prototype.setTransparent=function(e){this._materialParameters[3]=e,this.transparent=e<.99},t.prototype.setDiffuseTexture=function(e){var t=this;if(this.reservedParameters.m_uDiffuseTexture)if(e instanceof i.default)this.reservedParameters.m_uDiffuseTexture.value=e;else{var r=this.reservedParameters.m_uDiffuseTexture.value,n=r.getFilter(),a=r.getWrap(),o=this._resourceManager.gl.RGB;if(e instanceof HTMLImageElement){var s=new i.default("texture-"+e.src,this._resourceManager);"png"===(l=e.src.split("."))[l.length-1]&&(o=this._resourceManager.gl.RGBA),s.createFromImage(e,o,this._resourceManager.gl.UNSIGNED_BYTE,n,a),this.reservedParameters.m_uDiffuseTexture.value=s}else{var l,u=new i.default("texture-"+e,this._resourceManager);o=this._resourceManager.gl.RGB;"png"===(l=e.split("."))[l.length-1]&&(o=this._resourceManager.gl.RGBA),u.createFromFile(e,o,n,a,function(){t.reservedParameters.m_uDiffuseTexture.value=u})}}else console.warn("can not set texture for "+this.name)},t.prototype.setSecondDiffuseTexture=function(e){this.reservedParameters.m_uDiffuseTexture2.value=e},t.prototype.getDiffuse=function(){return this._materialParameters},t.prototype.getTransparent=function(){return this._materialParameters[3]},t.prototype.getShininess=function(){return this._materialParameters[4]},t.prototype.getDiffuseTexture=function(){return this.reservedParameters.m_uDiffuseTexture?this.reservedParameters.m_uDiffuseTexture.value:null},t.prototype.absorb=function(e){if(e.hasMask){var t=this.reservedParameters.m_uDiffuseTexture,r=e.reservedParameters.m_uDiffuseTexture;t&&r&&(t.value=r.value)}e.transparent&&this.transparent&&this.getTransparent()<0&&this.setTransparent(e.getTransparent())},t.prototype.clone=function(e){var r=new t(e,this._resourceManager);if(this.reservedParameters){for(var n in this.reservedParameters)n.indexOf("m_uMaterial")>=0?(r.reservedParameters[n]=new s.default,r.reservedParameters[n].upload=this.reservedParameters[n].upload,r._materialParameters=new Float32Array(this.reservedParameters[n].value),r.reservedParameters[n].value=r._materialParameters):r.reservedParameters[n]=this.reservedParameters[n];r.transparent=this.transparent}return r},t}(o.default);t.default=c},"./03scene/materials/MaterialAnimatingRibbon.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/materials/MaterialAdhoc.ts"),a=r("./03scene/materials/MaterialParameter.ts"),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t,r){return e.call(this,t,r)||this}return o(t,e),t.prototype.attachShader=function(t,r){var n=e.prototype.attachShader.call(this,t,r);if(!n)return null;for(var i in t.reservedUniforms)this.reservedParameters.hasOwnProperty(i)||("m_uPlatteTexture"===i?(this.reservedParameters[i]=new a.default,this.reservedParameters[i].texUnit=5,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uTime"===i?(this.reservedParameters[i]=new a.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue):"m_uSpeed"===i?(this.reservedParameters[i]=new a.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue):"m_uWidth"===i&&(this.reservedParameters[i]=new a.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue));return n},t.prototype.setPlatteTexture=function(e){this.reservedParameters.m_uPlatteTexture.value=e},t.prototype.setTime=function(e){this.reservedParameters.m_uTime.value=e},t.prototype.setSpeed=function(e){this.reservedParameters.m_uSpeed.value=e},t.prototype.setWidth=function(e){this.reservedParameters.m_uWidth.value=e},t}(i.default);t.default=s},"./03scene/materials/MaterialBarChart.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/materials/MaterialAdhoc.ts"),a=r("./03scene/materials/MaterialParameter.ts"),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t,r){return e.call(this,t,r)||this}return o(t,e),t.prototype.attachShader=function(t,r){var n=e.prototype.attachShader.call(this,t,r);if(!n)return null;for(var i in t.reservedUniforms)this.reservedParameters.hasOwnProperty(i)||("m_uPlatte"===i?(this.reservedParameters[i]=new a.default,this.reservedParameters[i].texUnit=5,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uData"===i?(this.reservedParameters[i]=new a.default,this.reservedParameters[i].texUnit=6,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uRes"===i?(this.reservedParameters[i]=new a.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue):"m_uThickness"===i&&(this.reservedParameters[i]=new a.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue));return n},t.prototype.setPlatteTexture=function(e){this.reservedParameters.m_uPlatte.value=e},t.prototype.setDataTexture=function(e){this.reservedParameters.m_uData.value=e},t.prototype.setResolution=function(e){this.reservedParameters.m_uRes.value=e},t.prototype.setThickness=function(e){this.reservedParameters.m_uThickness.value=.5*e},t}(i.default);t.default=s},"./03scene/materials/MaterialBlit.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/materials/MaterialParameter.ts"),a=r("./03scene/materials/Material.ts"),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.attachShader=function(t,r){if(!t||!t.ready)return t;for(var n in e.prototype.attachShader.call(this,t,r),t.reservedUniforms)this.reservedParameters.hasOwnProperty(n)||("m_uBlitTexture"===n?(this.reservedParameters[n]=new i.default,this.hasTexture=!0,this.reservedParameters[n].texUnit=4,this.reservedParameters[n].upload=this.reservedParameters[n].uploadTexture):"m_uBlitDepthTexture"===n?(this.reservedParameters[n]=new i.default,this.hasTexture=!0,this.reservedParameters[n].texUnit=6,this.reservedParameters[n].upload=this.reservedParameters[n].uploadTexture):"m_uInvResolution"===n?(this.reservedParameters[n]=new i.default,this.reservedParameters[n].upload=this.reservedParameters[n].uploadValue,this.reservedParameters[n].value=[1,1]):"m_uForeground"===n&&(this.reservedParameters[n]=new i.default,this.reservedParameters[n].texUnit=5,this.reservedParameters[n].upload=this.reservedParameters[n].uploadTexture));return t},t.prototype.setTexture=function(e){this.reservedParameters.m_uBlitTexture.value=e},t.prototype.setForegroundTexture=function(e){this.reservedParameters.m_uForeground.value=e},t.prototype.setDepthTexture=function(e){this.reservedParameters.m_uBlitDepthTexture.value=e},t.prototype.setInvResolution=function(e){this.reservedParameters.m_uInvResolution&&(this.reservedParameters.m_uInvResolution.value=e)},t}(a.default);t.default=s},"./03scene/materials/MaterialColor.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./02resource/Texture.ts"),a=r("./03scene/materials/MaterialAdhoc.ts"),o=r("./03scene/materials/MaterialParameter.ts"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(e){function t(t,r){return e.call(this,t,r)||this}return s(t,e),t.prototype.attachShader=function(t,r){var n=e.prototype.attachShader.call(this,t,r);if(!n)return null;for(var i in t.reservedUniforms)this.reservedParameters.hasOwnProperty(i)||("m_uInvTransform"===i?(this.reservedParameters[i]=new o.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue):"m_uPlatteTexture"===i?(this.reservedParameters[i]=new o.default,this.reservedParameters[i].texUnit=6,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uGradientTexture"===i?(this.reservedParameters[i]=new o.default,this.reservedParameters[i].texUnit=8,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uDensityTexture"===i?(this.reservedParameters[i]=new o.default,this.reservedParameters[i].texUnit=9,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uMaskTexture"===i?(this.reservedParameters[i]=new o.default,this.reservedParameters[i].texUnit=10,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uAlphaCorrection"===i?(this.reservedParameters[i]=new o.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue):"m_uLayers"===i?(this.reservedParameters[i]=new o.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue):"m_uInstanceFilter"===i?(this.reservedParameters[i]=new o.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue):"m_uGridSize"===i?(this.reservedParameters[i]=new o.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue):"m_uSampleNumber"===i?(this.reservedParameters[i]=new o.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue):"m_uDiffuseTexture"===i&&(this.reservedParameters[i]=new o.default,this.hasTexture=!0,this.reservedParameters[i].texUnit=5,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture));return n},t.prototype.setDiffuseTexture=function(e){var t=this;if(this.reservedParameters.m_uDiffuseTexture)if(e instanceof i.default)this.reservedParameters.m_uDiffuseTexture.value=e;else{var r=this.reservedParameters.m_uDiffuseTexture.value,n=r.getFilter(),a=r.getWrap(),o=this._resourceManager.gl.RGB;if(e instanceof HTMLImageElement){var s=new i.default("texture-"+e.src,this._resourceManager);"png"===(l=e.src.split("."))[l.length-1]&&(o=this._resourceManager.gl.RGBA),s.createFromImage(e,o,this._resourceManager.gl.UNSIGNED_BYTE,n,a),this.reservedParameters.m_uDiffuseTexture.value=s}else{var l,u=new i.default("texture-"+e,this._resourceManager);o=this._resourceManager.gl.RGB;"png"===(l=e.split("."))[l.length-1]&&(o=this._resourceManager.gl.RGBA),u.createFromFile(e,o,n,a,function(){t.reservedParameters.m_uDiffuseTexture.value=u})}}else console.warn("can not set texture for "+this.name)},t.prototype.setPlatteTexture=function(e){this.reservedParameters.m_uPlatteTexture&&(this.reservedParameters.m_uPlatteTexture.value=e)},t.prototype.setGradientTexture=function(e){this.reservedParameters.m_uGradientTexture&&(this.reservedParameters.m_uGradientTexture.value=e)},t.prototype.setDataTexture=function(e){this.reservedParameters.m_uDensityTexture&&(this.reservedParameters.m_uDensityTexture.value=e)},t.prototype.setAlphaCorrection=function(e){this.reservedParameters.m_uAlphaCorrection&&(this.reservedParameters.m_uAlphaCorrection.value=e)},t.prototype.setInvTransform=function(e){this.reservedParameters.m_uInvTransform&&(this.reservedParameters.m_uInvTransform.value=e)},t.prototype.setLayers=function(e){this.reservedParameters.m_uLayers&&(this.reservedParameters.m_uLayers.value=e)},t.prototype.setinstanceFilter=function(e){this.reservedParameters.m_uInstanceFilter&&(this.reservedParameters.m_uInstanceFilter.value=e)},t.prototype.setGridSize=function(e){this.reservedParameters.m_uGridSize&&(this.reservedParameters.m_uGridSize.value=e)},t.prototype.setSampleNumber=function(e){this.reservedParameters.m_uSampleNumber&&(this.reservedParameters.m_uSampleNumber.value=e)},t}(a.default);t.default=l},"./03scene/materials/MaterialHeatMap.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/materials/MaterialHeightMap.ts"),a=r("./03scene/materials/MaterialParameter.ts"),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t,r){return e.call(this,t,r)||this}return o(t,e),t.prototype.attachShader=function(t,r){var n=e.prototype.attachShader.call(this,t,r);if(!t)return null;for(var i in t.reservedUniforms)this.reservedParameters.hasOwnProperty(i)||("m_uPlatte"===i?(this.reservedParameters[i]=new a.default,this.reservedParameters[i].texUnit=5,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uData"===i?(this.reservedParameters[i]=new a.default,this.reservedParameters[i].texUnit=6,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uForeground"===i&&(this.reservedParameters[i]=new a.default,this.reservedParameters[i].texUnit=7,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture));return n},t.prototype.setForegroundImage=function(e){this.reservedParameters.m_uForeground.value=e},t}(i.default);t.default=s},"./03scene/materials/MaterialHeightMap.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/materials/MaterialAdhoc.ts"),a=r("./03scene/materials/MaterialParameter.ts"),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t,r){return e.call(this,t,r)||this}return o(t,e),t.prototype.attachShader=function(t,r){var n=e.prototype.attachShader.call(this,t,r);if(!t)return null;for(var i in t.reservedUniforms)this.reservedParameters.hasOwnProperty(i)||("m_uPlatte"===i?(this.reservedParameters[i]=new a.default,this.reservedParameters[i].texUnit=5,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uData"===i&&(this.reservedParameters[i]=new a.default,this.reservedParameters[i].texUnit=6,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture));return n},t.prototype.setPlatteTexture=function(e){this.reservedParameters.m_uPlatte.value=e},t.prototype.setDataTexture=function(e){this.reservedParameters.m_uData.value=e},t}(i.default);t.default=s},"./03scene/materials/MaterialParameter.ts":function(e,t,r){"use strict";r.r(t);var n=function(){function e(){this.upload=null,this.value=null,this.texUnit=-1}return e.prototype.uploadTexture=function(e,t){this.value&&this.value.use(this.texUnit),e&&e.upload(this.texUnit,t)},e.prototype.uploadValue=function(e,t){e.upload(this.value,t)},e}();t.default=n},"./03scene/materials/MaterialPbr.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./02resource/Texture.ts"),a=r("./02resource/m3d_shader_library.js"),o=r("./03scene/materials/Material.ts"),s=r("./03scene/materials/MaterialParameter.ts"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=[1,0,1,1,.8,1,0,0,0,1],c=function(e){function t(t,r){var n=e.call(this,t)||this;return n._reservedParameters2={},n._materialParameters=null,n._resourceManager=r,n}return l(t,e),t.prototype.destroy=function(){this._reservedParameters2=null,delete this._reservedParameters2,this._materialParameters=null,delete this._materialParameters,e.prototype.destroy.call(this)},t.prototype.attachShader=function(t,r){if(!t&&!r)return null;if(!t){if(!(t=r.getShader("solid",[])).ready){var n=a.default.solid;if(t.createFromShaderSource(n,["MODEL_TRANSFORM"]),!t.ready)throw"modelo3d error at creating shader 'solid'!"}}if(!t||!t.ready)return null;for(var i in e.prototype.attachShader.call(this,t,r),t.reservedUniforms)this.reservedParameters.hasOwnProperty(i)||("m_uSpecularEnvMap"===i?(this.reservedParameters[i]=new s.default,this.reservedParameters[i].texUnit=4,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uBrdfLut"===i?(this.reservedParameters[i]=new s.default,this.reservedParameters[i].texUnit=5,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uBaseColorTexture"===i?(this.reservedParameters[i]=new s.default,this.hasTexture=!0,this.reservedParameters[i].texUnit=8,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):i.indexOf("m_uMaterial")>=0?(this.reservedParameters[i]=new s.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue,this._materialParameters=new Float32Array(u),this.reservedParameters[i].value=this._materialParameters):"m_uNormalTexture"===i?(this.reservedParameters[i]=new s.default,this.reservedParameters[i].texUnit=9,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uMetallicRoughnessTexture"===i?(this.reservedParameters[i]=new s.default,this.reservedParameters[i].texUnit=10,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uEmissiveTexture"===i?(this.reservedParameters[i]=new s.default,this.reservedParameters[i].texUnit=11,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uOcclusionTexture"===i?(this.reservedParameters[i]=new s.default,this.reservedParameters[i].texUnit=12,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uDiffuseEnvMap"===i?(this.reservedParameters[i]=new s.default,this.reservedParameters[i].texUnit=13,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uTransformTexture"===i?(this.reservedParameters[i]=new s.default,this.reservedParameters[i].texUnit=14,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uTotalLod"===i?(this.reservedParameters[i]=new s.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue):"m_uReflectIntensity"===i&&(this.reservedParameters[i]=new s.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue));return t},t.prototype.equal=function(e){return this._materialParameters[0]===e[0]&&this._materialParameters[0]===e[0]&&this._materialParameters[2]===e[2]&&this._materialParameters[3]===e[3]},t.prototype.hash=function(){var e="",t=this._materialParameters;return e=e+t[0].toString()+t[1].toString()+t[2].toString()+t[3].toString()},t.prototype.getBaseColor=function(){return[this._materialParameters[0],this._materialParameters[1],this._materialParameters[2],this._materialParameters[3]]},t.prototype.setBaseColor=function(e){var t=this._materialParameters;t[0]=e[0],t[1]=e[1],t[2]=e[2],void 0!==e[3]&&(t[3]=e[3])},t.prototype.setEmissive=function(e){var t=this._materialParameters;t[6]=e[0],t[7]=e[1],t[8]=e[2]},t.prototype.setTransparent=function(e){this._materialParameters[3]=e,this.transparent=e<.99},t.prototype.getTransparent=function(){return this._materialParameters[3]},t.prototype.getRoughness=function(){return this._materialParameters[4]},t.prototype.setRoughness=function(e){this._materialParameters[4]=e},t.prototype.getMetallic=function(){return this._materialParameters[5]},t.prototype.setMetallic=function(e){this._materialParameters[5]=e},t.prototype._reCreateTexture=function(e,t,r){var n=this.reservedParameters[t].value,a=n.getFilter(),o=n.getWrap(),s=this._resourceManager.gl.RGB;if(e instanceof HTMLImageElement){var l=new i.default("texture-"+e.src,this._resourceManager);return"png"===(u=e.src.split("."))[u.length-1]&&(s=this._resourceManager.gl.RGBA),n.destroy(),l.createFromImage(e,s,this._resourceManager.gl.UNSIGNED_BYTE,a,o),l}var u,c=new i.default("texture-"+e,this._resourceManager);s=this._resourceManager.gl.RGB;"png"===(u=e.split("."))[u.length-1]&&(s=this._resourceManager.gl.RGBA),c.createFromFile(e,s,a,o,function(){n.destroy(),r(c)})},t.prototype.getBaseColorTexture=function(){return this.reservedParameters.m_uBaseColorTexture?this.reservedParameters.m_uBaseColorTexture.value:null},t.prototype.setBaseColorTexture=function(e){var t=this;this.reservedParameters.m_uBaseColorTexture?e instanceof i.default?this.reservedParameters.m_uBaseColorTexture.value=e:this._reCreateTexture(e,"m_uBaseColorTexture",function(e){t.reservedParameters.m_uBaseColorTexture.value=e}):console.warn("can not set texture for "+this.name)},t.prototype.setNormalTexture=function(e){var t=this;this.reservedParameters.m_uNormalTexture||console.warn("can not set normal texture for "+this.name),e instanceof i.default?this.reservedParameters.m_uNormalTexture.value=e:(e=this._reCreateTexture(e,"m_uNormalTexture",function(e){t.reservedParameters.m_uNormalTexture.value=e}),this.reservedParameters.m_uNormalTexture.value=e)},t.prototype.setEmissiveTexture=function(e){var t=this;this.reservedParameters.m_uEmissiveTexture||console.warn("can not set emissive texture for "+this.name),e instanceof i.default?this.reservedParameters.m_uEmissiveTexture.value=e:(e=this._reCreateTexture(e,"m_uEmissiveTexture",function(e){t.reservedParameters.m_uEmissiveTexture.value=e}),this.reservedParameters.m_uEmissiveTexture.value=e)},t.prototype.setOcclusionTexture=function(e){var t=this;this.reservedParameters.m_uOcclusionTexture||console.warn("can not set occlusion texture for "+this.name),e instanceof i.default?this.reservedParameters.m_uOcclusionTexture.value=e:(e=this._reCreateTexture(e,"m_uOcclusionTexture",function(e){t.reservedParameters.m_uOcclusionTexture.value=e}),this.reservedParameters.m_uOcclusionTexture.value=e)},t.prototype.setMetallicRoughnessTexture=function(e){var t=this;this.reservedParameters.m_uMetallicRoughnessTexture||console.warn("can not set metallic roughness texture for "+this.name),e instanceof i.default?this.reservedParameters.m_uMetallicRoughnessTexture.value=e:(e=this._reCreateTexture(e,"m_uMetallicRoughnessTexture",function(e){t.reservedParameters.m_uMetallicRoughnessTexture.value=e}),this.reservedParameters.m_uMetallicRoughnessTexture.value=e)},t.prototype.setBrdfLut=function(e){this.reservedParameters.m_uBrdfLut.value=e},t.prototype.setEnvironmentMap=function(e){this.reservedParameters.m_uEnvironmentMap.value=e},t.prototype.setSpecularEnvMap=function(e){this.reservedParameters.m_uSpecularEnvMap.value=e;var t=Math.floor(Math.log2(Math.max(e.width,e.height)))+1;this.reservedParameters.m_uTotalLod.value=t},t.prototype.setReflectIntensity=function(e){e<0?console.error("intensity should be greater than 0"):this.reservedParameters.m_uSpecularEnvMap&&this.reservedParameters.m_uSpecularEnvMap.value&&(this._materialParameters[9]=e)},t.prototype.clone=function(e){var r=new t(e,this._resourceManager);if(this.reservedParameters){for(var n in this.reservedParameters)n.indexOf("m_uMaterial")>=0?(r.reservedParameters[n]=new s.default,r.reservedParameters[n].upload=this.reservedParameters[n].upload,r._materialParameters=new Float32Array(this.reservedParameters[n].value),r.reservedParameters[n].value=r._materialParameters):r.reservedParameters[n]=this.reservedParameters[n];r.transparent=this.transparent}return r},t}(o.default);t.default=c},"./03scene/materials/MaterialSkyBox.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/materials/Material.ts"),a=r("./03scene/materials/MaterialParameter.ts"),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.attachShader=function(e,t){if(e&&e.ready){for(var r in e.userUniforms)if(!this.parameters.hasOwnProperty(r))if(this.parameters[r]=new a.default,r.match(/uTexture\d/)){this.hasTexture=!0;var n=parseInt(r.substr(8));if(n>2){console.error("can't support >3 user textures. See shader '"+e.name+"'");continue}this.parameters[r].texUnit=n,this.parameters[r].upload=this.parameters[r].uploadTexture}else this.parameters[r].upload=this.parameters[r].uploadValue;for(var i in e.reservedUniforms)this.reservedParameters.hasOwnProperty(i)||("m_uSkyTexture"===i&&(this.reservedParameters[i]=new a.default,this.hasTexture=!0,this.reservedParameters[i].texUnit=4,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture),"m_uTransparency"===i&&(this.reservedParameters[i]=new a.default,this.reservedParameters[i].value=1,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue));for(var o in this.reservedParameters)e.reservedUniforms[o]||delete this.reservedParameters[o];return e}},t.prototype.setTexture=function(e){this.reservedParameters.m_uSkyTexture.value=e},t.prototype.texture=function(){return this.reservedParameters.m_uSkyTexture.value},t.prototype.setTransparency=function(e){this.reservedParameters.m_uTransparency.value=e},t}(i.default);t.default=s},"./03scene/materials/MaterialText.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/materials/MaterialAdhoc.ts"),a=r("./03scene/materials/MaterialParameter.ts"),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t,r){return e.call(this,t,r)||this}return o(t,e),t.prototype.attachShader=function(t,r){var n=e.prototype.attachShader.call(this,t,r);if(!n)return null;for(var i in t.reservedUniforms)this.reservedParameters.hasOwnProperty(i)||("m_uFontBitmap"===i?(this.reservedParameters[i]=new a.default,this.reservedParameters[i].texUnit=6,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uTextureSize"===i?(this.reservedParameters[i]=new a.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue):"m_uColor"===i&&(this.reservedParameters[i]=new a.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue));return n},t.prototype.setFontBitmap=function(e){this.reservedParameters.m_uFontBitmap&&(this.reservedParameters.m_uFontBitmap.value=e),this.reservedParameters.m_uTextureSize&&(this.reservedParameters.m_uTextureSize.value=[e.width,e.height])},t.prototype.setColor=function(e){this.reservedParameters.m_uColor&&(this.reservedParameters.m_uColor.value=e)},t}(i.default);t.default=s},"./03scene/materials/MaterialVolume.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/materials/MaterialAdhoc.ts"),a=r("./03scene/materials/MaterialParameter.ts"),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t,r){return e.call(this,t,r)||this}return o(t,e),t.prototype.attachShader=function(t,r){var n=e.prototype.attachShader.call(this,t,r);if(!n)return null;for(var i in t.reservedUniforms)this.reservedParameters.hasOwnProperty(i)||("m_uInvTransform"===i?(this.reservedParameters[i]=new a.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue):"m_uPlatteTexture"===i?(this.reservedParameters[i]=new a.default,this.reservedParameters[i].texUnit=6,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uGradientTexture"===i?(this.reservedParameters[i]=new a.default,this.reservedParameters[i].texUnit=8,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uDensityTexture"===i?(this.reservedParameters[i]=new a.default,this.reservedParameters[i].texUnit=9,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uMaskTexture"===i?(this.reservedParameters[i]=new a.default,this.reservedParameters[i].texUnit=10,this.reservedParameters[i].upload=this.reservedParameters[i].uploadTexture):"m_uAlphaCorrection"===i?(this.reservedParameters[i]=new a.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue):"m_uLayers"===i?(this.reservedParameters[i]=new a.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue):"m_uGridSize"===i?(this.reservedParameters[i]=new a.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue):"m_uSampleNumber"===i&&(this.reservedParameters[i]=new a.default,this.reservedParameters[i].upload=this.reservedParameters[i].uploadValue));return n},t.prototype.setPlatteTexture=function(e){this.reservedParameters.m_uPlatteTexture&&(this.reservedParameters.m_uPlatteTexture.value=e)},t.prototype.setGradientTexture=function(e){this.reservedParameters.m_uGradientTexture&&(this.reservedParameters.m_uGradientTexture.value=e)},t.prototype.setDataTexture=function(e){this.reservedParameters.m_uDensityTexture&&(this.reservedParameters.m_uDensityTexture.value=e)},t.prototype.setAlphaCorrection=function(e){this.reservedParameters.m_uAlphaCorrection&&(this.reservedParameters.m_uAlphaCorrection.value=e)},t.prototype.setInvTransform=function(e){this.reservedParameters.m_uInvTransform&&(this.reservedParameters.m_uInvTransform.value=e)},t.prototype.setLayers=function(e){this.reservedParameters.m_uLayers&&(this.reservedParameters.m_uLayers.value=e)},t.prototype.setGridSize=function(e){this.reservedParameters.m_uGridSize&&(this.reservedParameters.m_uGridSize.value=e)},t.prototype.setSampleNumber=function(e){this.reservedParameters.m_uSampleNumber&&(this.reservedParameters.m_uSampleNumber.value=e)},t}(i.default);t.default=s},"./03scene/model/Element.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"ElementType",function(){return n});var n,i=r("./00utility/m3d_math.js");!function(e){e[e.ROOT=0]="ROOT",e[e.INSTANCE=1]="INSTANCE",e[e.GROUP=2]="GROUP",e[e.ELEMENT=3]="ELEMENT",e[e.NODE=4]="NODE",e[e.LINK=5]="LINK",e[e.ROOM=6]="ROOM",e[e.AREA=7]="AREA",e[e.ANY=-1]="ANY"}(n||(n={}));var a=function(){function e(e,t,r){this.etype=e,this.id=t,this.father=null,this.children=[],this.bbox=i.default.aabb.create(),this.model=r,this.guid=""}return e.prototype.getNodes=function(){for(var e=[],t=[],r=0,n=this.children.length;r<n;++r){var i=this.children[r];i.hasOwnProperty("children")?t.push(i):e.push(i)}for(;t.length>0;)for(var a=t.pop(),o=0,s=a.children.length;o<s;++o){var l=a.children[o];l.hasOwnProperty("children")?t.push(l):e.push(l)}return e},e.prototype.getDocument=function(){for(var e=this.father;null!==e&&e.etype!==n.LINK;)e=e.father;return e.etype===n.LINK?e:null},e}();t.default=a},"./03scene/model/Model.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/model/ModelTree.ts"),a=r("./03scene/model/ModelLoader.ts"),o=r("./03scene/Entity.ts"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},u=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},c=function(e){function t(t,r,n,a,o,s){void 0===o&&(o=!1);var l=e.call(this,t,n,a)||this;l.isMatrixIdentity=!0,l.usePbr=!1,l.tree=new i.default(l),l.source="",l._matrix=r;for(var u=0;u<l._matrix.length;u++)if(0===u||5===u||10===u||15===u){if(Math.abs(l._matrix[u]-1)>1e-6){l.isMatrixIdentity=!1;break}}else if(Math.abs(l._matrix[u])>1e-6){l.isMatrixIdentity=!1;break}return l.usePbr=o,l.local=s,l}return s(t,e),t.prototype.destroy=function(){this.tree.destroy(),this.tree=null,delete this.tree,this.source=null,delete this.source,e.prototype.destroy.call(this)},t.prototype.load=function(e,t,r,n){return l(this,void 0,void 0,function(){return u(this,function(e){return[2,new a.default(this,this._resourceManager,this._materialManager).load(t,r,n)]})})},t}(o.default);t.default=c},"./03scene/model/ModelLoader.ts":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/m3d_math.js"),i=r("./03scene/model/Node.ts"),a=r("./03scene/model/m3d_load_misc.js"),o=r("./03scene/model/ModelLoaderMesh.ts"),s=r("./03scene/model/ModelLoaderBin.ts"),l=r("./03scene/model/ModelLoaderTree.ts"),u=r("./01wrapper/glenum.ts"),c=r("./99api/utils/model/downloader.ts"),d=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},h=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},f=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},p=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e},m=function(){function e(e,t,r){this._model=e,this._resourceManager=t,this._materialManager=r,this._binLoader=null,this._filePromises=null,this._modelJson=null,this._sceneJson=null,this._progressTracker=null}return e.prototype.destroy=function(){this._model=null,delete this._model,this._resourceManager=null,delete this._resourceManager,this._binLoader.destroy(),this._binLoader=null,delete this._binLoader,this._filePromises=null,delete this._filePromises,this._filePromises=null,delete this._filePromises,this._sceneJson=null,delete this._sceneJson,this._modelJson=null,delete this._modelJson,this._progressTracker=null,delete this._progressTracker},e.prototype.load=function(e,t,r){return d(this,void 0,void 0,function(){var n=this;return h(this,function(i){return[2,this._generatePromises(this._model.name,t,r).then(function(t){return n._filePromises=t,t["scene.json"].onProgress(function(t){e(t.loaded/t.total*.05)}),t["scene.json"].downloadFile()}).then(function(e){"string"==typeof e.data?n._sceneJson=JSON.parse(e.data):n._sceneJson=e.data;var t=n._sceneJson.version.split(".");if(1e4*parseInt(t[0])+100*parseInt(t[1])+parseInt(t[2])<3e4)return Promise.reject(new Error("Unsupported model format."));console.time('Loading "'+n._model.name+'" takes ')}).then(function(){return n._load(function(t){e(.05+.95*t)})}).then(function(){console.timeEnd('Loading "'+n._model.name+'" takes '),e(1)})]})})},e.prototype._load=function(e){var t=this;return this._filePromises["model.json"].downloadFile().then(function(r){t._modelJson=r.data,t._progressTracker=new a.default.ProgressTracker(e);for(var n=0,i=t._sceneJson.textures.length;n<i;n++)t._progressTracker.totalDownload+=t._sceneJson.textures[n].byteLength;for(n=0,i=t._modelJson.buffers.length;n<i;n++)t._progressTracker.totalDownload+=t._modelJson.buffers[n].byteLength;t._progressTracker.totalDownload+=t._modelJson["model.bin"].byteLength,t._progressTracker.totalDownload+=t._modelJson["modelgraph.bin"].byteLength,t._modelJson["uuid.bin"]&&(t._progressTracker.totalDownload+=t._modelJson["uuid.bin"].byteLength);t._progressTracker.getSingleFileProgress();return t._filePromises["scene.bin"].downloadFile()}).then(function(e){var r=e.data,n=t._progressTracker.getSingleFileProgress();return t._filePromises["model.bin"].onProgress(function(e){n(e.loaded)}),t._filePromises["model.bin"].downloadFile().then(function(e){var n=e.data;t._binLoader=new s.default(t._sceneJson,r,t._modelJson,n)})}).then(function(){t._model.bbox=n.default.aabb.createFromArray(t._modelJson["model.bin"].bbox),t._model.isMatrixIdentity||n.default.aabb.transform(t._model.bbox,t._model.bbox,t._model.getTransformMatrix());var e=t._model.tree,r=t._modelJson["model.bin"].nodes;e.createNodes(r);for(var a=0;a<r;a++){e.nodes[a]=new i.default(a);var o=t._binLoader.readNodeBBox(a),s=new Float32Array(e.nodeBBoxes.buffer,24*a,6);n.default.aabb.copy(s,o)}if(t._sceneJson.source){var l=t._sceneJson.source.split("/"),u=[];if(l.forEach(function(e){u.push.apply(u,p(e.split(".")))}),t._model.faces=1,l.length>0)-1!==u.indexOf("skp")&&(t._model.faces=2,t._model.hasContours=!0),-1!==u.indexOf("rvt")&&(t._model.hasContours=!0);else switch(u[u.length-1]){case"skp":t._model.faces=2,t._model.hasContours=!0;break;case"rfa":case"rvt":t._model.faces=1,t._model.hasContours=!0;break;case"vgx":case"stl":case"max":t._model.faces=1;break;case"obj":case"3dm":case"nwd":t._model.faces=0;break;default:t._model.faces=1}t._model.source=u[u.length-1]}return t._loadTextures()}).then(function(){return new o.default(t._resourceManager,t._materialManager,t._model).load(t._filePromises,t._sceneJson,t._modelJson,t._binLoader,t._progressTracker)}).then(function(){return t._model.initlize()}).then(function(){return new l.default(t._model).load(t._filePromises,t._progressTracker)})},e.prototype._loadTextures=function(){return d(this,void 0,void 0,function(){var e,t,r,n,i,a,o,s=this;return h(this,function(l){if(0===this._sceneJson.textures.length)return[2,Promise.resolve("ok")];for(e=new Array(this._sceneJson.samplers.length),a=0,o=this._sceneJson.samplers.length;a<o;a++)e[a]={filter:u.gl.LINEAR_MIPMAP_LINEAR,wrap:u.gl.REPEAT},1===(t=this._binLoader.readSampler(a))[0]?e[a].filter=1===t[2]?u.gl.LINEAR_MIPMAP_LINEAR:u.gl.LINEAR:e[a].filter=1===t[2]?u.gl.NEAREST_MIPMAP_NEAREST:u.gl.NEAREST,e[a].wrap=1===t[1]?u.gl.REPEAT:u.gl.CLAMP_TO_EDGE;for(r={},Object.keys(this._filePromises).forEach(function(e){var t=e.toLowerCase();r[t]=s._filePromises[e]}),i=(n=function(t){var n=s._sceneJson.textures[t].name.toLowerCase(),i=s._model.name+"-"+n;return r[n].downloadFile().then(function(r){var a=s._binLoader.readTexture(t),o=e[a[1]],l=s._resourceManager.getTexture(i);l.url=r.src;var u=s._resourceManager.gl,c=4===a[0]?u.RGBA:u.RGB;if(l.updateImage(r,c,u.UNSIGNED_BYTE,o.filter,o.wrap),!l.ready)return Promise.reject("modelo3d loader errors at creating texture '"+n+"'.")})})(0),a=1,o=this._sceneJson.textures.length;a<o;a++)i=function(e){return i.then(function(){return n(e)})}(a);return[2,i]})})},e.prototype._generatePromisesLocal=function(e){return d(this,void 0,void 0,function(){var t,r,n;return h(this,function(i){return n=(r=e||"./localmodel")+"/scene.json",(t={})["scene.json"]=a.default.OpenFile1(n,"json",Promise),[2,t["scene.json"].downloadFile().then(function(e){for(var n,i=e.data,o=0,s=i.textures.length;o<s;o++){var l=i.textures[o].name;n=r+"/"+l,t[l]=a.default.OpenImage(n,Promise)}return n=r+"/scene.bin",t["scene.bin"]=a.default.OpenFile1(n,"arraybuffer",Promise),n=r+"/model.bin",t["model.bin"]=a.default.OpenFile1(n,"arraybuffer",Promise),n=r+"/modelgraph.bin",t["modelgraph.bin"]=a.default.OpenFile1(n,"arraybuffer",Promise),n=r+"/uuid.bin",t["uuid.bin"]=a.default.OpenFile1(n,"arraybuffer",Promise),n=r+"/model.json",t["model.json"]=a.default.OpenFile1(n,"json",Promise),t["model.json"].downloadFile()}).then(function(e){for(var n=0,i=e.data.buffers.length;n<i;n++){var o=r+"/mesh"+n+".bin";t["mesh"+n+".bin"]=a.default.OpenFile1(o,"arraybuffer",Promise)}return Promise.resolve(t)})]})})},e.prototype._generatePromises=function(e,t,r){return d(this,void 0,void 0,function(){return h(this,function(n){return r instanceof Array?[2,Object(c.generatePromises)(e,r)]:t?[2,this._generatePromisesLocal(r)]:[2,Object(c.generatePromises)(e)]})})},e}();t.default=m},"./03scene/model/ModelLoaderBin.ts":function(e,t,r){"use strict";r.r(t);var n=function(){function e(e,t,r,n){this._sceneJson=e,this._sceneBin=t,this._modelJson=r,this._modelBin=n,this._samplersLocation=0,this._texturesLocation=0,this._materialsLocation=0,this._attributesLocation=0,this._meshesLocation=0,this._nodesLocation=0,this._initialize(e,t,r,n)}return e.prototype.destroy=function(){this._sceneBin=null,this._sceneJson=null,this._modelBin=null,this._modelJson=null,delete this._sceneBin,delete this._sceneJson,delete this._modelBin,delete this._modelJson,this._samplersLocation=null,this._texturesLocation=null,this._materialsLocation=null,this._attributesLocation=null,delete this._samplersLocation,delete this._texturesLocation,delete this._materialsLocation,delete this._attributesLocation,this._meshesLocation=null,this._nodesLocation=null,delete this._meshesLocation,delete this._nodesLocation},e.prototype._initialize=function(e,t,r,n){var i=0;e.samplers.length>0&&(this._samplersLocation=i,i+=4*e.samplers.length),e.textures.length>0&&(this._texturesLocation=i,i+=4*e.textures.length),e.materials.length>0&&(this._materialsLocation=i,i+=16*e.materials.length),e.attributes.length>0&&(this._attributesLocation=i),this._meshesLocation=8;var a=new Uint32Array(n,0,2);this._nodesLocation=20*a[0]+8},e.prototype.readSampler=function(e){return new Uint8Array(this._sceneBin,this._samplersLocation+1*e*4,4)},e.prototype.readTexture=function(e){return new Uint8Array(this._sceneBin,this._texturesLocation+1*e*4,4)},e.prototype.readMaterial=function(e){return new Uint8Array(this._sceneBin,this._materialsLocation+1*e*16,16)},e.prototype.readAttribute=function(e){return new Int8Array(this._sceneBin,this._attributesLocation+1*e*8,8)},e.prototype.readMesh=function(e){return new Uint32Array(this._modelBin,this._meshesLocation+4*e*5,5)},e.prototype.readNodeData=function(e){return new Uint32Array(this._modelBin,this._nodesLocation+4*e*21,3)},e.prototype.readNodeBBox=function(e){return new Float32Array(this._modelBin,this._nodesLocation+4*(21*e+3),6)},e.prototype.readNodeTransform=function(e){return new Float32Array(this._modelBin,this._nodesLocation+4*(21*e+9),12)},e}();t.default=n},"./03scene/model/ModelLoaderMesh.ts":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/Config.ts"),i=r("./02resource/MeshAttributes.ts"),a=r("./02resource/m3d_shader_library.js"),o=r("./03scene/drawables/Drawable.ts"),s=r("./03scene/model/Node.ts"),l=r("./03scene/model/ModelLoaderMeshSync.js"),u=r("./01wrapper/glenum.ts"),c=r("./00utility/Environment.ts"),d=r("./03scene/materials/MaterialAdhoc.ts"),h=r("./glMatrix.js"),f=r("./00utility/m3d_math.js"),p=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},m=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},v=[1,1,1],_=new Float32Array(16);var g=function(){function e(e,t,r){this._resourceManager=e,this._materialManager=t,this._model=r,this._attributes=null,this._sceneJson=null,this._modelJson=null,this._binLoader=null,this._meshBinLoader=null}return e.prototype.destroy=function(){this._resourceManager=null,delete this._resourceManager,this._model=null,delete this._model,this._sceneJson=null,delete this._sceneJson,this._modelJson=null,delete this._modelJson,this._binLoader=null,delete this._binLoader,this._meshBinLoader=null,delete this._meshBinLoader,this._attributes=null,delete this._attributes},e.prototype.load=function(e,t,r,n,a){return p(this,void 0,void 0,function(){var o,s,c,d,h,f,p,v,_,g,y=this;return m(this,function(m){for(this._sceneJson=t,this._modelJson=r,this._binLoader=n,o=new Array(t.attributes.length),s=[u.gl.POINTS,u.gl.LINES,u.gl.LINES,u.gl.LINES,u.gl.TRIANGLES],c=[u.gl.BYTE,u.gl.UNSIGNED_BYTE,u.gl.SHORT,u.gl.UNSIGNED_SHORT,u.gl.INT,u.gl.UNSIGNED_INT,0,u.gl.FLOAT,0],d=0,h=t.attributes.length;d<h;d++)o[d]=new i.default,this._sceneJson.attributes[d],f=this._binLoader.readAttribute(d),o[d].primitive=s[f[0]],p=f[1]>=0?c[f[1]]:null,v=f[2]>=0?c[f[2]]:null,_=f[3]>=0?c[f[3]]:null,o[d].builtin(u.gl.FLOAT,p,v,_);for(this._attributes=o,this._meshBinLoader=new l.default(this._resourceManager,t,this._binLoader,r,this._attributes,this._model),g=this._loadMesh(0,e["mesh0.bin"],a),d=1,h=r.buffers.length;d<h;d++)g=function(t){return g.then(function(){var r="mesh"+t.toString()+".bin";return y._loadMesh(t,e[r],a)})}(d);return[2,g]})})},e.prototype._loadMesh=function(e,t,r){return p(this,void 0,void 0,function(){var n,i=this;return m(this,function(a){return n=r.getSingleFileProgress(),t.onProgress(function(e){n(e.loaded)}),[2,t.downloadFile().then(function(t){i._meshBinLoader.load(e,t.data,function(e,t,r,n,a,o){var s=i._createShaderObject(e);if(s){var l=i._createMaterialObject(e,s);if(l){var u=i._createMeshObject(e,n,a,t,r);if(!u)throw new Error("Not enough video memory.");i._createDrawableObject(e,u,s,l,o)}}})})]})})},e.prototype._createShaderObject=function(e){var t=this._binLoader.readMaterial(65535&e[2]),r=this._attributes[e[8]>>8&255],i=255!==t[4],o="solid";r.primitive===u.gl.LINES?o="plain":r.hasColor?o="color":i&&(o="texture"),this._model.usePbr&&r.primitive!==u.gl.LINES&&(o="pbr");var s=[];805306368&e[2]&&s.push("INSTANCING"),1073741824&e[2]||s.push("MODEL_TRANSFORM");var l=t[3]<250&&!i;if(this._model.faces<1&&!l&&s.push("DOUBLESIDED"),c.Environment.isMobile&&s.push("MOBILE"),i){var d=t[5]<<8|t[4];this._binLoader.readTexture(d)[2]&&s.push("ALPHATEST"),s.push("HAS_BASECOLORMAP")}n.Config.compressNormals&&s.push("COMPRESSION"),this._model.isMatrixIdentity||s.push("MODEL_TRANSFORM");var h=this._resourceManager.getShader(o,s);if(!h.ready){var f=a.default[o];if(h.createFromShaderSource(f,s),!h.ready)throw"modelo3d error at creating shader '"+o+"'!"}return h},e.prototype._createMeshObject=function(e,t,r,i,a){var o=null;if(!(o=this._resourceManager.getMesh(e[1]>=0?this._model.name+"/"+e[1].toString():this._model.name+"/-"+e[0].toString())).ready){var s=[u.gl.UNSIGNED_BYTE,u.gl.UNSIGNED_BYTE,u.gl.UNSIGNED_SHORT,u.gl.UNSIGNED_SHORT,u.gl.UNSIGNED_INT],l=e[8]>>8&255,c=this._attributes[l];c=c.clone(),n.Config.compressNormals&&c.compress();for(var d=t.byteLength/(c.values[0].stride+(e[3]>=0?1:0)),h=0,f=c.values.length;h<f;h++)c.values[h].offset+=t.byteOffset;if(e[3]>=0){c.add("m_aMaterial",6,u.gl.UNSIGNED_BYTE,!0,1);var p=c.values[c.values.length-1];p.index=6,p.offset=c.values[0].offset+d*c.values[0].stride,p.stride=1}o.createShared(c.primitive,c,t,r,s[255&e[8]],i,a)}return o},e.prototype._createDrawableObject=function(e,t,r,n,i){this._attributes[e[8]>>8&255];var a,l=null;0==(1073741824&e[2])?(a=this._binLoader.readNodeTransform(e[0]),_[0]=a[0],_[1]=a[1],_[2]=a[2],_[3]=0,_[4]=a[3],_[5]=a[4],_[6]=a[5],_[7]=0,_[8]=a[6],_[9]=a[7],_[10]=a[8],_[11]=0,_[12]=a[9],_[13]=a[10],_[14]=a[11],_[15]=1,l=_,this._model.isMatrixIdentity||h.mat4.multiply(l,this._model.getTransformMatrix(),l)):this._model.isMatrixIdentity||(l=this._model.getTransformMatrix());var u=this._binLoader.readNodeBBox(e[0]);this._model.isMatrixIdentity||f.default.aabb.transform(u,u,this._model.getTransformMatrix());var c=new o.default(t,r,n,l,u);c.visible=!0,this._model.addDrawable(c);for(var d=s.NodeType.STRUCTURE,p=e[0],m=0;p>=0;){var v=this._model.tree.nodes[p],g=i[9*p+2]>>24&15;c.nodes.push(v),v.region=g,v.drawable=c,805306368&i[9*p+2]?(v.indicesOffset=1,v.indicesCount=1):(v.indicesOffset=i[9*p+6],v.indicesCount=i[9*p+7]),0===v.indicesOffset&&0===v.indicesCount&&(v.indicesCount=e[5]/t.indexSize),v.verticesCount=i[9*p+4],d!==g&&(d=g,g>=s.NodeType.STRUCTURE_INTERIOR&&c.hidables<0&&(c.hidables=m)),p=i[9*p+3],m++}return 805306368&e[2]&&(c.hidables=(e[2]>>24&15)>=s.NodeType.STRUCTURE_INTERIOR?0:-1),c},e.prototype._createMaterialObject=function(e,t){var r=this._sceneJson.materials[65535&e[2]],n=this._attributes[e[8]>>8&255].primitive===u.gl.LINES;n&&(r="mxLine-"+r),!n&&this._model.usePbr&&(r="mxPbr-"+r);var i=this._materialManager.getMaterial(this._model.name+r);if(!i){var a,o=this._binLoader.readMaterial(65535&e[2]);if((i=!n&&this._model.usePbr?this._materialManager.createMaterialPbr(this._model.name+r):this._materialManager.createMaterialAdhoc(this._model.name+r)).attachShader(t,this._resourceManager),v[0]=o[0]/255,v[1]=o[1]/255,v[2]=o[2]/255,i instanceof d.default)i.setDiffuse(v);else i.setBaseColor(v),this._resourceManager.hasTexture("modelo-brdf-lut")?a=this._resourceManager.getTexture("modelo-brdf-lut"):(a=this._resourceManager.getTexture("modelo-brdf-lut")).createFromFile("data:image/png;base64,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",u.gl.RGBA,u.gl.LINEAR,u.gl.CLAMP_TO_EDGE,function(){}),i.setBrdfLut(a);if(i.setTransparent(o[3]/255),i.getTransparent()<.98&&(i.transparent=!0),255!==o[4]){var s=o[5]<<8|o[4],l=this._model.name+"-"+this._sceneJson.textures[s].name.toLowerCase(),c=this._binLoader.readTexture(s);4===c[0]?1===c[2]?(i.hasMask=!0,i.transparent=!1):i.transparent=!0:i.transparent=!1;var h=this._resourceManager.getTexture(l);i instanceof d.default?(i.setDiffuseTexture(h),i.originTextureUrl=h.url):i.setBaseColorTexture(h)}}return i},e}();t.default=g},"./03scene/model/ModelLoaderMeshSync.js":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/Config.ts"),i=r("./00utility/Environment.ts"),a=r("./01wrapper/glenum.ts");r("./03scene/model/Node.ts");t.default=function(){function e(e,t,r,n,i,a){this._resourceManager=e,this._sceneJson=t,this._modelBin=r,this._modelJson=n,this._attributesData=i,this._maxVertexNumber=65536,this._meshes=0,this._nodesInfo=null,this._buffersNodes=[],this._verticesBinary=null,this._indicesBinary=null,this._model=a,this._initialize()}e.prototype.destroy=function(){this._attributesData=null,delete this._attributesData,this._sceneJson=null,delete this._sceneJson,this._modelBin=null,delete this._modelBin,this._nodesInfo=null,delete this._nodesInfo,this._buffersNodes=null,delete this._buffersNodes,this._verticesBinary=null,delete this._verticesBinary,this._indicesBinary=null,delete this._indicesBinary,this._model=null,delete this._model};e.prototype._initialize=function(){if(null===this._nodesInfo){for(var e=this._modelJson["model.bin"].nodes,t=this._modelJson.buffers.length,r=0,n=0;n<t;n++)r+=this._modelJson.buffers[n].byteLength,this._meshes+=this._modelJson.buffers[n].meshes;if(r>1024*i.Environment.gpuMemory*1024)throw new Error("No enough GPU memory to load this model: "+r);this._nodesInfo=new Int32Array(9*e),this._buffersNodes=new Array(t);for(n=0;n<t;n++)this._buffersNodes[n]=[];for(n=0;n<e;n++){var a=new Int32Array(this._nodesInfo.buffer,9*n*4,9),o=this._modelBin.readNodeData(n);a[0]=n,a[1]=o[1],a[2]=65535&o[0],a[2]|=2147483648,a[2]|=o[2]>>30&1?1073741824:0,a[2]|=(o[2]>>25&15)<<24,a[3]=-1;var s=this._modelBin.readMesh(a[1]);a[4]=s[2],a[5]=s[4],a[8]=65535&s[0];var l=s[0]>>16;this._buffersNodes[l].push(n)}n=0;for(var u=t;n<u;n++)this._groupNodesByMaterial(this._buffersNodes[n]);this._createMerges(new Uint32Array(t),1024*i.Environment.gpuMemory*1024);var c=0,d=0;for(n=0,u=this._buffersNodes.length;n<u;++n){for(var h,f,p=this._buffersNodes[n],m=0,v=0,_=p.length;v<_;v++){if(2147483648&(a=new Int32Array(this._nodesInfo.buffer,4*p[v]*9,9))[2])if(a[3]>=0){var g=this._attributesData[a[8]>>8&255];m=(m+=a[4]+a[5]-a[7]+a[4]/g.values[0].stride)+3&-4}else m=(m+=a[7])+3&-4}c<(h=m+this._modelJson.buffers[n].byteLength)&&(c=h),d<(f=m+this._modelJson.buffers[n].byteLength)&&(d=f)}this._verticesBinary=new ArrayBuffer(c),this._indicesBinary=new ArrayBuffer(d)}},e.prototype._groupNodesByMaterial=function(e){if(!(e.length<=1)){var t=this;e.sort(function(e,r){var n=9*e,i=9*r,a=65535&t._nodesInfo[n+2],o=65535&t._nodesInfo[i+2];return a!==o?a-o:(t._nodesInfo[n+8]>>8&255)-(t._nodesInfo[i+8]>>8&255)});for(var r=9*e[0],n=65535&this._nodesInfo[r+2],i=this._nodesInfo[r+8]>>8&255,a=[e[0]],o=1,s=e.length;o<s;++o){r=9*e[o];var l=65535&this._nodesInfo[r+2],u=this._nodesInfo[r+8]>>8&255;(255&this._nodesInfo[r+8])>2||l!==n||u!==i?(this._splitNodesGroup(a),a=[e[o]],n=l,i=u):a.push(e[o])}this._splitNodesGroup(a)}},e.prototype._splitNodesGroup=function(e){if(e.length>1){var t=e[0],r=t,n=t,i=9*t;this._nodesInfo[i+2]|=2147483648;for(var a=this._nodesInfo[i+4],o=this._nodesInfo[i+8]>>8&255,s=this._attributesData[o].values[0].stride*this._maxVertexNumber,l=1,u=e.length;l<u;++l){t=e[l];var c=this._nodesInfo[9*t+4];a+c>s?(this._nodesInfo[9*t+2]|=2147483648,n=t,a=c):(this._nodesInfo[9*t+2]&=2147483647,this._nodesInfo[9*r+3]=t,this._nodesInfo[9*n+6]++,a+=c),r=t}}},e.prototype._computeMergeInfo=function(e,t){var r=9*e,n=this._nodesInfo[r+8]>>8&255,i=255&this._nodesInfo[r+8],a=this._attributesData[n].values[0].stride,o=0,s=this._nodesInfo[r+4],l=this._nodesInfo[r+5],u=this._nodesInfo[r+1];t[u]||(t[u]=1,o+=s+l);for(var c=s,d=l/i,h=this._nodesInfo[r+3];h>=0;)r=9*h,s=this._nodesInfo[r+4],l=this._nodesInfo[r+5],i=255&this._nodesInfo[r+8],t[u=this._nodesInfo[r+1]]||(t[u]=1,o+=s+l),c+=s,d+=l/i,h=this._nodesInfo[r+3];var f=c/a;i=1,f>65536?i=4:f>256&&(i=2);r=9*e;this._nodesInfo[r+4]=c,this._nodesInfo[r+5]=d*i,this._nodesInfo[r+7]=o,this._nodesInfo[r+8]=4294967040&this._nodesInfo[r+8]|i},e.prototype._deleteMergeInfo=function(e,t){var r=e,n=new Int32Array(this._nodesInfo.buffer,9*r*4,9),i=9*r,a=this._modelBin.readMesh(n[1]);for(this._nodesInfo[i+4]=a[2],this._nodesInfo[i+5]=a[4],this._nodesInfo[i+6]=0,this._nodesInfo[i+8]=a[0];r>=0;){i=9*r;var o=this._nodesInfo[i+3];this._nodesInfo[i+2]|=2147483648,this._nodesInfo[i+3]=-1,r=o}},e.prototype._createMerges=function(e,t){for(var r=[],n=0,i=1073741824,a=new Uint8Array(this._meshes),o=new Uint8Array(this._meshes),s=0,l=this._buffersNodes.length;s<l;s++)for(var u=this._buffersNodes[s],c=e[s],d=u.length;c<d;++c){var h=u[c],f=9*h;if(2147483648&this._nodesInfo[f+2]){if(this._nodesInfo[f+3]>=0){this._computeMergeInfo(h,a);var p=this._nodesInfo[f+4]+this._nodesInfo[f+5]-this._nodesInfo[f+7],m=this._nodesInfo[f+4]+this._nodesInfo[f+5];p<13e4?t-=m:(i>p&&(i=p),t-=this._nodesInfo[f+7],r.push(h),n+=p)}else{const e=this._nodesInfo[f+1];o[e]||(a[e]?this._nodesInfo[f+7]=this._nodesInfo[f+4]+this._nodesInfo[f+5]:a[e]=1,t-=this._nodesInfo[f+4]+this._nodesInfo[f+5],o[e]=1)}if(t<0)throw console.log("No enough GPU memory to load this model."),new Error("No enough GPU memory to load this model.")}}if(t<n){var v=r.length,_=Math.ceil(t/i),g=new Uint32Array((v+1)*(_+1));for(s=1;s<=v;s++){var y=Math.floor((this._nodesInfo[9*r[s-1]+4]+this._nodesInfo[9*r[s-1]+5]-this._nodesInfo[9*r[s-1]+7])/i),b=this._nodesInfo[9*r[s-1]+6];for(c=1;c<=_;c++){var x=s*(_+1)+c,w=(s-1)*(_+1)+c;if(c<y)g[x]=g[w];else{var E=(s-1)*(_+1)+c-y;g[w]>g[E]+b?g[x]=g[w]:g[x]=g[E]+b}}}for(var M=new Uint8Array(r.length),A=v,T=_;A>0;){y=Math.floor((this._nodesInfo[9*r[A-1]+4]+this._nodesInfo[9*r[A-1]+5]-this._nodesInfo[9*r[A-1]+7])/i),b=this._nodesInfo[9*r[A-1]+6];g[A*(_+1)+T]===g[(A-1)*(_+1)+T]?A--:T-y>=0&&g[A*(_+1)+T]===g[(A-1)*(_+1)+T-y]+b&&(M[A-1]=1,A--,T-=y)}var S=new Uint8Array(this._meshes);for(s=0,l=M.length;s<l;s++)M[s]||this._deleteMergeInfo(r[s],S)}},e.prototype.load=function(e,t,r){var i=this._buffersNodes[e],o=this._resourceManager.getBuffer(this._model.name+"-vmesh"+e+".bin"),s=this._resourceManager.getBuffer(this._model.name+"-imesh"+e+".bin");o.create(a.gl.ARRAY_BUFFER,new Uint8Array(1)),s.create(a.gl.ELEMENT_ARRAY_BUFFER,new Uint8Array(1)),this._verticesOffset=0,this._indicesOffset=0;for(var l=0,u=i.length;l<u;++l){var c=i[l],d=new Int32Array(this._nodesInfo.buffer,4*c*9,9);if(2147483648&d[2]){var p=null,m=null;if(d[3]<0){var v=this._modelBin.readMesh(d[1]);if(this._resourceManager.hasMesh(d[1]>=0?this._model.name+"/"+d[1].toString():this._model.name+"/"+-d[0].toString()))r(d,o,s,null,null,this._nodesInfo);else{var _=this._attributesData[d[8]>>8&255],g=(v[0],v[2]/4),y=v[2]/_.values[0].stride;n.Config.compressNormals&&_.hasNormal&&(g-=v[2]/_.values[0].stride),p=new Float32Array(this._verticesBinary,this._verticesOffset,g),m=new Uint8Array(this._indicesBinary,this._indicesOffset,v[4]),f(p,new Float32Array(t,v[1],v[2]/4),_,n.Config.compressNormals),h(m,new Uint8Array(t,v[3],v[4]),v[4],0),d[4]=y,d[7]=v[4]/(255&v[0]),this._verticesOffset+=4*g,this._indicesOffset+=v[4],this._verticesOffset=this._verticesOffset+3&-4,this._indicesOffset=this._indicesOffset+3&-4,r(d,o,s,p,m,this._nodesInfo)}}else{var b=this._verticesOffset,x=this._indicesOffset,w={verticesBinary:this._verticesBinary,indicesBinary:this._indicesBinary,verticesOffset:this._verticesOffset,indicesOffset:this._indicesOffset};d=this._populateMergedNode(d,t,w),this._verticesOffset=w.verticesOffset,this._indicesOffset=w.indicesOffset;var E=this._verticesOffset-b,M=this._indicesOffset-x;this._verticesOffset=this._verticesOffset+3&-4,this._indicesOffset=this._indicesOffset+3&-4,r(d,o,s,p=new Uint8Array(this._verticesBinary,b,E),m=new Uint8Array(this._indicesBinary,x,M),this._nodesInfo)}}}o.update(new Uint8Array(this._verticesBinary,0,this._verticesOffset)),s.update(new Uint8Array(this._indicesBinary,0,this._indicesOffset))};var t=new Float32Array([0,0,0]),r=new Float32Array([0,0,0]),o=new Float32Array(3),s=new Float32Array(3);function l(e){return Math.abs(e[1])<1e-6&&Math.abs(e[2])<1e-6&&Math.abs(e[3])<1e-6&&Math.abs(e[5])<1e-6&&Math.abs(e[6])<1e-6&&Math.abs(e[7])<1e-6}function u(e,t,r,n,i){var a,o=t.byteLength/r.values[0].stride|0,s=(0|r.values[0].stride)>>2|0,l=(0|s)*(0|o)|0;if(4===r.primitive)if(i){var u=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),c=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);for(a=0;a<o;a++){var d=a*s;e[h=a*(s-1)]=t[d]+n[0],e[h+1]=t[d+1]+n[1],e[h+2]=t[d+2]+n[2],d<<=2,u[h<<=2]=c[d+12],u[h+4]=c[d+13],u[h+8]=c[d+14]}if(r.values.length>2)if(4===r.values[2].index)for(a=0;a<o;a++){d=6*a+4;e[h=5*a+3]=t[d],e[h+1]=t[d+1]}else for(a=0;a<o;a++){var h;d=5*a+4;e[h=4*a+3]=t[d]}}else{for(a=0;a<l;a+=s)e[a]=t[a]+n[0],e[a+1]=t[a+1]+n[1],e[a+2]=t[a+2]+n[2],e[a+3]=t[a+3];if(r.values.length>2)if(4===r.values[2].index)for(a=4;a<l;a+=s)e[a]=t[a],e[a+1]=t[a+1];else for(a=4;a<l;a+=s)e[a]=t[a]}else for(a=0;a<l;a+=3)e[a]=t[a]+n[0],e[a+1]=t[a+1]+n[1],e[a+2]=t[a+2]+n[2]}function c(e,t,r,n,i,a){var l,u=t.byteLength/r.values[0].stride|0,c=(0|r.values[0].stride)>>2|0,d=(0|c)*(0|u)|0;if(4===r.primitive){var h=new Int8Array(e.buffer,e.byteOffset,e.byteLength),f=new Int8Array(t.buffer,t.byteOffset,t.byteLength);if(n[0]===n[1]&&n[1]===n[2])if(a)for(l=0;l<u;l++){var p=l*c;e[w=l*(c-1)]=t[p]*n[0]+i[0],e[w+1]=t[p+1]*n[1]+i[1],e[w+2]=t[p+2]*n[2]+i[2],p<<=2,h[w<<=2]=f[p+12],h[w+4]=f[p+13],h[w+8]=f[p+14]}else for(l=0;l<d;l+=c)e[l]=t[l]*n[0]+i[0],e[l+1]=t[l+1]*n[1]+i[1],e[l+2]=t[l+2]*n[2]+i[2],e[l+3]=t[l+3];else{var m=o,v=s;if(v[0]=1/n[0],v[1]=1/n[1],v[2]=1/n[2],a)for(l=0;l<u;l++){p=l*c;e[w=l*(c-1)]=t[p]*n[0]+i[0],e[w+1]=t[p+1]*n[1]+i[1],e[w+2]=t[p+2]*n[2]+i[2],w<<=2;var _=f[(p<<=2)+12],g=f[p+13],y=f[p+14];m[0]=_*v[0],m[1]=g*v[1],m[2]=y*v[2];var b=127/Math.sqrt(m[0]*m[0]+m[1]*m[1]+m[2]*m[2]);x=l<<2,h[w]=m[0]*b,h[w+4]=m[1]*b,h[w+8]=m[2]*b}else for(l=0;l<d;l+=c){e[l]=t[l]*n[0]+i[0],e[l+1]=t[l+1]*n[1]+i[1],e[l+2]=t[l+2]*n[2]+i[2];var x=12+(l<<2);_=f[x],g=f[x+1],y=f[x+2];m[0]=_*v[0],m[1]=g*v[1],m[2]=y*v[2];b=127/Math.sqrt(m[0]*m[0]+m[1]*m[1]+m[2]*m[2]);h[x]=m[0]*b,h[x+1]=m[1]*b,h[x+2]=m[2]*b}}if(r.values.length>2)if(a)if(4===r.values[2].index)for(l=0;l<u;l++){p=6*l+4;e[w=5*l+3]=t[p],e[w+1]=t[p+1]}else for(l=0;l<u;l++){var w;p=5*l+4;e[w=4*l+3]=t[p]}else if(4===r.values[2].index)for(l=4;l<d;l+=c)e[l]=t[l],e[l+1]=t[l+1];else for(l=4;l<d;l+=c)e[l]=t[l]}else for(l=0;l<d;l+=3)e[l]=t[l]*n[0]+i[0],e[l+1]=t[l+1]*n[1]+i[1],e[l+2]=t[l+2]*n[2]+i[2]}function d(e,t,r,n,i){var a,s=t.byteLength/r.values[0].stride|0,l=(0|r.values[0].stride)>>2|0,u=(0|l)*(0|s)|0,c=n[0],d=n[1],h=n[2],f=n[3],p=n[4],m=n[5],v=n[6],_=n[7],g=n[8],y=n[9],b=n[10],x=n[11];if(4===r.primitive){var w=o,E=new Int8Array(t.buffer,t.byteOffset,4*u),M=new Int8Array(e.buffer,e.byteOffset,e.byteLength);if(i){for(a=0;a<s;a++){var A=a*(l-1),T=c*(F=t[O=a*l])+f*(C=t[O+1])+v*(B=t[O+2])+y,S=d*F+p*C+_*B+b,k=h*F+m*C+g*B+x;e[A]=T,e[A+1]=S,e[A+2]=k,A<<=2;var D=E[(O<<=2)+12],P=E[O+13],I=E[O+14];w[0]=c*D+f*P+v*I,w[1]=d*D+p*P+_*I,w[2]=h*D+m*P+g*I;var N=127/Math.sqrt(w[0]*w[0]+w[1]*w[1]+w[2]*w[2]);M[A]=w[0]*N,M[A+4]=w[1]*N,M[A+8]=w[2]*N}if(r.values.length>2)if(4===r.values[2].index)for(a=0;a<s;a++){var O=6*a+4;e[A=5*a+3]=t[O],e[A+1]=t[O+1]}else for(a=0;a<s;a++){O=5*a+4;e[A=4*a+3]=t[O]}}else{for(a=0;a<u;a+=l){T=c*(F=t[a])+f*(C=t[a+1])+v*(B=t[a+2])+y,S=d*F+p*C+_*B+b,k=h*F+m*C+g*B+x;e[a]=T,e[a+1]=S,e[a+2]=k;var R=12+(a<<2);D=E[R],P=E[R+1],I=E[R+2];w[0]=c*D+f*P+v*I,w[1]=d*D+p*P+_*I,w[2]=h*D+m*P+g*I;N=127/Math.sqrt(w[0]*w[0]+w[1]*w[1]+w[2]*w[2]);M[R]=w[0]*N,M[R+1]=w[1]*N,M[R+2]=w[2]*N}if(r.values.length>2)if(4===r.values[2].index)for(a=4;a<u;a+=l)e[a]=t[a],e[a+1]=t[a+1];else for(a=4;a<u;a+=l)e[a]=t[a]}}else for(a=0;a<u;a+=3){var F,C,B;T=c*(F=t[a])+f*(C=t[a+1])+v*(B=t[a+2])+y,S=d*F+p*C+_*B+b,k=h*F+m*C+g*B+x;e[a]=T,e[a+1]=S,e[a+2]=k}}function h(e,t,r,n){for(var i=0;i<r;i++)e[i]=t[i]+(0|n)}function f(e,t,r,n){var i=t.byteLength/r.values[0].stride|0,a=(0|r.values[0].stride)>>2|0,o=(0|a)*(0|i)|0;if(4===r.primitive&&n){for(var s=new Int8Array(t.buffer,t.byteOffset,t.byteLength),l=new Int8Array(e.buffer,e.byteOffset,e.byteLength),u=0,c=0;c<o;c+=a,u+=a-1){e[u]=t[c],e[u+1]=t[c+1],e[u+2]=t[c+2];var d=u<<2,h=c<<2;l[d]=s[h+12],l[d+4]=s[h+13],l[d+8]=s[h+14]}if(r.values.length>2)if(4===r.values[2].index)for(u=3,c=4;c<o;u+=5,c+=6)e[u]=t[c],e[u+1]=t[c+1];else for(u=3,c=4;c<o;u+=4,c+=5)e[u]=t[c]}else e.set(t,0,o)}return e.prototype._populateMergedNode=function(e,i,a){for(var o=this._attributesData[e[8]>>8&255],s=a.indicesOffset,p=e[8],m=this._modelBin.readNodeBBox(e[0]),v=255&e[8],_=[],g=e[0];g>=0;)_.push(g),g=this._nodesInfo[9*g+3];var y=this;_.sort(function(e,t){return(y._nodesInfo[9*e+2]>>24&15)-(y._nodesInfo[9*t+2]>>24&15)});for(var b,x,w,E=0,M=0,A=_.length;M<A;M++){var T=new Int32Array(this._nodesInfo.buffer,36*_[M],9),S=this._modelBin.readNodeTransform(T[0]),k=this._modelBin.readNodeBBox(T[0]),D=this._modelBin.readMesh(T[1]),P=new Float32Array(i,D[1],D[2]/4),I=D[2]/4;n.Config.compressNormals&&o.hasNormal&&(I-=D[2]/o.values[0].stride);var N=new Float32Array(a.verticesBinary,a.verticesOffset,I);0==(1073741824&T[2])?(w=S,Math.abs(w[0]-1)<1e-6&&Math.abs(w[1])<1e-6&&Math.abs(w[2])<1e-6&&Math.abs(w[3])<1e-6&&Math.abs(w[4]-1)<1e-6&&Math.abs(w[5])<1e-6&&Math.abs(w[6])<1e-6&&Math.abs(w[7])<1e-6&&Math.abs(w[8]-1)<1e-6?(t[0]=S[9],t[1]=S[10],t[2]=S[11],u(N,P,o,t,n.Config.compressNormals)):l(S)?(t[0]=S[9],t[1]=S[10],t[2]=S[11],r[0]=S[0],r[1]=S[4],r[2]=S[8],c(N,P,o,r,t,n.Config.compressNormals)):d(N,P,o,S,n.Config.compressNormals)):f(N,P,o,n.Config.compressNormals),a.verticesOffset+=4*I,x=k,(b=m)[0]=Math.min(b[0],x[0]),b[1]=Math.min(b[1],x[1]),b[2]=Math.min(b[2],x[2]),b[3]=Math.max(b[3],x[3]),b[4]=Math.max(b[4],x[4]),b[5]=Math.max(b[5],x[5]);var O=null,R=null,F=0;switch(255&D[0]){case 4:F=D[4]/4,R=new Uint32Array(i,D[3],F);break;case 2:F=D[4]/2,R=new Uint16Array(i,D[3],F);break;default:F=D[4],R=new Uint8Array(i,D[3],F)}switch(v){case 4:O=new Uint32Array(a.indicesBinary,a.indicesOffset,F);break;case 2:O=new Uint16Array(a.indicesBinary,a.indicesOffset,F);break;default:O=new Uint8Array(a.indicesBinary,a.indicesOffset,F)}h(O,R,F,E),T[6]=a.indicesOffset-s,T[7]=F,T[4]=D[2]/o.values[0].stride,E+=T[4],a.indicesOffset+=F*v}new Uint8Array(a.verticesBinary,a.verticesOffset,E).fill(0),a.verticesOffset+=E;for(M=0,A=_.length-1;M<A;M++){var C=_[M];this._nodesInfo[9*C+3]=_[M+1]}C=_[M];this._nodesInfo[9*C+3]=-1,e=new Int32Array(this._nodesInfo.buffer,9*_[0]*4,9);var B=this._modelBin.readNodeBBox(e[0]);return B[0]=m[0],B[1]=m[1],B[2]=m[2],B[3]=m[3],B[4]=m[4],B[5]=m[5],e[8]=p,e[1]=-1,e[2]|=1073741824,e},e}()},"./03scene/model/ModelLoaderTree.ts":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/m3d_math.js"),i=r("./03scene/model/Element.ts"),a=new Float32Array(6),o=function(){function e(e){this._model=e}return e.prototype.destroy=function(){this._model=null,delete this._model},e.prototype.load=function(e,t){var r=this,n=t.getSingleFileProgress();return e["uuid.bin"]?(e["modelgraph.bin"].onProgress(function(e){n(e.loaded)}),e["modelgraph.bin"].downloadFile().then(function(n){var i=n.data,a=t.getSingleFileProgress();return e["uuid.bin"].onProgress(function(e){a(e.loaded)}),e["uuid.bin"].downloadFile().then(function(e){r._parse(i,e.data)})})):(e["modelgraph.bin"].onProgress(function(e){n(e.loaded)}),e["modelgraph.bin"].downloadFile().then(function(e){r._parse(e.data,null)}))},e.prototype._parse=function(e,t){var r=this._model.tree,n=new i.default(i.ElementType.ROOT,-1,this._model);r.root=n;var a,o,s,l=e.byteLength,u=0,c=[];c.push(n);for(var d=0;u<e.byteLength;){var h=new Uint8Array(e,u,9);for(a=h[3]<<24|h[2]<<16|h[1]<<8|h[0],o=h[7]<<24|h[6]<<16|h[5]<<8|h[4],s=h[8];c.length>0&&c[c.length-1].id!==o;)c.pop();if(0===c.length)return console.log("father of "+a+" is wrong"),Promise.reject("error");var f=c[c.length-1];if(s===i.ElementType.NODE){var p=r.nodes[a];p.father=f,f.children.push(p)}else{s===i.ElementType.LINK&&(d=a);var m=this._model.name+"+"+d+"/"+a,v=new i.default(s,a,this._model);if(s!==i.ElementType.ELEMENT&&s!==i.ElementType.ROOM&&s!==i.ElementType.AREA||(r.elements[m]=v,r.elementsNum++),t&&s===i.ElementType.ELEMENT){var _=new Uint8Array(t,u/9*16,16);v.guid+=_[3]<16?"0"+_[3].toString(16):_[3].toString(16),v.guid+=_[2]<16?"0"+_[2].toString(16):_[2].toString(16),v.guid+=_[1]<16?"0"+_[1].toString(16):_[1].toString(16),v.guid+=_[0]<16?"0"+_[0].toString(16):_[0].toString(16),v.guid+="-",v.guid+=_[5]<16?"0"+_[5].toString(16):_[5].toString(16),v.guid+=_[4]<16?"0"+_[4].toString(16):_[4].toString(16),v.guid+="-",v.guid+=_[7]<16?"0"+_[7].toString(16):_[7].toString(16),v.guid+=_[6]<16?"0"+_[6].toString(16):_[6].toString(16),v.guid+="-",v.guid+=_[8]<16?"0"+_[8].toString(16):_[8].toString(16),v.guid+=_[9]<16?"0"+_[9].toString(16):_[9].toString(16),v.guid+="-",v.guid+=_[10]<16?"0"+_[10].toString(16):_[10].toString(16),v.guid+=_[11]<16?"0"+_[11].toString(16):_[11].toString(16),v.guid+=_[12]<16?"0"+_[12].toString(16):_[12].toString(16),v.guid+=_[13]<16?"0"+_[13].toString(16):_[13].toString(16),v.guid+=_[14]<16?"0"+_[14].toString(16):_[14].toString(16),v.guid+=_[15]<16?"0"+_[15].toString(16):_[15].toString(16),r.guidElementMap[v.guid]=m}v.father=f,f.children.push(v),c.push(v)}u+=9}var g=0;for(l=n.children.length;g<l;g++)this._computeBBox(n.children[g])},e.prototype._printTree=function(e,t){for(var r="",n=0;n<e;n++)r+=" ";if(t.hasOwnProperty("id"))r+="n id="+t.id,console.log(r);else{r+=["root","i","g","e","n","l"][t.type]+" name="+t.name,console.log(r);n=0;for(var i=t.children.length;n<i;n++)this._printTree(e+1,t.children[n])}},e.prototype._computeBBox=function(e){for(var t=0,r=e.children.length;t<r;t++){var i=e.children[t],o=void 0;i.hasOwnProperty("region")?(this._model.tree.getNodeBBox(i.id,a),o=a):(this._computeBBox(i),o=i.bbox),n.default.aabb.union(e.bbox,e.bbox,o)}},e}();t.default=o},"./03scene/model/ModelTree.ts":function(e,t,r){"use strict";r.r(t);var n=function(){function e(e){this.nodes=[],this.nodeBBoxes=null,this.root=null,this.elements={},this.elementsNum=0,this.model=e,this.guidElementMap={}}return e.prototype.destroy=function(){this.nodes=null,delete this.nodes,this.elements=null,delete this.elements,this.nodeBBoxes=null,delete this.nodeBBoxes,this.root=null,delete this.root,this.guidElementMap=null,delete this.guidElementMap},e.prototype.createNodes=function(e){this.nodes=new Array(e),this.nodeBBoxes=new Float32Array(6*e)},e.prototype.getNodeBBox=function(e,t){var r=6*e;t[0]=this.nodeBBoxes[r],t[1]=this.nodeBBoxes[r+1],t[2]=this.nodeBBoxes[r+2],t[3]=this.nodeBBoxes[r+3],t[4]=this.nodeBBoxes[r+4],t[5]=this.nodeBBoxes[r+5]},e.prototype.getElementPaths=function(e){var t=[];for(var r in e){var n=this.getElementPath(e[r]);n&&t.push(n)}return t},e.prototype.getElementPath=function(e){var t={elementId:0,docId:0,modelId:""};t.elementId=e.id;var r=e.getDocument();return r?(t.docId=r.id,t.modelId=this.model.name,t):(console.warn("element '"+t.elementId+"' doesn't belong to any doc"),null)},e.prototype.getElementPathString=function(e){var t=e.getDocument();return t?this.model.name+"+"+t.id+"/"+e.id:(console.warn("element '"+e.id+"' doesn't belong to any doc"),"")},e}();t.default=n},"./03scene/model/Node.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"NodeType",function(){return n});var n,i=r("./03scene/model/Element.ts");!function(e){e[e.STRUCTURE=0]="STRUCTURE",e[e.STRUCTURE_INTERIOR=4]="STRUCTURE_INTERIOR",e[e.INTERIOR=8]="INTERIOR",e[e.MEP=12]="MEP",e[e.LANDSCAPE=15]="LANDSCAPE"}(n||(n={}));var a=function(){function e(e){this.id=e,this.region=n.STRUCTURE,this.father=null,this.indicesOffset=0,this.indicesCount=0,this.verticesCount=0,this.drawable=null,this.visible=!0,this.platteIndex=127}return e.prototype.getInstance=function(){for(var e=this.father;e.etype!==i.ElementType.INSTANCE&&null!==(e=e.father););return e},e.prototype.getGroup=function(){for(var e=this.father;e.etype!==i.ElementType.GROUP&&null!==(e=e.father););return e},e.prototype.getElement=function(){for(var e=this.father;e.etype!==i.ElementType.ELEMENT&&e.etype!==i.ElementType.ROOM&&e.etype!==i.ElementType.AREA&&null!==(e=e.father););return e},e.prototype.getComponent=function(){for(var e=this.father;e.etype!==i.ElementType.GROUP&&e.etype!==i.ElementType.INSTANCE&&null!==(e=e.father););return e},e}();t.default=a},"./03scene/model/m3d_load_misc.js":function(e,t,r){"use strict";r.r(t),t.default=function(){var e={};const t=new URL(window.location.href).searchParams.get("filePath");return e.OpenImage=function(e,t){return{downloadFile:function(){var r=e;return new t(function(e,t){var n=new XMLHttpRequest;n.onload=function(){var t=URL.createObjectURL(this.response),r=new Image;r.setAttribute("crossorigin","anonymous"),r.onload=function(){e(r),URL.revokeObjectURL(t)},r.src=t},n.open("GET",r,!0),n.responseType="blob",n.send()})}}},e.OpenFile1=function(e,r,n){return{downloadFile:function(i){return new n(function(n,a){let o=new XMLHttpRequest;o.open("GET",(t||"")+e,!0),o||a("CORS not supported"),o.responseType=r,o.onerror=(e=>{a(e)}),o.setRequestHeader("Accept","*/*"),o.onload=(()=>{200===o.status||206===o.status?n({data:o.response}):a("fail to retrieve "+e+" http status error:"+o.status)}),o.onprogress=(e=>{i&&i(e)}),o.send()})},onProgress:function(){}}},e.ProgressTracker=function(e){this._onProgress=e,this._currentDownload=0,this.totalDownload=0},e.ProgressTracker.prototype.onProgress=function(e){this._currentDownload+=e,this._onProgress(Math.max(Math.min(this._currentDownload/this.totalDownload,1),0))},e.ProgressTracker.prototype.getSingleFileProgress=function(){var e=0,t=this;return function(r){var n=r-e;e=r,t.onProgress(n)}},e.MakeIndividualOnProgress=function(e){var t=0;return function(r){var n=r-t;t=r,e.onprogress(n)}},e}()},"./03scene/pawn/Pawn.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./00utility/m3d_utils.ts"),a=r("./00utility/m3d_math.js"),o=r("./02resource/m3d_shader_library.js"),s=r("./02resource/Texture.ts"),l=r("./03scene/drawables/Drawable.ts"),u=r("./03scene/materials/MaterialAdhoc.ts"),c=r("./03scene/pawn/PawnLoader.ts"),d=r("./03scene/Entity.ts"),h=r("./03scene/GLTFLoader.ts"),f=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),p=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},m=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},v=function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return f(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t.prototype.load=function(e){return p(this,void 0,void 0,function(){var t,r=this;return m(this,function(n){return this.drawables.length>0?(console.error("Can't re-initialize pawn."),[2]):[2,(t=new c.default(this,e,this._resourceManager,this._materialManager)).load().then(function(){t.drawables.forEach(function(e){r.addDrawable(e)}),t.destroy()}).catch(function(e){console.warn(e)})]})})},t.prototype.createSolidCube=function(e){void 0===e&&(e=[.5,.5,.5]);var t=this._resourceManager.getShader(this.name,["MODEL_TRANSFORM"]);t.ready||t.createFromShaderSource(o.default.solid,["MODEL_TRANSFORM"]);var r=this._materialManager.createMaterialAdhoc("pawn-material-"+this.name);r.attachShader(t,this._resourceManager),r.setDiffuse(e),r.setTransparent(1);var n=this._resourceManager.getMesh(this.name);n.createSolidCube(),this.addDrawable(new l.default(n,t,r,null,new Float32Array([-1,-1,-1,1,1,1]))),(t=this._resourceManager.getShader(this.name,["MODEL_TRANSFORM"])).ready||t.createFromShaderSource(o.default.plain,["MODEL_TRANSFORM"]),(r=this._materialManager.createMaterialAdhoc(this.name+"_line")).attachShader(t,this._resourceManager),r.setDiffuse([0,0,0]),r.setTransparent(1),(n=this._resourceManager.getMesh("pawn-material-"+this.name+"_line")).createWiredCube();var i=new Float32Array([-1,-1,-1,1,1,1]);a.default.aabb.scale(i,i,1.01);var s=new l.default(n,t,r,null,i);s.transform.setScaling(1.01,1.01,1.01),this.addDrawable(s),this.bbox?a.default.aabb.union(this.bbox,this.bbox,i):this.bbox=i},t.prototype.createTexturedQuad=function(e){i.default.isArray(e)||(e=[e]);var t=["MODEL_TRANSFORM"];e.length>1&&t.push("SECOND_TEXTURE");var r=this._resourceManager.getShader(this.name,t);r.ready||r.createFromShaderSource(o.default.plain_texture,t);for(var n=Array(e.length),c=0;c<e.length;c++){var d=e[c];if(d instanceof s.default)n[c]=e[c];else{n[c]=this._resourceManager.getTexture(this.name+"_"+c);var h=this._resourceManager.gl,f=d.src.split(".");"png"!==f[f.length-1]&&"svg"!==f[f.length-1]?n[c].createFromImage(d,h.RGB,h.UNSIGNED_BYTE,h.LINEAR,h.CLAMP_TO_EDGE):n[c].createFromImage(d,h.RGBA,h.UNSIGNED_BYTE,h.LINEAR,h.CLAMP_TO_EDGE)}}var p=new u.default("pawn-material-"+this.name,this._resourceManager);p.attachShader(r,this._resourceManager),p.setDiffuse([1,1,1]),p.setTransparent(1),n[0]&&(p.setDiffuseTexture(n[0]),n[0].hasAlpha()&&(p.transparent=!0)),n[1]&&(p.setSecondDiffuseTexture(n[1]),n[1].hasAlpha()&&(p.transparent=!0));var m=this._resourceManager.getMesh(this.name);m.createQuad(!0,!0);var v=new Float32Array([-1,-1,0,1,1,0]);this.addDrawable(new l.default(m,r,p,null,v)),this.bbox?a.default.aabb.union(this.bbox,this.bbox,v):this.bbox=v},t.prototype.loadGltfModel=function(e){var t=new h.default(this,this._resourceManager,this._materialManager);return new Promise(function(r,n){t.load(e,function(){r()})})},t.prototype.getSkeletons=function(){return this.skeletons},t.prototype.setDiffuseColor=function(e){this.drawables.forEach(function(t){t.material.setDiffuse(e)})},t.prototype.setOpacity=function(e){this.drawables.forEach(function(t){t.material.setTransparent(e)})},t.prototype.clone=function(e){var r=new t(e,this._resourceManager,this._materialManager);return this.drawables.forEach(function(e){r.addDrawable(e.clone())}),r.bbox=a.default.aabb.create(),a.default.aabb.copy(r.bbox,this.bbox),r.faces=this.faces,r.hasContours=this.hasContours,r},t}(d.default);t.default=v},"./03scene/pawn/PawnBillboard.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./00utility/m3d_math.js"),a=r("./02resource/m3d_shader_library.js"),o=r("./03scene/pawn/Pawn.ts"),s=r("./03scene/pawn/PawnLoader.ts"),l=r("./03scene/drawables/Billboard.ts"),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},d=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},h=function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return u(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t.prototype.setFaceCameraZ=function(e){this.drawables.forEach(function(t){t.transform.setFaceCameraZ(e)})},t.prototype.load=function(e){return c(this,void 0,void 0,function(){var t,r=this;return d(this,function(n){return this.drawables.length>0?(console.error("Can't re-initialize pawn."),[2]):[2,(t=new s.default(this,e,this._resourceManager,this._materialManager,!0)).load().then(function(){t.drawables.forEach(function(e){r.addDrawable(e)}),t.destroy()}).catch(function(e){console.warn(e)})]})})},t.prototype.createSolidQuad=function(e){void 0===e&&(e=[.5,.5,.5]);var t=this._resourceManager.getShader(this.name,["MODEL_TRANSFORM"]);t.ready||t.createFromShaderSource(a.default.plain,["MODEL_TRANSFORM"]);var r=this._materialManager.createMaterialAdhoc("pawn-billboard-material-"+this.name);r.attachShader(t,this._resourceManager),r.setDiffuse(e);var n=this._resourceManager.getMesh(this.name);n.createQuad(!0,!0,!0),this.addDrawable(new l.default(n,t,r,null,new Float32Array([-1,0,-1,1,0,1])));var o=new Float32Array([-1,0,-1,1,0,1]);i.default.aabb.scale(o,o,1.01),this.bbox?i.default.aabb.union(this.bbox,this.bbox,o):this.bbox=o},t.prototype.createTexturedQuad=function(e){var t=this._resourceManager.getShader(this.name,["MODEL_TRANSFORM"]);t.ready||t.createFromShaderSource(a.default.plain_texture,["MODEL_TRANSFORM"]);var r=this._resourceManager.getTexture(this.name),n=this._resourceManager.gl,o=e.src.split(".");"png"!==o[o.length-1]&&"svg"!==o[o.length-1]?r.createFromImage(e,n.RGB,n.UNSIGNED_BYTE,n.LINEAR,n.CLAMP_TO_EDGE):r.createFromImage(e,n.RGBA,n.UNSIGNED_BYTE,n.LINEAR,n.CLAMP_TO_EDGE);var s=this._materialManager.createMaterialAdhoc("pawn-billboard-material-"+this.name);s.attachShader(t,this._resourceManager),s.setDiffuseTexture(r),s.setDiffuse([1,1,1]),r.hasAlpha()&&(s.transparent=!0);var u=this._resourceManager.getMesh(this.name);u.createQuad(!0,!0,!0),this.addDrawable(new l.default(u,t,s,null,new Float32Array([-1,0,-1,1,0,1])));var c=new Float32Array([-1,0,-1,1,0,1]);i.default.aabb.scale(c,c,1.01),this.bbox?i.default.aabb.union(this.bbox,this.bbox,c):this.bbox=c},t}(o.default);t.default=h},"./03scene/pawn/PawnLoader.ts":function(e,t,r){"use strict";r.r(t);var n=r("./01wrapper/glenum.ts"),i=r("./00utility/Environment.ts"),a=r("./02resource/MeshAttributes.ts"),o=r("./03scene/drawables/Drawable.ts"),s=r("./03scene/drawables/Billboard.ts"),l=r("./03scene/model/ModelLoaderBin.ts"),u=r("./99api/utils/model/downloader.ts"),c=r("./02resource/m3d_shader_library.js"),d=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},h=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},f=new Float32Array(16);var p=function(){function e(e,t,r,n,i){void 0===i&&(i=!1),this._pawn=e,this._modelId=t,this._resourceManager=r,this._materialManager=n,this._billboard=i,this._sceneJson=null,this._modelJson=null,this._binLoader=null,this.drawables=[]}return e.prototype.destroy=function(){this._pawn=null,delete this._pawn,this._modelId=null,delete this._modelId,this._resourceManager=null,delete this._resourceManager,this._materialManager=null,delete this._materialManager,this._sceneJson=null,delete this._sceneJson,this._modelJson=null,delete this._modelJson,this._binLoader.destroy(),this._binLoader=null,delete this._binLoader,this.drawables=null,delete this.drawables},e.prototype.load=function(){return d(this,void 0,void 0,function(){var e=this;return h(this,function(t){return[2,Object(u.generatePromises)(this._modelId).then(function(t){return t["scene.json"].downloadFile().then(function(r){var n;if(n="string"==typeof r.data?JSON.parse(r.data):r.data,e._sceneJson=n,n.source){var i=e._sceneJson.source.split(".");switch(i[i.length-1]){case"skp":e._pawn.faces=2,e._pawn.hasContours=!0;break;case"rfa":case"rvt":e._pawn.faces=1,e._pawn.hasContours=!0;break;case"vgx":case"stl":case"max":e._pawn.faces=1;break;case"obj":case"3dm":case"nwd":e._pawn.faces=0;break;default:e._pawn.faces=1}}return e._load(t,n)})})]})})},e.prototype._load=function(e,t){return d(this,void 0,void 0,function(){var r=this;return h(this,function(n){return this._sceneJson=t,[2,e["model.json"].downloadFile().then(function(n){return r._modelJson=n.data,r._pawn.bbox=new Float32Array(r._modelJson["model.bin"].bbox),e["scene.bin"].downloadFile().then(function(n){var i=n.data;return e["model.bin"].downloadFile().then(function(n){var a=n.data;return r._binLoader=new l.default(t,i,r._modelJson,a),r._loadTextures(e).then(function(){return r._loadMeshes(e)})})})})]})})},e.prototype._loadTextures=function(e){return d(this,void 0,void 0,function(){var t,r,i,a,o,s,l,u=this;return h(this,function(c){if(0===this._sceneJson.textures.length)return[2,Promise.resolve("ok")];for(t=new Array(this._sceneJson.samplers.length),s=0,l=this._sceneJson.samplers.length;s<l;s++)t[s]={filter:n.gl.LINEAR_MIPMAP_LINEAR,wrap:n.gl.REPEAT},1===(r=this._binLoader.readSampler(s))[0]?t[s].filter=1===r[2]?n.gl.LINEAR_MIPMAP_LINEAR:n.gl.LINEAR:t[s].filter=1===r[2]?n.gl.NEAREST_MIPMAP_NEAREST:n.gl.NEAREST,t[s].wrap=1===r[1]?n.gl.REPEAT:n.gl.CLAMP_TO_EDGE;for(i={},Object.keys(e).forEach(function(t){var r=t.toLowerCase();i[r]=e[t]}),o=(a=function(e){var r=u._sceneJson.textures[e].name,a=r.toLowerCase();return i[a].downloadFile().then(function(i){var a=u._binLoader.readTexture(e),o=t[a[1]],s=u._resourceManager.getTexture(r),l=4===a[0]?n.gl.RGBA:n.gl.RGB;if(s.updateImage(i,l,n.gl.UNSIGNED_BYTE,o.filter,o.wrap),!s.ready)return Promise.reject("modelo3d loader errors at creating texture object '"+r+"'.")})})(0),s=1,l=this._sceneJson.textures.length;s<l;s++)o=function(e){return o.then(function(){return a(e)})}(s);return[2,o]})})},e.prototype._loadMeshes=function(e){return d(this,void 0,void 0,function(){var t,r,o,s,l,u,c,d,f,p,m,v,_,g,y,b,x,w,E,M,A,T,S,k,D,P,I,N,O,R,F,C,B,L=this;return h(this,function(h){for(t=new Array(this._sceneJson.attributes.length),r=[n.gl.POINTS,n.gl.LINES,n.gl.LINES,n.gl.LINES,n.gl.TRIANGLES],o=[n.gl.BYTE,n.gl.UNSIGNED_BYTE,n.gl.SHORT,n.gl.UNSIGNED_SHORT,n.gl.INT,n.gl.UNSIGNED_INT,0,n.gl.FLOAT,0],s=0,B=this._sceneJson.attributes.length;s<B;s++)t[s]=new a.default,this._sceneJson.attributes[s],l=this._binLoader.readAttribute(s),t[s].primitive=r[l[0]],u=l[1]>=0?o[l[1]]:null,c=l[2]>=0?o[l[2]]:null,d=l[3]>=0?o[l[3]]:null,t[s].builtin(n.gl.FLOAT,u,c,d);for(f=this._modelJson["model.bin"].nodes,p=this._modelJson.buffers.length,m=0,g=0;g<p;g++)m+=this._modelJson.buffers[g].byteLength;if(m>1024*i.Environment.gpuMemory*1024)throw new Error("No enough GPU memory to load this model: "+m);for(v=new Array(p),_=0;_<p;_++)v[_]=[];for(g=0;g<f;g++)D=this._binLoader.readNodeData(g),y=this._binLoader.readMesh(D[1]),b=y[0]>>16,v[b].push(g);for(x=0,w=0,E=0,B=v.length;E<B;++E){for(M=v[E],A=0,T=0,S=0,k=M.length;S<k;S++)D=this._binLoader.readNodeData(M[S]),P=this._binLoader.readMesh(D[1]),I=P[2],N=P[4],A+=I=I+3&-4,T+=N=N+3&-4;x<A&&(x=A),w<T&&(w=T)}for(O=new ArrayBuffer(x),R=new ArrayBuffer(w),F=this._loadMesh(0,e["mesh0.bin"],v,O,R,t),C=1,B=this._modelJson.buffers.length;C<B;C++)F=function(r){return F.then(function(){var n="mesh"+r.toString()+".bin";return L._loadMesh(r,e[n],v,O,R,t)})}(C);return[2,F]})})},e.prototype._loadMesh=function(e,t,r,i,a,o){var s=this;return t.downloadFile().then(function(t){var l=t.data,u=r[e],c=s._resourceManager.getBuffer(s._modelId+"vmesh"+e+".bin"),d=s._resourceManager.getBuffer(s._modelId+"imesh"+e+".bin"),h=!1;c.ready||d.ready||(c.create(n.gl.ARRAY_BUFFER,new Uint8Array(1)),d.create(n.gl.ELEMENT_ARRAY_BUFFER,new Uint8Array(1)),h=!0);for(var f=0,p=0,m=0,v=u.length;m<v;++m){var _=u[m],g=s._binLoader.readNodeData(_),y=s._binLoader.readMesh(g[1]),b=y[0]>>8&255,x=o[b],w=null;if(s._resourceManager.hasMesh(s._modelId+g[1]))w=s._createDrawable(_,g,y,x,c,d,null,null);else{var E=new Uint8Array(i,f,y[2]),M=new Uint8Array(a,p,y[4]),A=new Uint8Array(l,y[1],y[2]);E.set(A);var T=new Uint8Array(l,y[3],y[4]);M.set(T),f=(f+=y[2])+3&-4,p=(p+=y[4])+3&-4,w=s._createDrawable(_,g,y,x,c,d,E,M)}s.drawables.push(w)}h&&(c.update(new Uint8Array(i,0,f)),d.update(new Uint8Array(a,0,p)))})},e.prototype._createDrawable=function(e,t,r,n,i,a,l,u){var c,d=255&r[0],h=this._createShaderObject(t,n);if(h){var p=this._createMaterialObject(t,h,n);if(p){var m=this._createMeshObject(t[1],n,d,l,u,i,a);if(m){var v=null;0==(1073741824&t[2])&&(c=this._binLoader.readNodeTransform(e),f[0]=c[0],f[1]=c[1],f[2]=c[2],f[3]=0,f[4]=c[3],f[5]=c[4],f[6]=c[5],f[7]=0,f[8]=c[6],f[9]=c[7],f[10]=c[8],f[11]=0,f[12]=c[9],f[13]=c[10],f[14]=c[11],f[15]=1,v=f);var _=this._binLoader.readNodeBBox(e),g=void 0;return(g=this._billboard?new s.default(m,h,p,v,_):new o.default(m,h,p,v,_)).visible=!0,g}throw new Error("No enough GPU memory for new meshes.")}}},e.prototype._createMeshObject=function(e,t,r,i,a,o,s){var l=this._resourceManager.getMesh(this._modelId+e);if(!l.ready){for(var u=[n.gl.UNSIGNED_BYTE,n.gl.UNSIGNED_BYTE,n.gl.UNSIGNED_SHORT,n.gl.UNSIGNED_SHORT,n.gl.UNSIGNED_INT],c=t.clone(),d=0,h=t.values.length;d<h;d++)c.values[d].offset+=i.byteOffset;l.createShared(c.primitive,c,i,a,u[r],o,s)}return l},e.prototype._createMaterialObject=function(e,t,r){var i=this._sceneJson.materials[65535&e[0]];r.primitive===n.gl.LINES&&(i="mxLine-"+i);var a=this._materialManager.getMaterial(this._modelId+i);if(!a){var o=this._binLoader.readMaterial(65535&e[0]);(a=this._materialManager.createMaterialAdhoc(this._modelId+i)).attachShader(t);var s=[0,0,0];if(s[0]=o[0]/255,s[1]=o[1]/255,s[2]=o[2]/255,a.setDiffuse(s),a.setTransparent(o[3]/255),255!==o[4]){var l=o[5]<<8|o[4],u=this._modelId+this._sceneJson.textures[l].name,c=this._binLoader.readTexture(l);4===c[0]?1===c[2]?(a.hasMask=!0,a.transparent=!1):a.transparent=!0:a.transparent?a.transparent=!0:a.transparent=!1;var d=this._resourceManager.getTexture(u);a.setDiffuseTexture(d)}}return a},e.prototype._createShaderObject=function(e,t){var r=this._binLoader.readMaterial(65535&e[0]),i=255!==r[4],a="solid";t.primitive===n.gl.LINES?a="plain":t.hasColor?a="color":i&&(a="texture");var o=[];if(e[2]>>30&1&&!this._billboard||o.push("MODEL_TRANSFORM"),i){var s=r[5]<<8|r[4];this._binLoader.readTexture(s)[2]&&o.push("ALPHATEST")}var l=this._resourceManager.getShader(a,o);if(!l.ready){var u=c.default[a];if(l.createFromShaderSource(u,o),!l.ready)throw"modelo3d error at creating shader '"+a+"'!"}return l},e}();t.default=p},"./03scene/text/Text3D.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./00utility/m3d_math.js"),a=r("./02resource/m3d_shader_library.js"),o=r("./03scene/drawables/Drawable.ts"),s=r("./03scene/materials/MaterialText.ts"),l=r("./03scene/Entity.ts"),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=function(e){function t(t,r,n){var i=e.call(this,t,r,n)||this;return i._content="",i}return u(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t.prototype.setContent=function(e){if(e!==this._content){this._content=e;var t=this._resourceManager.getBitmapFont().getGlyphs(e);if(this.drawables[0]&&this.drawables[0].mesh.ready)this.drawables[0].mesh.destroy(),this.drawables[0].mesh=this._resourceManager.getMesh("text3d-"+e),this.drawables[0].mesh.ready||this.drawables[0].mesh.createTextGrid(t);else{var r=this._resourceManager.getMesh("text3d-"+e);r.ready||r.createTextGrid(t);var n=this._resourceManager.getShader("text3d-"+this.name,["MODEL_TRANSFORM"]);n.ready||n.createFromShaderSource(a.default.df_text,["MODEL_TRANSFORM"]);var o=new s.default("text3d-material-"+this.name,this._resourceManager);o.attachShader(n,this._resourceManager),o.setFontBitmap(this._resourceManager.getBitmapFont().getTexture()),o.setColor([0,0,0]),o.transparent=!0;var l=new Float32Array([-1,-1,0,1,1,0]);this.addDrawable(this._createDrawable(r,n,o,l)),this.bbox?i.default.aabb.union(this.bbox,this.bbox,l):this.bbox=l}}},t.prototype.setColor=function(e){this.drawables.forEach(function(t){t.material.setColor(e)})},t.prototype._createDrawable=function(e,t,r,n){return new o.default(e,t,r,null,n)},t}(l.default);t.default=c},"./03scene/text/Text3DBillboard.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/text/Text3D.ts"),a=r("./03scene/drawables/Billboard.ts"),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return o(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t.prototype._createDrawable=function(e,t,r,n){return new a.default(e,t,r,null,n)},t.prototype.setFaceCameraZ=function(e){this.drawables.forEach(function(t){t.transform.setFaceCameraZ(e)})},t}(i.default);t.default=s},"./04renderer/m3d_samples.js":function(e,t,r){"use strict";var n;r.r(t),t.default=(n={_2X2:[.375,.125,.875,.375,.125,.625,.625,.875],_4X2:[9/16,5/16,7/16,.6875,.8125,9/16,5/16,3/16,3/16,.8125,1/16,7/16,.6875,.9375,.9375,1/16],_4X4:[9/16,9/16,.125,.75,.75,7/16,.5,1/16,.8125,.6875,1/16,0,.6875,3/16,5/16,.625,.375,.875,.25,.125,0,.5,.875,.9375,3/16,.375,.9375,.25,7/16,5/16,.625,.8125],_4x4_2D:[.524814,.56488,.74661,.664308,.694092,.462367,.623577,.267783,.340815,.790118,.247202,.532242,.36916,.311385,.825046,.312099,.72246,.905,.27684,.092381,.72246,.905,.943712,.7082,.019365,.400172,.03138,.65182,.995488,.433175,.637063,.021535,.412268,.984494],_8x8_2D:[.501506,.536596,.479138,.43034,.397053,.487056,.591406,.449082,.497369,.644404,.381063,.588818,.636382,.583616,.52319,.33336,.37642,.379573,.713274,.461703,.283159,.497054,.590899,.697271,.670374,.344963,.385952,.705203,.424452,.277044,.764748,.543555,.603993,.250593,.494041,.772178,.258782,.641709,.246434,.369532,.755129,.628899,.309775,.274196,.706395,.722131,.512554,.195892,.790205,.3784,.61636,.797562,.29905,.751101,.174923,.45043,.698505,.236127,.381569,.18237,.161473,.556691,.848478,.467565,.555191,.851308,.378558,.839659,.791231,.280491,.8164,.702177,.875051,.595993,.645256,.140087,.187367,.259117,.48844,.895837,.7087,.838936,.194892,.757962,.126029,.354896,.25983,.168335,.447763,.0934675,.266928,.837262,.551968,.0880472,.118845,.673752,.76843,.163361,.062746,.469565,.62316,.924319,.916225,.344364,.330463,.0834606,.819568,.817768,.050363,.590149,.912991,.727568,.87403,.207755,.97926,.489109,.400768,.969595,.289428,.936614,.030082,.356932,.514659,.992979,.177672,.877666,.632581,.0178981],_8x8_3D:[.93678,.207818,-.281522,.155734,-.528496,-.834529,.318403,.287368,.903349,.217197,-.610563,.761602,.439011,.210822,.873397,.977207,.053257,.205501,.641795,.546048,.538453,.348168,-.458926,-.817414,.170284,-.774256,-.609534,.160135,.980561,.113387,.106271,.295349,.949461,-.914237,-.074791,.398217,-.77951,-.543208,-.311912,.027064,-.908468,.417077,-.10138,-.994828,.006289,-.883905,-.028965,-.466769,.895093,-.435134,.097299,.1881,.388757,-.901935,.865264,.331237,.376298,-.208541,.948524,-.238356,.061496,.888755,.454239,-.572418,.589289,.570154,-.605071,-.187697,-.773731,-.888205,.306047,.342678,.772958,-.048692,.632586,-.119578,.653396,.747513,-.669006,.120272,.733461,-.299117,-.139439,.943973,.435083,.612268,-.660175,-.646608,-.352291,.676601,.823632,-.163268,-.543115,-.443489,-.863253,.241063,.514024,-.264126,.816098,-.909153,.333005,-.250099,.960448,-.226223,-.162368,.805614,.592417,.005408,.082866,-.252741,.963979,-.979375,-.166776,-.114065,.405677,-.833005,.376204,-.832468,.551533,.052997,-.066544,-.159122,-.985014,.65867,-.609037,-.441846,-.099674,-.912569,-.396589,-.603554,.671968,-.429164,.323987,.045308,-.944976,-.315941,.138344,-.938638,.554968,.829633,-.060986,-.244659,.560061,-.791501,.379228,.719356,.581991,.699318,-.522353,.487956,-.879993,-.450901,.149331,.621998,-.062407,-.780528,-.513325,.858183,-.004391,-.612452,-.645248,.456681,.350088,-.913147,-.208811,-.494057,-.596705,-.632338,-.23826,-.632492,.737011,.729728,.460782,-.505151,.625231,-.779835,.030709,-.377751,.867056,.324836,-.035872,.799911,-.599045,.263772,.905962,-.331144,-.517616,-.829878,-.208271,-.640118,.321235,-.697894],_8x8_2D_LIST:[]},function(){function e(e,t){for(var r=0,n=1/e,i=t;i>0;i=Math.floor(i/e))r+=n*(i%e),n/=e;return r}for(var t=0;t<64;++t){var r=e(2,t)*Math.PI,i=e(3,t);n._8x8_2D_LIST[t]=[];for(var a=Math.cos(r),o=Math.sin(r),s=0;s<8;++s){var l=(s+i+.125*Math.random())/8;n._8x8_2D_LIST[t][2*s]=a*l,n._8x8_2D_LIST[t][2*s+1]=o*l}}}(),n)},"./04renderer/pipeline/Blit.ts":function(e,t,r){"use strict";r.r(t);var n=r("./03scene/materials/MaterialBlit.ts"),i=r("./02resource/m3d_shader_library.js"),a=function(){function e(e,t,r){void 0===t&&(t=null),void 0===r&&(r=!1),this._resourceManager=e,t||(t=i.default.blit),this._shader=e.getShader(t.name,[]),this._shader.ready||this._shader.createFromShaderSource(t,r?["MOBILE"]:[]),this.ready=this._shader.ready,this.ready?(this._material=new n.default(t.name),this._material.attachShader(this._shader)):this._material=null}return e.prototype.destroy=function(){this.ready&&(this._material.destroy(),this._material=null,delete this._material,this._shader.destroy(),this._shader=null,delete this._shader,this.ready=!1),this._resourceManager=null,delete this._resourceManager},e.prototype.setTexture=function(e){this._material.setTexture(e)},e.prototype.setForegroundTexture=function(e){this._material.setForegroundTexture(e)},e.prototype.setDepthTexture=function(e){this._material.setDepthTexture(e)},e.prototype.setParameter=function(e,t){this._material.parameters[e].value=t},e.prototype.render=function(e,t,r,n){if(void 0===r&&(r=!1),void 0===n&&(n=!1),this.ready&&t.ready){var i=this._shader.getGL(),a=t.getOption("depthMask");t.setOption("depthMask",!1);var o=n?i.GREATER:i.ALWAYS,s=t.getOption("depthFunc");t.setOption("depthFunc",o);var l=t.getOption("blend");t.setOption("blend",r||!1);var u=[1/t.getWidth(),1/t.getHeight()];this._material.setInvResolution(u),t.always=!0,e.drawScreen(t,this._shader,this._material),t.setOption("depthMask",a),t.setOption("depthFunc",s),t.setOption("blend",l),e.renderState.blend(t.getOption("blend")),e.renderState.depthTest(t.getOption("depthTest"),t.getOption("clearDepth"),t.getOption("depthFunc")),e.renderState.depthMask(t.getOption("depthMask"));var c=this._material.parameters;for(var d in c)c[d].texUnit>=0&&(i.activeTexture(i.TEXTURE0+c[d].texUnit),i.bindTexture(i.TEXTURE_2D,null))}},e.prototype.recompile=function(e,t){var r,n=this._shader,i=n.flags.lastIndexOf(e),a=!1;if(t?-1===i&&(r=n.flags.concat(e),a=!0):-1!==i&&((r=n.flags.slice(0)).splice(i,1),a=!0),a){var o=n.shaderSource.name,s=this._resourceManager.getShader(o,r);if(!s.ready&&(s.createFromShaderSource(n.shaderSource,r),!s.ready))throw new Error("Failed to create shader '"+o+"'!");this._shader=s,this._material.attachShader(this._shader)}},e}();t.default=a},"./04renderer/pipeline/RenderPass.ts":function(e,t,r){"use strict";r.r(t);var n=function(){function e(e,t,r,n){this.queue=t.getQueue(n),this._renderQueueManager=t,this._resourceManager=e,this._overridedMaterial=null,this._overridedShaders=[null,null,null],this._needSort=r,this._cullFace=e.gl.CCW,this._visible=!0}return e.prototype.destroy=function(){this._overridedShaders=null,delete this._overridedShaders,this._overridedMaterial=null,delete this._overridedMaterial,this._resourceManager=null,delete this._resourceManager,this._renderQueueManager=null,delete this._renderQueueManager},e.prototype.setCullFace=function(e){this._cullFace=e},e.prototype.getCullFace=function(){return this._cullFace},e.prototype.getVisibility=function(){return this._visible},e.prototype.setVisibility=function(e){this._visible=e},e.prototype.render=function(e,t,r,n,i,a){this._visible&&this.queue.isValid()&&(this._needSort&&this.queue.sort(r),t.drawDrawables(e,this.queue.drawables,r,this._overridedShaders,this._overridedMaterial,i,a,n,null,this._cullFace))},e.prototype.setOverridedMaterial=function(e){this._overridedMaterial=e,this._overridedMaterial&&this._overridedShaders[0]&&this._overridedMaterial.attachShader(this._overridedShaders[0])},e.prototype.getOverridedMaterial=function(){return this._overridedMaterial},e.prototype.getOverridedShaders=function(){return this._overridedShaders},e.prototype.setOverridedShader=function(e){if(this._overridedShaders[0]=e,this._overridedMaterial&&this._overridedShaders[0]&&this._overridedMaterial.attachShader(this._overridedShaders[0]),e){var t=e.flags.concat("MODEL_TRANSFORM"),r=this._resourceManager.getShader(e.shaderSource.name,t);r.ready||r.createFromShaderSource(e.shaderSource,t),this._overridedShaders[1]=r;var n=t.concat("INSTANCING"),i=this._resourceManager.getShader(e.shaderSource.name,n);i.ready||i.createFromShaderSource(e.shaderSource,n),this._overridedShaders[2]=i}},e.prototype.recompileOverridedShader=function(e,t){for(var r=0;r<this._overridedShaders.length;r++){var n=this._overridedShaders[r];if(n){var i=n.flags.lastIndexOf(e),a=void 0,o=!1;if(t?-1===i&&(a=n.flags.concat(e),o=!0):-1!==i&&((a=n.flags.slice(0)).splice(i,1),o=!0),o){var s=n.shaderSource.name,l=this._resourceManager.getShader(s,a);if(!l.ready&&(l.createFromShaderSource(n.shaderSource,a),!l.ready))throw new Error("Failed to create shader '"+s+"'!");this._overridedShaders[r]=l}}}},e.prototype.addDrawable=function(e){return this.queue.addDrawable(e)},e.prototype.removeDrawable=function(e){return this.queue.removeDrawable(e)},e.prototype.createQueue=function(e,t){return this.queue.create(e,t)},e.prototype.optimize=function(){this.queue.optimize()},e}();t.default=n},"./04renderer/pipeline/RenderPassEdgeMap.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./04renderer/pipeline/RenderPass.ts"),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=function(e){function t(t,r){return e.call(this,t,r,!1,{line:!0})||this}return a(t,e),t.prototype.render=function(e,t,r,n,i,a){if(this.queue.isValid()){if(null!==this._overridedMaterial&&this._overridedMaterial.transparent){var o=e.getOption("blend");e.setOption("blend",!0),e.always=!0}t.drawLinesWithVertexIds(e,this.queue.drawables,r,this._overridedShaders,this._overridedMaterial,i),null!==this._overridedMaterial&&this._overridedMaterial.transparent&&(e.setOption("blend",o),e.always=!0)}},t}(i.default);t.default=o},"./04renderer/pipeline/RenderPassNode.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./04renderer/pipeline/RenderPass.ts"),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=function(){function e(e){this.drawable=e.drawable,this.indexSize=this.drawable.mesh.indexSize,this.indicesOffset=e.indicesOffset,this.indicesCount=e.indicesCount,this.modelNode=e}return e.prototype.destroy=function(){this.drawable=null,delete this.drawable,this.modelNode=null,delete this.modelNode},e}(),s=function(e){function t(t,r){var n=e.call(this,t,r,!1,{})||this;return n._lineColor=[0,0,0],n._queue=[],n}return a(t,e),t.prototype.destroy=function(){for(var t=0;t<this._queue.length;++t)this._queue[t].destroy();this._queue=null,delete this._queue,e.prototype.destroy.call(this)},t.prototype.clone=function(){var e=new t(this._resourceManager,this._renderQueueManager);e._queue=new Array(this._queue.length);for(var r=0;r<this._queue.length;r++)e._queue[r]=new o(this._queue[r].modelNode),e._queue[r].indicesCount=this._queue[r].indicesCount;return e._lineColor=this._lineColor.slice(0),e},t.prototype.render=function(e,t,r,n,i,a){if(0!==this._queue.length){if(null!==this._overridedMaterial&&this._overridedMaterial.transparent){var o=e.getOption("blend");e.setOption("blend",!0),e.always=!0}t.drawElements(e,this._queue,r,i,a,n,this._cullFace,this._overridedShaders,this._overridedMaterial),null!==this._overridedMaterial&&this._overridedMaterial.transparent&&(e.setOption("blend",o),e.always=!0)}},t.prototype.setLineColor=function(e){this._lineColor=e},t.prototype.isValid=function(){return this._queue.length>0},t.prototype.getNodes=function(){return this._queue},t.prototype.removeNodes=function(e){var t=this;e.forEach(function(e){var r=t._queue.findIndex(function(t){return t.modelNode===e});-1!==r&&t._queue.splice(r,1)})},t.prototype.setNodes=function(e){for(var t="",r=0;r<this._queue.length;++r){t!==(a=this._queue[r].drawable).name&&a.mesh.isLine()&&(a.material.setDiffuse(this._lineColor),t=a.name),this._queue[r].destroy()}if(this._queue=[],e){e.sort(function(e,t){var r;return 0!==(r=e.drawable.nodes[0].id-t.drawable.nodes[0].id)?r:e.indicesOffset-t.indicesOffset});for(var n=null,i=(r=0,e.length);r<i;r++){var a,s=e[r];if(n!==(a=e[r].drawable))a.mesh.isLine()&&a.material.setDiffuse([.96,.32,.14]),this._queue.push(new o(s)),n=a;else{var l=this._queue[this._queue.length-1];a.transform.count>1?l.indicesOffset+1===s.indicesOffset?l.indicesCount+=1:this._queue.push(new o(s)):l.indicesOffset+l.indicesCount*l.indexSize===s.indicesOffset?l.indicesCount+=s.indicesCount:this._queue.push(new o(s))}}}},t}(i.default);t.default=s},"./04renderer/pipeline/RenderPassTransparent.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./04renderer/pipeline/RenderPass.ts"),a=r("./04renderer/rendereffects/OIT.ts"),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t,r,n){var i=e.call(this,t,r,!0,n)||this;return i._oitEnabled=!1,i._oit=null,i}return o(t,e),t.prototype.destroy=function(){this._oitEnabled=null,delete this._oitEnabled,this._oit&&(this._oit.destroy(),this._oit=null,delete this._oit),e.prototype.destroy.call(this)},t.prototype.setOITEnabled=function(e){var t=this;this._oitEnabled=e,this._oitEnabled&&!this._oit&&(this._oit=new a.default(this._resourceManager,this._renderQueueManager),this.queue.drawables.forEach(function(e){t._oit.addDrawable(e)}))},t.prototype.resize=function(e,t){this._oit&&this._oit.resize(e,t)},t.prototype.setOverridedMaterial=function(t){e.prototype.setOverridedMaterial.call(this,t),this._oit&&this._oit.setOverridedMaterial(t)},t.prototype.setOverridedShader=function(t){if(null!==t){if(this._overridedMaterial){var r=this._overridedMaterial;this._overridedMaterial=this._overridedMaterial.clone("overridedMaterial")}e.prototype.setOverridedShader.call(this,t),r&&(this._overridedMaterial=r)}else e.prototype.setOverridedShader.call(this,t)},t.prototype.addDrawable=function(t){return this._oit&&this._oit.addDrawable(t),e.prototype.addDrawable.call(this,t)},t.prototype.removeDrawable=function(t){return this._oit&&this._oit.removeDrawable(t),e.prototype.removeDrawable.call(this,t)},t.prototype.createQueue=function(t,r){this._oit&&this._oit.createQueue(t,r),e.prototype.createQueue.call(this,t,r)},t.prototype.render=function(t,r,n,i,a,o){if(this._oitEnabled)this._oit.render(t,r,n,i,a,o);else{var s=this._resourceManager.gl;t.setOption("blend",!0),t.always=!0,t.setOption("blendFunc",[s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA]),this._overridedMaterial&&this._overridedMaterial.transparent,e.prototype.render.call(this,t,r,n,i,a,o),t.setOption("blend",!1),t.always=!0}},t}(i.default);t.default=s},"./04renderer/pipeline/RenderQueue.ts":function(e,t,r){"use strict";r.r(t);var n=r("./glMatrix.js"),i=function(){function e(e,t){this.name=e,this.drawables=[],this._lastUpdated=-1.01,this._setSelector(t)}return e.prototype.destroy=function(){this.drawables=null,delete this.drawables},e.prototype.removeDrawables=function(){this.drawables=[]},e.prototype.removeDrawable=function(e){for(var t=this.drawables.length-1;t>=0;t--)if(this.drawables[t]===e)return this.drawables.splice(t,1),!0;return!1},e.prototype.addDrawable=function(e){return!(!e.visible||!this._selector(e)||-1!=this.drawables.indexOf(e))&&(this.drawables.push(e),!0)},e.prototype.create=function(e,t){if(!(this._lastUpdated>=t)){for(var r in this.drawables=[],e.models)for(var n=e.models[r],i=0,a=n.drawables.length;i<a;i++)this.addDrawable(n.drawables[i]);if(null!=e.terrain)for(var o=e.terrain,s=0,l=o.tiles.length;s<l;s++)this.addDrawable(o.tiles[s].drawable);this._lastUpdated=t,this.optimize()}},e.prototype.isValid=function(){return this.drawables.length>0},e.prototype.optimize=function(){0!==this.drawables.length&&this.drawables.sort(function(e,t){return e.shader.name.localeCompare(t.shader.name)})},e.prototype.update=function(e){for(var t=0,r=this.drawables.length;t<r;++t)this.drawables[t].update(e)},e.prototype._setSelector=function(e){this._selector=function(t){return!e||(void 0===e.line||e.line===t.mesh.isLine())&&((void 0===e.texture||e.texture===t.material.hasTexture)&&((void 0===e.color||e.color===t.mesh.attributes.hasColor)&&((void 0===e.mask||e.mask===t.material.hasMask)&&((void 0===e.transparent||e.transparent===t.material.transparent)&&(void 0===e.shadowCaster||e.shadowCaster===t.isShadowCaster())))))}},e.prototype.sort=function(e){if(this.isValid()){for(var t=e.getViewDirection(),r=n.vec3.fromValues(),i=0,a=this.drawables.length;i<a;++i){var o=this.drawables[i];n.vec3.subtract(r,o.bsphere,e.eye),o.distance=n.vec3.dot(r,t)}this.drawables.sort(function(e,t){return t.distance-e.distance})}},e.prototype.copy=function(e,t){if(this.name!==e.name&&!(this._lastUpdated>=t&&t>0)){this.drawables=[];for(var r=0;r<e.drawables.length;r++){var n=e.drawables[r];this._selector(n)&&this.drawables.push(n)}t>0&&(this._lastUpdated=t)}},e}();t.default=i},"./04renderer/pipeline/RenderQueueManager.ts":function(e,t,r){"use strict";r.r(t);var n=r("./04renderer/pipeline/RenderQueue.ts"),i=function(){function e(){this._queues=new Map}return e.prototype.destroy=function(){this._queues.clear(),this._queues=null,delete this._queues},e.prototype.getQueue=function(e){var t="";return e?(t+=void 0===e.line?"":e.line?"_Line_":"_Not_Line_",t+=void 0===e.texture?"":e.texture?"_Texture_":"_Not_Texture_",t+=void 0===e.color?"":e.color?"_Color_":"_Not_Color_",t+=void 0===e.mask?"":e.mask?"_Mask_":"_Not_Mask_",t+=void 0===e.transparent?"":e.transparent?"_Transparent_":"_Not_Transparent_",t+=void 0===e.shadowCaster?"":e.shadowCaster?"_ShadowCaster_":"_Not_ShadowCaster_",t+=void 0===e.uniqueId?"":e.uniqueId):t="default",this._queues.has(t)||this._queues.set(t,new n.default(t,e)),this._queues.get(t)},e}();t.default=i},"./04renderer/pipeline/RenderScene.ts":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/Environment.ts"),i=r("./02resource/m3d_shader_library.js"),a=r("./04renderer/rendereffects/RenderEffectLibrary.ts"),o=r("./04renderer/pipeline/RenderQueueManager.ts"),s=r("./04renderer/pipeline/RenderTarget.ts"),l=r("./04renderer/pipeline/RenderPass.ts"),u=r("./04renderer/pipeline/RenderPassTransparent.ts"),c=r("./04renderer/pipeline/RenderPassNode.ts"),d=function(){function e(e,t,r,n,i){this._scene=e,this._camera=t,this._resourceManager=r,this._renderer=n,this.previous=null,this._effects={},this._sortedEffects=[],this._visualizes=[],this._renderQueueManager=new o.default,this._opaques=new l.default(r,this._renderQueueManager,!1,{line:!1,transparent:!1,mask:!1}),this._maskeds=new l.default(r,this._renderQueueManager,!1,{line:!1,transparent:!1,mask:!0}),this._transparents=new u.default(r,this._renderQueueManager,{line:!1,transparent:!0}),this._lines=new l.default(r,this._renderQueueManager,!1,{line:!0}),this._nodes=new c.default(r,this._renderQueueManager),this._renderPassAll=new u.default(r,this._renderQueueManager,{line:!1}),this._skeletons=[],this._flags={doubleSided:!1,clipping:!1,line:!1,oit:!1,overridedMaterial:!1};var a=this._resourceManager.gl;a.isWebGL2?(this._renderTarget=new s.default("pipeline",this._resourceManager,t.viewport[2],t.viewport[3],{stencilTest:!!i,samples:a.wbSamples,depthFunc:a.LEQUAL,colorFilter:a.NEAREST,colorFormat:a.wbFormat,colorBuffer:0,depthBuffer:0,depthFilter:a.NEAREST}),this._renderTarget.ready||(console.warn("Can't create multisamples render buffer for 'pipeline' and use single-sample render buffer now."),this._renderTarget=new s.default("pipeline",this._resourceManager,t.viewport[2],t.viewport[3],{stencilTest:!!i,samples:1,depthFunc:a.LEQUAL,colorFilter:a.NEAREST,colorFormat:a.wbFormat,colorBuffer:0,depthBuffer:0,depthFilter:a.NEAREST}))):this._renderTarget=new s.default("default",this._resourceManager,t.viewport[2],t.viewport[3],{stencilTest:!!i,depthFunc:a.LEQUAL,colorFilter:a.NEAREST,colorFormat:a.wbFormat,colorBuffer:0,depthBuffer:0,depthFilter:a.NEAREST})}return e.prototype.destroy=function(){for(var e in this._scene=null,delete this._scene,this._camera=null,delete this._camera,this._resourceManager=null,delete this._resourceManager,this._renderer=null,delete this._renderer,this._effects)this._effects[e].destroy();this._effects=null,delete this._effects,this._sortedEffects=null,delete this._sortedEffects,this._renderTarget.destroy(),this._renderTarget=null,delete this._renderTarget,this._opaques.destroy(),this._opaques=null,delete this._opaques,this._maskeds.destroy(),this._maskeds=null,delete this._maskeds,this._transparents.destroy(),this._transparents=null,delete this._transparents,this._lines.destroy(),this._lines=null,delete this._lines,this._nodes.destroy(),this._nodes=null,delete this._nodes,this._flags=null,delete this._flags,this.previous=null,delete this.previous,this._renderQueueManager.destroy(),this._renderQueueManager=null,delete this._renderQueueManager},e.prototype.draw=function(e){return void 0===e&&(e=!1),!1},e.prototype.drawHD=function(){},e.prototype.resize=function(e,t){for(var r in this._effects)this._effects[r].resize(e,t);this._scene.background.skybox&&this._scene.background.skybox.resize(e,t),this._transparents.resize(e,t),this._visualizes.forEach(function(r){r.resize(e,t)})},e.prototype.addEffect=function(e){if(!this._effects.hasOwnProperty(e)){var t=new a.default[e](this);if(!t.doesSupportMobile(n.Environment.isMobile))return t.destroy(),void console.warn("Effect "+e+" is not supported on mobile!");this._effects[t.name]=t;for(var r=this._sortedEffects.length,i=0,o=this._sortedEffects.length;i<o;i++)if(this._sortedEffects[i].priority<t.priority){r=i;break}this._sortedEffects.length===r?this._sortedEffects.push(t):this._sortedEffects.splice(r,0,t),t.onSceneChanged()}},e.prototype.removeEffect=function(e){if(this._effects.hasOwnProperty(e)){var t=this._effects[e],r=this._sortedEffects.indexOf(t);this._sortedEffects.splice(r,1),t.destroy(),delete this._effects[e]}},e.prototype.getEffect=function(e){return this._effects.hasOwnProperty(e)?this._effects[e]:(console.warn("Effect '"+e+"' does not exist!"),null)},e.prototype.isEffectEnabled=function(e){return!(!this._effects.hasOwnProperty(e)&&!this._effects[e].isEnabled)},e.prototype.setEffectEnabled=function(e,t){this._effects.hasOwnProperty(e)||this.addEffect(e),this._effects[e].setEnabled(t)},e.prototype.addVisualize=function(e){return n.Environment.isMobile&&!e.doesSupportMobile(n.Environment.isMobile)?(e.destroy(),void console.warn("Visualize "+name+" is not supported on mobile!")):this._resourceManager.gl.isWebGL2||e.doesSupportWebGL1()?void this._visualizes.push(e):(e.destroy(),void console.warn("Visualize "+name+" is not supported in webgl 1.0 context!"))},e.prototype.removeVisualize=function(e){var t=this._visualizes.indexOf(e);-1!==t&&this._visualizes.splice(t,1)},e.prototype.getVisualize=function(e,t){for(var r=0,n=0;n<this._visualizes.length;n++)if(-1!==this._visualizes[n].name.indexOf(e)){if(t===r)return this._visualizes[n];r++}return null},e.prototype.getVisualizes=function(e){for(var t=[],r=0;r<this._visualizes.length;r++)-1!==this._visualizes[r].name.indexOf(e)&&t.push(this._visualizes[r]);return t},e.prototype.getAllVisualizes=function(){return this._visualizes},e.prototype.setOverridedMaterials=function(e){if(this._overridedMaterials=e,e){var t=this._resourceManager.gl,r=this._resourceManager.getTexture("white");r.ready||(r.create(1,1,t.RGBA8,t.NEAREST,t.CLAMP_TO_EDGE),r.update(new Uint8Array([255,255,255,255])));var n=this._resourceManager.getShader("texture",[]);if(!n.ready){var a=i.default.texture;n.createFromShaderSource(a,[])}if(Object.keys(e).length<=4){this._lines.setOverridedMaterial(e.lines);var o=e.opaques;o&&!o.hasTexture&&(o.attachShader(n),o.setDiffuseTexture(r)),this._opaques.setOverridedMaterial(o),(o=e.transparents)&&!o.hasTexture?(o.attachShader(n),o.setDiffuseTexture(r),this._transparents.setOverridedMaterial(o)):this._transparents.setOverridedMaterial(e.opaques),this._maskeds.setOverridedMaterial(e.maskeds)}else e.hasTexture||(e.attachShader(n),e.setDiffuseTexture(r)),this._flags.overridedMaterial=!0,this._renderPassAll.setOverridedMaterial(e),this._renderPassAll.createQueue(this._scene,performance.now()),this._lines.setOverridedMaterial(e),this._maskeds.setOverridedMaterial(e),this._opaques.setOverridedMaterial(e),this._transparents.setOverridedMaterial(e)}else this._lines.setOverridedMaterial(null),this._opaques.setOverridedMaterial(null),this._transparents.setOverridedMaterial(null),this._maskeds.setOverridedMaterial(null),this._renderPassAll.setOverridedMaterial(null),this._renderPassAll.createQueue(this._scene,performance.now()),this._flags.overridedMaterial=!1},e.prototype.getOverridedMaterials=function(){return this._overridedMaterials},e.prototype.setOverridedShaders=function(e){this._overridedShader=e,this._renderPassAll.setOverridedShader(e),this._lines.setOverridedShader(e),this._opaques.setOverridedShader(e),this._transparents.setOverridedShader(e),this._maskeds.setOverridedShader(e)},e.prototype.getOverridedShader=function(){return this._overridedShader},e.prototype.renderElements=function(e,t){if(void 0===t&&(t=!1),e){for(var r=[],n=0,i=e.length;n<i;n++){var a=e[n],o=a.split("+")[0],s=this._scene.models[o].tree.elements[a];if(s)s.getNodes().forEach(function(e){!t&&e.drawable.mesh.isLine()||r.push(e)});else console.warn("Element: +"+a+" can not be found!")}this._nodes.setNodes(r)}else this._nodes.setNodes(null)},e.prototype.onOpacityChanged=function(e){var t=this;if(0!==e.length){var r=e[0].material.getTransparent()<.99;e.forEach(function(e){r?(t._opaques.removeDrawable(e),t._transparents.addDrawable(e)):(t._opaques.addDrawable(e),t._transparents.removeDrawable(e))})}},e.prototype.onSceneChanged=function(e){for(var t in this._effects)this._effects[t].onSceneChanged(e);if(this._lines.createQueue(this._scene,e),this._opaques.createQueue(this._scene,e),this._maskeds.createQueue(this._scene,e),this._transparents.createQueue(this._scene,e),this._renderPassAll.createQueue(this._scene,e),this._scene.needRenderDoubleSided())this._opaques.setCullFace(!1),this._maskeds.setCullFace(!1),this._transparents.setCullFace(!1);else{var r=this._resourceManager.gl;this._opaques.setCullFace(r.CCW),this._maskeds.setCullFace(r.CCW),this._transparents.setCullFace(r.CCW)}},e.prototype.setDoubleFaceEnabled=function(e){if(this._scene.setRenderDoubleSided(e),e)this._opaques.setCullFace(!1),this._maskeds.setCullFace(!1),this._transparents.setCullFace(!1);else{var t=this._resourceManager.gl;this._opaques.setCullFace(t.CCW),this._maskeds.setCullFace(t.CCW),this._transparents.setCullFace(t.CCW)}},e.prototype.optimize=function(){if(this._lines.optimize(),this._opaques.optimize(),this._maskeds.optimize(),this._transparents.optimize(),this._scene.needRenderDoubleSided())this._opaques.setCullFace(!1),this._maskeds.setCullFace(!1),this._transparents.setCullFace(!1);else{var e=this._resourceManager.gl;this._opaques.setCullFace(e.CCW),this._maskeds.setCullFace(e.CCW),this._transparents.setCullFace(e.CCW)}},e.prototype._recompileShaders=function(e,t){for(var r in this._effects)this._effects[r].recompileShader(e,t);for(var n in this._scene.models)this._scene.models[n].drawables.forEach(function(r){r.visible&&r.recompileShader(e,t)});this._opaques.recompileOverridedShader(e,t),this._lines.recompileOverridedShader(e,t),this._transparents.recompileOverridedShader(e,t),this._maskeds.recompileOverridedShader(e,t),this._renderPassAll.recompileOverridedShader(e,t),this._renderer.invalidate()},e.prototype.refreshRendering=function(e){void 0===e&&(e=1)},e.prototype.getScene=function(){return this._scene},e.prototype.getRenderQueueManager=function(){return this._renderQueueManager},e.prototype.getResourceManager=function(){return this._resourceManager},e.prototype.getCamera=function(){return this._camera},e.prototype.getRenderer=function(){return this._renderer},e.prototype.getRenderTarget=function(){return this._renderTarget},e.prototype.isLineRendering=function(e){return this._flags.line},e.prototype.setLineRendering=function(e){this._flags.line=e},e.prototype.addDrawable=function(e){for(var t in this._opaques.addDrawable(e)||this._maskeds.addDrawable(e)||this._lines.addDrawable(e)||this._transparents.addDrawable(e),this._renderPassAll.addDrawable(e),this._effects)this._effects[t].addDrawable(e)},e.prototype.getSkeletons=function(){return this._skeletons},e.prototype.addSkeleton=function(e){this._skeletons.push(e)},e.prototype.removeSkeleton=function(e){var t=this._skeletons.indexOf(e);-1!==t&&this._skeletons.splice(t,1)},e.prototype.removeDrawable=function(e){for(var t in this._opaques.removeDrawable(e)||this._maskeds.removeDrawable(e)||this._lines.removeDrawable(e)||this._transparents.removeDrawable(e),this._effects)this._effects[t].removeDrawable(e)},e.prototype.getOpaques=function(){return this._opaques},e.prototype.getMaskeds=function(){return this._maskeds},e.prototype.getLines=function(){return this._lines},e.prototype.getTransparents=function(){return this._transparents},e.prototype.setNodesLineColor=function(e){this._nodes.setLineColor(e)},e.prototype.setOITEnabled=function(e){this._transparents.setOITEnabled(e)},e.prototype.isOITEnabled=function(){return this._flags.oit},e}();t.default=d},"./04renderer/pipeline/RenderSceneExploded.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/camera/m3d_scene_camera.js"),a=r("./04renderer/pipeline/RenderScenePR.ts"),o=r("./04renderer/pipeline/RenderPassNode.ts"),s=r("./glMatrix.js"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(e){function t(t,r,n,i,a){var o=e.call(this,t,n,i,a)||this;o._nodesBatch=[],o._nodesBatchTransparent=[],o._cameraBatch=[],o._translations=null,o._animationBeginAt=0,o._animationDuration=0,o._animationDirection=1,o._animationCurrent=0,o._animationDone=null,o._overridedMaterials=null,o._overridedShader=null;var s=r.getOverridedMaterials();if(s)if(Object.keys(s).length<=4)for(var l in o._overridedMaterials={},s)o._overridedMaterials[l]=s[l].clone(l+"explodedView");else o._overridedMaterials=s.clone(s.name+"explodedView");for(var l in r.getAllVisualizes().forEach(function(e){o._visualizes.push(e)}),r.getSkeletons().forEach(function(e){o.addSkeleton(e)}),t.pawns)t.pawns[l].drawables.forEach(function(e){o.addDrawable(e)});for(var u in t.text3Ds.forEach(function(e){e.drawables.forEach(function(e){o.addDrawable(e)})}),o._overridedShader=r.getOverridedShader()||null,o._flags={},r._flags)o._flags[u]=r._flags[u];return o}return l(t,e),t.prototype.destroy=function(){for(var t=0;t<this._nodesBatch.length;t++)this._nodesBatch[t].destroy(),this._nodesBatchTransparent[t].destroy(),this._cameraBatch[t].destroy();this._nodesBatch=null,delete this._nodesBatch,this._nodesBatchTransparent=null,delete this._nodesBatchTransparent,this._cameraBatch=null,delete this._cameraBatch,this._translations=null,delete this._translations,this._animationDone=null,delete this._animationDone,e.prototype.destroy.call(this)},t.prototype.renderElements=function(t,r){void 0===r&&(r=!1),e.prototype.renderElements.call(this,t,r);var n=new i.default(this._scene,this._camera.viewport);this._cameraBatch.push(n);var a=this._nodes.clone(),s=new o.default(this._resourceManager,this._renderQueueManager),l=new o.default(this._resourceManager,this._renderQueueManager);s.setOverridedShader(this._overridedShader),s.setOverridedMaterial(this._overridedMaterials),l.setOverridedShader(this._overridedShader),l.setOverridedMaterial(this._overridedMaterials),a.getNodes().forEach(function(e){e.drawable.material.getTransparent()<.99?l._queue.push(e):s._queue.push(e)}),this._nodesBatch.push(s),this._nodesBatchTransparent.push(l)},t.prototype._drawFrame=function(e){var t=this._resourceManager.gl;this._renderer.clear(e,t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT);for(var r=this._scene.clipping,n=this._scene.getMainLight(),i=0;i<this._skeletons.length;i++)this._skeletons[i].update();var a=[0,0,0];this._animationCurrent=Date.now()-this._animationBeginAt;var o=Math.min(this._animationCurrent/this._animationDuration,1);this._animationDirection<0&&(o=1-o);for(var l=s.mat4.create(),u=0;u<this._nodesBatch.length;u++)a[0]=this._translations[u][0]*o,a[1]=this._translations[u][1]*o,a[2]=this._translations[u][2]*o,l=s.mat4.fromTranslation(l,a),s.mat4.multiply(this._cameraBatch[u].viewMatrix,this._camera.viewMatrix,l),s.mat4.multiply(this._cameraBatch[u].vpMatrix,this._camera.projectMatrix,this._cameraBatch[u].viewMatrix),s.vec3.subtract(this._cameraBatch[u].eye,this._camera.eye,a),this._renderer.invalidate(),this._nodesBatch[u].render(e,this._renderer,this._cameraBatch[u],this._shadow,r,n);this._opaques.render(e,this._renderer,this._camera,this._shadow,r,n),this._maskeds.render(e,this._renderer,this._camera,this._shadow,r,n),this._flags.line&&this._lines.render(e,this._renderer,this._camera,this._shadow,r,n),e.always=!0,this._drawVisualize(e),this._transparents.render(e,this._renderer,this._camera,this._shadow,r,n);for(var c=0;c<this._nodesBatch.length;c++)e.always=!0,e.setOption("blend",!0),this._nodesBatchTransparent[c].render(e,this._renderer,this._cameraBatch[c],this._shadow,r,n),e.always=!0,e.setOption("blend",!1);this._scene.background.skybox&&this._scene.background.skybox.visible&&(this._scene.background.skybox.update(this._camera.viewMatrix),this._renderer.drawSkybox(e,this._scene.background.skybox,this._camera)),(o<=0&&this._animationDirection<0||o>=1&&this._animationDirection>0)&&(this._prEnabled=!0,this._animationDone&&this._animationDone())},t.prototype.renderElementsTranslations=function(e){this._translations=e},t.prototype.enter=function(e){this._animationBeginAt=Date.now(),this._animationCurrent=0,this._animationDuration=e,this._animationDirection=1,this._prEnabled=!1,this._flags.specular&&(this._nodesBatch.forEach(function(e){e.recompileOverridedShader("SPECULAR",!0)}),this._nodesBatchTransparent.forEach(function(e){e.recompileOverridedShader("SPECULAR",!0)}),this._renderer.invalidate())},t.prototype.quit=function(e){this._animationBeginAt=Date.now(),this._animationCurrent=0,this._animationDirection=-1,this._animationDone=e,this._prEnabled=!1},t}(a.default);t.default=u},"./04renderer/pipeline/RenderSceneForward.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/drawables/Skybox.ts"),a=r("./04renderer/shadow/ShadowController.ts"),o=r("./04renderer/pipeline/RenderScene.ts"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(e){function t(t,r,n,i,a){var o=e.call(this,t,r,n,i,a)||this;return o._flags={doubleSided:!1,clipping:!1,shadow:!1,specular:!1,line:!1,base:!1},o._shadow=null,o}return s(t,e),t.prototype.destroy=function(){this._shadow&&(this._shadow.destroy(),this._shadow=null,delete this._shadow),e.prototype.destroy.call(this)},t.prototype.draw=function(e){void 0===e&&(e=!1);var t=this._resourceManager.gl;return this._scene.background.mode===i.SkyBoxMode.SKYBOX_SOLIDCOLOR&&this._renderTarget.setClearColor(this._scene.background.color),this._scissor&&(t.enable(t.SCISSOR_TEST),t.scissor(this._camera.viewport[0],this._camera.viewport[1],this._camera.viewport[2],this._camera.viewport[3])),this._drawFrame(this._renderTarget),this._scissor&&t.disable(t.SCISSOR_TEST),!0},t.prototype.drawHD=function(){this.draw(!0),this._renderer.present(this._renderTarget.getFramebuffer())},t.prototype._drawFrame=function(e){var t=this._resourceManager.gl;this._renderer.clear(e,t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT);for(var r=this._scene.clipping,n=this._scene.getMainLight(),i=0;i<this._skeletons.length;i++)this._skeletons[i].update();this._scene.background.skybox&&this._scene.background.skybox.visible&&(this._scene.background.skybox.update(this._camera.viewMatrix),this._renderer.drawSkybox(e,this._scene.background.skybox,this._camera)),this._flags.line&&this._lines.render(e,this._renderer,this._camera,this._shadow,r,n),this._flags.overridedMaterial?(this._renderPassAll.render(e,this._renderer,this._camera,this._shadow,r,n),this._drawVisualize(e)):(this._opaques.render(e,this._renderer,this._camera,this._shadow,r,n),this._maskeds.render(e,this._renderer,this._camera,this._shadow,r,n),this._drawVisualize(e),this._transparents.render(e,this._renderer,this._camera,this._shadow,r,n)),this._nodes.isValid()&&(e.always=!0,this._nodes.render(e,this._renderer,this._camera,this._shadow,r,n),e.always=!0),this._drawEffects(e)},t.prototype._drawEffects=function(e){for(var t=0;t<this._sortedEffects.length;t++)this._sortedEffects[t].draw(e,-1)},t.prototype._drawVisualize=function(e){var t=this._scene.clipping,r=this._scene.getMainLight();e.setOption("blend",!0),e.always=!0;for(var n=0;n<this._visualizes.length;n++)this._visualizes[n].draw(this._renderer,this._camera,t,r,this._shadow,e);e.setOption("blend",!1),e.always=!0},t.prototype.resize=function(t,r){e.prototype.resize.call(this,t,r),this._renderTarget.resize(t,r)},t.prototype.isLineRendering=function(e){return this._flags.line},t.prototype.setLineRendering=function(e){this._flags.line=e},t.prototype.setBaseRenderingEnabled=function(e){this._flags.base!==e&&(this._flags.base=e,this._recompileShaders("BASE",e))},t.prototype.setShadowEnabled=function(e){this._flags.shadow!==e&&(this._flags.shadow=e,this._flags.shadow&&null===this._shadow&&(this._shadow=new a.default(this),this._shadow.onSceneChanged(-1)),this._shadow.setEnabled(e),this.updateShadow(),this._recompileShaders("SHADOW",e),this._recompileShaders("SHADOW_PARTITION",e))},t.prototype.updateShadow=function(e){void 0===e&&(e=!1),this._shadow&&(this._flags.shadow||e)&&(this._shadow.draw(null),this._renderer.renderState.invalidateShadow())},t.prototype.isShadowEnabled=function(){return this._flags.shadow},t.prototype.setClippingEnabled=function(e){if(this._flags.clipping!==e)for(var t in this._flags.clipping=e,this._recompileShaders("CLIPPING",e),this._shadow&&(this._shadow.recompileShader("CLIPPING",e),this._shadow.draw(null)),this._effects)this._effects[t].recompileShader("CLIPPING",e)},t.prototype.isClippingEnabled=function(){return this._flags.clipping},t.prototype.onSceneChanged=function(t){e.prototype.onSceneChanged.call(this,t),this._shadow.onSceneChanged(t),this._flags.doubleSided=this._scene.needRenderDoubleSided()},t.prototype.setSpecularEnabled=function(e){this._flags.specular=e,this._recompileShaders("SPECULAR",e)},t.prototype.refreshRendering=function(e){void 0===e&&(e=1)},t.prototype.setScissorEnabled=function(e){this._scissor=e},t}(o.default);t.default=l},"./04renderer/pipeline/RenderScenePR.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./02resource/m3d_shader_library.js"),a=r("./03scene/drawables/Skybox.ts"),o=r("./04renderer/pipeline/RenderTarget.ts"),s=r("./04renderer/m3d_samples.js"),l=r("./04renderer/pipeline/Blit.ts"),u=r("./04renderer/pipeline/RenderSceneForward.ts"),c=r("./glMatrix.js"),d=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),h=function(e){function t(t,r,n,a,s){var u=e.call(this,t,r,n,a,s)||this;u._prFrame=-1,u._prSkipFrames=4,u._PR_MAX_FRAMES=16,u._prEnabled=!0,u._needUpdate=0,u._flags={progressive:!1,doubleSided:!1,clipping:!1,shadow:!1,specular:!1,line:!1,smartCulling:!1};var c=u._resourceManager.gl;return u._prRenderTargets=[new o.default("pipeline-pr",u._resourceManager,r.viewport[2],r.viewport[3],{depthFunc:c.LEQUAL,colorFilter:c.NEAREST,colorFormat:c.RGBA8,depthBuffer:0,stencilTest:!!s}),new o.default("pipeline-pr1",u._resourceManager,r.viewport[2],r.viewport[3],{depthTest:!1,colorFilter:c.NEAREST,colorFormat:c.RGBA8,depthBuffer:0,stencilTest:!!s}),new o.default("pipeline-pr2",u._resourceManager,r.viewport[2],r.viewport[3],{depthTest:!1,colorFilter:c.NEAREST,colorFormat:c.RGBA8,depthBuffer:0,stencilTest:!!s})],u._prBlit=new l.default(u._resourceManager,i.default.accumulate),c.isWebGL2||(u._blit=new l.default(u._resourceManager)),u}return d(t,e),t.prototype.destroy=function(){this._prRenderTargets[0].destroy(),this._prRenderTargets[1].destroy(),this._prRenderTargets[2].destroy(),this._prRenderTargets=null,delete this._prRenderTargets,this._prBlit.destroy(),this._prBlit=null,delete this._prBlit,this._resourceManager.gl.isWebGL2||(this._blit.destroy(),this._blit=null,delete this._blit),e.prototype.destroy.call(this)},t.prototype.draw=function(e){if(void 0===e&&(e=!1),!(e=e||!this._prEnabled)&&this._flags.progressive&&0===this._needUpdate)return!1;if(this._scene.background.mode===a.SkyBoxMode.SKYBOX_SOLIDCOLOR&&(this._renderTarget.setClearColor(this._scene.background.color),this._prRenderTargets[0].setClearColor(this._scene.background.color)),!e&&this._flags.progressive){for(;this._prFrame<=this._prSkipFrames;)this._drawFrameProgressively(),this._prFrame++;this._drawFrameProgressively(),this._prFrame++,this._prFrame<=this._PR_MAX_FRAMES&&(this._needUpdate+=1)}else this._drawFrame(this._renderTarget);return e||(this._needUpdate-=1,this._needUpdate<0&&this._onAnimationEnd()),!0},t.prototype.drawHD=function(){for(this._scene.background.mode===a.SkyBoxMode.SKYBOX_SOLIDCOLOR&&this._prRenderTargets[0].setClearColor(this._scene.background.color),this._prFrame=1;this._prFrame<=this._PR_MAX_FRAMES;)this._drawFrameProgressively(),this._prFrame++;this._renderer.present(this._prRenderTargets[1+this._prFrame%2].getFramebuffer()),this._prFrame=-1},t.prototype._drawEffects=function(e){for(var t=0;t<this._sortedEffects.length;t++)this._sortedEffects[t].draw(e,this._prFrame)},t.prototype.resize=function(t,r){e.prototype.resize.call(this,t,r),this._prRenderTargets[0].resize(t,r),this._prRenderTargets[1].resize(t,r),this._prRenderTargets[2].resize(t,r)},t.prototype._drawFrameProgressively=function(){var e=this._camera,t=s.default._4X4[2*(this._prFrame-1)]-.5,r=s.default._4X4[2*(this._prFrame-1)+1]-.5;this._flags.shadow&&(this._shadow.draw(this._prFrame),this._renderer.renderState.invalidateShadow());var n=t/this._camera.viewport[2],i=r/this._camera.viewport[3];e.jitter(n,i),c.mat4.multiply(e.vpMatrix,e.projectMatrix,e.viewMatrix);var a=this._resourceManager.gl;this._drawFrame(this._prRenderTargets[0]),e.jitter(-n,-i),this._renderer.renderState.viewport(e.viewport),this._prBlit.setTexture(this._prRenderTargets[1+this._prFrame%2].getColorBuffer()),this._prBlit.setParameter("uTexture0",this._prRenderTargets[0].getColorBuffer()),this._prBlit.setParameter("uFrameCount",this._prFrame),this._prBlit.render(this._renderer,this._prRenderTargets[2-this._prFrame%2]),a.isWebGL2||16!==this._prFrame||(this._blit.setTexture(this._prRenderTargets[1+this._prFrame%2].getColorBuffer()),this._blit.render(this._renderer,this._renderTarget))},t.prototype.isProgressiveRenderingEnabled=function(){return this._prEnabled},t.prototype.setProgressiveRenderingEnabled=function(e){this._prEnabled=e},t.prototype.setProgressiveRenderingLatency=function(e){this._prSkipFrames>=this._PR_MAX_FRAMES&&(this._prSkipFrames=15),this._prSkipFrames<0&&(this._prSkipFrames=4)},t.prototype._onAnimationStart=function(){this._camera.setBimCullingEnabled(this._flags.smartCulling),this._flags.shadow&&(this._shadow.draw(),this._renderer.renderState.invalidateShadow())},t.prototype._onAnimationEnd=function(){if(this._flags.progressive)this._needUpdate=0;else{if(this._needUpdate+=1.01,this._needUpdate>1&&(this._needUpdate=.9999),this._prFrame<=0&&this._camera.isBimCullingEnabled())return this._camera.setBimCullingEnabled(!1),void this._renderer.invalidate();this._prFrame=1,this._flags.progressive=!0,this._renderer.clear(this._prRenderTargets[1],this._resourceManager.gl.COLOR_BUFFER_BIT),this._renderer.clear(this._prRenderTargets[2],this._resourceManager.gl.COLOR_BUFFER_BIT),this._flags.shadow&&this._renderer.renderState.invalidateShadow()}},t.prototype.setSmartCullingEnabled=function(e){this._flags.smartCulling=e},t.prototype.isSmartCullingEnabled=function(){return this._flags.smartCulling},t.prototype.getRenderTarget=function(){return this._prFrame>this._PR_MAX_FRAMES?this._prRenderTargets[1+this._prFrame%2]:this._renderTarget},t.prototype.refreshRendering=function(e){void 0===e&&(e=1),this._flags.progressive&&(this._flags.progressive=!1,this._onAnimationStart(),this._prFrame=-1),this._needUpdate+=1.01*e,this._needUpdate>20.01&&(this._needUpdate=20.01)},t}(u.default);t.default=h},"./04renderer/pipeline/RenderTarget.ts":function(e,t,r){"use strict";r.r(t);var n=function(){function e(e,t,r,n,i){this.ready=!1,this.always=!1,this._name=e,this._options=i||{},this._framebuffer=null;var a=t.gl;if(this._options.hasOwnProperty("clearColor")||(this._options.clearColor=new Float32Array([1,1,1,0])),this._options.hasOwnProperty("colorMask")||(this._options.colorMask=new Int32Array([1,1,1,1])),this._options.hasOwnProperty("depthTest")||(this._options.depthTest=!0),this._options.hasOwnProperty("depthMask")||(this._options.depthMask=!0),this._options.hasOwnProperty("clearDepth")||(this._options.clearDepth=1),this._options.hasOwnProperty("depthFunc")||(this._options.depthFunc=a.LESS),this._options.hasOwnProperty("blend")||(this._options.blend=!1),this._options.hasOwnProperty("blendFunc")||(this._options.blendFunc=[a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA]),this._options.hasOwnProperty("stencilTest")||(this._options.stencilTest=!1),this._options.hasOwnProperty("stencilOp")||(this._options.stencilOp=[a.KEEP,a.KEEP,a.REPLACE]),this._options.hasOwnProperty("stencilFunc")||(this._options.stencilFunc=[a.ALWAYS,0,-1]),this._options.hasOwnProperty("samples")||(this._options.samples=1),this._options.hasOwnProperty("depthFilter")||(this._options.depthFilter=a.NEAREST),this._framebuffer=t.getFramebuffer(this._name),this._framebuffer.ready)this._framebuffer.resize(r,n);else{var o=-1;i.hasOwnProperty("colorBuffer")&&(o=i.colorBuffer);var s=-1;i.hasOwnProperty("depthBuffer")&&(s=i.depthBuffer);var l,u=i.colorFormat||a.RGBA8,c=i.depthFormat||(a.isWebGL2?a.DEPTH_COMPONENT24:a.DEPTH_COMPONENT);this._options.stencilTest&&(c=a.isWebGL2?a.DEPTH24_STENCIL8:a.DEPTH_STENCIL),l=-1===o?e+"-cbuf":"c"+o.toString()+"-"+r.toString()+"x"+n.toString()+"-"+u+"x"+this._options.samples;var d=t.getTexture(l);if(!d.ready&&(d.create(r,n,u,this._options.colorFilter,this._options.colorWrap,this._options.samples),!d.ready))return d.destroy(),void(this.ready=!1);var h=[d];if(this._options.colorBuffers&&this._options.colorBuffers.length>0)for(var f=0,p=this._options.colorBuffers.length;f<p;f++){var m=this._options.colorBuffers[f];m.colorFormat=m.colorFormat||a.RGBA8,m.samples=m.samples||1,l=null==m.index?e+"-cbuf":"c"+m.index.toString()+"-"+r.toString()+"x"+n.toString()+"-"+m.colorFormat+"x"+m.samples;var v=t.getTexture(l);if(!v.ready&&(v.create(r,n,m.colorFormat,m.colorFilter,m.colorWrap,m.samples),!v.ready))return v.destroy(),void(this.ready=!1);h.push(v)}l=-1===s?e+"-dbuf":"d"+s.toString()+"-"+r.toString()+"x"+n.toString()+"-"+c+"x"+this._options.samples;var _=t.getTexture(l);if(!_.ready&&(_.create(r,n,c,this._options.depthFilter,this._options.depthWrap,this._options.samples),!_.ready))return _.destroy(),void(this.ready=!1);this._framebuffer.create(h,_)}this.ready=this._framebuffer.ready}return e.prototype.destroy=function(){this._name=null,delete this._name,this._framebuffer.destroy(),this._framebuffer=null,delete this._framebuffer,this._options=null,delete this._options},e.prototype.render=function(e){this.ready?(e.useFramebuffer(this._framebuffer),e.blend(this._options.blend),this._options.blend&&e.blendFunc(this._options.blendFunc),e.clearColor(this._options.clearColor),e.colorMask(this._options.colorMask),e.depthTest(this._options.depthTest,this._options.clearDepth,this._options.depthFunc),e.depthMask(this._options.depthMask),e.stencilTest(this._options.stencilTest,this._options.stencilFunc,this._options.stencilOp,this._options.stencilMask)):console.log("render target '"+this._name+"' is not ready.")},e.prototype.resize=function(e,t){this.ready?(this.ready=!1,this._framebuffer.resize(e,t),this.ready=this._framebuffer.ready):console.log("render target '"+this._name+"' is not ready.")},e.prototype.setClearColor=function(e){this.ready?(this._options.clearColor[0]=e[0],this._options.clearColor[1]=e[1],this._options.clearColor[2]=e[2],this._options.clearColor[3]=e[3]):console.log("render target "+this._name+" is not ready.")},e.prototype.getOption=function(e){return this._options[e]},e.prototype.setOption=function(e,t){this._options[e]=t},e.prototype.getColorBuffer=function(e){return this._framebuffer.getColorBuffer(e)},e.prototype.getDepthBuffer=function(){return this._framebuffer.getDepthBuffer()},e.prototype.getWidth=function(){return this._framebuffer.getWidth()},e.prototype.getHeight=function(){return this._framebuffer.getHeight()},e.prototype.getFramebuffer=function(){return this._framebuffer},e.prototype.getName=function(){return this._name},e}();t.default=n},"./04renderer/pipeline/m3d_renderer.js":function(e,t,r){"use strict";r.r(t);var n=r("./04renderer/pipeline/m3d_renderstate.js");t.default=function(){function e(e){this.renderState=new n.default(e.gl),this._resourceManager=e,this._renderTarget=null,this._quadMesh=null,this._quadMesh=e.getMesh("quad"),this._quadMesh.createQuad()}e.prototype.destroy=function(){this.renderState=null};var t=[0,0];return e.prototype.drawDrawables=function(e,r,n,i,a,o,s,l,u,c){if(0===r.length)return 0;(this._renderTarget!==e||this._renderTarget.always)&&(this._renderTarget=e,this._renderTarget.render(this.renderState),this._renderTarget.always&&(this._renderTarget.always=!1));const d=this._resourceManager.gl;if(c?(d.enable(d.CULL_FACE),d.frontFace(c)):d.disable(d.CULL_FACE),this.renderState.viewport(n.viewport),i&&null!==i[0])for(var h=0,f=r.length;h<f;h++){if((m=r[h]).visible&&(t[0]=0,t[1]=m.mesh.length,!n.cull(m,t))){m.faceCamera&&m.update(n);var p=null;p=m.transform.identity?i[0]:i[1],this.renderState.useShader(p,n,o,s,l,null,null),a?(a.absorb(m.material),a.use(p)):m.material.use(p),this.renderState.useMesh(m.mesh),m.render(n,p,t)}}else for(h=0,f=r.length;h<f;h++){var m;(m=r[h]).visible&&(t[0]=0,t[1]=m.mesh.length,n.cull(m,t)||(m.faceCamera&&m.update(n),this.renderState.useShader(m.shader,n,o,s,l,u),a?(a.absorb(m.material),a.use(m.shader)):m.material.use(m.shader),this.renderState.useMesh(m.mesh),m.render(n,m.shader,t)))}},e.prototype.drawLinesWithVertexIds=function(e,r,n,i,a,o){if(0===r.length)return 0;(this._renderTarget!==e||this._renderTarget.always)&&(this._renderTarget=e,this._renderTarget.render(this.renderState),this._renderTarget.always&&(this._renderTarget.always=!1)),this.renderState.viewport(n.viewport);for(var s=0,l=0,u=r.length;l<u;l++){var c=r[l];t[0]=0,t[1]=c.mesh.length;var d=null;d=c.transform.identity?i[0]:i[1],this.renderState.useShader(d,n,o,null,null,null,s),a.absorb(c.material),a.use(d),this.renderState.useMesh(c.mesh),c.render(n,d,t),s+=c.mesh.length}},e.prototype.drawDrawable=function(e,t,r,n,i,a,o,s){(this._renderTarget!==e||this._renderTarget.always)&&(this._renderTarget=e,this._renderTarget.render(this.renderState),this._renderTarget.always&&(this._renderTarget.always=!1));const l=this._resourceManager.gl;o?(l.enable(l.CULL_FACE),l.frontFace(o)):l.disable(l.CULL_FACE),this.renderState.viewport(r.viewport),this.renderState.useShader(t.shader,r,n,i,a),t.material.use(t.shader),t.transform.use(r,t.shader),this.renderState.useMesh(t.mesh),s?t.mesh.renderSub(s[0],s[1]):t.mesh.render()},e.prototype.drawElements=function(e,r,n,i,a,o,s,l,u){if(0===r.length)return;(this._renderTarget!==e||this._renderTarget.always)&&(this._renderTarget=e,this._renderTarget.render(this.renderState),this._renderTarget.always&&(this._renderTarget.always=!1));const c=this._resourceManager.gl;if(s?(c.enable(c.CULL_FACE),c.frontFace(s)):c.disable(c.CULL_FACE),this.renderState.viewport(n.viewport),l&&null!==l[0])for(var d=0,h=r.length;d<h;d++){if((m=(p=r[d]).drawable).visible){m.billboard&&m.update(n);var f=null;f=m.transform.identity?l[0]:l[1],this.renderState.useShader(f,n,i,a,o),u.absorb(m.material),u.use(f),this.renderState.useMesh(m.mesh),t[0]=p.indicesOffset,t[1]=p.indicesCount,m.render(n,f,t)}}else for(d=0,h=r.length;d<h;d++){var p,m;(m=(p=r[d]).drawable).visible&&(m.billboard&&m.update(n),this.renderState.useShader(m.shader,n,i,a,o),u?(u.absorb(m.material),u.use(m.shader)):m.material.use(m.shader),this.renderState.useMesh(m.mesh),t[0]=p.indicesOffset,t[1]=p.indicesCount,m.render(n,m.shader,t))}},e.prototype.drawGizmo=function(e,t,r,n){this.drawDrawable(e,t,r,null,null,null,n)},e.prototype.drawScreen=function(e,t,r){(this._renderTarget!==e||this._renderTarget.always)&&(this._renderTarget=e,this._renderTarget.render(this.renderState),this._renderTarget.always&&(this._renderTarget.always=!1));const n=this._resourceManager.gl;n.disable(n.CULL_FACE),this.renderState.useShader(t),r.use(t),this.renderState.useMesh(this._quadMesh),this._quadMesh.render()},e.prototype.drawDrawablesCustom=function(e,r,n,i,a,o,s,l){if(0===r.length)return;(this._renderTarget!==e||this._renderTarget.always)&&(this._renderTarget=e,this._renderTarget.render(this.renderState),this._renderTarget.always&&(this._renderTarget.always=!1));const u=this._resourceManager.gl;s?u.disable(u.CULL_FACE):(u.enable(u.CULL_FACE),u.frontFace(u.CCW)),this.renderState.viewport(n.viewport);for(var c=0,d=r.length;c<d;c++){var h=r[c];if(h.visible&&!n.cull(h,t)){t[0]=0,t[1]=h.mesh.length;var f=null;f=h.transform.identity?i[0]:i[1],this.renderState.useShader(f,n,o),l(c,a),a.use(f),this.renderState.useMesh(h.mesh),h.render(n,f,t)}}},e.prototype.drawNodesCustom=function(e,r,n,i,a,o,s,l){if(0===r.length)return;(this._renderTarget!==e||this._renderTarget.always)&&(this._renderTarget=e,this._renderTarget.render(this.renderState),this._renderTarget.always&&(this._renderTarget.always=!1));const u=this._resourceManager.gl;s?u.disable(u.CULL_FACE):(u.enable(u.CULL_FACE),u.frontFace(u.CCW)),this.renderState.viewport(n.viewport),r.sort(function(e,t){return e.drawable.name<t.drawable.name});for(var c=0,d=r.length;c<d;c++){var h=r[c],f=h.drawable;f.billboard&&f.update(n);var p=null;p=f.transform.identity?i[0]:i[1],this.renderState.useShader(p,n,o),l(c,a),a.use(p),this.renderState.useMesh(f.mesh),t[0]=h.indicesOffset,t[1]=h.indicesCount,f.render(n,p,t)}},e.prototype.drawSkybox=function(e,t,r){(this._renderTarget!==e||this._renderTarget.always)&&(this._renderTarget=e,this._renderTarget.render(this.renderState),this._renderTarget.always&&(this._renderTarget.always=!1));const n=this._resourceManager.gl;n.disable(n.CULL_FACE),this.renderState.viewport(r.viewport),this.renderState.useShader(t.shader,r),t.material.use(t.shader),t.transform.use(r,t.shader),this.renderState.useMesh(t.mesh),t.mesh.render()},e.prototype.beginFrame=function(){this.renderState.invalidateStates()},e.prototype.endFrame=function(){this.renderState.dirtyBits=0},e.prototype.invalidate=function(){this._renderTarget=null,this.renderState.dirtyBits=n.default.ALL_DIRTY_BIT},e.prototype.clear=function(e,t){(this._renderTarget!==e||this._renderTarget.always)&&(this._renderTarget=e,this._renderTarget.render(this.renderState),this._renderTarget.always&&(this._renderTarget.always=!1)),this._resourceManager.gl.clear(t)},e.prototype.restore=function(){},e.prototype.discard=function(){},e.prototype.present=function(e){const t=this._resourceManager.gl;t.isWebGL2&&this._resourceManager.getFramebuffer("default").copy(e,t.COLOR_BUFFER_BIT)},e}()},"./04renderer/pipeline/m3d_renderstate.js":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/Environment.ts");t.default=function(){new Float32Array(36);function e(e){this.dirtyBits=-1,this._framebuffer=null,this._mesh=null,this._shader=null,this._clearColor=new Float32Array([1,1,1,0]),this._colorMask=new Int32Array([1,1,1,1]),this._depthTest=!0,this._clearDepth=1,this._depthFunc=e.LESS,this._viewport=new Int32Array([0,0,1,1]),this._planesArray=new Float32Array(24),this._blend=!1,this._stencilTest=!1,this._stencilOp=[e.KEEP,e.KEEP,e.REPLACE],this._stencilFunc=[e.ALWAYS,0,-1],this._stencilMask=!1,this._blendFunc=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],this._gl=e,e.enable(e.CULL_FACE),e.frontFace(e.CCW),e.lineWidth(1),e.clearColor(this._clearColor[0],this._clearColor[1],this._clearColor[2],this._clearColor[3]),e.colorMask(this._colorMask[0],this._colorMask[1],this._colorMask[2],this._colorMask[3]),e.clearStencil(0),this._depthTest?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),e.clearDepth(this._clearDepth),e.depthFunc(this._depthFunc),this._blend?e.enable(e.BLEND):e.disable(e.BLEND),e.blendFuncSeparate(this._blendFunc[0],this._blendFunc[1],this._blendFunc[2],this._blendFunc[3]),this._stencilTest?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),e.stencilMask(this._stencilMask),e.stencilFunc(this._stencilFunc[0],this._stencilFunc[1],this._stencilFunc[2]),e.stencilOp(this._stencilOp[0],this._stencilOp[1],this._stencilOp[2]),e.viewport(this._viewport[0],this._viewport[1],this._viewport[2],this._viewport[3])}return e.CLIP_DIRTY_BIT=1,e.LIGHT_DIRTY_BIT=2,e.SHADOW_DIRTY_BIT=4,e.RESERVED_BIT=8,e.PLATTE_DIRTY_BIT=16,e.OTHER_DIRTY_BIT=32,e.ALL_DIRTY_BIT=e.CLIP_DIRTY_BIT|e.LIGHT_DIRTY_BIT|e.SHADOW_DIRTY_BIT|e.RESERVED_BIT|e.PLATTE_DIRTY_BIT|e.OTHER_DIRTY_BIT,e.prototype.useShader=function(t,r,n,i,a,o,s){if(t!==this._shader||this.dirtyBits){if(null!==t){const o=this._gl;var l;if(t!==this._shader&&t.use(),t===this._shader||!a||this.dirtyBits&e.SHADOW_DIRTY_BIT||(this.dirtyBits|=e.SHADOW_DIRTY_BIT),this.dirtyBits&&(this.dirtyBits&e.CLIP_DIRTY_BIT&&this._syncGlobalUniforms(t.reservedUniforms,n),this.dirtyBits&e.LIGHT_DIRTY_BIT&&this._syncLightUniforms(t.reservedUniforms,i,a),this.dirtyBits&e.SHADOW_DIRTY_BIT&&(this._syncShadowUniforms(t.reservedUniforms,a),this.dirtyBits&=~e.SHADOW_DIRTY_BIT),this.dirtyBits&e.PLATTE_DIRTY_BIT&&this._syncPlatteUniforms(t.reservedUniforms)),o.isWebGL2){if(l=t.reservedUniforms.m_uPerFrame){if(r.uniformBlock.set(r.viewMatrix,0),r.uniformBlock.set(r.vpMatrix,16),r.isPerspective())r.uniformBlock[32]=r.eye[0],r.uniformBlock[33]=r.eye[1],r.uniformBlock[34]=r.eye[2],r.uniformBlock[35]=1;else{var u=r.getViewDirection();r.uniformBlock[32]=-u[0],r.uniformBlock[33]=-u[1],r.uniformBlock[34]=-u[2],r.uniformBlock[35]=0}l.upload(r.uniformBlock,o)}(l=t.reservedUniforms.m_uBaseVertexOffset)&&l.upload(s,o)}else if((l=t.reservedUniforms["m_uPerFrame.vpMatrix"])&&l.upload(r.vpMatrix,o),(l=t.reservedUniforms["m_uPerFrame.viewMatrix"])&&l.upload(r.viewMatrix,o),l=t.reservedUniforms["m_uPerFrame.cameraPosition"]){var c;if(r.isPerspective())c=r.eye;else(u=r.getViewDirection())[0]=-u[0],u[1]=-u[1],u[2]=-u[2],c=u;l.upload(c,o)}}this._shader=t}},e.prototype.useFramebuffer=function(e){this._framebuffer!==e&&(this._framebuffer=e,this._framebuffer.use())},e.prototype.useMesh=function(e){this._mesh!==e&&(this._mesh=e,this._mesh.use())},e.prototype.clearColor=function(e){e[0]===this._clearColor[0]&&e[1]===this._clearColor[1]&&e[2]===this._clearColor[2]&&e[3]===this._clearColor[3]||(this._clearColor[0]=e[0],this._clearColor[1]=e[1],this._clearColor[2]=e[2],this._clearColor[3]=e[3],this._gl.clearColor(this._clearColor[0],this._clearColor[1],this._clearColor[2],this._clearColor[3]))},e.prototype.colorMask=function(e){e[0]===this._colorMask[0]&&e[1]===this._colorMask[1]&&e[2]===this._colorMask[2]&&e[3]===this._colorMask[3]||(this._colorMask[0]=e[0],this._colorMask[1]=e[1],this._colorMask[2]=e[2],this._colorMask[3]=e[3],this._gl.colorMask(this._colorMask[0],this._colorMask[1],this._colorMask[2],this._colorMask[3]))},e.prototype.depthTest=function(e,t,r){const n=this._gl;this._depthTest!==e&&(this._depthTest=e,this._depthTest?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST)),this._clearDepth!==t&&(this._clearDepth=t,n.clearDepth(this._clearDepth)),this._depthFunc!==r&&(this._depthFunc=r,n.depthFunc(this._depthFunc))},e.prototype.depthMask=function(e){this._depthMask!==e&&(this._depthMask=e,this._gl.depthMask(this._depthMask))},e.prototype.viewport=function(e){e[0]===this._viewport[0]&&e[1]===this._viewport[1]&&e[2]===this._viewport[2]&&e[3]===this._viewport[3]||(this._viewport[0]=e[0],this._viewport[1]=e[1],this._viewport[2]=e[2],this._viewport[3]=e[3],this._gl.viewport(this._viewport[0],this._viewport[1],this._viewport[2],this._viewport[3]))},e.prototype.blendFunc=function(e){this._blendFunc[0]==e[0]&&this._blendFunc[1]==e[1]&&this._blendFunc[2]==e[2]&&this._blendFunc[3]==e[3]||(this._blendFunc[0]=e[0],this._blendFunc[1]=e[1],this._blendFunc[2]=e[2],this._blendFunc[3]=e[3],this._gl.blendFuncSeparate(this._blendFunc[0],this._blendFunc[1],this._blendFunc[2],this._blendFunc[3]))},e.prototype.blend=function(e){const t=this._gl;this._blend!==e&&(this._blend=e,this._blend?this._gl.enable(t.BLEND):this._gl.disable(t.BLEND))},e.prototype.stencilTest=function(e,t,r,n){const i=this._gl;this._stencil!==e&&(this._stencil=e,this._stencil?i.enable(i.STENCIL_TEST):i.disable(i.STENCIL_TEST)),this._stencilFunc[0]===t[0]&&this._stencilFunc[1]===t[1]&&this._stencilFunc[2]===t[2]||(this._stencilFunc[0]=t[0],this._stencilFunc[1]=t[1],this._stencilFunc[2]=t[2],i.stencilFunc(t[0],t[1],t[2])),this._stencilOp[0]===r[0]&&this._stencilOp[1]===r[1]&&this._stencilOp[2]===r[2]||(this._stencilOp[0]=r[0],this._stencilOp[1]=r[1],this._stencilOp[2]=r[2],i.stencilOp(r[0],r[1],r[2])),this._stencilMask!==n&&(this._stencilMask=n,i.stencilMask(this._stencilMask))},e.prototype.invalidateStates=function(){this._mesh=null,this._framebuffer=null,this._shader=null},e.prototype.invalidateShadow=function(){this.dirtyBits|=e.SHADOW_DIRTY_BIT},e.prototype.invalidateLight=function(){this.dirtyBits|=e.LIGHT_DIRTY_BIT},e.prototype.invalidateClip=function(){this.dirtyBits|=e.CLIP_DIRTY_BIT},e.prototype.invalidatePlatte=function(){this.dirtyBits|=e.PLATTE_DIRTY_BIT},e.prototype.invalidateOther=function(){this.dirtyBits|=e.OTHER_DIRTY_BIT},e.prototype._syncGlobalUniforms=function(e,t){var r;if(t&&(r=e["m_uGlobal.clipPlanes[0]"])){var n=t.getClippingPlanes();this._planesArray[0]=n[0][0],this._planesArray[1]=n[0][1],this._planesArray[2]=n[0][2],this._planesArray[3]=-n[0][3],this._planesArray[4]=n[1][0],this._planesArray[5]=n[1][1],this._planesArray[6]=n[1][2],this._planesArray[7]=-n[1][3],this._planesArray[8]=n[2][0],this._planesArray[9]=n[2][1],this._planesArray[10]=n[2][2],this._planesArray[11]=-n[2][3],this._planesArray[12]=n[3][0],this._planesArray[13]=n[3][1],this._planesArray[14]=n[3][2],this._planesArray[15]=-n[3][3],this._planesArray[16]=n[4][0],this._planesArray[17]=n[4][1],this._planesArray[18]=n[4][2],this._planesArray[19]=-n[4][3],this._planesArray[20]=n[5][0],this._planesArray[21]=n[5][1],this._planesArray[22]=n[5][2],this._planesArray[23]=-n[5][3],r.upload(this._planesArray,this._gl)}},e.prototype._syncLightUniforms=function(e,t){var r;t&&((r=e["m_uSunLight.intensity"])&&r.upload(t.intensity,this._gl),(r=e["m_uSunLight.diffuseMatrix[0]"])&&r.upload(t.envmapMatrix,this._gl),(r=e["m_uSunLight.direction"])&&r.upload(t.direction,this._gl))},e.prototype._syncShadowUniforms=function(e,t){if(t){var r=e.m_uShadowSize;r&&(r.upload(t.size,this._gl),n.Environment.isMobile||((r=e.m_uShadowFine).upload(t.fine?1:0,this._gl),(r=e.m_uShadowSplit).upload(t.shadowSplit,this._gl)));for(var i=0,a=t.shadowMaps.length;i<a;i++)(r=e["m_uShadowTexture"+i])&&(r.upload(6+i,this._gl),t.shadowMaps[i].use(6+i,this._gl)),(r=e["m_uSunLight.shadowMatrix"+i])&&r.upload(t.shadowMatrices[i],this._gl)}},e.prototype._syncPlatteUniforms=function(e){var t=e.m_uPlatteTexture;t&&t.upload(3,this._gl)},e}()},"./04renderer/rendereffects/Blur.ts":function(e,t,r){"use strict";r.r(t);var n=r("./02resource/m3d_shader_library.js"),i=r("./02resource/m3d_shader_source.js"),a=r("./04renderer/pipeline/Blit.ts"),o=function(){function e(e,t,r){this.ready=!1,this.result=null;var o="blurx-"+t,s="blury-"+t;if(!n.default[o]||!n.default[s]){var l,u=[],c=0;for(l=-t;l<=t;++l){var d=l/t*1.5,h=Math.exp(-d*d*r);u.push(h),c+=h}for(l=0;l<2*t+1;++l)u[l]/=c}var f=e.gl;if(!n.default[o]){for(var p="vec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\n{\n    vec4 value = vec4(0);\n    float kernel["+(2*t+1)+"];\n",m=0;m<2*t+1;++m)p+="   kernel["+m+"] = "+u[m]+";\n";p+="    for (int i = -"+t+"; i <= "+t+"; i++)\n",f.isWebGL2?p+="        value += texture(tex, (gl_FragCoord.xy + vec2(float(i), 0.0)) * invResolution) * kernel[i + "+t+"];\n":p+="        value += texture2D(tex, (gl_FragCoord.xy + vec2(float(i), 0.0)) * invResolution) * kernel[i + "+t+"];\n",p+="    return value;\n}\n",n.default[o]=new i.default(o,"blit.vs",["blit.fs",p],{highPrecision:!0,position:!0,uv:!0})}if(!n.default[s]){for(var v="vec4 shade(in sampler2D tex, in vec2 uv, in vec2 invResolution)\n{\n    vec4 value = vec4(0);\n    float kernel["+(2*t+1)+"];\n",_=0;_<2*t+1;++_)v+="   kernel["+_+"] = "+u[_]+";\n";v+="    for (int i = -"+t+"; i <= "+t+"; i++)\n",f.isWebGL2?v+="        value += texture(tex, (gl_FragCoord.xy + vec2(0.0, float(i))) * invResolution) * kernel[i + "+t+"];\n":v+="        value += texture2D(tex, (gl_FragCoord.xy + vec2(0.0, float(i))) * invResolution) * kernel[i + "+t+"];\n",v+="    return value;\n} ",n.default[s]=new i.default(s,"blit.vs",["blit.fs",v],{highPrecision:!0,position:!0,uv:!0})}this._blitx=new a.default(e,n.default[o]),this._blity=new a.default(e,n.default[s]),this.ready=this._blitx.ready&&this._blity.ready}return e.prototype.destroy=function(){this.ready&&(this._blitx.destroy(),this._blitx=null,delete this._blitx,this._blity.destroy(),this._blity=null,delete this._blity,this.ready=!1)},e.prototype.smooth=function(e,t,r,n){if(!this.ready)return console.error("'blur' is not ready."),null;e.getWidth()==t.getWidth()&&e.getHeight()==t.getHeight()||console.error("'blur' requires two render targets in the same size.");var i,a=[e,t],o=0;for(i=0;i<n;++i)this._blitx.setTexture(a[o].getColorBuffer()),this._blitx.render(r,a[1-o]),o=1-o,this._blity.setTexture(a[o].getColorBuffer()),this._blity.render(r,a[1-o]),o=1-o;return this.result=a[o].getColorBuffer(),this.result},e}();t.default=o},"./04renderer/rendereffects/DOF.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./04renderer/rendereffects/RenderEffect.ts"),a=r("./02resource/m3d_shader_library.js"),o=r("./04renderer/pipeline/Blit.ts"),s=r("./04renderer/pipeline/RenderTarget.ts"),l=r("./00utility/Environment.ts"),u=r("./04renderer/pipeline/RenderPass.ts"),c=r("./03scene/materials/MaterialAdhoc.ts"),d=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),h=function(e){function t(t){var r=e.call(this,"DepthOfField",i.RenderEffectPriorityEnum.LOW,t)||this;r._opaques=new u.default(t.getResourceManager(),t.getRenderQueueManager(),!1,{line:!1,transparent:!1,mask:!1,uniqueId:"DepthOfField"}),r._transparents=new u.default(t.getResourceManager(),t.getRenderQueueManager(),!1,{line:!1,transparent:!0,uniqueId:"DepthOfField"}),r._useDepth=!1;var n,o=[],s=r._renderScene.getScene();if(s.clipping.isEnabled()&&o.push("CLIPPING"),s.needRenderDoubleSided()&&o.push("DOUBLESIDED"),s.compressed&&o.push("COMPRESSION"),o.push("ENCODE_DEPTH"),o.push("VISIBILITY"),!(n=t.getResourceManager().getShader("depth",o)).ready){var l=a.default.depth;n.createFromShaderSource(l,o)}r._opaques.setOverridedShader(n),r._transparents.setOverridedShader(n);var d=new c.default("dof-depth",t.getResourceManager());return r._opaques.setOverridedMaterial(d),r._transparents.setOverridedMaterial(d),r}return d(t,e),t.prototype.destroy=function(){this._blit.destroy(),this._blit=null,delete this._blit,this._renderTarget.destroy(),this._renderTarget=null,delete this._renderTarget,e.prototype.destroy.call(this)},t.prototype._initialize=function(){var e=this._renderScene.getResourceManager(),t=e.gl;this._blit=new o.default(e,a.default.blit_dof,l.Environment.isMobile),this._blit.setParameter("maxblur",1),this._blit.setParameter("aperture",1e-5),this._blit.setParameter("focus",5e3);var r=this._renderScene.getCamera();return t.isWebGL2?(l.Environment.isMobile?this._renderTarget=new s.default("DepthOfField-rt",e,r.viewport[2],r.viewport[3],{clearColor:[0,0,0,0],colorFormat:t.RGBA8,colorFilter:t.NEAREST,colorBuffer:3}):this._renderTarget=new s.default("DepthOfField-rt",e,r.viewport[2],r.viewport[3],{clearColor:[0,0,0,0],colorFilter:t.NEAREST,colorBuffer:3}),this._blit.ready&&this._renderTarget.ready):(this._colorBuffer=this._renderScene.getResourceManager().getTexture("DOF-color-buffer"),this._colorBuffer.create(r.viewport[2],r.viewport[3],t.wbFormat,t.NEAREST,t.CLAMP_TO_EDGE),this._blit.ready&&this._colorBuffer.ready)},t.prototype.resize=function(e,t){this._ready&&(this._ready=!1,this._renderScene.getResourceManager().gl.isWebGL2?(this._renderTarget.resize(e,t),this._ready=this._renderTarget.ready):(this._colorBuffer.resize(e,t),this._ready=this._colorBuffer.ready),this._renderTarget2&&this._renderTarget2.ready&&(this._renderTarget2.resize(e,t),this._ready=this._ready&&this._renderTarget2.ready))},t.prototype.doesSupportMobile=function(e){return!0},t.prototype.onSceneChanged=function(e){var t=this;if(this._ready){this._opaques.queue.removeDrawables(),this._transparents.queue.removeDrawables();var r=this._renderScene.getScene();for(var n in r.models){r.models[n].drawables.forEach(function(e){t._opaques.queue.addDrawable(e)||t._transparents.queue.addDrawable(e)})}var i=this._renderScene.getOpaques();this._opaques.setCullFace(i.getCullFace());var a=this._renderScene.getTransparents();this._transparents.setCullFace(a.getCullFace())}},t.prototype.setParameter=function(e,t){switch(e){case"depth":var r=this._renderScene.getResourceManager().getTexture("dof-depth"),n=this._renderScene.getResourceManager().gl,i=t.split("."),a=n.RGB;"png"===i[i.length-1]&&(a=n.RGBA),r.createFromFile(t,a,n.NEAREST,n.CLAMP_TO_EDGE,function(){}),this._blit.setDepthTexture(r);break;case"useDepth":if(this._useDepth=t,!this._renderTarget2&&t){n=this._renderScene.getResourceManager().gl;var o=this._renderScene.getCamera();this._renderTarget2=new s.default("dof-depth",this._renderScene.getResourceManager(),o.viewport[2],o.viewport[3],{clearColor:[0,0,0,1],colorFormat:n.RGBA8,colorFilter:n.NEAREST,colorBuffer:4})}if(this._blit.setParameter("useDepth",t),t)this._blit.setDepthTexture(this._renderTarget2.getColorBuffer());else(r=this._renderScene.getResourceManager().getTexture("dof-depth"))&&r.ready&&this._blit.setDepthTexture(r);break;case"aperture":this._blit.setParameter("aperture",t);break;case"focus":this._blit.setParameter("focus",t)}},t.prototype.addDrawable=function(e){this._opaques.queue.addDrawable(e)||this._transparents.queue.addDrawable(e)},t.prototype.removeDrawable=function(e){this._opaques.queue.removeDrawable(e)||this._transparents.queue.removeDrawable(e)},t.prototype.addCustomDrawable=function(e){this._opaques.queue.addDrawable(e)||this._transparents.queue.addDrawable(e)},t.prototype.removeCustomDrawable=function(e){this._opaques.queue.removeDrawable(e)||this._transparents.queue.addDrawable(e)},t.prototype.draw=function(e,t){if(void 0===t&&(t=-1),this._enabled&&this._ready){var r=this._renderScene.getCamera(),n=this._renderScene.getRenderer(),i=this._renderScene.getScene().getMainLight(),a=this._renderScene.getScene().clipping,o=this._renderScene.getResourceManager().gl;this._useDepth&&(n.clear(this._renderTarget2,o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),this._opaques.render(this._renderTarget2,n,r,null,a,i),this._transparents.render(this._renderTarget2,n,r,null,a,i)),this._blit.setParameter("nearFar",[r._znear,r._zfar]),o.isWebGL2?(this._renderTarget.getFramebuffer().copy(e.getFramebuffer(),o.COLOR_BUFFER_BIT),this._blit.setTexture(this._renderTarget.getColorBuffer())):(this._colorBuffer.copy(),this._blit.setTexture(this._colorBuffer)),this._blit.render(n,e)}},t}(i.RenderEffect);t.default=h},"./04renderer/rendereffects/Glow.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./04renderer/rendereffects/RenderEffect.ts"),a=r("./02resource/m3d_shader_library.js"),o=r("./04renderer/pipeline/Blit.ts"),s=r("./04renderer/pipeline/RenderTarget.ts"),l=r("./00utility/Environment.ts"),u=r("./04renderer/rendereffects/Blur.ts"),c=r("./04renderer/pipeline/RenderPass.ts"),d=r("./04renderer/pipeline/RenderPassTransparent.ts"),h=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),f=function(e){function t(t){var r=e.call(this,"Glow",i.RenderEffectPriorityEnum.NORMAL,t)||this;r._radius=32,r._intensity=.5;var n=[],o=r._renderScene.getScene();if(o.clipping.isEnabled()&&n.push("CLIPPING"),o.needRenderDoubleSided()&&n.push("DOUBLESIDED"),o.compressed&&n.push("COMPRESSION"),l.Environment.isMobile&&n.push("ENCODE_NORMAL"),n.push("VISIBILITY"),r._shader=t.getResourceManager().getShader("plain",n),!r._shader.ready){var s=a.default.plain;r._shader.createFromShaderSource(s,n)}return r._blur=new u.default(t.getResourceManager(),r._radius,3),r._renderPasses=new Map,r._opaques=new c.default(t.getResourceManager(),t.getRenderQueueManager(),!1,{line:!1,transparent:!1,mask:!1,uniqueId:"glow"}),r._transparents=new d.default(t.getResourceManager(),t.getRenderQueueManager(),{line:!1,transparent:!0,uniqueId:"glow"}),r}return h(t,e),t.prototype.destroy=function(){this._blit.destroy(),this._blit=null,delete this._blit,this._renderTarget.destroy(),this._renderTarget=null,delete this._renderTarget,this._renderTarget2.destroy(),this._renderTarget2=null,delete this._renderTarget2,e.prototype.destroy.call(this)},t.prototype._initialize=function(){var e=this._renderScene.getResourceManager(),t=e.gl;if(!t.isWebGL2)return console.warn("Glow effect needs webGL2.0 support!"),this._ready=!1,!1;this._blit=new o.default(e,a.default.blit_glow,l.Environment.isMobile),this._blit.setParameter("offset",0);var r=this._renderScene.getCamera();return l.Environment.isMobile?(this._renderTarget=new s.default("glow-rt",e,r.viewport[2],r.viewport[3],{clearColor:[0,0,0,0],depthFunc:t.LEQUAL,colorFormat:t.RGBA8,colorFilter:t.NEAREST,colorBuffer:0,depthBuffer:0,depthFilter:t.NEAREST,depthTest:!0}),this._renderTarget2=new s.default("glow-blur-rt",e,r.viewport[2],r.viewport[3],{clearColor:[1,1,1,0],colorFormat:t.RGBA8,colorFilter:t.NEAREST,colorBuffer:2})):(this._renderTarget=new s.default("glow-rt",e,r.viewport[2],r.viewport[3],{clearColor:[0,0,0,0],depthFunc:t.LEQUAL,colorFilter:t.NEAREST,colorBuffer:1,depthBuffer:0,depthFilter:t.NEAREST,depthTest:!0}),this._renderTarget2=new s.default("glow-blur-rt",e,r.viewport[2],r.viewport[3],{clearColor:[1,1,1,0],colorFilter:t.NEAREST,colorBuffer:2})),this._blit.ready&&this._renderTarget.ready&&this._renderTarget2},t.prototype.resize=function(e,t){this._ready&&(this._ready=!1,this._renderTarget.resize(e,t),this._renderTarget2.resize(e,t),this._ready=this._renderTarget.ready&&this._renderTarget2.ready)},t.prototype.doesSupportMobile=function(e){return!0},t.prototype.doesSupportWebGL1=function(){return!1},t.prototype.onSceneChanged=function(e){this._ready},t.prototype.setParameter=function(e,t){switch(e){case"intensity":this._intensity=t,this._blit.setParameter("intensity",t)}},t.prototype.addCustomDrawable=function(e){this._opaques.queue.addDrawable(e)||this._transparents.queue.addDrawable(e)},t.prototype.removeCustomDrawable=function(e){this._opaques.queue.removeDrawable(e)||this._transparents.queue.addDrawable(e)},t.prototype.addPawn=function(e){var t=this;e.drawables.forEach(function(e){t._opaques.queue.addDrawable(e)||t._transparents.queue.addDrawable(e)})},t.prototype.removePawn=function(e){var t=this;e.drawables.forEach(function(e){t._opaques.queue.removeDrawable(e)||t._transparents.queue.removeDrawable(e)})},t.prototype.draw=function(e,t){var r=this;if(void 0===t&&(t=-1),this._enabled&&this._ready){var n=this._renderScene.getCamera(),i=this._renderScene.getRenderer(),a=this._renderScene.getScene().getMainLight(),o=this._renderScene.getScene().clipping;this.resize(n.viewport[2],n.viewport[3]);var s=this._renderScene.getResourceManager().gl;t<0&&!e.getOption("stencilTest")&&this._renderTarget.getFramebuffer().copy(e.getFramebuffer(),s.DEPTH_BUFFER_BIT),this._renderScene.getRenderer().clear(this._renderTarget,s.COLOR_BUFFER_BIT),s.enable(s.POLYGON_OFFSET_FILL),s.polygonOffset(-1,-1),this._renderPasses.forEach(function(e){e.renderPass.render(r._renderTarget,i,n,null,o,a)}),this._opaques.render(this._renderTarget,i,n,null,o,a),this._transparents.render(this._renderTarget,i,n,null,o,a),s.disable(s.POLYGON_OFFSET_FILL);var l=this._blur.smooth(this._renderTarget,this._renderTarget2,i,1);this._blit.setTexture(l);var u=this._renderTarget.getOption("blendFunc");e.setOption("blendFunc",[s.ONE,s.ONE,s.ONE,s.ONE]),this._blit.render(i,e,!0),e.setOption("blendFunc",u)}},t}(i.RenderEffect);t.default=f},"./04renderer/rendereffects/GlowBlur.ts":function(e,t,r){"use strict";r.r(t);var n=r("./02resource/m3d_shader_library.js"),i=r("./04renderer/pipeline/Blit.ts"),a=r("./00utility/Environment.ts"),o=function(){function e(e,t){this.ready=!1,this.result=null,this._blitx=new i.default(e,n.default.glow_blur,a.Environment.isMobile),this._blitx.setParameter("radius",t),this._blitx.setParameter("direction",[1,0]),this._blitx.setParameter("weights[0]",[.05,.1,.2,.3,.2,.1,.05]),this._blity=new i.default(e,n.default.glow_blur,a.Environment.isMobile),this._blity.setParameter("radius",t),this._blity.setParameter("direction",[0,1]),this._blity.setParameter("weights[0]",[.05,.1,.2,.3,.2,.1,.05]),this.ready=this._blitx.ready&&this._blity.ready}return e.prototype.destroy=function(){this.ready&&(this._blitx.destroy(),this._blitx=null,delete this._blitx,this._blity.destroy(),this._blity=null,delete this._blity,this.ready=!1)},e.prototype.setRadius=function(e){this._blitx.setParameter("radius",e),this._blity.setParameter("radius",e)},e.prototype.smooth=function(e,t,r){return this.ready?(e.getWidth()==t.getWidth()&&e.getHeight()==t.getHeight()||console.error("'blur' requires two render targets in the same size."),this._blitx.setTexture(e.getColorBuffer()),this._blitx.render(r,t),this._blity.setTexture(t.getColorBuffer()),this._blity.render(r,e),this.result=e.getColorBuffer(),this.result):(console.error("'blur' is not ready."),null)},e}();t.default=o},"./04renderer/rendereffects/Highlight.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./04renderer/rendereffects/RenderEffect.ts"),a=r("./02resource/m3d_shader_library.js"),o=r("./04renderer/pipeline/Blit.ts"),s=r("./04renderer/pipeline/RenderTarget.ts"),l=r("./00utility/Environment.ts"),u=r("./04renderer/rendereffects/GlowBlur.ts"),c=r("./04renderer/pipeline/RenderPass.ts"),d=r("./04renderer/pipeline/RenderPassTransparent.ts"),h=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),f=function(e){function t(t){var r=e.call(this,"Highlight",i.RenderEffectPriorityEnum.NORMAL,t)||this;r._radius=2,r._intensity=.5,r._innerGlow=!1,r._outerGlow=!0;var n=[],o=r._renderScene.getScene();if(o.clipping.isEnabled()&&n.push("CLIPPING"),o.needRenderDoubleSided()&&n.push("DOUBLESIDED"),o.compressed&&n.push("COMPRESSION"),l.Environment.isMobile&&n.push("MOBILE"),n.push("VISIBILITY"),r._shader=t.getResourceManager().getShader("plain",n),!r._shader.ready){var s=a.default.plain;r._shader.createFromShaderSource(s,n)}return r._blur=new u.default(t.getResourceManager(),r._radius),r._renderPasses=new Map,r._opaques=new c.default(t.getResourceManager(),t.getRenderQueueManager(),!1,{line:!1,transparent:!1,mask:!1,uniqueId:"highlight"}),r._transparents=new d.default(t.getResourceManager(),t.getRenderQueueManager(),{line:!1,transparent:!0,uniqueId:"highlight"}),r}return h(t,e),t.prototype.destroy=function(){this._blit.destroy(),this._blit=null,delete this._blit,this._renderTarget.destroy(),this._renderTarget=null,delete this._renderTarget,this._renderTarget2.destroy(),this._renderTarget2=null,delete this._renderTarget2,e.prototype.destroy.call(this)},t.prototype._initialize=function(){var e=this._renderScene.getResourceManager(),t=e.gl;this._blit=new o.default(e,a.default.blit_glow,l.Environment.isMobile);var r=this._renderScene.getCamera();return l.Environment.isMobile?(this._renderTarget=new s.default("highlight-rt",e,r.viewport[2],r.viewport[3],{clearColor:[0,0,0,0],depthFunc:t.LEQUAL,colorFormat:t.RGBA8,colorFilter:t.NEAREST,colorBuffer:0,depthBuffer:0,depthFilter:t.NEAREST,depthTest:!0,stencilTest:!0}),this._renderTarget2=new s.default("highlight-blur-rt",e,r.viewport[2],r.viewport[3],{clearColor:[1,1,1,0],colorFormat:t.RGBA8,colorFilter:t.NEAREST,colorBuffer:2})):(this._renderTarget=new s.default("highlight-rt",e,r.viewport[2],r.viewport[3],{clearColor:[0,0,0,0],depthFunc:t.LEQUAL,colorFilter:t.NEAREST,colorBuffer:1,depthBuffer:0,depthFilter:t.NEAREST,depthTest:!0,stencilTest:!0}),this._renderTarget2=new s.default("highlight-blur-rt",e,r.viewport[2],r.viewport[3],{clearColor:[1,1,1,0],colorFilter:t.NEAREST,colorBuffer:2})),this._blit.setParameter("intensity",this._intensity),this._blit.ready&&this._renderTarget.ready&&this._renderTarget2},t.prototype.resize=function(e,t){this._ready&&(this._ready=!1,this._renderTarget.resize(e,t),this._renderTarget2.resize(e,t),this._ready=this._renderTarget.ready&&this._renderTarget2.ready)},t.prototype.doesSupportMobile=function(e){return!0},t.prototype.onSceneChanged=function(e){this._ready},t.prototype.setParameter=function(e,t){switch(e){case"intensity":this._intensity=t,this._blit.setParameter("intensity",this._intensity);break;case"radius":this._radius=t,this._blur.setRadius(this._radius);break;case"innerGlow":this._innerGlow=!0}},t.prototype.addCustomDrawable=function(e){this._opaques.queue.addDrawable(e)||this._transparents.queue.addDrawable(e)},t.prototype.removeCustomDrawable=function(e){this._opaques.queue.removeDrawable(e)||this._transparents.queue.addDrawable(e)},t.prototype.draw=function(e,t){var r=this;if(void 0===t&&(t=-1),this._enabled&&this._ready){var n=this._renderScene.getCamera(),i=this._renderScene.getRenderer(),a=this._renderScene.getScene().getMainLight(),o=this._renderScene.getScene().clipping;this.resize(n.viewport[2],n.viewport[3]);var s=this._renderScene.getResourceManager().gl;this._renderScene.getRenderer().clear(this._renderTarget,s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT|s.STENCIL_BUFFER_BIT);var l=e.getOption("stencilFunc"),u=e.getOption("stencilOp"),c=e.getOption("colorMask");e.setOption("colorMask",[!1,!1,!1,!1]),e.setOption("stencilFunc",[s.ALWAYS,1,255]),e.setOption("stencilOp",[s.KEEP,s.KEEP,s.REPLACE]),e.setOption("depthTest",!1),e.setOption("stencilMask",!0),e.always=!0,i.clear(e,s.STENCIL_BUFFER_BIT),this._renderPasses.forEach(function(t){t.renderPass.render(r._renderTarget,i,n,null,o,a),t.renderPass.render(e,i,n,null,o,a)}),this._opaques.render(this._renderTarget,i,n,null,o,a),this._transparents.render(this._renderTarget,i,n,null,o,a),this._opaques.render(e,i,n,null,o,a),this._transparents.render(e,i,n,null,o,a);var d=this._blur.smooth(this._renderTarget,this._renderTarget2,i);this._blit.setTexture(d),e.setOption("colorMask",c),e.setOption("depthTest",!0),this._outerGlow&&(this._blit.setParameter("offset",0),e.setOption("stencilFunc",[s.NOTEQUAL,1,255]),this._blit.render(i,e,!0)),this._innerGlow&&(this._blit.setParameter("offset",1),e.setOption("stencilFunc",[s.EQUAL,1,255]),this._blit.render(i,e,!0)),e.setOption("stencilFunc",l),e.setOption("stencilOp",u),e.setOption("stencilMask",!1),e.always=!0}},t}(i.RenderEffect);t.default=f},"./04renderer/rendereffects/OIT.ts":function(e,t,r){"use strict";r.r(t);var n=r("./02resource/m3d_shader_library.js"),i=r("./04renderer/pipeline/RenderTarget.ts"),a=r("./04renderer/pipeline/Blit.ts"),o=function(){function e(e,t){this._resourceManager=e,this._renderQueueManager=t;var r=this._resourceManager.gl;r.isWebGL2||r.drawBuffers?(this._renderTarget=new i.default("woit-accum",e,1,1,{colorFormat:r.RGBA16F,colorBuffer:1,colorBuffers:[{colorFormat:r.R16F,index:2}],blend:!0,depthMask:!0,depthBuffer:0,depthTest:!0,depthFunc:r.LEQUAL,clearColor:[0,0,0,1]}),this._renderQueueSolid=this._renderQueueManager.getQueue({texture:!1,color:!1,line:!1,uniqueId:"OIT"}),this._renderQueueTexture=this._renderQueueManager.getQueue({texture:!0,color:!1,line:!1,uniqueId:"OIT"}),this._renderQueueColor=this._renderQueueManager.getQueue({texture:!1,color:!0,line:!1,uniqueId:"OIT"}),this._blit=new a.default(e,n.default.woit_reveal),this._shadersSolid=new Array(3),this._shadersTexture=new Array(3),this._shadersColor=new Array(3),this._recompileShader(e,["MRT_OIT"]),this._overridedMaterial=null):console.warn("OIT is not supported in WebGL1.0 context")}return e.prototype.destroy=function(){this._blit.destroy(),this._blit=null,delete this._blit,this._renderTarget.destroy(),this._renderTarget=null,delete this._renderTarget;for(var e=0;e<this._shadersSolid.length;e++)this._shadersSolid[e].destroy();this._shadersSolid=null,delete this._shadersSolid;for(e=0;e<this._shadersTexture.length;e++)this._shadersTexture[e].destroy();this._shadersTexture=null,delete this._shadersTexture;for(e=0;e<this._shadersColor.length;e++)this._shadersColor[e].destroy();this._shadersColor=null,delete this._shadersColor},e.prototype._recompileShader=function(e,t){var r={woit_accum_solid:this._shadersSolid,woit_accum_texture:this._shadersTexture,woit_accum_color:this._shadersColor};for(var i in r){r[i][0]=e.getShader(i,t),r[i][0].ready||r[i][0].createFromShaderSource(n.default[i],t);var a=r[i][0],o=a.flags.concat("MODEL_TRANSFORM"),s=this._resourceManager.getShader(a.shaderSource.name,o);s.ready||s.createFromShaderSource(a.shaderSource,o),r[i][1]=s;var l=o.concat("INSTANCING"),u=this._resourceManager.getShader(a.shaderSource.name,l);u.ready||u.createFromShaderSource(a.shaderSource,l),r[i][2]=u}},e.prototype.resize=function(e,t){this._renderTarget.resize(e,t)},e.prototype.addDrawable=function(e){return!(e.material.getTransparent()>.99&&(null===this._overridedMaterial||this._overridedMaterial.getTransparent()>.99))&&(this._renderQueueSolid.addDrawable(e)||this._renderQueueTexture.addDrawable(e)||this._renderQueueColor.addDrawable(e))},e.prototype.removeDrawable=function(e){return this._renderQueueSolid.removeDrawable(e)||this._renderQueueTexture.removeDrawable(e)||this._renderQueueColor.removeDrawable(e)},e.prototype.createQueue=function(e,t){this._renderQueueSolid.create(e,t),this._renderQueueTexture.create(e,t),this._renderQueueColor.create(e,t)},e.prototype.setOverridedMaterial=function(e){this._overridedMaterial=null!==e?e:null},e.prototype.render=function(e,t,r,n,i,a){var o=this._resourceManager.gl;this.resize(r.viewport[2],r.viewport[3]),t.renderState.invalidateLight(),this._renderTarget.setOption("depthMask",!0),t.clear(this._renderTarget,o.COLOR_BUFFER_BIT),this._renderTarget.setOption("blendFunc",[o.ONE,o.ONE,o.ZERO,o.ONE_MINUS_SRC_ALPHA]),this._renderTarget.setOption("blend",!0),this._renderTarget.setOption("depthMask",!1),this._renderTarget.always=!0,this._renderTarget.render(t.renderState),o.clearBufferfv(o.COLOR,1,new Float32Array([0,0,0,1])),this._renderTarget.getFramebuffer().copy(e.getFramebuffer(),o.DEPTH_BUFFER_BIT),t.drawDrawables(this._renderTarget,this._renderQueueSolid.drawables,r,this._shadersSolid,this._overridedMaterial,i,a,n,null),t.drawDrawables(this._renderTarget,this._renderQueueTexture.drawables,r,this._shadersTexture,this._overridedMaterial,i,a,n,null),t.drawDrawables(this._renderTarget,this._renderQueueColor.drawables,r,this._shadersColor,this._overridedMaterial,i,a,n,null),e.setOption("blendFunc",[o.ONE_MINUS_SRC_ALPHA,o.SRC_ALPHA,o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA]),this._blit.setTexture(this._renderTarget.getColorBuffer(0)),this._blit.setParameter("uTexture1",this._renderTarget.getColorBuffer(1)),this._blit.render(t,e,!0)},e}();t.default=o},"./04renderer/rendereffects/RenderEffect.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"RenderEffectPriorityEnum",function(){return n}),r.d(t,"RenderEffect",function(){return s});var n,i=r("./04renderer/pipeline/RenderPassNode.ts"),a=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},o=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e};!function(e){e[e.LOW=0]="LOW",e[e.NORMAL=1]="NORMAL",e[e.HIGH=2]="HIGH",e[e.VERY_HIGH=3]="VERY_HIGH"}(n||(n={}));var s=function(){function e(e,t,r){this.name=e,this.priority=t,this._renderScene=r,this._enabled=!1,this._ready=!1,this._ready=this._initialize(),this._ready||console.warn("RenderEffect "+e+" initialized failed!"),this._renderPasses=new Map}return e.prototype.destroy=function(){this._renderScene=null,delete this._renderScene,delete this._renderPasses,this._renderPasses=null,this._shader&&(this._shader.destroy(),delete this._shader,this._shader=null),this._ready=!1},e.prototype.setEnabled=function(e){this._ready&&(this._enabled=e)},e.prototype.doesSupportMobile=function(e){return!0},e.prototype.doesSupportWebGL1=function(){return!0},e.prototype.isEnabled=function(){return this._enabled},e.prototype.resize=function(e,t){},e.prototype.draw=function(e,t){void 0===t&&(t=-1)},e.prototype._initialize=function(){return!0},e.prototype.setParameter=function(e,t){},e.prototype.getParameter=function(e){},e.prototype.onSceneChanged=function(e){},e.prototype.recompileShader=function(e,t){},e.prototype._getELementNodes=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r],a=i.split("+")[0],o=this._renderScene.getScene().models[a].tree.elements[i];if(o)o.getNodes().forEach(function(e){e.drawable.mesh.isLine()||t.push(e)});else console.warn("Element: +"+i+" can not be found!")}return t},e.prototype.addElements=function(e,t){var r=t.emissiveColor||[1,1,1];if(e){var n=this._getELementNodes(e),a="emissive"+r,s=this._renderScene.getScene().materialManager.createMaterialAdhoc(a);if(s.attachShader(this._shader,this._renderScene.getResourceManager()),s.setDiffuse(r),s.setTransparent(1),this._renderPasses.has(a)){var l=this._renderPasses.get(a),u=l.renderPass,c=l.nodes;n.forEach(function(e){c.has(e)||c.add(e)}),u.setNodes(o(c.keys()))}else{var d=new i.default(this._renderScene.getResourceManager(),this._renderScene.getRenderQueueManager());d.setOverridedShader(this._shader),d.setOverridedMaterial(s),d.setNodes(n),this._renderPasses.set(a,{renderPass:d,nodes:new Set(n)})}}},e.prototype.removeElements=function(e){var t=this,r=this._getELementNodes(e),n=[];this._renderPasses.forEach(function(e,t){e.renderPass.removeNodes(r),r.forEach(function(t){e.nodes.has(t)&&e.nodes.delete(t)}),0===e.renderPass.getNodes().length&&n.push(t)}),n.forEach(function(e){t._renderPasses.delete(e)})},e.prototype.addDrawable=function(e){},e.prototype.removeDrawable=function(e){},e.prototype.addCustomDrawable=function(e){},e.prototype.removeCustomDrawable=function(e){},e.prototype.addPawn=function(e){},e.prototype.removePawn=function(e){},e}()},"./04renderer/rendereffects/RenderEffectLibrary.ts":function(e,t,r){"use strict";r.r(t);var n=r("./04renderer/rendereffects/Sketch.ts"),i=r("./04renderer/rendereffects/SSAO_DAM.ts"),a=r("./04renderer/rendereffects/Glow.ts"),o=r("./04renderer/rendereffects/Highlight.ts"),s=r("./04renderer/rendereffects/DOF.ts"),l={Sketch:n.default,SSAO:i.default,Glow:a.default,Highlight:o.default,DepthOfField:s.default};t.default=l},"./04renderer/rendereffects/SSAO_DAM.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./00utility/Environment.ts"),a=r("./02resource/m3d_shader_library.js"),o=r("./04renderer/pipeline/Blit.ts"),s=r("./04renderer/rendereffects/Blur.ts"),l=r("./04renderer/m3d_samples.js"),u=r("./04renderer/rendereffects/RenderEffect.ts"),c=r("./04renderer/pipeline/RenderPass.ts"),d=r("./04renderer/pipeline/RenderTarget.ts"),h=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),f=function(e){function t(t){return e.call(this,"SSAO",u.RenderEffectPriorityEnum.HIGH,t)||this}return h(t,e),t.prototype._initialize=function(){e.prototype._initialize.call(this),this._radius=4;var t=this._renderScene.getResourceManager(),r=t.gl;if(i.Environment.isMobile?this._rt0=new d.default("ssao-rt0",t,1,1,{depthTest:!0,colorFormat:r.RGBA8,clearColor:[0,0,1,-1e10],colorBuffer:2,colorFilter:r.NEAREST,depthFormat:r.DEPTH24_STENCIL8,depthBuffer:1}):this._rt0=new d.default("ssao-rt0",t,1,1,{depthTest:!0,colorFormat:r.RGBA32F,clearColor:[0,0,1,0],colorFilter:r.NEAREST,depthBuffer:0}),this._rt1=new d.default("ssao-rt1",t,1,1,{colorFormat:r.RGBA8,colorFilter:r.LINEAR,colorBuffer:0,depthBuffer:0,depthTest:!1}),this._rt2=new d.default("ssao-rt2",t,1,1,{colorFormat:r.RGBA8,colorFilter:r.LINEAR,colorBuffer:1,depthBuffer:0,depthTest:!1}),!this._rt0.ready||!this._rt1.ready||!this._rt2.ready)return!1;this._opaques=new c.default(t,this._renderScene.getRenderQueueManager(),!1,{mask:!1,transparent:!1,line:!1,uniqueId:"ssao"}),this._maskeds=new c.default(t,this._renderScene.getRenderQueueManager(),!1,{mask:!0,uniqueId:"ssao"}),this._transparents=null,this._hasTransparents=!1;var n=["VISIBILITY"],l=this._renderScene.getScene();l.clipping.isEnabled()&&n.push("CLIPPING"),l.needRenderDoubleSided()&&n.push("DOUBLESIDED"),l.compressed&&n.push("COMPRESSION"),i.Environment.isMobile&&n.push("ENCODE_NORMAL");var u=t.getShader("normaldepth",n);if(!u.ready){var h=a.default.normaldepth;u.createFromShaderSource(h,n)}this._opaques.setOverridedShader(u),n.push("ALPHATEST");var f=t.getShader("normaldepth",n);if(!f.ready){h=a.default.normaldepth;f.createFromShaderSource(h,n)}return this._maskeds.setOverridedShader(f),this._opaques.setOverridedMaterial(l.materialManager.createMaterialAdhoc("ssao")),this._maskeds.setOverridedMaterial(l.materialManager.createMaterialAdhoc("ssao")),this._blur=new s.default(t,1,.8),this._blit=new o.default(t,a.default.ssao,i.Environment.isMobile),this._blit.setTexture(this._rt0.getColorBuffer()),this._bitblit=new o.default(t),this._blur.ready},t.prototype.doesSupportMobile=function(e){return!0},t.prototype.destroy=function(){this._ready&&(this._rt0.destroy(),this._rt0=null,delete this._rt0,this._rt1.destroy(),this._rt1=null,delete this._rt1,this._rt2.destroy(),this._rt2=null,delete this._rt2,this._blur.destroy(),this._blur=null,delete this._blur,this._blit.destroy(),this._blit=null,delete this._blit,this._maskeds.destroy(),this._maskeds=null,delete this._maskeds,this._transparents&&(this._transparents.destroy(),this._transparents=null,delete this._transparents),this._opaques.destroy(),this._opaques=null,delete this._opaques),e.prototype.destroy.call(this)},t.prototype.recompileShader=function(e,t){this._ready&&(this._opaques.recompileOverridedShader(e,t),this._maskeds.recompileOverridedShader(e,t),this._hasTransparents&&this._transparents.recompileOverridedShader(e,t))},t.prototype.resize=function(e,t){this._ready&&(this._ready=!1,this._rt0.resize(e,t),this._rt1.resize(e,t),this._rt2.resize(e,t),this._ready=this._rt0.ready&&this._rt1.ready&&this._rt2.ready,this._ready||(this._ready=!0,this.destroy()))},t.prototype.draw=function(e,t){if(void 0===t&&(t=-1),this._ready&&this._enabled&&t&&!(t<1)){t-=1;var r=this._renderScene.getRenderer(),n=this._renderScene.getScene().getMainLight(),a=this._renderScene.getScene().clipping,o=this._renderScene.getCamera(),s=this._renderScene.getResourceManager().gl;this.resize(o.viewport[2],o.viewport[3]),r.clear(this._rt0,s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),this._opaques.render(this._rt0,r,o,null,a,n),this._maskeds.render(this._rt0,r,o,null,a,n),this._hasTransparents&&this._transparents.render(this._rt0,r,o,null,a,n),this._blit.setParameter("uNearAxis",o.getNearPlaneSize()),this._blit.setParameter("uIsPerspective",o.isPerspective()),this._blit.setParameter("uTexTransform",[1,0]),this._blit.setParameter("uRadius",this._radius),this._blit.setParameter("uTexSizeAndInv",[this._rt0.getWidth(),this._rt0.getHeight(),1/this._rt0.getWidth(),1/this._rt0.getHeight()]),i.Environment.isMobile&&(this._blit.setParameter("uNearFar",[o._znear,o._zfar]),this._blit.setDepthTexture(this._rt0.getDepthBuffer())),this._blit.setParameter("uFrameCount",t),this._blit.setParameter("SAMPLES[0]",l.default._8x8_2D_LIST[t]),r.renderState.viewport([0,0,this._rt1.getWidth(),this._rt1.getHeight()]),this._blit.render(r,this._rt1);var u=this._blur.smooth(this._rt1,this._rt2,r,1);this._bitblit.setTexture(u),s.blendFuncSeparate(s.ZERO,s.SRC_COLOR,s.ZERO,s.ONE),r.renderState.viewport([0,0,e.getWidth(),e.getHeight()]),this._bitblit.render(r,e,!0,!0),s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA)}},t.prototype.onSceneChanged=function(e){if(this._ready){var t=this._renderScene.getOpaques(),r=this._renderScene.getMaskeds();if(this._opaques.queue.copy(t.queue,e),this._maskeds.queue.copy(r.queue,e),this._opaques.setCullFace(t.getCullFace()),this._maskeds.setCullFace(r.getCullFace()),this._hasTransparents){var n=this._renderScene.getTransparents();this._transparents.queue.copy(n.queue,e),this._transparents.setCullFace(n.getCullFace())}}},t.prototype.setParameter=function(e,t){switch(e){case"radius":this._radius=t;break;case"transparents":if(this._hasTransparents=t,this._hasTransparents&&!this._transparents){this._transparents=new c.default(this._renderScene.getResourceManager(),this._renderScene.getRenderQueueManager(),!1,{transparent:!0,mask:!1});var r=this._opaques.getOverridedShaders();this._transparents.setOverridedShader(r[0]),this._transparents.setOverridedMaterial(this._opaques.getOverridedMaterial());var n=this._renderScene.getTransparents();this._transparents.queue.copy(n.queue,-1),this._transparents.setCullFace(n.getCullFace())}}},t.prototype.addDrawable=function(e){this._opaques.queue.addDrawable(e)||this._maskeds.queue.addDrawable(e),this._hasTransparents&&this._transparents.queue.addDrawable(e)},t.prototype.removeDrawable=function(e){this._opaques.queue.removeDrawable(e)||this._maskeds.queue.removeDrawable(e)||this._transparents.queue.removeDrawable(e)},t}(u.RenderEffect);t.default=f},"./04renderer/rendereffects/Sketch.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./00utility/Environment.ts"),a=r("./02resource/m3d_shader_library.js"),o=r("./04renderer/rendereffects/RenderEffect.ts"),s=r("./04renderer/pipeline/RenderPass.ts"),l=r("./04renderer/pipeline/RenderTarget.ts"),u=r("./04renderer/pipeline/Blit.ts"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),d=function(e){function t(t){return e.call(this,"Sketch",o.RenderEffectPriorityEnum.NORMAL,t)||this}return c(t,e),t.prototype._initialize=function(){e.prototype._initialize.call(this);var t=this._renderScene.getResourceManager();this._color=[0,0,0],this._surfaceColor=[1,1,1,1],this._blit=new u.default(t,a.default.sketch,i.Environment.isMobile);var r=this._renderScene.getScene().materialManager;this._material=r.createMaterialAdhoc("sketch-surface"),this.setParameter("contrast",30),this.setParameter("detail",2),this.setParameter("colored",!1),this.setParameter("color",[0,0,0]),this.setParameter("surfaceColor",[1,1,1,1]);var n=t.gl,o=this._renderScene.getCamera();if(i.Environment.isMobile?this._renderTarget=new l.default("sketch-position",t,o.viewport[2],o.viewport[3],{depthTest:!0,depthFunc:n.LEQUAL,colorFormat:n.RGBA8,clearColor:[.5,.5,1,0],colorFilter:n.NEAREST,depthFormat:n.DEPTH_COMPONENT24,colorBuffer:0,depthBuffer:0}):this._renderTarget=new l.default("sketch-position",t,o.viewport[2],o.viewport[3],{depthTest:!0,colorFormat:n.RGBA32F,clearColor:[0,0,1,0],colorFilter:n.NEAREST,colorBuffer:0,depthBuffer:0}),!this._renderTarget.ready)return this._renderTarget.destroy(),this._renderTarget=null,delete this._renderTarget,this._blit.destroy(),this._blit=null,delete this._blit,!1;this._opaques=new s.default(t,this._renderScene.getRenderQueueManager(),!1,{transparent:!1,mask:!1,line:!1,uniqueId:"sketch"}),this._maskeds=new s.default(t,this._renderScene.getRenderQueueManager(),!1,{mask:!0,uniqueId:"sketch"}),this._transparents=null,this._hasTransparents=!1;var c,d=[],h=this._renderScene.getScene();if(h.clipping.isEnabled()&&d.push("CLIPPING"),h.needRenderDoubleSided()&&d.push("DOUBLESIDED"),h.compressed&&d.push("COMPRESSION"),i.Environment.isMobile&&d.push("ENCODE_NORMAL"),d.push("VISIBILITY"),!(c=t.getShader("normaldepth",d)).ready){var f=a.default.normaldepth;c.createFromShaderSource(f,d)}if(this._opaques.setOverridedShader(c),d.push("ALPHATEST"),!(c=t.getShader("normaldepth",d)).ready){f=a.default.normaldepth;c.createFromShaderSource(f,d)}return this._maskeds.setOverridedShader(c),this._opaques.setOverridedMaterial(r.createMaterialAdhoc("sketch")),this._maskeds.setOverridedMaterial(r.createMaterialAdhoc("sketch")),!0},t.prototype.doesSupportMobile=function(e){return!0},t.prototype.destroy=function(){this._ready&&(this._renderTarget.destroy(),this._renderTarget=null,delete this._renderTarget,this._blit.destroy(),this._blit=null,delete this._blit,this._opaques.destroy(),this._opaques=null,delete this._opaques,this._maskeds.destroy(),this._maskeds=null,delete this._maskeds,this._transparents&&(this._transparents.destroy(),this._transparents=null,delete this._transparents),this._material.destroy(),this._material=null,delete this._material,this._surfaceColor=null,delete this._surfaceColor,this._color=null,delete this._color),e.prototype.destroy.call(this)},t.prototype.resize=function(e,t){this._ready&&(this._ready=!1,this._renderTarget.resize(e,t),this._ready=this._renderTarget.ready,this._ready||(this._ready=!0,this.destroy()))},t.prototype.setParameter=function(e,t){var r=this;switch(e){case"detail":var n=Math.min(Math.max(t,0),99.9)/100;this._threshold=.55*Math.sqrt(1-n*n),this._blit.setParameter("uThreshold",this._threshold),this._detailout=t;break;case"contrast":this._contrast=Math.min(Math.max(t,0),100),this._contrast=this._contrast/100,this._blit.setParameter("uContrast",this._contrast),this._contrastout=t;break;case"colored":this._colored=t,this._colored?this._renderScene.setOverridedMaterials(null):(this._renderScene.setOverridedMaterials(this._material),this._material.setDiffuse(this._surfaceColor),this._material.setTransparent(this._surfaceColor[3]));break;case"color":this._color[0]=t[0],this._color[1]=t[1],this._color[2]=t[2],this._blit.setParameter("uColor",this._color);break;case"surfaceColor":this._surfaceColor[0]=t[0],this._surfaceColor[1]=t[1],this._surfaceColor[2]=t[2],this._surfaceColor[3]=t[3],this._material.setDiffuse(this._surfaceColor),this._material.setTransparent(this._surfaceColor[3]);break;case"transparents":if(this._hasTransparents=t,this._hasTransparents&&!this._transparents){this._transparents=new s.default(this._renderScene.getResourceManager(),this._renderScene.getRenderQueueManager(),!1,{transparent:!0,mask:!1,uniqueId:"sketch"});var i=this._renderScene.getScene();for(var a in i.models){i.models[a].drawables.forEach(function(e){r._transparents.queue.addDrawable(e)})}var o=this._renderScene.getTransparents();this._transparents.setCullFace(o.getCullFace());var l=this._opaques.getOverridedShaders();this._transparents.setOverridedShader(l[0]),this._transparents.setOverridedMaterial(this._opaques.getOverridedMaterial())}}},t.prototype.getParameter=function(e){switch(e){case"detail":return this._detailout;case"contrast":return this._contrastout;case"colored":return this._colored;case"color":return this._color;case"surfaceColor":return this._surfaceColor}},t.prototype.draw=function(e,t){if(void 0===t&&(t=-1),this._ready&&this._enabled){var r=this._renderScene.getCamera(),n=this._renderScene.getRenderer(),a=this._renderScene.getScene().getMainLight(),o=this._renderScene.getScene().clipping;this.resize(r.viewport[2],r.viewport[3]);var s=this._renderScene.getResourceManager().gl;n.clear(this._renderTarget,s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),this._opaques.render(this._renderTarget,n,r,null,o,a),this._maskeds.render(this._renderTarget,n,r,null,o,a),this._hasTransparents&&this._transparents.render(this._renderTarget,n,r,null,o,a),this._blit.setParameter("uNearAxis",r.getNearPlaneSize()),this._blit.setParameter("uIsPerspective",r.isPerspective()),this._blit.setTexture(this._renderTarget.getColorBuffer()),i.Environment.isMobile&&(this._blit.setParameter("uNearFar",[r._znear,r._zfar]),this._blit.setDepthTexture(this._renderTarget.getDepthBuffer())),n.renderState.viewport([0,0,e.getWidth(),e.getHeight()]),this._blit.render(n,e,!0)}},t.prototype.onSceneChanged=function(e){var t=this;if(this._ready){this._opaques.queue.removeDrawables(),this._maskeds.queue.removeDrawables(),this._hasTransparents&&this._transparents.queue.removeDrawables();var r=this._renderScene.getScene();for(var n in r.models){r.models[n].drawables.forEach(function(e){t._opaques.queue.addDrawable(e)||t._maskeds.queue.addDrawable(e),t._hasTransparents&&t._transparents.queue.addDrawable(e)})}var i=this._renderScene.getOpaques(),a=this._renderScene.getMaskeds();if(this._opaques.setCullFace(i.getCullFace()),this._maskeds.setCullFace(a.getCullFace()),this._hasTransparents){var o=this._renderScene.getTransparents();this._transparents.setCullFace(o.getCullFace())}}},t.prototype.recompileShader=function(e,t){this._ready&&(this._opaques.recompileOverridedShader(e,t),this._maskeds.recompileOverridedShader(e,t),this._hasTransparents&&this._transparents.recompileOverridedShader(e,t))},t.prototype.setEnabled=function(t){e.prototype.setEnabled.call(this,t),this._ready&&(this._enabled?this._renderScene.setOverridedMaterials(this._material):this._renderScene.setOverridedMaterials(null))},t.prototype.addDrawable=function(e){this._opaques.queue.addDrawable(e)||this._maskeds.queue.addDrawable(e),this._hasTransparents&&this._transparents.queue.addDrawable(e)},t.prototype.removeDrawable=function(e){this._opaques.queue.removeDrawable(e)||this._maskeds.queue.removeDrawable(e)||this._transparents.queue.removeDrawable(e)},t}(o.RenderEffect);t.default=d},"./04renderer/shadow/Shadow.ts":function(e,t,r){"use strict";r.r(t);var n=r("./03scene/camera/m3d_shadow_camera.js"),i=r("./04renderer/pipeline/RenderPass.ts"),a=r("./02resource/m3d_shader_library.js"),o=function(){function e(e){this._renderScene=e;var t=this._renderScene.getCamera(),r=t.viewport[2],o=t.viewport[3];this.smSize=r<512&&o<512?1024:2048;var s=this._renderScene.getScene(),l=this._renderScene.getResourceManager();this._opaques=new i.default(l,this._renderScene.getRenderQueueManager(),!1,{shadowCaster:!0,mask:!1}),this._maskeds=new i.default(l,this._renderScene.getRenderQueueManager(),!1,{shadowCaster:!0,mask:!0});var u=["VISIBILITY","ONLY_DEPTH"];s.clipping.isEnabled()&&u.push("CLIPPING"),s.compressed&&u.push("COMPRESSION");var c=l.getShader("normaldepth",u);if(!c.ready){var d=a.default.normaldepth;c.createFromShaderSource(d,u)}this._opaques.setOverridedShader(c),u.push("ALPHATEST");var h=l.getShader("normaldepth",u);if(!h.ready){d=a.default.normaldepth;h.createFromShaderSource(d,u)}this._maskeds.setOverridedShader(h),this._opaques.setOverridedMaterial(s.materialManager.createMaterialAdhoc("shadow")),this._maskeds.setOverridedMaterial(s.materialManager.createMaterialAdhoc("shadow")),this._lightCamera=new n.default(this._renderScene.getScene(),[0,0,this.smSize,this.smSize]),this._lightCamera.setCullingEnabled(!0),this._renderTargets=[],this.shadowMaps=[],this.shadowMatrices=[],this.shadowSplit=1e4,this._ready=!0}return e.prototype.destroy=function(){this._opaques.destroy(),this._opaques=null,delete this._opaques,this._maskeds.destroy(),this._maskeds=null,delete this._maskeds,this._lightCamera.destroy(),this._lightCamera=null,delete this._lightCamera,this._renderScene=null,delete this._renderScene;for(var e=0;e<this._renderTargets.length;e++)this._renderTargets[e].destroy();this._renderTargets=null,delete this._renderTargets,this.shadowMatrices=null,delete this.shadowMatrices,this.shadowMaps=null,delete this.shadowMaps},e.prototype.recompileShader=function(e,t){this._opaques.recompileOverridedShader(e,t),this._maskeds.recompileOverridedShader(e,t)},e.prototype.doesSupportMobile=function(e){return!0},e.prototype.draw=function(e){void 0===e&&(e=-1),this._ready},e.prototype.onSceneChanged=function(e){if(this._ready){var t=this._renderScene.getOpaques(),r=this._renderScene.getMaskeds();this._opaques.queue.copy(t.queue,e),this._maskeds.queue.copy(r.queue,e),this._opaques.setCullFace(t.getCullFace()),this._maskeds.setCullFace(r.getCullFace())}},e.prototype.addDrawable=function(e){this._opaques.queue.addDrawable(e)||this._maskeds.queue.addDrawable(e)},e.prototype.removeDrawable=function(e){this._opaques.queue.removeDrawable(e)||this._maskeds.queue.removeDrawable(e)},e}();t.default=o},"./04renderer/shadow/ShadowCSM.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/camera/m3d_shadow_camera.js"),a=r("./03scene/camera/m3d_base_camera.js"),o=r("./04renderer/pipeline/RenderTarget.ts"),s=r("./04renderer/shadow/Shadow.ts"),l=r("./04renderer/m3d_samples.js"),u=r("./04renderer/shadow/ShadowHelper.ts"),c=r("./glMatrix.js"),d=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),h=function(e){function t(t){var r=e.call(this,t)||this;if(!r._ready)return r;r._partitions=2,r.smSize=r.smSize/r._partitions;var n=r._renderScene.getResourceManager();r.shadowMaps=new Array(r._partitions),r.shadowMatrices=new Array(r._partitions),r._renderTargets=new Array(r._partitions),r._lightCameras=new Array(r._partitions),r._sceneCameras=new Array(r._partitions);for(var s=n.gl,l=[0,0,r.smSize,r.smSize],u=0;u<r._partitions;u++)r._renderTargets[u]=new o.default("shadowcsm-depth"+u,n,r.smSize,r.smSize,{colorMask:[0,0,0,0],colorFormat:s.R8,colorBuffer:0,depthFilter:s.NEAREST,depthFormat:s.DEPTH_COMPONENT24,depthBuffer:u}),r.shadowMaps[u]=r._renderTargets[u].getDepthBuffer(),r.shadowMatrices[u]=c.mat4.create(),r._ready=r._ready&&r._renderTargets[u].ready,r._lightCameras[u]=new i.default(t.getScene(),l),r._sceneCameras[u]=new a.default(l);return r}return d(t,e),t.prototype.destroy=function(){this._lightCameras=null,delete this._lightCameras,this._sceneCameras=null,delete this._sceneCameras,e.prototype.destroy.call(this)},t.prototype.draw=function(e){if(void 0===e&&(e=-1),this._ready){if(1===e){for(var t=this._renderScene.getCamera(),r=this._renderScene.getScene(),n=t.split(this._partitions,this._sceneCameras),i=0;i<this._partitions;i++)Object(u.ComputeShadowCameraTight)(r,this._sceneCameras[i],this._lightCameras[i]),this._lightCameras[i].setViewport([0,0,this.smSize,this.smSize]);this.shadowSplit=.5*(-t.projectMatrix[10]+t.projectMatrix[14]/n[0]+1),this._renderScene.getRenderer().renderState.invalidateClip()}e-=1;var a=l.default._4x4_2D[2*e]-.5,o=l.default._4x4_2D[2*e+1]-.5,s=this._renderScene.getRenderer(),d=this._renderScene.getScene().getMainLight(),h=this._renderScene.getScene().clipping,f=this._renderScene.getResourceManager().gl;for(i=0;i<this._partitions;i++)this._lightCameras[i].jitter(a/this.smSize,o/this.smSize),s.renderState.invalidateOther(),s.clear(this._renderTargets[i],f.DEPTH_BUFFER_BIT),this._opaques.render(this._renderTargets[i],s,this._lightCameras[i],null,h,d),this._maskeds.render(this._renderTargets[i],s,this._lightCameras[i],null,h,d),c.mat4.copy(this.shadowMatrices[i],this._lightCameras[i].vpMatrix),this._lightCameras[i].jitter(-a/this.smSize,-o/this.smSize)}},t}(s.default);t.default=h},"./04renderer/shadow/ShadowController.ts":function(e,t,r){"use strict";r.r(t);var n=r("./04renderer/shadow/ShadowESM.ts"),i=r("./04renderer/shadow/ShadowCSM.ts"),a=r("./00utility/Environment.ts"),o=function(){function e(e){this.fine=!1,this._enabled=!1,this._coarseShadow=new n.default(e),a.Environment.isMobile||(this._fineShadow=new i.default(e)),this.size=this._coarseShadow.smSize,this.shadowSplit=this._coarseShadow.shadowSplit}return e.prototype.destroy=function(){this.shadowMaps=null,delete this.shadowMaps,this.shadowMatrices=null,delete this.shadowMatrices,a.Environment.isMobile||(this._fineShadow.destroy(),this._fineShadow=null,delete this._fineShadow),this._coarseShadow.destroy(),this._coarseShadow=null,delete this._coarseShadow},e.prototype.recompileShader=function(e,t){a.Environment.isMobile||this._fineShadow.recompileShader(e,t),this._coarseShadow.recompileShader(e,t)},e.prototype.onSceneChanged=function(e){a.Environment.isMobile||this._fineShadow.onSceneChanged(e),this._coarseShadow.onSceneChanged(e)},e.prototype.draw=function(e){void 0===e&&(e=-1),this._enabled&&(this.fine=e>0&&!a.Environment.isMobile,this.fine?(this._fineShadow.draw(e),this.shadowMaps=this._fineShadow.shadowMaps,this.shadowMatrices=this._fineShadow.shadowMatrices,this.size=this._fineShadow.smSize,this.shadowSplit=this._fineShadow.shadowSplit):(this._coarseShadow.draw(e),this.shadowMaps=this._coarseShadow.shadowMaps,this.shadowMatrices=this._coarseShadow.shadowMatrices,this.size=this._coarseShadow.smSize,this.shadowSplit=this._coarseShadow.shadowSplit))},e.prototype.setEnabled=function(e){this._enabled=e},e.prototype.addDrawalbe=function(e){this._fineShadow&&this._fineShadow.addDrawable(e),this._coarseShadow.addDrawable(e)},e.prototype.removeDrawable=function(e){this._fineShadow&&this._fineShadow.removeDrawable(e),this._coarseShadow.removeDrawable(e)},e}();t.default=o},"./04renderer/shadow/ShadowESM.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./00utility/Environment.ts"),a=r("./02resource/m3d_shader_library.js"),o=r("./04renderer/pipeline/RenderTarget.ts"),s=r("./04renderer/pipeline/Blit.ts"),l=r("./04renderer/shadow/Shadow.ts"),u=r("./04renderer/shadow/ShadowHelper.ts"),c=r("./glMatrix.js"),d=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),h=function(e){function t(t){var r=e.call(this,t)||this;if(!r._ready)return r;r.shadowMatrices.push(c.mat4.create());var n=r._renderScene.getResourceManager(),l=n.gl;return r._renderTargets.push(new o.default("shadowesm-depth",n,r.smSize,r.smSize,{colorMask:[0,0,0,0],colorFormat:l.isWebGL2?l.R8:l.RGB,colorBuffer:0,depthFilter:l.NEAREST,depthFormat:l.DEPTH_COMPONENT24,depthBuffer:0})),i.Environment.isMobile?(r.shadowMaps.push(r._renderTargets[0].getDepthBuffer()),r._ready=r._renderTargets[0].ready):(r._renderTargets.push(new o.default("shadowesm-smooth",n,r.smSize,r.smSize,{colorFormat:l.isWebGL2?l.R32F:"firefox"===i.Environment.browserName?l.RGBA32F:l.RGB32F,colorFilter:l.NEAREST,depthTest:!1,depthBufer:0})),r._blit=new s.default(n,a.default.shadowsmooth),r._blit.setTexture(r._renderTargets[0].getDepthBuffer()),r.shadowMaps.push(r._renderTargets[1].getColorBuffer()),r._ready=r._blit.ready&&r._renderTargets[0].ready&&r._renderTargets[1].ready),r}return d(t,e),t.prototype.destroy=function(){this._blit.destroy(),this._blit=null,delete this._blit,e.prototype.destroy.call(this)},t.prototype.draw=function(e){if(void 0===e&&(e=-1),this._ready){var t=this._renderScene.getScene();Object(u.ComputeShadowCamera)(t,this._lightCamera),c.mat4.copy(this.shadowMatrices[0],this._lightCamera.vpMatrix),this._lightCamera.setBimCullingEnabled(this._renderScene.getCamera().isBimCullingEnabled());var r=this._renderScene.getRenderer(),n=this._renderScene.getScene().getMainLight(),a=this._renderScene.getScene().clipping,o=this._renderScene.getResourceManager().gl;r.renderState.invalidateClip(),r.clear(this._renderTargets[0],o.DEPTH_BUFFER_BIT),this._opaques.render(this._renderTargets[0],r,this._lightCamera,null,a,n),this._maskeds.render(this._renderTargets[0],r,this._lightCamera,null,a,n),i.Environment.isMobile||this._blit.render(r,this._renderTargets[1])}},t}(l.default);t.default=h},"./04renderer/shadow/ShadowHelper.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"ComputeShadowCameraTight",function(){return a}),r.d(t,"ComputeShadowCamera",function(){return o});var n=r("./00utility/m3d_math.js"),i=r("./glMatrix.js");function a(e,t,r){var a=n.default.frustum.createFromMatrix(t.vpMatrix),o=n.default.intersect.aabb_frustum(e.clipping.get(),a),s=i.vec3.create();i.vec3.copy(s,e.getMainLight().direction);Math.min(.005+e.radius/t._distance*.01,.01);var l=i.vec3.create();Math.abs(s[0])>Math.abs(s[2])?i.vec3.set(l,-s[1],s[0],0):i.vec3.set(l,0,-s[2],s[1]),i.vec3.normalize(l,l);var u=i.vec3.create();i.vec3.cross(u,s,l),i.vec3.normalize(u,u),i.vec3.normalize(s,s),r.createFromLightTight(s,e.clipping.get(),o),r._cull.update()}function o(e,t){t.createFromLight(e.getMainLight().direction,e.clipping.get()),t._cull.update()}},"./04renderer/visualize/AnimatingRibbon.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"Ribbon",function(){return d});var n,i=r("./02resource/Texture.ts"),a=r("./02resource/m3d_shader_library.js"),o=r("./03scene/drawables/Drawable.ts"),s=r("./04renderer/visualize/Visualize.ts"),l=r("./03scene/materials/MaterialAnimatingRibbon.ts"),u=r("./glMatrix.js"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),d=function(){function e(e,t,r,n,i,a){this._mesh=e.getMesh("ribbon-"+t),this._mesh.createQuad(!0,!0,!1,!0),this._resourceManager=e,this._points=r,this._width=n,this._unitLength=i,this._speed=a,this.update()}return e.prototype.setWidth=function(e){this._width=e},e.prototype.setPoints=function(e){this._points=e},e.prototype.setUnitLength=function(e){this._unitLength=e},e.prototype.setSpeed=function(e){this._speed=e},e.prototype.update=function(){var e=2*this._points.length*12,t=new Float32Array(e),r=null;r=e/3>65536?new Uint32Array(6*(this._points.length-1)):new Uint16Array(6*(this._points.length-1));for(var n=0,i=0,s=0;s<this._points.length;s++){var c=this._points[s],d=this._points[Math.max(0,s-1)],h=this._points[Math.min(this._points.length-1,s+1)],f=[(n+=u.vec3.distance(c,d))/this._unitLength,0];t[i+0]=c[0],t[i+1]=c[1],t[i+2]=c[2],t[i+3]=d[0],t[i+4]=d[1],t[i+5]=d[2],t[i+6]=f[0],t[i+7]=f[1],t[i+8]=h[0],t[i+9]=h[1],t[i+10]=h[2],t[i+11]=1,t[(i+=12)+0]=c[0],t[i+1]=c[1],t[i+2]=c[2],t[i+3]=d[0],t[i+4]=d[1],t[i+5]=d[2],t[i+6]=f[0],t[i+7]=f[1],t[i+8]=h[0],t[i+9]=h[1],t[i+10]=h[2],t[i+11]=-1,i+=12}var p=0;for(s=1;s<this._points.length;s++)r[p+0]=2*(s-1),r[p+1]=2*(s-1)+1,r[p+2]=2*(s-1)+2,r[p+3]=2*(s-1)+2,r[p+4]=2*(s-1)+1,r[p+5]=2*(s-1)+3,p+=6;var m=this._resourceManager.gl;this._mesh.update(t,r,r instanceof Uint32Array?m.UNSIGNED_INT:m.UNSIGNED_SHORT);var v=this._resourceManager.getShader("animating-ribbon",["MODEL_TRANSFORM"]);if(!v.ready){var _=a.default["animating-ribbon"];if(v.createFromShaderSource(_,["MODEL_TRANSFORM"]),!v.ready)throw new Error("Error at creating shader 'animating-ribbon'!")}this.material=new l.default("ribbon-"+this.id,this._resourceManager),this.material.attachShader(v,this._resourceManager),this.material.setSpeed(this._speed),this.material.setWidth(this._width),this.drawable=new o.default(this._mesh,v,this.material,null,new Float32Array([-1/0,-1/0,-1/0,1/0,1/0,1/0]))},e}(),h=function(e){function t(t){var r=e.call(this,"AnimatingRibbon",t)||this;return r._milliSeconds=0,r._width=4,r._unitLength=10,r._speed=1,r._ribbons=[],r._platteTexture=null,r._resourceManager=t.getResourceManager(),r._lastDate=new Date,r}return c(t,e),t.prototype.destroy=function(){this._resourceManager=null,delete this._resourceManager,e.prototype.destroy.call(this)},t.prototype.doesSupportMobile=function(e){return!0},t.prototype._initialize=function(){return!0},t.prototype.setParameter=function(e,t){var r=this,n=!1;switch(e){case"width":this._width=t/2,this._ribbons.forEach(function(e){e.material.setWidth(r._width)});break;case"paletteTexture":case"platteTexture":if(t instanceof i.default)this._platteTexture=t;else{this._platteTexture=this._resourceManager.getTexture(this.name+"-animatingRibbon-platte");var a=this._resourceManager.gl,o=a.RGB,s=t.split(".");"png"===s[s.length-1]&&(o=a.RGBA),this._platteTexture.createFromFile(t,o,a.LINEAR,a.REPEAT,function(){})}this._ribbons.forEach(function(e){e.material.setPlatteTexture(r._platteTexture)});break;case"speed":this._speed=t,this._ribbons.forEach(function(e){e.material.setSpeed(r._speed)});break;case"unitLength":case"unitLenght":this._unitLength=t,n=!0}n&&this._updateGeometry()},t.prototype.resize=function(e,t){this._ribbons.forEach(function(r){r.material.parameters.uTexSizeAndInv.value=[e,t,1/e,1/t]})},t.prototype.addRibbon=function(e){if(!(e.length<2)){var t=new d(this._resourceManager,this.name+this._ribbons.length,e,this._width,this._unitLength,this._speed),r=this._renderScene.getRenderTarget();t.material.parameters.uTexSizeAndInv.value=[r.getWidth(),r.getHeight(),1/r.getWidth(),1/r.getHeight()],this._platteTexture&&t.material.setPlatteTexture(this._platteTexture),this._ribbons.push(t),this._drawables.push(t.drawable),this._renderScene.addEffect("Glow");var n=this._renderScene.getEffect("Glow");return n.addCustomDrawable(t.drawable),n.setEnabled(!0),t}console.warn("points length must be greater than 1!")},t.prototype.removeRibbon=function(e){var t=this._ribbons.findIndex(function(t){return t===e});if(-1===t)return console.warn("can not find ribbon."),void console.warn(e);if(this._ribbons.splice(t,1),-1!==(t=this._drawables.findIndex(function(t){return e.drawable===t}))){var r=this._renderScene.getEffect("Glow");r&&r.removeCustomDrawable(e.drawable),e.drawable.destroy(),this._drawables.splice(t,1)}else console.warn("no drawable attached to this ribbon found.")},t.prototype._updateGeometry=function(){var e=this;this._ribbons.forEach(function(t){t.setWidth(e._width),t.setUnitLength(e._unitLength),t.update()})},t.prototype.draw=function(e,t,r,n,i,a,o){var s=this;if(void 0===o&&(o=-1),this._enabled)if(this._platteTexture.ready){var l=new Date;this._milliSeconds+=l.getTime()-this._lastDate.getTime(),this._milliSeconds>36e5&&(this._milliSeconds=0),this._lastDate=l,this._ribbons.forEach(function(e){e.material.setTime(s._milliSeconds)}),e.drawDrawables(a,this._drawables,t,null,null,r,n,i,null,null)}else console.warn("cannot visualize animation ribbon without a platte texture!")},t}(s.default);t.default=h},"./04renderer/visualize/AnimatingStripe.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"Stripe",function(){return d});var n,i=r("./02resource/Texture.ts"),a=r("./02resource/m3d_shader_library.js"),o=r("./03scene/drawables/Drawable.ts"),s=r("./04renderer/visualize/Visualize.ts"),l=r("./03scene/materials/MaterialAnimatingRibbon.ts"),u=r("./glMatrix.js"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),d=function(){function e(e,t,r,n,i,a,o){void 0===o&&(o=[0,0,1]),this._mesh=e.getMesh("stripe-"+t),this._mesh.createQuad(!0),this._resourceManager=e,this._points=r,this._width=n,this._unitLength=i,this._speed=a,this._normal=o,this.update()}return e.prototype.setWidth=function(e){this._width=e},e.prototype.setPoints=function(e){this._points=e},e.prototype.setUnitLength=function(e){this._unitLength=e},e.prototype.setSpeed=function(e){this._speed=e},e.prototype.update=function(){var e=2*this._points.length*5,t=new Float32Array(e),r=null;r=e/3>65536?new Uint32Array(6*(this._points.length-1)):new Uint16Array(6*(this._points.length-1));var n=0,i=0,s=u.vec3.create();u.vec3.sub(s,this._points[1],this._points[0]);for(var c=u.vec3.create(),d=u.vec3.create(),h=0;h<this._points.length;h++){var f=this._points[h],p=this._points[Math.max(0,h-1)],m=(n+=u.vec3.distance(f,p))/this._unitLength;u.vec3.cross(c,s,this._normal),u.vec3.normalize(c,c),u.vec3.scaleAndAdd(d,this._points[h],c,.5*this._width),t[i+0]=d[0],t[i+1]=d[1],t[i+2]=d[2],t[i+3]=m,t[i+4]=0,u.vec3.scaleAndAdd(d,this._points[h],c,.5*-this._width),t[i+5]=d[0],t[i+6]=d[1],t[i+7]=d[2],t[i+8]=m,t[i+9]=1,h<this._points.length-2?(u.vec3.sub(d,this._points[h+1],this._points[h]),u.vec3.normalize(d,d),u.vec3.sub(s,this._points[h+2],this._points[h+1]),u.vec3.normalize(s,s),u.vec3.add(s,s,d)):this._points[h+1]&&u.vec3.sub(s,this._points[h+1],this._points[h]),i+=10}var v=0;for(h=0;h<this._points.length-1;h++)r[v+0]=2*h,r[v+1]=2*h+2,r[v+2]=2*h+1,r[v+3]=2*h+1,r[v+4]=2*h+2,r[v+5]=2*h+3,v+=6;var _=this._resourceManager.gl;this._mesh.update(t,r,r instanceof Uint16Array?_.UNSIGNED_SHORT:_.UNSIGNED_INT);var g=this._resourceManager.getShader("animating-stripe",["MODEL_TRANSFORM"]);if(!g.ready){var y=a.default["animating-stripe"];if(g.createFromShaderSource(y,["MODEL_TRANSFORM"]),!g.ready)throw new Error("Error at creating shader 'animating-stripe'!")}this.material=new l.default("stripe-"+this.id,this._resourceManager),this.material.attachShader(g,this._resourceManager),this.material.setSpeed(this._speed),this.drawable=new o.default(this._mesh,g,this.material,null,new Float32Array([-1/0,-1/0,-1/0,1/0,1/0,1/0]))},e}(),h=function(e){function t(t){var r=e.call(this,"AnimatingStripe",t)||this;return r._milliSeconds=0,r._width=4,r._unitLength=10,r._speed=1,r._stripes=[],r._platteTexture=null,r._resourceManager=t.getResourceManager(),r._lastDate=new Date,r}return c(t,e),t.prototype.destroy=function(){this._resourceManager=null,delete this._resourceManager,e.prototype.destroy.call(this)},t.prototype.doesSupportMobile=function(e){return!0},t.prototype._initialize=function(){return!0},t.prototype.setParameter=function(e,t){var r=this,n=!1;switch(e){case"width":this._width=t;break;case"paletteTexture":case"platteTexture":if(t instanceof i.default)this._platteTexture=t;else{this._platteTexture=this._resourceManager.getTexture(this.name+"-animatingStripe-platte");var a=this._resourceManager.gl,o=a.RGB,s=t.split(".");"png"===s[s.length-1]&&(o=a.RGBA),this._platteTexture.createFromFile(t,o,a.LINEAR,a.REPEAT,function(){})}this._stripes.forEach(function(e){e.material.setPlatteTexture(r._platteTexture)});break;case"speed":this._speed=t,this._stripes.forEach(function(e){e.material.setSpeed(r._speed)});break;case"unitLength":case"unitLenght":this._unitLength=t,n=!0}n&&this._updateGeometry()},t.prototype.resize=function(e,t){},t.prototype.addStripe=function(e){if(!(e.length<2)){var t=new d(this._resourceManager,this.name+this._stripes.length,e,this._width,this._unitLength,this._speed);this._platteTexture&&t.material.setPlatteTexture(this._platteTexture),this._stripes.push(t),this._drawables.push(t.drawable),this._renderScene.addEffect("Glow");var r=this._renderScene.getEffect("Glow");return r.addCustomDrawable(t.drawable),r.setEnabled(!0),t}console.warn("points length must be greater than 1!")},t.prototype.removeStripe=function(e){var t=this._stripes.findIndex(function(t){return t===e});if(-1===t)return console.warn("can not find stripe."),void console.warn(e);if(this._stripes.splice(t,1),-1!==(t=this._drawables.findIndex(function(t){return e.drawable===t}))){var r=this._renderScene.getEffect("Glow");r&&r.removeCustomDrawable(e.drawable),e.drawable.destroy(),this._drawables.splice(t,1)}else console.warn("no drawable attached to this stripe found.")},t.prototype._updateGeometry=function(){var e=this;this._stripes.forEach(function(t){t.setWidth(e._width),t.setUnitLength(e._unitLength),t.update()})},t.prototype.draw=function(e,t,r,n,i,a,o){var s=this;if(void 0===o&&(o=-1),this._enabled)if(this._platteTexture.ready){var l=new Date;this._milliSeconds+=l.getTime()-this._lastDate.getTime(),this._milliSeconds>36e5&&(this._milliSeconds=0),this._lastDate=l,this._stripes.forEach(function(e){e.material.setTime(s._milliSeconds)}),e.drawDrawables(a,this._drawables,t,null,null,r,n,i,null,null)}else console.warn("cannot visualize animation stripe without a platte texture!")},t}(s.default);t.default=h},"./04renderer/visualize/BarChart.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./02resource/m3d_shader_library.js"),a=r("./03scene/drawables/Drawable.ts"),o=r("./03scene/materials/MaterialBarChart.ts"),s=r("./04renderer/visualize/Visualize.ts"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(e){function t(t){var r=e.call(this,"BarChart",t)||this;return r._resourceManager=t.getResourceManager(),r._xres=32,r._yres=32,r._thickness=1,r._showLines=!0,r._lineColor=[.2,.2,.2],r._dataTexture=null,r._platteTexture=r._resourceManager.getTexture(r.name+"-barchart-platte"),r}return l(t,e),t.prototype.destroy=function(){this._resourceManager=null,delete this._resourceManager,this._xres=null,delete this._xres,this._yres=null,delete this._yres,this._thickness=null,delete this._thickness,this._showLines=null,delete this._showLines,this._lineColor=null,delete this._lineColor,this._platteTexture.destroy(),this._platteTexture=null,delete this._platteTexture,e.prototype.destroy.call(this)},t.prototype._initialize=function(){return!!this._resourceManager.gl.isWebGL2||(console.warn("BarChart is not supported in webgl1.0 context!"),!1)},t.prototype.setParameter=function(e,t){var r=!1,n=this._resourceManager.gl;switch(e){case"xres":this._xres=t,r=!0;break;case"yres":this._yres=t,r=!0;break;case"thickness":this._thickness=2*t;break;case"showLines":this._showLines=t;break;case"lineColor":this._lineColor=t;break;case"dataTexture":this._dataTexture=t;break;case"paletteImage":case"platteImage":this._platteTexture.createFromFile(t,n.RGBA,n.LINEAR,n.CLAMP_TO_EDGE,null)}r&&this._updateGeometry()},t.prototype._updateGeometry=function(){this._resourceManager.hasMesh(this.name+"-barchart")&&this._resourceManager.getMesh(this.name+"-barchart").destroy(!0);var e=this._resourceManager.getMesh(this.name+"-barchart");(e.createSolidCubeField(this._xres,this._yres),this._resourceManager.hasMesh(this.name+"-barchart-wireframe"))&&this._resourceManager.getMesh(this.name+"-barchart-wireframe").destroy(!0);var t=this._resourceManager.getMesh(this.name+"-barchart-wireframe");if(t.createWiredCubeField(this._xres,this._yres),this._drawables.length<1){var r="barchart",n=this._resourceManager.getShader(r,["MODEL_TRANSFORM"]);if(!n.ready){var s=i.default[r];if(n.createFromShaderSource(s,["MODEL_TRANSFORM"]),!n.ready)throw new Error("Error at creating shader '"+r+"'!")}r="barchart_wireframe";var l=this._resourceManager.getShader(r,["MODEL_TRANSFORM"]);if(!l.ready){s=i.default[r];if(l.createFromShaderSource(s,["MODEL_TRANSFORM"]),!l.ready)throw new Error("Error at create shader '"+r+"'!")}var u=new o.default("barchart",this._resourceManager);u.attachShader(n,this._resourceManager);var c=new a.default(e,n,u,null,new Float32Array([-1/0,-1/0,-1/0,1/0,1/0,1/0]));this._drawables.push(c);var d=new o.default("barchart-wireframe",this._resourceManager);d.attachShader(l,this._resourceManager),c=new a.default(t,l,d,null,new Float32Array([-1/0,-1/0,-1/0,1/0,1/0,1/0])),this._drawables.push(c),this.setPosition(this._position),this.setScaling(this._scale)}else this._drawables[0].mesh=e,this._drawables[1].mesh=t},t.prototype.draw=function(e,t,r,n,i,a,o){if(void 0===o&&(o=-1),this._enabled)if(this._platteTexture.ready&&this._dataTexture.ready){var s=this._drawables[0].material;s.setPlatteTexture(this._platteTexture),s.setDataTexture(this._dataTexture),s.setThickness(this._thickness),s.setResolution([this._xres,this._yres]),this._showLines?(this._drawables[1].visible=!0,(s=this._drawables[1].material).setDiffuse(this._lineColor),s.setTransparent(1),s.setDataTexture(this._dataTexture),s.setThickness(this._thickness),s.setResolution([this._xres,this._yres])):this._drawables[1].visible=!1;var l=this._resourceManager.gl;e.drawDrawables(a,this._drawables,t,null,null,r,n,i,null,l.CCW)}else console.warn("cannot visualize 3D bar field without field data!")},t.prototype.doesSupportWebGL1=function(){return!1},t}(s.default);t.default=u},"./04renderer/visualize/HeatMap.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./02resource/m3d_shader_library.js"),a=r("./03scene/drawables/Drawable.ts"),o=r("./03scene/materials/MaterialHeatMap.ts"),s=r("./04renderer/visualize/Visualize.ts"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(e){function t(t){var r=e.call(this,"heatmap",t)||this;return r._resourceManager=t.getResourceManager(),r._dataTexture=r._resourceManager.getTexture(r.name+"-heatmap-density"),r._platteTexture=r._resourceManager.getTexture(r.name+"-heatmap-platte"),r._foregroundTexture=r._resourceManager.getTexture(r.name+"-heatmap-foreground"),r._width=1024,r._height=1024,r._gridSize=32,r._needUpdate=!0,r._showGridLine=!1,r._showPoints=!1,r._enableBlend=!0,r._enableForeground=!1,r._resourceManager.gl.isWebGL2?r._imageData=new Float32Array(r._width*r._height):r._imageData=new Uint8Array(r._width*r._height),r}return l(t,e),t.prototype.destroy=function(){this._dataTexture.destroy(),this._dataTexture=null,delete this._dataTexture,this._platteTexture.destroy(),this._platteTexture=null,delete this._platteTexture,this._foregroundTexture.destroy(),this._foregroundTexture=null,delete this._foregroundTexture,this._points=null,delete this._points,this._resourceManager=null,delete this._resourceManager,e.prototype.destroy.call(this)},t.prototype.setParameter=function(e,t){var r=this._resourceManager.gl;switch(e){case"points":this._points=t;break;case"width":this._width=t;break;case"height":this._height=t;break;case"gridSize":this._gridSize=t;break;case"paletteImage":case"platteImage":this._platteTexture.createFromFile(t,r.RGBA,r.LINEAR,r.CLAMP_TO_EDGE,null);break;case"blend":this._enableBlend=t;break;case"foregroundImage":this._enableForeground=!0,this._foregroundTexture.createFromFile(t,r.RGBA,r.LINEAR,r.CLAMP_TO_EDGE,null)}this._needUpdate=!0},t.prototype._cubic=function(e,t,r,n,i){var a=.5;return(-a*e+1.5*t+(a-2)*r+a*n)*i*i*i+(1*e+(a-3)*t+2*r-a*n)*i*i+(-a*e+a*r)*i+t},t.prototype._sampleImage=function(e,t,r,n,i){return n<0&&(n=0),i<0&&(i=0),n>=t&&(n=t-1),i>=r&&(i=r-1),e[n+t*i]},t.prototype._linear=function(e,t,r){return e*(1-r)+t*r},t.prototype._bilinear=function(e,t,r,n,i){var a=Math.max(e*r-.5,0),o=Math.floor(a),s=a-o,l=Math.max(t*n-.5,0),u=Math.floor(l),c=l-u,d=this._sampleImage(i,r,n,o,u),h=this._sampleImage(i,r,n,o+1,u),f=this._sampleImage(i,r,n,o,u+1),p=this._sampleImage(i,r,n,o+1,u+1),m=this._linear(d,h,s),v=this._linear(f,p,s);return this._linear(m,v,c)},t.prototype._bicubic=function(e,t,r,n,i){var a=Math.max(e*r-.5,0),o=Math.floor(a),s=a-o,l=Math.max(t*n-.5,0),u=Math.floor(l),c=l-u,d=this._sampleImage(i,r,n,o-1,u-1),h=this._sampleImage(i,r,n,o+0,u-1),f=this._sampleImage(i,r,n,o+1,u-1),p=this._sampleImage(i,r,n,o+2,u-1),m=this._sampleImage(i,r,n,o-1,u+0),v=this._sampleImage(i,r,n,o+0,u+0),_=this._sampleImage(i,r,n,o+1,u+0),g=this._sampleImage(i,r,n,o+2,u+0),y=this._sampleImage(i,r,n,o-1,u+1),b=this._sampleImage(i,r,n,o+0,u+1),x=this._sampleImage(i,r,n,o+1,u+1),w=this._sampleImage(i,r,n,o+2,u+1),E=this._sampleImage(i,r,n,o-1,u+2),M=this._sampleImage(i,r,n,o+0,u+2),A=this._sampleImage(i,r,n,o+1,u+2),T=this._sampleImage(i,r,n,o+2,u+2),S=this._cubic(d,h,f,p,s),k=this._cubic(m,v,_,g,s),D=this._cubic(y,b,x,w,s),P=this._cubic(E,M,A,T,s);return this._cubic(S,k,D,P,c)},t.prototype._updateImage=function(){if(this._points){for(var e=this._width/this._gridSize,t=this._height/this._gridSize,r=new Float32Array(e*t),n=1e-6,s=0;s<this._points.length;s++){var l=this._points[s],u=Math.floor(l.x*e),c=r[(m=Math.floor(l.y*t))*e+u];c+=l.number,r[m*e+u]=c,n<c&&(n=c)}for(var d=0;d<this._height;d++)for(var h=0;h<this._width;h++){(c=this._bicubic((h+.5)/this._width,(d+.5)/this._height,e,t,r))<0&&(c=0),this._resourceManager.gl.isWebGL2?this._imageData[d*this._width+h]=c/n:this._imageData[d*this._width+h]=255*c/n}if(this._showGridLine){for(d=1;d<t;d++)for(var f=d*this._gridSize-1,p=d*this._gridSize+1,m=f;m<=p;m++)for(h=0;h<this._width;h++)this._imageData[m*this._width+h]=1,this._resourceManager.gl.isWebGL2||(this._imageData[m*this._width+h]*=255);for(h=1;h<e;h++)for(f=h*this._gridSize-1,p=h*this._gridSize+1,u=f;u<=p;u++)for(d=0;d<this._height;d++)this._resourceManager.gl.isWebGL2?this._imageData[d*this._width+u]=1:this._imageData[d*this._width+u]=255}if(this._showPoints)for(s=0;s<this._points.length;s++)for(l=this._points[s],h=Math.floor(l.x*this._width),d=Math.floor(l.y*this._height),u=h-1;u<=h+1;u++)for(m=d-1;m<=d+1;m++)this._resourceManager.gl.isWebGL2?this._imageData[m*this._width+u]=1:this._imageData[m*this._width+u]=255;var v=this._resourceManager.gl;this._dataTexture.ready||(v.isWebGL2?this._dataTexture.create(this._width,this._height,v.R32F,v.LINEAR,v.CLAMP_TO_EDGE):this._dataTexture.create(this._width,this._height,v.ALPHA,v.LINEAR,v.CLAMP_TO_EDGE)),this._dataTexture.resize(this._width,this._height),this._dataTexture.update(this._imageData);var _=["MODEL_TRANSFORM"];this._enableBlend||_.push("DISABLE_BLEND"),this._enableForeground&&_.push("ENABLE_FOREGROUND");var g=this._resourceManager.getShader("heatmap",_);if(!g.ready){var y=i.default.heatmap;if(g.createFromShaderSource(y,_),!g.ready)throw new Error("Error at creating shader 'heatmap'!")}if(this._drawables.length<1){var b=this._resourceManager.getMesh("heatmap");b.ready||b.createQuad(!0);var x=new o.default("HeatMap",this._resourceManager);x.attachShader(g,this._resourceManager);var w=new a.default(b,g,x,null,new Float32Array([-1/0,-1/0,-1/0,1/0,1/0,1/0]));this._drawables.push(w),this.setPosition(this._position),this.setScaling(this._scale)}}},t.prototype.getTexture=function(){return this._needUpdate&&(this._updateImage(),this._needUpdate=!1),this._dataTexture},t.prototype.getImageData=function(){if(this._needUpdate&&(this._updateImage(),this._needUpdate=!0),this._imageData instanceof Float32Array)return this._imageData;for(var e=new Float32Array(this._imageData.length),t=0;t<this._imageData.length;t++)e[t]=this._imageData[t]/255;return e},t.prototype.draw=function(e,t,r,n,i,a,o){if(void 0===o&&(o=-1),this._enabled)if(this.getTexture(),this._platteTexture.ready&&this._dataTexture.ready){var s=this._drawables[0].material;s.setPlatteTexture(this._platteTexture),s.setDataTexture(this._dataTexture),this._enableForeground&&s.setForegroundImage(this._foregroundTexture),e.drawDrawables(a,this._drawables,t,null,null,r,n,i,null,!1)}else console.warn("cannot visualize heatmap without necessary data!")},t}(s.default);t.default=u},"./04renderer/visualize/HeightMap.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./02resource/m3d_shader_library.js"),a=r("./03scene/drawables/Drawable.ts"),o=r("./03scene/materials/MaterialHeightMap.ts"),s=r("./04renderer/visualize/Visualize.ts"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(e){function t(t){var r=e.call(this,"HeightMap",t)||this;return r._xres=1024,r._yres=1024,r._resourceManager=t.getResourceManager(),r._dataTexture=null,r._platteTexture=r._resourceManager.getTexture(r.name+"-HeightMap-platte"),r}return l(t,e),t.prototype.destroy=function(){this._resourceManager=null,delete this._resourceManager,delete this._xres,delete this._yres,this._platteTexture.destroy(),this._platteTexture=null,delete this._platteTexture,e.prototype.destroy.call(this)},t.prototype._initialize=function(){return!0},t.prototype.setParameter=function(e,t){var r=!1,n=this._resourceManager.gl;switch(e){case"xres":this._xres=t,r=!0;break;case"yres":this._yres=t,r=!0;break;case"dataTexture":this._dataTexture=t;break;case"paletteImage":case"platteImage":this._platteTexture.createFromFile(t,n.RGBA,n.LINEAR,n.CLAMP_TO_EDGE,null)}r&&this._updateGeometry()},t.prototype._updateGeometry=function(){var e=this._resourceManager.getMesh("HeightMap");if(e.ready&&(e.destroy(),e=this._resourceManager.getMesh("HeightMap")),e.createGrid(this._xres,this._yres),this._drawables.length<1){var t=this._resourceManager.getShader("heightmap",["MODEL_TRANSFORM"]);if(!t.ready){var r=i.default.heightmap;if(t.createFromShaderSource(r,["MODEL_TRANSFORM"]),!t.ready)throw new Error("Error at creating shader 'heightmap'!")}var n=new o.default("HeightMap",this._resourceManager);n.attachShader(t,this._resourceManager);var s=new a.default(e,t,n,null,new Float32Array([-1/0,-1/0,-1/0,1/0,1/0,1/0]));this._drawables.push(s),this.setPosition(this._position),this.setScaling(this._scale)}else this._drawables[0].mesh=e},t.prototype.draw=function(e,t,r,n,i,a,o){if(void 0===o&&(o=-1),this._enabled)if(this._platteTexture.ready&&this._dataTexture.ready){var s=this._drawables[0].material;s.setPlatteTexture(this._platteTexture),s.setDataTexture(this._dataTexture);this._resourceManager.gl;e.drawDrawables(a,this._drawables,t,null,null,r,n,i,null,!1)}else console.warn("cannot visualize height map without necessary data!")},t}(s.default);t.default=u},"./04renderer/visualize/MetaBall.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./00utility/Environment.ts"),a=r("./02resource/m3d_shader_library.js"),o=r("./03scene/drawables/Gizmo2D.ts"),s=r("./03scene/camera/m3d_base_camera.js"),l=r("./04renderer/pipeline/RenderTarget.ts"),u=r("./04renderer/visualize/Visualize.ts"),c=r("./04renderer/pipeline/Blit.ts"),d=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),h=function(e){function t(t){var r=e.call(this,"metaball",t)||this;r._resourceManager=t.getResourceManager(),r._width=1024,r._height=1024,r._showPoints=!0,r._showContour=!1,r._color=[1,0,0,1],r._contourWidth=1.75,r._contourColor=[1,1,0,1],r._backgroundColor=[1,1,1,1],r._radius=64,r._ballTexture=r._resourceManager.getTexture(r.name+"-metaball-ball"),r._foregroundTexture=r._resourceManager.getTexture(r.name+"-metaball-foreground"),r._enableForeground=!1,r._updateBallImage(),r._point=null,r._ball=null,r._needUpdate=!0,r._blit=new c.default(r._resourceManager,a.default.metaball,i.Environment.isMobile),r._blitForeground=new c.default(r._resourceManager,a.default.overlay,i.Environment.isMobile),r._blitBackground=new c.default(r._resourceManager,a.default.background,i.Environment.isMobile);var n=r._resourceManager.gl;return r._camera=new s.default([0,0,r._width,r._height]),r._renderTarget1=new l.default("metaball1",r._resourceManager,r._width,r._height,{depthTest:!1,blend:!0,depthFunc:n.LEQUAL,colorFormat:n.RGBA8,clearColor:[0,0,0,0],colorFilter:n.LINEAR,depthFormat:n.DEPTH_COMPONENT24,colorBuffer:0,depthBuffer:0}),r._renderTarget2=new l.default("metaball2"+Math.random(),r._resourceManager,r._width,r._height,{depthTest:!1,depthFunc:n.LEQUAL,colorFormat:n.RGBA8,clearColor:[0,0,0,0],colorFilter:n.LINEAR,depthFormat:n.DEPTH_COMPONENT24,depthBuffer:0}),r._dataTexture=r._renderTarget2.getColorBuffer(),r._enableForeground=!1,r._needUpdate=!0,r}return d(t,e),t.prototype.destroy=function(){this._dataTexture.destroy(),this._dataTexture=null,delete this._dataTexture,this._ballTexture.destroy(),this._ballTexture=null,delete this._ballTexture,this._foregroundTexture.destroy(),this._foregroundTexture=null,delete this._foregroundTexture,this._renderTarget1.destroy(),this._renderTarget1=null,delete this._renderTarget1,this._renderTarget2.destroy(),this._renderTarget2=null,delete this._renderTarget2,this._points=null,delete this._points,this._color=null,delete this._color,this._contourColor=null,delete this._contourColor,this._backgroundColor=null,delete this._backgroundColor,this._resourceManager=null,delete this._resourceManager,this._point.destroy(),this._point=null,delete this._point,this._ball.destroy(),this._ball=null,delete this._ball,this._blit.destroy(),this._blit=null,delete this._blit,e.prototype.destroy.call(this)},t.prototype.setParameter=function(e,t){var r=this;switch(e){case"points":this._points=t;break;case"colors":this._colors=t;break;case"width":this._width=t;break;case"height":this._height=t;break;case"contourColor":this._contourColor=t;break;case"contourWidth":this._contourWidth=1+t;break;case"backgroundColor":this._backgroundColor=t;break;case"color":this._color=t;break;case"radius":this._radius=t;break;case"contour":this._showContour!==t&&(this._showContour=t,this._blit.recompile("CONTOUR",this._showContour));break;case"foregroundImage":var n=this._resourceManager.gl;this._enableForeground=!0,this._foregroundTexture.createFromFile(t,n.RGBA,n.LINEAR,n.CLAMP_TO_EDGE,function(){r._updateImage()})}this._needUpdate=!0},t.prototype._updateBallImage=function(){var e=2*this._radius+1,t=1/this._radius,r=this._resourceManager.gl,n=null;r.isWebGL2?(n=new Float32Array(e*e),this._ballTexture.create(e,e,r.R32F,r.LINEAR,r.CLAMP_TO_EDGE)):(n=new Uint8Array(e*e),this._ballTexture.create(e,e,r.LUMINANCE,r.LINEAR,r.CLAMP_TO_EDGE)),this._ballTexture.resize(e,e);for(var i=0;i<this._radius;i++)for(var a=0;a<this._radius;a++){var o=Math.sqrt(Math.max(1-Math.sqrt(i*i+a*a)*t,0)),s=void 0;s=this._radius+a,n[(this._radius+i)*e+s]=o*(r.isWebGL2?1:255),s=this._radius-a,n[(this._radius+i)*e+s]=o*(r.isWebGL2?1:255),s=this._radius+a,n[(this._radius-i)*e+s]=o*(r.isWebGL2?1:255),s=this._radius-a,n[(this._radius-i)*e+s]=o*(r.isWebGL2?1:255)}this._ballTexture.update(n)},t.prototype._updateImage=function(){if(this._points){if(!this._ball||!this._point){var e=this._resourceManager.getMesh("metaball-quad");e.ready||e.createQuad(),this._ball=new o.default(e,this._resourceManager),this._ball.setTexture(this._ballTexture),this._ball.transform.setScaling(this._radius/this._width,this._radius/this._height,1),(e=this._resourceManager.getMesh("point")).ready||e.createPoint(),this._point=new o.default(e,this._resourceManager),this._point.setColor([1,1,1])}this._renderTarget1.resize(this._width,this._height),this._renderTarget2.resize(this._width,this._height),this._camera.setViewport([0,0,this._width,this._height]);var t=this._resourceManager.gl,r=this._renderScene.getRenderer();if(r.renderState.invalidateStates(),r.clear(this._renderTarget2,t.COLOR_BUFFER_BIT),r.renderState.viewport([0,0,this._width,this._height]),this._blitBackground.setParameter("uColor",this._backgroundColor),this._blitBackground.render(r,this._renderTarget2),this._colors)for(var n=0;n<this._colors.length;n++){r.clear(this._renderTarget1,t.COLOR_BUFFER_BIT),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE);for(var i=0;i<this._points.length;i++)if(this._points[i].colorIndex===n){var a=2*this._points[i].x-1,s=2*this._points[i].y-1;this._ball.transform.setTranslation(a,s,0),r.drawDrawable(this._renderTarget1,this._ball,this._camera,null,null,null,null,null)}t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),this._blit.setTexture(this._renderTarget1.getColorBuffer()),this._blit.setParameter("uColor",this._colors[n].color),this._showContour&&(this._blit.setParameter("uContourColor",this._colors[n].contourColor),this._blit.setParameter("uContourWidth",this._contourWidth)),this._blit.render(r,this._renderTarget2,!0)}else{r.clear(this._renderTarget1,t.COLOR_BUFFER_BIT),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE);for(n=0;n<this._points.length;n++){a=2*this._points[n].x-1,s=2*this._points[n].y-1;this._ball.transform.setTranslation(a,s,0),r.drawDrawable(this._renderTarget1,this._ball,this._camera,null,null,null,null,null)}t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),this._blit.setTexture(this._renderTarget1.getColorBuffer()),this._blit.setParameter("uColor",this._color),this._showContour&&(this._blit.setParameter("uContourColor",this._contourColor),this._blit.setParameter("uContourWidth",this._contourWidth)),this._blit.render(r,this._renderTarget2)}this._enableForeground&&(this._blitForeground.setForegroundTexture(this._foregroundTexture),this._renderTarget2.setOption("blendFunc",[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA]),this._blitForeground.render(r,this._renderTarget2,!0)),this._dataTexture=this._renderTarget2.getColorBuffer()}},t.prototype.getTexture=function(){return this._needUpdate&&(this._updateImage(),this._needUpdate=!1),this._dataTexture},t}(u.default);t.default=h},"./04renderer/visualize/MultiLayerColor.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./02resource/m3d_shader_library.js"),a=r("./03scene/drawables/Drawable.ts"),o=r("./03scene/materials/MaterialColor.ts"),s=r("./04renderer/pipeline/RenderTarget.ts"),l=r("./04renderer/visualize/Visualize.ts"),u=r("./glMatrix.js"),c=r("./04renderer/pipeline/Blit.ts"),d=r("./00utility/Environment.ts"),h=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),f=function(e){function t(t){var r=e.call(this,"MultiLayerColor",t)||this;r._resourceManager=t.getResourceManager(),r._dataTexture=null,r._platteTexture=r._resourceManager.getTexture(r.name+"-volume-platte"),r._maskTexture=null,r._layers=33,r._sampleNumber=1,r._gridSize=[8,8],r._blit=new c.default(r._resourceManager,i.default.blit_simple,d.Environment.isMobile),r._instanceFilter=0;var n=r._resourceManager.gl;return r._renderTarget=new s.default(r.name+"-volume-data-texture",r._resourceManager,1024,1024,{clearColor:[0,0,0,0],colorFormat:n.RGBA8,colorFilter:n.LINEAR}),r}return h(t,e),t.prototype.destroy=function(){this._platteTexture.destroy(),this._platteTexture=null,delete this._platteTexture,this._resourceManager=null,delete this._resourceManager,e.prototype.destroy.call(this)},t.prototype._updateDataTexture=function(){var e=this;if(this._dataTexture&&this._dataTexture.ready&&(this._blit.setTexture(this._dataTexture),this._renderScene.getRenderer().renderState.viewport([0,0,this._renderTarget.getWidth(),this._renderTarget.getHeight()]),this._blit.render(this._renderScene.getRenderer(),this._renderTarget,!1)),this._maskTexture&&this._maskTexture.ready){var t=this._resourceManager.gl;this._blit.setTexture(this._maskTexture);var r=this._renderTarget.getOption("blendFunc");this._renderTarget.setOption("blendFunc",[t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA]),this._renderScene.getRenderer().renderState.viewport([0,0,this._renderTarget.getWidth(),this._renderTarget.getHeight()]),this._blit.render(this._renderScene.getRenderer(),this._renderTarget,!0),this._renderTarget.setOption("blendFunc",r),this._renderTarget.always=!0}this._drawables.forEach(function(t){t.material.setDataTexture(e._renderTarget.getColorBuffer())})},t.prototype.setParameter=function(e,t){var r=this,n=this._resourceManager.gl;switch(e){case"sampleNumber":this._sampleNumber=t;break;case"gridSize":this._gridSize=t,this._renderTarget.resize(1024,1024/this._gridSize[0]*this._gridSize[1]);break;case"maskImage":if(this._maskTexture=this._resourceManager.getTexture(this.name+"-mask"),this._maskTexture.ready){console.warn("Can not set maskImage multiple times.");break}this._maskTexture.createFromFile(t,n.RGBA,n.LINEAR,n.CLAMP_TO_EDGE,function(){r._updateDataTexture()});break;case"dataImage":this._dataTexture=this._resourceManager.getTexture(this.name+"-multi-layer-color"),this._dataTexture.ready&&(this._dataTexture.destroy(!0),this._dataTexture=this._resourceManager.getTexture(this.name+"-multi-layer-color")),this._dataTexture.createFromFile(t,n.RGBA,n.LINEAR,n.CLAMP_TO_EDGE,function(){r._updateDataTexture()});break;case"data":var i=t.data;if(this._dataTexture=this._resourceManager.getTexture(this.name+"-multi-layer-color"),!this._dataTexture.ready)if(n.isWebGL2)this._dataTexture.create(t.width,t.height,n.R32F,n.LINEAR,n.CLAMP_TO_EDGE,null,t.depth);else if(this._dataTexture.create(t.width,t.height,n.LUMINANCE,n.LINEAR,n.CLAMP_TO_EDGE,null,t.depth),!(i instanceof Uint8Array)){i=new Uint8Array(t.data.length);for(var a=0;a<t.data.length;a++)i[a]=255*t.data[a]}this._dataTexture.update(i),this._updateDataTexture();break;case"dataTexture":this._dataTexture=t,this._updateDataTexture();break;case"paletteImage":case"platteImage":this._platteTexture.createFromFile(t,n.RGBA,n.LINEAR,n.CLAMP_TO_EDGE,null),this._drawables.forEach(function(e){e.material.setPlatteTexture(r._platteTexture)});break;case"layers":this._layers=t,this._drawables.forEach(function(e){e.material.setLayers(r._layers)});case"instanceFilter":this._instanceFilter=t,this._drawables.forEach(function(e){e.material.setinstanceFilter(r._instanceFilter)})}},t.prototype.getVolumeTexture=function(){return this._renderTarget.getColorBuffer()},t.prototype._updateInvTransform=function(e){var t=u.mat4.create();u.mat4.invert(t,e.transform.matrix),e.material.setInvTransform(t)},t.prototype.setPosition=function(t){e.prototype.setPosition.call(this,t),this._drawables.length>0&&this._updateInvTransform(this._drawables[0])},t.prototype.setScaling=function(t){e.prototype.setScaling.call(this,t),this._drawables.length>0&&this._updateInvTransform(this._drawables[0])},t.prototype.setRotation=function(t,r){e.prototype.setRotation.call(this,t,r),this._drawables.length>0&&this._updateInvTransform(this._drawables[0])},t.prototype.setRotationByQuat=function(t){e.prototype.setRotationByQuat.call(this,t),this._drawables.length>0&&this._updateInvTransform(this._drawables[0])},t.prototype.draw=function(e,t,r,n,s,l,u){var c=this;if(void 0===u&&(u=-1),this._enabled)if(this._platteTexture.ready&&this._renderTarget.getColorBuffer().ready){if(0===this._drawables.length){var d=this._resourceManager.getMesh("volume-multi-layer");d.createSolidCube(.5);var h=["MODEL_TRANSFORM"];this._maskTexture&&h.push("HAS_MASK");var f=this._resourceManager.getShader("color_multi_layer",h);if(!f.ready){var p=i.default.color_multi_layer;if(f.createFromShaderSource(p,h),!f.ready)throw new Error("Error at creating shader 'color_multi_layer'!")}var m=new o.default("volume-multi-layer",this._resourceManager);m.attachShader(f,this._resourceManager),m.setPlatteTexture(this._platteTexture),m.setAlphaCorrection(.09),m.setLayers(this._layers),m.setinstanceFilter(this._instanceFilter),m.setSampleNumber(this._sampleNumber);var v=new a.default(d,f,m,null,new Float32Array([-1/0,-1/0,-1/0,1/0,1/0,1/0]));this._drawables.push(v),this.setRotationByQuat(this._quaternion),this.setPosition(this._position),this.setScaling(this._scale),this._updateDataTexture()}this._drawables.forEach(function(e){e.material.setGridSize(c._gridSize)}),e.drawDrawables(l,this._drawables,t,null,null,r,n,s)}else console.warn("The resources of "+this.name+" are not ready!")},t}(l.default);t.default=f},"./04renderer/visualize/MultiLayerVolume.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./02resource/m3d_shader_library.js"),a=r("./03scene/drawables/Drawable.ts"),o=r("./03scene/materials/MaterialVolume.ts"),s=r("./04renderer/pipeline/RenderTarget.ts"),l=r("./04renderer/visualize/Visualize.ts"),u=r("./glMatrix.js"),c=r("./04renderer/pipeline/Blit.ts"),d=r("./00utility/Environment.ts"),h=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),f=function(e){function t(t){var r=e.call(this,"MultiLayerVolume",t)||this;r._resourceManager=t.getResourceManager(),r._dataTexture=null,r._platteTexture=r._resourceManager.getTexture(r.name+"-volume-platte"),r._maskTexture=null,r._layers=33,r._sampleNumber=1,r._gridSize=[8,8],r._blit=new c.default(r._resourceManager,i.default.blit_simple,d.Environment.isMobile);var n=r._resourceManager.gl;return r._renderTarget=new s.default(r.name+"-volume-data-texture",r._resourceManager,1024,1024,{clearColor:[0,0,0,0],colorFormat:n.RGBA8,colorFilter:n.LINEAR}),r}return h(t,e),t.prototype.destroy=function(){this._platteTexture.destroy(),this._platteTexture=null,delete this._platteTexture,this._resourceManager=null,delete this._resourceManager,e.prototype.destroy.call(this)},t.prototype._updateDataTexture=function(){var e=this;if(this._dataTexture&&this._dataTexture.ready&&(this._blit.setTexture(this._dataTexture),this._renderScene.getRenderer().renderState.viewport([0,0,this._renderTarget.getWidth(),this._renderTarget.getHeight()]),this._blit.render(this._renderScene.getRenderer(),this._renderTarget,!1)),this._maskTexture&&this._maskTexture.ready){var t=this._resourceManager.gl;this._blit.setTexture(this._maskTexture);var r=this._renderTarget.getOption("blendFunc");this._renderTarget.setOption("blendFunc",[t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA]),this._renderScene.getRenderer().renderState.viewport([0,0,this._renderTarget.getWidth(),this._renderTarget.getHeight()]),this._blit.render(this._renderScene.getRenderer(),this._renderTarget,!0),this._renderTarget.setOption("blendFunc",r),this._renderTarget.always=!0}this._drawables.forEach(function(t){t.material.setDataTexture(e._renderTarget.getColorBuffer())})},t.prototype.setParameter=function(e,t){var r=this,n=this._resourceManager.gl;switch(e){case"sampleNumber":this._sampleNumber=t;break;case"gridSize":this._gridSize=t,this._renderTarget.resize(1024,1024/this._gridSize[0]*this._gridSize[1]);break;case"maskImage":if(this._maskTexture=this._resourceManager.getTexture(this.name+"-mask"),this._maskTexture.ready){console.warn("Can not set maskImage multiple times.");break}this._maskTexture.createFromFile(t,n.RGBA,n.LINEAR,n.CLAMP_TO_EDGE,function(){r._updateDataTexture()});break;case"dataImage":this._dataTexture=this._resourceManager.getTexture(this.name+"-multi-layer-volume"),this._dataTexture.ready&&(this._dataTexture.destroy(!0),this._dataTexture=this._resourceManager.getTexture(this.name+"-multi-layer-volume")),this._dataTexture.createFromFile(t,n.RGBA,n.LINEAR,n.CLAMP_TO_EDGE,function(){r._updateDataTexture()});break;case"data":this._dataTexture=this._resourceManager.getTexture(this.name+"-multi-layer-volume");var i=t.data;if(!this._dataTexture.ready)if(n.isWebGL2)this._dataTexture.create(t.width,t.height,n.R32F,n.LINEAR,n.CLAMP_TO_EDGE);else if(this._dataTexture.create(t.width,t.height,n.LUMINANCE,n.LINEAR,n.CLAMP_TO_EDGE),!(i instanceof Uint8Array)){i=new Uint8Array(t.data.length);for(var a=0;a<t.data.length;a++)i[a]=255*t.data[a]}this._dataTexture.update(i),this._updateDataTexture();break;case"dataTexture":this._dataTexture=t,this._updateDataTexture();break;case"paletteImage":case"platteImage":this._platteTexture.createFromFile(t,n.RGBA,n.LINEAR,n.CLAMP_TO_EDGE,null),this._drawables.forEach(function(e){e.material.setPlatteTexture(r._platteTexture)});break;case"layers":this._layers=t,this._drawables.forEach(function(e){e.material.setLayers(r._layers)})}},t.prototype.getVolumeTexture=function(){return this._renderTarget.getColorBuffer()},t.prototype._updateInvTransform=function(e){var t=u.mat4.create();u.mat4.invert(t,e.transform.matrix),e.material.setInvTransform(t)},t.prototype.setPosition=function(t){e.prototype.setPosition.call(this,t),this._drawables.length>0&&this._updateInvTransform(this._drawables[0])},t.prototype.setScaling=function(t){e.prototype.setScaling.call(this,t),this._drawables.length>0&&this._updateInvTransform(this._drawables[0])},t.prototype.setRotation=function(t,r){e.prototype.setRotation.call(this,t,r),this._drawables.length>0&&this._updateInvTransform(this._drawables[0])},t.prototype.setRotationByQuat=function(t){e.prototype.setRotationByQuat.call(this,t),this._drawables.length>0&&this._updateInvTransform(this._drawables[0])},t.prototype.draw=function(e,t,r,n,s,l,u){var c=this;if(void 0===u&&(u=-1),this._enabled)if(this._platteTexture.ready&&this._renderTarget.getColorBuffer().ready){if(0===this._drawables.length){var d=this._resourceManager.getMesh("volume-multi-layer");d.createSolidCube(.5);var h=["MODEL_TRANSFORM"];this._maskTexture&&h.push("HAS_MASK");var f=this._resourceManager.getShader("volume_multi_layer",h);if(!f.ready){var p=i.default.volume_multi_layer;if(f.createFromShaderSource(p,h),!f.ready)throw new Error("Error at creating shader 'volume_multi_layer'!")}var m=new o.default("volume-multi-layer",this._resourceManager);m.attachShader(f,this._resourceManager),m.setPlatteTexture(this._platteTexture),m.setAlphaCorrection(.09),m.setLayers(this._layers),m.setSampleNumber(this._sampleNumber);var v=new a.default(d,f,m,null,new Float32Array([-1/0,-1/0,-1/0,1/0,1/0,1/0]));this._drawables.push(v),this.setRotationByQuat(this._quaternion),this.setPosition(this._position),this.setScaling(this._scale),this._updateDataTexture()}this._drawables.forEach(function(e){e.material.setGridSize(c._gridSize)}),e.drawDrawables(l,this._drawables,t,null,null,r,n,s)}else console.warn("The resources of "+this.name+" are not ready!")},t}(l.default);t.default=f},"./04renderer/visualize/Trail.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./02resource/m3d_shader_library.js"),a=r("./03scene/drawables/Drawable.ts"),o=r("./04renderer/visualize/Visualize.ts"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(){function e(e,t,r){var n=t.getMesh("trail-path"+e);n.createLineStrip();var o=t.getShader("plain",["MODEL_TRANSFORM"]);if(!o.ready){var s=i.default.plain;if(o.createFromShaderSource(s,["MODEL_TRANSFORM"]),!o.ready)throw new Error("Error at creating shader 'plain'!")}var l=r.createMaterialAdhoc("trail");l.attachShader(o,t),l.setTransparent(.2),this.drawable=new a.default(n,o,l,null,new Float32Array([-1/0,-1/0,-1/0,1/0,1/0,1/0]))}return e.prototype.destroy=function(){this.points=null,delete this.points,this.distances=null,delete this.distances,this.drawable.destroy(),this.drawable=null,delete this.drawable},e.prototype.update=function(e){this.points=e;for(var t=this.points.length/3,r=new Uint16Array(t),n=0;n<t;n++)r[n]=n;this.drawable.mesh.update(new Float32Array(this.points),r);var i=0;this.distances=new Array(this.points.length/3);for(n=0;n<this.points.length-3;n+=3){var a=this.points[n+3]-this.points[n],o=this.points[n+4]-this.points[n+1],s=this.points[n+5]-this.points[n+2],l=Math.sqrt(a*a+o*o+s*s);this.distances[n/3]=i,i+=l}this.distances[this.points.length/3-1]=i},e.prototype.draw=function(e,t){e%=this.distances[this.distances.length-1];for(var r=-1,n=0;n<this.distances.length;n++)if(e<this.distances[n]){r=n;break}var i=r-1,a=(e-this.distances[i])/(this.distances[r]-this.distances[i]);return t[0]=this.points[3*i],t[1]=this.points[3*i+1],t[2]=this.points[3*i+2],t[3]=this.points[3*i]*(1-a)+this.points[3*r]*a,t[4]=this.points[3*i+1]*(1-a)+this.points[3*r+1]*a,t[5]=this.points[3*i+2]*(1-a)+this.points[3*r+2]*a,r},e}(),u=function(e){function t(t){var r=e.call(this,"trail",t)||this;r._resourceManager=t.getResourceManager(),r._start=-1,r._speed=.01;Math.random();var n=r._resourceManager.getShader("plain",["MODEL_TRANSFORM"]);if(!n.ready){var o=i.default.plain;if(n.createFromShaderSource(o,["MODEL_TRANSFORM"]),!n.ready)throw new Error("Error at creating shader 'plain'!")}var s=t.getScene().materialManager.createMaterialAdhoc("trail");s.attachShader(n),s.setTransparent(.2);var l=r._resourceManager.getMesh("trail-growing");return l.createLine(),r._current=new a.default(l,n,s,null,new Float32Array([-1/0,-1/0,-1/0,1/0,1/0,1/0])),r._vertices=new Float32Array(6),r._indices=new Uint16Array(2),r._indices[0]=0,r._indices[1]=1,(l=r._resourceManager.getMesh("trail-tip")).createPoint(),r._tip=new a.default(l,n,s,null,new Float32Array([-1/0,-1/0,-1/0,1/0,1/0,1/0])),r._paths=[],r}return s(t,e),t.prototype.destroy=function(){this._indices=null,delete this._indices,this._vertices=null,delete this._vertices;for(var e=0;e<this._paths.length;e++)this._paths[e].destroy();this._paths=null,delete this._paths,this._tip.destroy(),this._tip=null,delete this._tip,this._current.destroy(),this._current=null,delete this._current},t.prototype.setParameter=function(e,t){switch(e){case"color":for(var r=0;r<this._paths.length;r++)this._paths[r].drawable.material.setDiffuse(t);this._tip.material.setDiffuse(t),this._current.material.setDiffuse(t);break;case"transparent":for(r=0;r<this._paths.length;r++)this._paths[r].drawable.material.setTransparent(t);this._tip.material.setTransparent(t),this._current.material.setTransparent(t);break;case"speed":this._speed=t}},t.prototype.addTrail=function(e){var t=new l(this._paths.length,this._resourceManager,this._renderScene.getScene().materialManager);t.update(e),this._paths.push(t)},t.prototype.draw=function(e,t,r,n,i,a,o){if(void 0===o&&(o=-1),this._enabled)for(var s=(Date.now()-this._start)*this._speed,l=0;l<this._paths.length;l++){var u=a.getOption("blend");if(a.setOption("blend",!0),a.always=!0,this._animate){var c=this._paths[l].draw(s,this._vertices);e.drawDrawable(a,this._paths[l].drawable,t,r,n,i,!1,[0,c]),this._current.mesh.update(this._vertices,this._indices),e.drawDrawable(a,this._current,t,r,n,i,!1),a.setOption("blend",u);var d=new Float32Array(this._vertices.buffer,12,3),h=new Uint16Array(this._indices.buffer,0,1);this._tip.mesh.update(d,h),e.drawDrawable(a,this._tip,t,r,n,i,!1)}else{e.drawDrawable(a,this._paths[l].drawable,t,r,n,i,!1),a.setOption("blend",u);var f=this._paths[l].points;d=new Float32Array([f[f.length-3],f[f.length-2],f[f.length-1]]),h=new Uint16Array(this._indices.buffer,0,1);this._tip.mesh.update(d,h),e.drawDrawable(a,this._tip,t,r,n,i,!1)}}},t.prototype.setEnabled=function(t){e.prototype.setEnabled.call(this,t),this._start=Date.now()},t.prototype.setAnimationEnabled=function(e){this._animate=e},t}(o.default);t.default=u},"./04renderer/visualize/Visualize.ts":function(e,t,r){"use strict";r.r(t);var n=r("./glMatrix.js"),i=function(){function e(e,t){this.name=e+t.getVisualizes(e).length,this._renderScene=t,this._enabled=!1,this._position=[0,0,0],this._scale=[1,1,1],this._quaternion=n.quat.create(),this._drawables=[]}return e.prototype.destroy=function(){this._renderScene=null,delete this._renderScene,this._position=null,delete this._position,this._scale=null,delete this._scale;for(var e=0;e<this._drawables.length;e++)this._drawables[e].destroy();this._drawables=null,delete this._drawables},e.prototype.setPosition=function(e){this._position=e;for(var t=0;t<this._drawables.length;t++)this._drawables[t].transform.setTranslation(e[0],e[1],e[2]),this._drawables[t].updateBBox()},e.prototype.setScaling=function(e){this._scale=e;for(var t=0;t<this._drawables.length;t++)this._drawables[t].transform.setScaling(e[0],e[1],e[2]),this._drawables[t].updateBBox()},e.prototype.setRotation=function(e,t){n.quat.setAxisAngle(this._quaternion,[e[0],e[1],e[2]],t);for(var r=0;r<this._drawables.length;r++)this._drawables[r].transform.setRotation(e,t),this._drawables[r].updateBBox()},e.prototype.setRotationByQuat=function(e){this._quaternion=e;for(var t=0;t<this._drawables.length;t++)this._drawables[t].transform.setRotationByQuat(e),this._drawables[t].updateBBox()},e.prototype.setEnabled=function(e){this._enabled=e},e.prototype.doesSupportMobile=function(e){return!0},e.prototype.doesSupportWebGL1=function(){return!0},e.prototype.isEnabled=function(){return this._enabled},e.prototype.resize=function(e,t){},e.prototype.draw=function(e,t,r,n,i,a,o){void 0===o&&(o=-1)},e.prototype.setParameter=function(e,t){},e.prototype.getParameter=function(e){},e.prototype.getTexture=function(){return null},e}();t.default=i},"./04renderer/visualize/Volume.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./02resource/m3d_shader_library.js"),a=r("./03scene/drawables/Drawable.ts"),o=r("./03scene/materials/MaterialVolume.ts"),s=r("./04renderer/visualize/Visualize.ts"),l=r("./glMatrix.js"),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=function(e){function t(t){var r=e.call(this,"volume",t)||this;return r._resourceManager=t.getResourceManager(),r._dataTexture=null,r._platteTexture=r._resourceManager.getTexture(r.name+"-volume-platte"),r._gradientTexture=r._resourceManager.getTexture(r.name+"-volume-gradient"),r}return u(t,e),t.prototype.destroy=function(){this._gradientTexture.destroy(),this._gradientTexture=null,delete this._gradientTexture,this._platteTexture.destroy(),this._platteTexture=null,delete this._platteTexture,this._resourceManager=null,delete this._resourceManager,e.prototype.destroy.call(this)},t.prototype.setParameter=function(e,t){var r=this._resourceManager.gl;switch(e){case"data":if(this._dataTexture=this._resourceManager.getTexture(this.name+"-volume"),!this._dataTexture.ready){var n=this._resourceManager.gl;n.isWebGL2?this._dataTexture.create(t.width,t.height,n.R32F,n.LINEAR,n.CLAMP_TO_EDGE):this._dataTexture.create(t.width,t.height,n.LUMINANCE,n.LINEAR,n.CLAMP_TO_EDGE)}var i=t.data;if(!(r.isWebGL2||t.data instanceof Uint8Array)){i=new Uint8Array(t.data.length);for(var a=0;a<t.data.length;a++)i[a]=255*t.data[a]}this._dataTexture.update(i);break;case"dataTexture":this._dataTexture=t;break;case"paletteImage":case"platteImage":this._platteTexture.createFromFile(t,r.RGBA,r.LINEAR,r.CLAMP_TO_EDGE,null);break;case"gradientImage":this._gradientTexture.createFromFile(t,r.RGB,r.LINEAR,r.CLAMP_TO_EDGE,null)}},t.prototype._updateInvTransform=function(e){var t=l.mat4.create();l.mat4.invert(t,e.transform.matrix),e.material.setInvTransform(t)},t.prototype.setPosition=function(t){e.prototype.setPosition.call(this,t),this._drawables.length>0&&this._updateInvTransform(this._drawables[0])},t.prototype.setScaling=function(t){e.prototype.setScaling.call(this,t),this._drawables.length>0&&this._updateInvTransform(this._drawables[0])},t.prototype.draw=function(e,t,r,n,s,l,u){if(void 0===u&&(u=-1),this._enabled)if(this._platteTexture.ready&&this._dataTexture.ready&&this._gradientTexture.ready){if(0===this._drawables.length){var c=this._resourceManager.getMesh("volume");c.createSolidCube(.5);var d=this._resourceManager.getShader("volume",["MODEL_TRANSFORM"]);if(!d.ready){var h=i.default.volume;if(d.createFromShaderSource(h,["MODEL_TRANSFORM"]),!d.ready)throw new Error("Error at creating shader 'volume'!")}var f=new o.default("volume",this._resourceManager);f.attachShader(d,this._resourceManager);var p=new a.default(c,d,f,null,new Float32Array([-.5,-.5,-.5,.5,.5,.5]));this._drawables.push(p),this.setPosition(this._position),this.setScaling(this._scale)}var m=this._drawables[0].material;m.setPlatteTexture(this._platteTexture),m.setGradientTexture(this._gradientTexture),m.setDataTexture(this._dataTexture),m.setAlphaCorrection(.03),e.drawDrawables(l,this._drawables,t,null,null,r,n,s)}else console.warn("The resources of "+this.name+" are not ready!")},t}(s.default);t.default=c},"./07loadsave/Load360.ts":function(e,t,r){"use strict";r.r(t);var n=r("./09app/Viewer.ts"),i=r("./99api/utils/model/downloader.ts"),a=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},o=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},s=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},l=function(){function e(e,t){this._data=e,this._viewer=t}return e.prototype.load=function(e,t,r,l,u,c){return a(this,void 0,void 0,function(){var e,t,a,d,h,f,p,m,v,_,g,y,b;return o(this,function(o){switch(o.label){case 0:console.group("Loading panoramas "),e=1,o.label=1;case 1:o.trys.push([1,6,7,8]),t=s(r),a=t.next(),o.label=2;case 2:if(a.done)return[3,5];if(d=a.value,(h=this._data[d]).ready)return[2];if("cubemaps"!==h.type)throw Error("Unsupported panorama file types!");for(f=[],p=0;p<h.imageUrls.length;p++)m=h.imageUrls[p].split("/"),v={filename:m[m.length-1],url:h.imageUrls[p]},f.push(Object(i.downloadFile)(d,v));return[4,Promise.all(f)];case 3:if(_=o.sent(),h.images=_.slice(0),h.ready=!0,c(e/r.length,d),l(),this._viewer.state!==n.State.INITIALIZED&&this._viewer.state!==n.State.RENDERING)return[2];e++,o.label=4;case 4:return a=t.next(),[3,2];case 5:return[3,8];case 6:return g=o.sent(),y={error:g},[3,8];case 7:try{a&&!a.done&&(b=t.return)&&b.call(t)}finally{if(y)throw y.error}return[7];case 8:return u(),[2]}})})},e}();t.default=l},"./08ui/input/Input.ts":function(e,t,r){"use strict";r.r(t);var n=function(){function e(e,t){this.name=e,this._enabled=!1,this._canvas=t.getCanvas(),this._event=null}return e.prototype.destroy=function(){this._enabled=null,delete this._enabled,this.name=null,delete this.name,this._event=null,delete this._event,this._canvas=null,delete this._canvas},e.prototype.isAvailable=function(e){return!1},e.prototype.setEnabled=function(e){this._enabled=e},e}();t.default=n},"./08ui/input/Keyboard.ts":function(e,t,r){"use strict";r.r(t);var n,i,a=r("./08ui/input/Input.ts"),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){e[e.KEY_PRESSED=0]="KEY_PRESSED",e[e.KEY_DOWN=1]="KEY_DOWN",e[e.KEY_UP=2]="KEY_UP"}(i||(i={}));var s=function(e){function t(t){var r=e.call(this,"keyboard",t)||this;return r.status=i.KEY_UP,r._enabled=!0,r._upListeners=[],r._downListeners=[],r.key=0,r._keyDownFn=r._keyDown.bind(r),r._keyUpFn=r._keyUp.bind(r),document.addEventListener("keydown",r._keyDownFn),document.addEventListener("keyup",r._keyUpFn),r}return o(t,e),t.prototype.destroy=function(){this._upListeners=null,delete this._upListeners,this._downListeners=null,delete this._downListeners,document.removeEventListener("keydown",this._keyDownFn),document.removeEventListener("keyup",this._keyUpFn),this._keyDownFn=null,delete this._keyDownFn,this._keyUpFn=null,delete this._keyUpFn,e.prototype.destroy.call(this)},t.prototype.isAvailable=function(e){return!e},t.prototype.addKeyUpListener=function(e){this._upListeners.push(e)},t.prototype.addKeyDownListener=function(e){this._downListeners.push(e)},t.prototype._keyDown=function(e){if(this._doesCanvasHaveFocus()){e.preventDefault(),this.status=i.KEY_PRESSED,this.key=e.keyCode;for(var t=this._downListeners.length-1;t>=0&&!this._downListeners[t](this);--t);}},t.prototype._keyUp=function(e){if(this._doesCanvasHaveFocus()){e.preventDefault(),this.status=i.KEY_UP,this.key=e.keyCode;for(var t=this._upListeners.length-1;t>=0&&!this._upListeners[t](this);--t);}},t.prototype._doesCanvasHaveFocus=function(){if(!this._enabled)return!1;var e=document.activeElement,t=e&&e!==document.body;if(t)return!1;var r="";return void 0!==window.getSelection?r=window.getSelection().toString():void 0!==document.selection&&"Text"===document.selection.type&&(r=document.selection.createRange().text),!r&&!t},t}(a.default);t.default=s},"./08ui/input/Mouse.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./00utility/Environment.ts"),a=r("./08ui/input/Input.ts"),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t){var r=e.call(this,"mouse",t)||this;r.LEFT_BUTTON=0,r.MIDDLE_BUTTON=1,r.RIGHT_BUTTON=2,r._x0=-1,r._y0=-1,r._lastWheelTime=0,r._eventQueue=[],r.x=-1,r.y=-1,r.dx=-1,r.dy=-1,r.pressed=!1,r.moved=!1,r.delta=0,r.button=r.LEFT_BUTTON,r._downListeners=[],r._moveListeners=[],r._upListeners=[],r._wheelListeners=[];var n=0,a=r;function o(e){return function(t){if((t.relatedTarget||t.toElement||t.currentTarget)===a._canvas)return t.offsetX_norm=void 0===t.offsetX?t.layerX:t.offsetX,t.offsetY_norm=void 0===t.offsetY?t.layerY:t.offsetY,"firefox"===i.Environment.browserName||"edge"===i.Environment.browserName?t.buttonDown=n:t.buttonDown=t.which,e.call(a,t)}}r._canvas.onwheel=o(r._onMouseWheel),r._canvas.onmousemove=o(r._onMouseMove);var s=o(r._onMouseDown);r._canvas.onmousedown=function(e){n=e.which,s(e)};var l=o(r._onMouseUp);return r._canvas.onmouseup=function(e){l(e),n=0},r._onMouseLeave=function(e){n=0},document.addEventListener("mouseout",r._onMouseLeave,!1),r}return o(t,e),t.prototype.destroy=function(){this._canvas.onmousedown=null,this._canvas.onmouseup=null,this._canvas.onmouseleave=null,this._canvas.ondblclick=null,this._canvas.onwheel=null,this._canvas.onmousemove=null,document.removeEventListener("mouseout",this._onMouseLeave),this._downListeners=null,delete this._downListeners,this._upListeners=null,delete this._upListeners,this._moveListeners=null,delete this._moveListeners,this._wheelListeners=null,delete this._wheelListeners,this._enabled=null,delete this._eventQueue,e.prototype.destroy.call(this)},t.prototype.addMouseDownListener=function(e){this._downListeners.push(e)},t.prototype.addMouseMoveListener=function(e){this._moveListeners.push(e)},t.prototype.addMouseUpListener=function(e){this._upListeners.push(e)},t.prototype.addMouseWheelListener=function(e){this._wheelListeners.push(e)},t.prototype.isAvailable=function(e){return!e},t.prototype._onMouseDown=function(e){if(this._enabled){e.preventDefault(),this.pressed=!0;var t=e.offsetX_norm,r=e.offsetY_norm;this.dx=0,this.dy=0,this.x=t,this.y=r,this.moved=!1,this.button=e.button,this._x0=this.x,this._y0=this.y,this._event=e;for(var n=this._downListeners.length-1;n>=0&&!this._downListeners[n](this);--n);}},t.prototype._onMouseUp=function(e){if(this._enabled){e.preventDefault(),this.pressed=!1;var t=e.offsetX_norm,r=e.offsetY_norm;this.dx=t-this.x,this.dy=r-this.y,this.x=t,this.y=r,this._event=e,this.button=e.button,(Math.abs(this.x-this._x0)>3||Math.abs(this.y-this._y0)>3)&&(this.moved=!0);for(var n=this._upListeners.length-1;n>=0&&!this._upListeners[n](this);--n);}},t.prototype._onMouseMove=function(e){if(this._enabled){e.preventDefault();var t=e.offsetX_norm,r=e.offsetY_norm;this.dx=t-this.x,this.dy=r-this.y,this.x=t,this.y=r,this._event=e,(Math.abs(this.x-this._x0)>3||Math.abs(this.y-this._y0)>3)&&(this.moved=!0);for(var n=this._moveListeners.length-1;n>=0&&!this._moveListeners[n](this);--n);}},t.prototype._onMouseWheel=function(e){if(this._enabled){e.preventDefault();var t=e.deltaY;this.delta=-Math.max(-1,Math.min(1,t)),"firefox"!==i.Environment.browserName&&(this.delta*=Math.min(t*t/2500,1));for(var r=this._wheelListeners.length-1;r>=0&&!this._wheelListeners[r](this);--r);}},t.prototype.getEvent=function(){return this._event},t}(a.default);t.default=s},"./08ui/input/Touch.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./08ui/input/Input.ts"),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=function(e){function t(t){var r=e.call(this,"touch",t)||this;return r.numCursors=0,r.x0=0,r.y0=0,r.cursors={},r.identifiers=[],r.lastCursor=null,r._startListeners=[],r._moveListeners=[],r._stopListeners=[],r._onTouchStart=r._onTouchStart1.bind(r),r._onTouchMove=r._onTouchMove1.bind(r),r._onTouchStop=r._onTouchStop1.bind(r),r._canvas.addEventListener("touchstart",r._onTouchStart,!1),r._canvas.addEventListener("touchmove",r._onTouchMove,!1),r._canvas.addEventListener("touchend",r._onTouchStop,!1),r}return a(t,e),t.prototype.destroy=function(){this._canvas.removeEventListener("touchstart",this._onTouchStart),this._canvas.removeEventListener("touchmove",this._onTouchMove),this._canvas.removeEventListener("touchend",this._onTouchStop),this._startListeners=null,delete this._startListeners,this._moveListeners=null,delete this._moveListeners,this._stopListeners=null,delete this._stopListeners,e.prototype.destroy.call(this)},t.prototype.cursor=function(e){return e<this.identifiers.length?this.cursors[this.identifiers[e]]:null},t.prototype.addTouchMoveListener=function(e){this._moveListeners.push(e)},t.prototype.addTouchStartListener=function(e){this._startListeners.push(e)},t.prototype.addTouchStopListener=function(e){this._stopListeners.push(e)},t.prototype._onTouchStart1=function(e){e.preventDefault(),this.numCursors=e.touches.length;for(var t=0;t<e.changedTouches.length;++t)this._addCursor(e.changedTouches[t]);for(var r in this.cursors)null!==this.cursors[r]&&r;1===this.numCursors&&(this.lastCursor=this.cursor(0));for(var n=this._startListeners.length-1;n>=0&&!this._startListeners[n](this);--n);},t.prototype._onTouchMove1=function(e){e.preventDefault();this.numCursors=e.touches.length;for(var t=[],r=0;r<e.touches.length;r++)this.cursors[e.touches[r].identifier]||this._addCursor(e.touches[r]),t.push(e.touches[r].identifier);for(var n in this.cursors){var i=Number(n);-1===t.indexOf(i)&&this._removeCursor(i)}for(var a=this._canvas.getBoundingClientRect(),o=0;o<e.changedTouches.length;++o){var s=e.changedTouches[o].pageX-a.left,l=e.changedTouches[o].pageY-a.top,u=e.changedTouches[o].identifier;this.cursors[u].dx=s-this.cursors[u].x,this.cursors[u].dy=l-this.cursors[u].y,this.cursors[u].x=s,this.cursors[u].y=l,this.cursors[u].moved=!0}for(var c=this._moveListeners.length-1;c>=0&&!this._moveListeners[c](this);--c);},t.prototype._onTouchStop1=function(e){e.preventDefault();for(var t=this._stopListeners.length-1;t>=0&&!this._stopListeners[t](this);--t);this.numCursors=e.touches.length;for(t=0;t<e.changedTouches.length;t++){var r=e.changedTouches[t].identifier;this._removeCursor(r)}},t.prototype.isAvailable=function(e){return!0},t.prototype._removeCursor=function(e){var t=this.identifiers.indexOf(e);-1!==t&&this.identifiers.splice(t,1),delete this.cursors[e]},t.prototype._addCursor=function(e){var t=this._canvas.getBoundingClientRect(),r=e.identifier,n={x:e.pageX-t.left,y:e.pageY-t.top,dx:0,dy:0,moved:!1};this.cursors[r]=n,this.identifiers.push(r)},t}(i.default);t.default=o},"./08ui/tool/CameraManipulator.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./00utility/Environment.ts"),a=r("./00utility/Config.ts"),o=r("./03scene/camera/m3d_camera_animator_transition.js"),s=r("./08ui/tool/DepthQuery.ts"),l=r("./08ui/tool/Tool.ts"),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=function(e){function t(t){var r=e.call(this,"CameraManipulator",!1,t)||this;return r._viewer?r._depthQuery=new s.default(r._scene,r._resourceManager):r._depthQuery=null,r._animator=new o.default,r._restricted=!1,r._clippingEnabled=!!r._scene&&r._scene.clipping.isEnabled(),r._touchPanSpeedScaling=1.86*i.Environment.devicePixelRatio,r._touchZoomSpeedScaling=.0596*Math.sqrt(i.Environment.devicePixelRatio),r._touchRotateSpeedScaling=.44*i.Environment.devicePixelRatio,r._mousePanSpeedScaling=.37,r._mouseZoomSpeedScaling=.278,r._mouseRotateSpeedScaling=.45,r._keyRotateSpeed=12,r._keyPanSpeed=1,r._keyForwardSpeed=.0092,r._isPanorama=!1,r}return u(t,e),t.prototype.destroy=function(){this._animator.destroy(),this._animator=null,delete this._animator,this._depthQuery&&(this._depthQuery.destroy(),this._depthQuery=null,delete this._depthQuery),e.prototype.destroy.call(this)},t.prototype.isAvailable=function(e){return!0},t.prototype.isSupport3D=function(){return!0},t.prototype.addInput=function(e){"mouse"===e.name?(e.addMouseDownListener(this._onMouseDown.bind(this)),e.addMouseMoveListener(this._onMouseMove.bind(this)),e.addMouseUpListener(this._onMouseUp.bind(this)),e.addMouseWheelListener(this._onMouseWheel.bind(this))):"touch"===e.name?(e.addTouchMoveListener(this._onTouchMove.bind(this)),e.addTouchStartListener(this._onTouchStart.bind(this))):"gyrosensor"===e.name||"keyboard"===e.name&&e.addKeyDownListener(this._onKeyDown.bind(this))},t.prototype._onMouseDown=function(e){return this._exitTransit(),!1},t.prototype._onMouseMove=function(e){if(e.button===e.LEFT_BUTTON&&e.pressed)if(this._isPanorama){this._camera.rotate(-e.dx*this._mouseRotateSpeedScaling,-e.dy*this._mouseRotateSpeedScaling);for(var t=1;t<this._cameras.length;t++)this._cameras[t].rotate(-e.dx*this._mouseRotateSpeedScaling,-e.dy*this._mouseRotateSpeedScaling)}else{this._camera.rotate(e.dx*this._mouseRotateSpeedScaling,e.dy*this._mouseRotateSpeedScaling);for(t=1;t<this._cameras.length;t++)this._cameras[t].rotate(e.dx*this._mouseRotateSpeedScaling,e.dy*this._mouseRotateSpeedScaling)}else if(e.button===e.MIDDLE_BUTTON&&e.pressed&&!this._restricted){this._camera.zoom(.01*e.dx*i.Environment.devicePixelRatio);for(t=1;t<this._cameras.length;t++)this._cameras[t].zoom(.01*e.dx*i.Environment.devicePixelRatio)}else if(e.button===e.RIGHT_BUTTON&&e.pressed&&!this._restricted){this._camera.pan(e.dx*this._mousePanSpeedScaling,e.dy*this._mousePanSpeedScaling);for(t=1;t<this._cameras.length;t++)this._cameras[t].pan(e.dx*this._mousePanSpeedScaling,e.dy*this._mousePanSpeedScaling)}return!1},t.prototype.doesSupportMobile=function(e){return!1},t.prototype.doesSupport3D=function(e){return!0},t.prototype._onMouseUp=function(e){return!1},t.prototype._onMouseWheel=function(e){this._exitTransit();var t=e.delta*this._mouseZoomSpeedScaling;this._camera.zoom(t,e.x*i.Environment.devicePixelRatio,e.y*i.Environment.devicePixelRatio);for(var r=1;r<this._cameras.length;r++)this._cameras[r].zoom(t,e.x*i.Environment.devicePixelRatio,e.y*i.Environment.devicePixelRatio);return!1},t.prototype._onTouchMove=function(e){var t,r,n=e.cursor(0);if(this._exitTransit(),1===e.numCursors)n=e.cursor(0),this._camera.rotate(n.dx*this._touchRotateSpeedScaling,n.dy*this._touchRotateSpeedScaling);else if(2===e.numCursors){n=e.cursor(0);var i=e.cursor(1);if(n.dx*i.dx+n.dy*i.dy>0)t=(n.dx+i.dx)*this._touchPanSpeedScaling,r=(n.dy+i.dy)*this._touchPanSpeedScaling,this._camera.pan(t,r);else{var a=n.x-n.dx,o=n.y-n.dy;t=a-(i.x-i.dx),r=o-(i.y-i.dy);var s=Math.sqrt(t*t+r*r);t=n.x-i.x,r=n.y-i.y;var l=Math.sqrt(t*t+r*r)-s,u=Math.sign(l)*this._touchZoomSpeedScaling;this._camera.zoom(u)}}},t.prototype._onTouchStart=function(e){},t.prototype._onKeyDown=function(e){switch(e.key){case 39:case 68:case 100:this._camera.rotate(this._keyRotateSpeed,0);break;case 38:case 87:case 119:this._restricted||this._camera.forward(this._keyForwardSpeed);break;case 37:case 65:case 97:this._camera.rotate(-this._keyRotateSpeed,0);break;case 40:case 83:case 115:this._restricted||this._camera.forward(-this._keyForwardSpeed)}},t.prototype._exitTransit=function(){this._restricted||this._camera.animator instanceof o.default&&this._camera.animator.stop()},t.prototype.setCamera=function(e,t){void 0===t&&(t=0),this._cameras=[];for(var r=0;r<e.length;r++)this._cameras.push(e[r]);this._camera=this._cameras[t]},t.prototype.setTransitionSpeed=function(e){this._animator.setTransitionSpeed(e)},t.prototype.setInputSensitivity=function(e){for(var t in e)switch(t){case"touchPan":this._touchPanSpeedScaling=e[t]*i.Environment.devicePixelRatio;break;case"touchZoom":this._touchZoomSpeedScaling=e[t]*Math.sqrt(i.Environment.devicePixelRatio);break;case"touchRotate":this._touchRotateSpeedScaling=e[t]*i.Environment.devicePixelRatio;break;case"mousePan":this._mousePanSpeedScaling=e[t];break;case"mouseZoom":this._mouseZoomSpeedScaling=e[t],this._camera.setZoomMinMax(e[t]);break;case"mouseRotate":this._mouseRotateSpeedScaling=e[t];break;case"keyPan":this._keyPanSpeed=e[t];break;case"keyForward":this._keyForwardSpeed=e[t]}},t.prototype.setPanoramaEnabled=function(e){this._isPanorama=e},t.prototype.setRestrictedViewEnabled=function(e){this._restricted=e},t.prototype.isRestrictedViewEnabled=function(){return this._restricted},t.prototype.recompileShader=function(e){if(this._scene){e.slice(0);e.push("CLIPPING"),a.Config.compressNormals&&e.push("COMPRESSION"),this._scene.needRenderDoubleSided()&&e.push("DOUBLESIDED"),this._depthQuery.recompileShader(this._resourceManager,e)}},t.prototype.unproject=function(e,t){return this._depthQuery.unproject(e,t,this._renderer,this._camera)},t}(l.default);t.default=c},"./08ui/tool/CameraNavigator.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/camera/m3d_camera_animator_navigate.js"),a=r("./08ui/tool/Tool.ts"),o=r("./glMatrix.js"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(){return function(){this.eye=o.vec3.create(),this.at=o.vec3.create(),this.angleDiff=0}}(),u=function(e){function t(t){var r=e.call(this,"CameraNavigator",!1,t)||this;return r._rotationDuration=100,r._update=function(){if(r._animating){r._currentStep++;for(var e=r._currentStep*r._speed,t=0;t<r._keyPoints.length&&!(r._distances[t]>e);t++);if(t===r._keyPoints.length){var n=r._keyPoints[r._keyPoints.length-1];r._moveTo(n.eye,n.at),r._viewer.getEventEmitter().emit("Camera-Navigation-Over"),r.stop()}else{var i=(e-r._distances[t-1])/(r._distances[t]-r._distances[t-1]);o.vec3.lerp(r._tmpKeypoint.eye,r._keyPoints[t-1].eye,r._keyPoints[t].eye,i),o.vec3.rotateZ(r._tmpKeypoint.at,r._keyPoints[t-1].at,r._keyPoints[t-1].eye,r._keyPoints[t].angleDiff*i),o.vec3.subtract(r._tmpKeypoint.at,r._tmpKeypoint.at,r._keyPoints[t-1].eye),o.vec3.add(r._tmpKeypoint.at,r._tmpKeypoint.at,r._tmpKeypoint.eye),r._moveTo(r._tmpKeypoint.eye,r._tmpKeypoint.at)}}},r._keyPoints=[],r._distances=[],r._speed=.5,r._animator=new i.default,r._animating=!1,r._currentStep=0,r._tmpKeypoint=new l,r._viewer.getEventEmitter().on("before-rendering",r._update),r}return s(t,e),t.prototype.destroy=function(){this._keyPoints=null,delete this._keyPoints,this._distances=null,delete this._distances,this._speed=null,delete this._speed,this._animator=null,delete this._animator,this._animating=null,delete this._animating,this._currentStep=null,delete this._currentStep,this._tmpKeypoint=null,delete this._tmpKeypoint,this._viewer.getEventEmitter().remove("before-rendering",this._update),e.prototype.destroy.call(this)},t.prototype.setRotationDuration=function(e){this._rotationDuration=e},t.prototype.clearKeyPoints=function(){this._keyPoints.length=0},t.prototype._reCalculateKeyPoints=function(){var e=[];this._distances.length=0;var t=this._keyPoints.length;for(t=1;t<this._keyPoints.length;t++){var r=this._keyPoints[t-1],n=this._keyPoints[t],i=o.vec3.length(n.eye,r.eye);if(1==t)this._distances.push(0),this._distances.push(i),r.at=o.vec3.clone(n.eye),o.vec3.subtract(n.at,r.at,r.eye),o.vec3.add(n.at,n.at,n.eye),e.push(r),e.push(n);else{var a=new l;a.eye=o.vec3.clone(r.eye),o.vec3.subtract(a.at,n.eye,r.eye),o.vec3.add(a.at,a.eye,a.at),o.vec3.subtract(n.at,a.at,a.eye),o.vec3.add(n.at,n.at,n.eye);var s=o.vec3.create(),u=o.vec3.create();o.vec3.subtract(s,a.at,a.eye),o.vec3.subtract(u,r.at,r.eye),o.vec3.normalize(s,s),o.vec3.normalize(u,u);var c=Math.acos(o.vec3.dot(s,u)),d=o.vec3.create();o.vec2.cross(d,u,s),c=d[2]>=0?c:-c,a.angleDiff=c,this._distances.push(this._distances[this._distances.length-1]+Math.abs(c)*this._rotationDuration),this._distances.push(this._distances[this._distances.length-1]+i),e.push(a),e.push(n)}}this._keyPoints=e},t.prototype.addKeyPoint=function(e){var t=new l;t.eye=e,this._keyPoints.push(t)},t.prototype.setSpeed=function(e){this._speed=e},t.prototype.start=function(){this._keyPoints.length<2||(this._reCalculateKeyPoints(),this._camera.eye=o.vec3.clone(this._keyPoints[0].eye),this._camera._at=o.vec3.clone(this._keyPoints[0].at),this._animating=!0,this._currentStep=0)},t.prototype.stop=function(){this._animating=!1},t.prototype.resume=function(){this._animating=!0},t.prototype._moveTo=function(e,t){this._animator.attach(this._camera),this._animator.start(e,t),this._animator.stop()},t}(a.default);t.default=u},"./08ui/tool/Comment.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./00utility/m3d_math.js"),a=r("./00utility/Config.ts"),o=r("./03scene/camera/m3d_camera_animator_transition.js"),s=r("./03scene/camera/m3d_camera_animator_navigate.js"),l=r("./08ui/tool/DepthQuery.ts"),u=r("./08ui/tool/PickQuery.ts"),c=r("./08ui/tool/Tool.ts"),d=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),h=function(e){function t(t){var r=e.call(this,"Comment",!1,t)||this;return r._pickQuery=new u.default(r._scene,r._resourceManager),r._depthQuery=new l.default(r._scene,r._resourceManager),r._animator=new o.default(t.getEventEmitter()),r._clippingEnabled=r._scene.clipping.isEnabled(),r._comments={},r}return d(t,e),t.prototype.destroy=function(){this._pickQuery.destroy(),this._pickQuery=null,delete this._pickQuery,this._depthQuery.destroy(),this._depthQuery=null,delete this._depthQuery,this._comments=null,delete this._comments},t.prototype.doesSupportMobile=function(e){return!0},t.prototype.doesSupport3D=function(e){return!0},t.prototype._recompileShader=function(){if(this._scene.clipping.isEnabled()!==this._clippingEnabled){this._clippingEnabled=this._scene.clipping.isEnabled();var e=[];a.Config.compressNormals&&e.push("COMPRESSION"),this._scene.needRenderDoubleSided()&&e.push("DOUBLESIDED"),this._pickQuery.recompileShader(this._resourceManager,e),this._depthQuery.recompileShader(this._resourceManager,e)}},t.prototype.activate=function(e){var t=!1,r=this._scene.clipping.isEnabled(),n=!1;if(e.section){if(n=!0,r){var a=i.default.aabb.create(e.section.min,e.section.max);t=i.default.aabb.isEqual(this._scene.clipping.get(),a)}e.section.min&&e.section.max?this._scene.clipping.set(e.section.min,e.section.max):this._scene.clipping.set(e.section.planes,e.section.points)}else this._scene.clipping.reset(),n=!1;t=t||r!==n,(this._camera.animator instanceof o.default||this._camera.animator instanceof s.default)&&this._camera.animator.stop(!0),this._animator.attach(this._camera),this._animator.start(e.camera,!1)},t.prototype.setTransitionSpeed=function(e){this._animator.setTransitionSpeed(e)},t.prototype.create=function(){return{element:"",camera:this._camera.dump(),section:this._scene.clipping.isEnabled()?{planes:this._scene.clipping.getClippingPlanes(!0),points:this._scene.clipping.getClippingPoints(!0)}:null}},t.prototype.render=function(){this._enabled},t.prototype.setComments=function(e){for(var t=0;t<e.length;t++)this._comments[e[t].id]=e[t].renderData},t.prototype.addComment=function(e){this._comments[e.id]=e.renderData},t.prototype.deleteComment=function(e){delete this._comments[e]},t.prototype.setEnabled=function(t){if(e.prototype.setEnabled.call(this,t),this._recompileShader(),!this._enabled){for(var r={},n=0,i=this._comments.length;n<i;n++){r[this._comments[n].id]={x:-1,y:-1,visible:!1}}this._viewer.getEventEmitter().emit("Comment-UpdateRenderStatus",r)}},t}(c.default);t.default=h},"./08ui/tool/DepthQuery.ts":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/Environment.ts"),i=r("./02resource/m3d_shader_library.js"),a=r("./03scene/camera/m3d_base_camera.js"),o=r("./03scene/materials/Material.ts"),s=r("./04renderer/pipeline/RenderTarget.ts"),l=r("./glMatrix.js"),u=function(){function e(e,t){this._scene=e,this._renderTarget=null,this._shaders=[null,null,null],this._ready=!1,this._phonyCamera=new a.default([0,0,1,1]),this._pickMatrix=l.mat4.create(),this._material=new o.default("depth-query"),this._gl=t.gl,this.recompileShader(t,[]),this._renderTarget=new s.default("query",t,5,5,{clearColor:[0,0,0,0]}),this._ready=this._renderTarget.ready}return e.prototype.destroy=function(){this._ready&&(this._material.destroy(),this._material=null,delete this._material,this._renderTarget.destroy(),this._renderTarget=null,delete this._renderTarget,this._pickMatrix=null,delete this._pickMatrix,this._phonyCamera=null,delete this._phonyCamera)},e.prototype._begin=function(e,t,r,n,i,a){t=r.viewport[3]-1-t,this._pickMatrix[0]=r.viewport[2]/i,this._pickMatrix[5]=r.viewport[3]/a,this._pickMatrix[12]=(r.viewport[2]-2*e)/i,this._pickMatrix[13]=(r.viewport[3]-2*t)/a,l.mat4.multiply(this._phonyCamera.vpMatrix,this._pickMatrix,r.vpMatrix),this._phonyCamera.viewport[0]=r.viewport[0],this._phonyCamera.viewport[1]=r.viewport[1],this._phonyCamera.viewport[2]=i,this._phonyCamera.viewport[3]=a},e.prototype._end=function(e,t){var r=this._gl;if(e||t){s=new Uint8Array(e*t*4);r.readPixels(0,0,e,t,r.RGBA,r.UNSIGNED_BYTE,s);for(var n=Number.POSITIVE_INFINITY,i=e*t,a=0;a<i;a+=1)if(0!==s[4*a+0]||0!==s[4*a+1]||0!==s[4*a+2]||0!==s[4*a+3]){var o=s[4*a+0]/255*(1/16581375)+s[4*a+1]/255*(1/65025)+s[4*a+2]/255*(1/255)+s[4*a+3]/255;o<n&&(n=o)}return n===Number.POSITIVE_INFINITY?null:n}var s=new Uint8Array(100);return r.readPixels(2,2,1,1,r.RGBA,r.UNSIGNED_BYTE,s),0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]?null:s[0]/255*(1/16581375)+s[1]/255*(1/65025)+s[2]/255*(1/255)+s[3]/255},e.prototype.unproject=function(e,t,r,i){if(!this._ready)return null;var a=this._gl;for(var o in e=Math.floor(e*n.Environment.devicePixelRatio),t=Math.floor(t*n.Environment.devicePixelRatio),this._renderTarget.resize(5,5),this._begin(e,t,i,r,5,5),r.clear(this._renderTarget,a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),this._scene.clipping.isEnabled()&&r.renderState.invalidateClip(),this._scene.models)r.drawDrawables(this._renderTarget,this._scene.models[o].drawables,this._phonyCamera,this._shaders,this._material,this._scene.clipping,null,null,!this._scene.needRenderDoubleSided()&&a.CCW);this._scene.terrain&&r.drawDrawables(this._renderTarget,this._scene.terrain.drawables,this._phonyCamera,this._shaders,this._material,this._scene.clipping,null,null,!this._scene.needRenderDoubleSided()&&a.CCW);var s=this._end();return null===s?(console.warn("failed to find valid depth value."),null):this._getPosition(e,t,s,i)},e.prototype.getNearest=function(e,t,r,i,a,o){if(!this._ready)return null;var s=this._gl;e=Math.floor(e*n.Environment.devicePixelRatio),t=Math.floor(t*n.Environment.devicePixelRatio),r=Math.floor(r*n.Environment.devicePixelRatio),i=Math.floor(i*n.Environment.devicePixelRatio);var l=Math.floor((e+r)/2),u=Math.floor((t+i)/2),c=r-e,d=i-t;for(var h in this._renderTarget.resize(c,d),this._begin(l,u,o,a,c,d),a.clear(this._renderTarget,s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),this._scene.clipping.isEnabled()&&a.renderState.invalidateClip(),this._scene.models)a.drawDrawables(this._renderTarget,this._scene.models[h].drawables,this._phonyCamera,this._shaders,this._material,this._scene.clipping,null,null,!this._scene.needRenderDoubleSided()&&s.CCW);this._scene.terrain&&a.drawDrawables(this._renderTarget,this._scene.terrain.drawables,this._phonyCamera,this._shaders,this._material,this._scene.clipping,null,null,!this._scene.needRenderDoubleSided()&&s.CCW);var f=this._end(c,d);return null===f?(console.warn("failed to find valid depth value."),null):this._getPosition(l,u,f,o)},e.prototype._getPosition=function(e,t,r,n){var i=n.viewport[2],a=n.viewport[3],o=l.vec4.fromValues(2*(e/i-.5),2*((a-1-t)/a-.5),2*r-1,1),s=l.mat4.create();l.mat4.invert(s,n.vpMatrix);var u=l.vec4.fromValues();return l.vec4.transformMat4(u,o,s),0!==u[3]?(o[0]=u[0]/u[3],o[1]=u[1]/u[3],o[2]=u[2]/u[3],o[3]=1):l.vec4.copy(o,u),o},e.prototype.recompileShader=function(e,t){var r=t.slice(0);r.push("ENCODE_DEPTH"),this._shaders[0]=e.getShader("depth-query",r),this._shaders[0].ready||this._shaders[0].createFromShaderSource(i.default.depth,r),r.push("MODEL_TRANSFORM"),this._shaders[1]=e.getShader("depth-query",r),this._shaders[1].ready||this._shaders[1].createFromShaderSource(i.default.depth,r),r.push("INSTANCING"),this._shaders[2]=e.getShader("depth-query",r),this._shaders[2].ready||this._shaders[2].createFromShaderSource(i.default.depth,r),this._material.attachShader(this._shaders[0])},e}();t.default=u},"./08ui/tool/MagnifyGlass.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./00utility/Environment.ts"),a=r("./03scene/drawables/Gizmo2D.ts"),o=r("./03scene/camera/m3d_camera_animator_transition.js"),s=r("./08ui/tool/DepthQuery.ts"),l=r("./08ui/tool/Tool.ts"),u=r("./08ui/tool/assets.ts"),c=r("./glMatrix.js"),d=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),h=function(e){function t(t){var r=e.call(this,"MagnifyGlass",!0,t)||this;r._depthQuery=new s.default(r._scene,t.getResourceManager()),r._animator=new o.default,r._renderTarget=r._getRenderTarget({depthTest:!1}),r._lineWidth=1,r._dashLength=1;var n=r._resourceManager.getMesh("magnify");n.createQuad(),r._drawable=new a.default(n,r._resourceManager);var i=t.getResourceManager().gl;r._resourceManager.getTexture("magnify").createFromFile(u.DASH_LINE_TEXTURE_IMAGE,i.RGB,i.LINEAR,i.REPEAT,function(e){r._drawable.setTexture(e),r._dashLength=e.width}),r._vertices=new Float32Array(80),r._indices=new Uint8Array(24);for(var l=0;l<4;++l)r._indices[0+6*l]=0+4*l,r._indices[1+6*l]=1+4*l,r._indices[2+6*l]=2+4*l,r._indices[3+6*l]=2+4*l,r._indices[4+6*l]=3+4*l,r._indices[5+6*l]=0+4*l;return r._resetVertices(),r}return d(t,e),t.prototype.destroy=function(){this._animator.destroy(),this._animator=null,delete this._animator,this._depthQuery.destroy(),this._depthQuery=null,delete this._depthQuery,this._drawable.destroy(),this._drawable=null,delete this._drawable,this._vertices=null,delete this._vertices,this._indices=null,delete this._indices,e.prototype.destroy.call(this)},t.prototype.doesSupportMobile=function(e){return!0},t.prototype.doesSupport3D=function(e){return!0},t.prototype.setEnabled=function(t){e.prototype.setEnabled.call(this,t),this._enabled||(this._startX=0,this._startY=0,this._endX=0,this._endY=0)},t.prototype.render=function(){this._enabled&&this._renderer.drawDrawable(this._renderTarget,this._drawable,this._camera,null,null,null,!1)},t.prototype.addInput=function(e){"mouse"===e.name?(e.addMouseDownListener(this._onMouseDown.bind(this)),e.addMouseMoveListener(this._onMouseMove.bind(this)),e.addMouseUpListener(this._onMouseUp.bind(this))):e.name},t.prototype._onMouseDown=function(e){return!(!this._enabled||e.button!==e.LEFT_BUTTON)&&(this._startX=e.x,this._startY=e.y,this._endX=this._startX,this._endY=this._startY,!0)},t.prototype._onMouseMove=function(e){return!(!this._enabled||e.button!==e.LEFT_BUTTON||!e.pressed)&&(this._endX+=e.dx,this._endY+=e.dy,this._updateVertices(),!0)},t.prototype._onMouseUp=function(e){return!(!this._enabled||e.button!==e.LEFT_BUTTON)&&(this._inputStop(),this._viewer.getEventEmitter().emit("MagnifyGlass-Selected"),!0)},t.prototype._inputStop=function(){var e=this._renderer,t=this._viewer.getCamera().core,r=t.viewport[2],n=t.viewport[3];if(this._resetVertices(),this._startX>this._endX){var i=this._startX;this._startX=this._endX,this._endX=i}if(this._startY>this._endY){i=this._startY;this._startY=this._endY,this._endY=i}if(this._startX!==this._endX&&this._startY!==this._endY){var a=this._depthQuery.getNearest(this._startX,this._startY,this._endX,this._endY,e,this._camera);if(null!==a){var o=c.vec3.create();c.vec3.subtract(o,a,this._camera.eye);var s=c.vec3.length(o);if(s<.01*this._scene.radius)this.setEnabled(!1);else{var l=Math.max(Math.abs(this._endX-this._startX)/r,Math.abs(this._endY-this._startY)/n);if(this._camera.isPerspective()){var u={fov:this._camera._fov,theta:this._camera._theta,phi:this._camera._phi,at:[a[0],a[1],a[2]],distance:l*s};this._animator.attach(this._camera),this._animator.start(u,!1,50)}else this._camera.zoomBy(l);this.setEnabled(!1)}}else this.setEnabled(!1)}else this.setEnabled(!1)},t.prototype.resize=function(t,r){this._renderTarget.resize(t,r),e.prototype.resize.call(this,t,r)},t.prototype.setLineWidth=function(e){this._lineWidth=e},t.prototype._updateVertices=function(){var e=this._startX,t=this._endX,r=this._startY,n=this._endY;this._startX>this._endX&&(e=this._endX,t=this._startX),this._startY>this._endY&&(r=this._endY,n=this._startY);var a=this._viewer.getCamera().core.viewport[3];e=Math.floor(e*i.Environment.devicePixelRatio),r=Math.floor(a-1-r*i.Environment.devicePixelRatio);var o=(t=Math.floor(t*i.Environment.devicePixelRatio))-e,s=r-(n=Math.floor(a-1-n*i.Environment.devicePixelRatio)),l=Math.floor(this._lineWidth*i.Environment.devicePixelRatio);this._addQuad(e,r,e+l,n,0,0,s,s,0),this._addQuad(e,r,t,r+l,0,o,o,0,20),this._addQuad(t-l,r,t,n,0,0,s,s,40),this._addQuad(e,n-l,t,n,0,o,o,0,60);var u=this._viewer.getResourceManager().gl;this._drawable.mesh.update(this._vertices,this._indices,u.UNSIGNED_BYTE)},t.prototype._addQuad=function(e,t,r,n,i,a,o,s,l){var u=this._viewer.getCamera().core,c=u.viewport[2],d=u.viewport[3];e=e/c*2-1,r=r/c*2-1,t=t/d*2-1,n=n/d*2-1,this._vertices[0+l]=e,this._vertices[1+l]=t,this._vertices[2+l]=0,this._vertices[3+l]=i/this._dashLength,this._vertices[4+l]=.5,this._vertices[5+l]=r,this._vertices[6+l]=t,this._vertices[7+l]=0,this._vertices[8+l]=a/this._dashLength,this._vertices[9+l]=.5,this._vertices[10+l]=r,this._vertices[11+l]=n,this._vertices[12+l]=0,this._vertices[13+l]=o/this._dashLength,this._vertices[14+l]=.5,this._vertices[15+l]=e,this._vertices[16+l]=n,this._vertices[17+l]=0,this._vertices[18+l]=s/this._dashLength,this._vertices[19+l]=.5},t.prototype._resetVertices=function(){for(var e=0;e<80;++e)this._vertices[e]=-1e6;var t=this._viewer.getResourceManager().gl;this._drawable.mesh.update(this._vertices,this._indices,t.UNSIGNED_BYTE)},t}(l.default);t.default=h},"./08ui/tool/Measure.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./00utility/Config.ts"),a=r("./08ui/tool/DepthQuery.ts"),o=r("./08ui/tool/Tool.ts"),s=r("./glMatrix.js"),l=r("./99api/utils/measure.ts"),u=r("./00utility/Environment.ts"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),d=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},h=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e},f=function(e){function t(t,r){var n=e.call(this,t,!0,r)||this;n._vertices=[],n._lines=[],n._subLines=[],n._snapCoord=[0,0],n._depthQuery=new a.default(n._scene,n._resourceManager),n._rtLine=n._getRenderTarget({depthTest:!1}),n._clippingEnabled=n._scene.clipping.isEnabled(),n._snappingEnabled=!u.Environment.isMobile,n._snapping=null,n._lineColor=[.969,.398,.238],n._clicks=0,n._finished=!1,n._smartCullingEnabled=!1,n._unit="m",n._scaling=.3048,n._lastEventName="",n._lastEventObject=null,n._lastAnchorUpdates=[];r.getCanvas();return n._overlays=Object(l.createOverlays)(),n._mouseAnchor=Object(l.createAnchorPoint)("#f75223"),n._anchorPoints=[Object(l.createAnchorPoint)(),Object(l.createAnchorPoint)(),Object(l.createAnchorPoint)()],n._anchorValues=[Object(l.createAnchorValue)(),Object(l.createAnchorValue)(),Object(l.createAnchorValue)()],n._overlays.appendChild(n._mouseAnchor),n}return c(t,e),t.prototype.doesSupportMobile=function(e){return!0},t.prototype.doesSupport3D=function(e){return!0},t.prototype.destroy=function(){this._rtLine=null,delete this._rtLine;for(var e=0;e<this._lines.length;e++)this._lines[e].destroy();this._lines=null,delete this._lines;for(e=0;e<this._subLines.length;e++)this._subLines[e].destroy();this._subLines=null,delete this._subLines,this._depthQuery.destroy(),this._depthQuery=null,delete this._depthQuery,this._vertices=null,delete this._vertices,this._overlays.remove(),this._overlays=null,delete this._overlays,this._anchorPoints=null,delete this._anchorPoints,this._anchorValues=null,delete this._anchorValues,this._mouseAnchor=null,delete this._mouseAnchor,this._lastEventObject=null,delete this._lastEventObject,this._lastAnchorUpdates=null,delete this._lastAnchorUpdates},t.prototype.resize=function(e,t){this._rtLine.resize(e,t),this._snapping&&this._snapping.resize(e,t)},t.prototype._reset=function(){for(var e=0;e<this._lines.length;e++)this._lines[e]._drawable.mesh.destroy(),this._lines[e].destroy();this._lines=[],this._vertices=[],this._clicks=0,this._finished=!1,this._notifyResult("Measure-Update",{distance:0,x:0,y:0,z:0,angle:0,area:0})},t.prototype._recompileShader=function(){if(this._scene.clipping.isEnabled()!==this._clippingEnabled){this._clippingEnabled=this._scene.clipping.isEnabled();var e=[];i.Config.compressNormals&&e.push("COMPRESSION"),this._scene.needRenderDoubleSided()&&e.push("DOUBLESIDED"),this._depthQuery.recompileShader(this._resourceManager,e),this._snapping&&this._snapping.recompileShader(this._resourceManager,e)}},t.prototype._updateMouseAnchor=function(e){Object(l.updateAnchorPoint)(this._mouseAnchor,e)},t.prototype._hideMouseAnchor=function(){Object(l.updateAnchorPoint)(this._mouseAnchor,null)},t.prototype._updateAnchorPoints=function(e){if(void 0===e&&(e=[]),e.length>this._anchorPoints.length){var t=Object(l.createAnchorPoint)();this._overlays.appendChild(t),this._anchorPoints.push(t)}this._anchorPoints.forEach(function(t,r){e[r]?Object(l.updateAnchorPoint)(t,{pos:e[r]}):Object(l.updateAnchorPoint)(t,null)})},t.prototype._hideAnchorPoints=function(){this._anchorPoints.forEach(function(e){Object(l.updateAnchorPoint)(e,null)})},t.prototype._updateAnchorValues=function(e){void 0===e&&(e=[]),this._anchorValues.forEach(function(t,r){e[r]&&Object(l.updateAnchorValue)(t,e[r])});var t=e.filter(function(e){return!!e.value}).map(function(e){return{value:e.value}});t.length>0&&(this._lastAnchorUpdates=t)},t.prototype._hideAnchorValues=function(){this._anchorValues.forEach(function(e){Object(l.updateAnchorValue)(e,null)})},t.prototype._updateSnapping=function(){this._snapping&&this._snapping.update(this._renderer,this._scene,this._camera)},t.prototype._projectLineSegmentToScreen=function(e,t,r,n){var i=this._camera.getViewDirection(),a=-s.vec3.dot(i,this._camera.eye);s.vec3.copy(r,e),s.vec3.copy(n,t);var o=s.vec3.dot(r,i)+a,l=s.vec3.dot(n,i)+a,u=s.vec3.create();if(o>0||l>0){if(o<0){s.vec3.subtract(u,r,n);var c=(.001-a-s.vec3.dot(n,i))/s.vec3.dot(u,i);s.vec3.scaleAndAdd(r,n,u,c)}if(l<0){s.vec3.subtract(u,n,r);c=(.001-a-s.vec3.dot(r,i))/s.vec3.dot(u,i);s.vec3.scaleAndAdd(n,r,u,c)}var d=this._camera.project(r);r[0]=d[0],r[1]=d[1];var h=this._camera.project(n);return n[0]=h[0],n[1]=h[1],!0}return!1},t.prototype.setSnappingEnabled=function(e){e&&u.Environment.isMobile?console.warn("Sanpping is not support on mobile."):this._snappingEnabled=e},t.prototype.setEnabled=function(e){var t=this;this._enabled=e,this._enabled?(u.Environment.isMobile?this._snapping=null:this._snapping=this._viewer.getSnapping(),this._camera.addUpdateStopListener(this._updateSnapping.bind(this)),this._recompileShader(),this._camera.setBimCullingEnabled(!1),this._updateSnapping()):(this._camera.removeUpdateStopListener(this._updateSnapping.bind(this)),this._reset()),e?(this._smartCullingEnabled=this._viewer.isSmartCullingEnabled(),this._viewer.setSmartCullingEnabled(!1),this._viewer.getCanvas().insertAdjacentElement("afterend",this._overlays),h(this._anchorPoints,this._anchorValues).forEach(function(e){t._overlays.appendChild(e)})):(this._viewer.setSmartCullingEnabled(this._smartCullingEnabled),this._overlays.remove(),h(this._anchorPoints,this._anchorValues).forEach(function(e){e.remove()}))},t.prototype.setLineColor=function(e){this._lineColor[0]=e[0],this._lineColor[1]=e[1],this._lineColor[2]=e[2]},t.prototype.addInput=function(e){"mouse"===e.name?(e.addMouseDownListener(this._onMouseDown.bind(this)),e.addMouseWheelListener(this._onMouseWheel.bind(this)),e.addMouseMoveListener(this._onMouseMove.bind(this)),e.addMouseUpListener(this._onMouseUp.bind(this))):"touch"===e.name?(e.addTouchMoveListener(this._onTouchMove.bind(this)),e.addTouchStopListener(this._onTouchStop.bind(this)),e.addTouchStartListener(this._onTouchStart.bind(this))):"keyboard"===e.name&&e.addKeyUpListener(this._onKeyUp.bind(this))},t.prototype.setUnit=function(e){var t=this,r=e!==this._unit,n=this._scaling;switch(e){case"m":this._unit="m",this._scaling=.3048;break;case"cm":this._unit="cm",this._scaling=30.48;break;case"feet":this._unit="feet",this._scaling=1;break;case"inches":this._unit="inches",this._scaling=12;break;default:console.log('Unsupported length unit! Please use either "feet", "inches", "cm" or "m"')}if(r&&""!==this._lastEventName){var i=this._scaling/n,a=this._lastEventObject;a.distance&&(a.distance*=i,a.distance=a.distance.toFixed(2)),a.x&&(a.x*=i,a.x=a.x.toFixed(2)),a.y&&(a.y*=i,a.y=a.y.toFixed(2)),a.z&&(a.z*=i,a.z=a.z.toFixed(2)),this._viewer.getEventEmitter().emit(this._lastEventName,a),this._anchorValues.forEach(function(e,r){if(t._lastAnchorUpdates[r]){var n=t._lastAnchorUpdates[r];n.value&&(n.value*=i,n.value=n.value.toFixed(2)),Object(l.updateAnchorValue)(e,n)}})}},t.prototype.getUnit=function(){return this._unit},t.prototype._convertArea=function(e){return e*(this._scaling*this._scaling)},t.prototype._convertLength=function(e){return e*this._scaling},t.prototype._onKeyUp=function(e){return!1},t.prototype._onMouseDown=function(e){return this._recompileShader(),!1},t.prototype._onMouseWheel=function(e){return this._enabled,!1},t.prototype._onMouseMove=function(e){return!1},t.prototype._onMouseUp=function(e){return!1},t.prototype._onTouchStart=function(e){return!1},t.prototype._onTouchMove=function(e){return!1},t.prototype._onTouchStop=function(e){return!1},t.prototype._notifyResult=function(e,t){this._viewer.getEventEmitter().emit(e,t),this._lastEventName=e,this._lastEventObject=t},t}(o.default);t.default=f},"./08ui/tool/MeasureAngle.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./08ui/tool/m3d_line.js"),a=r("./08ui/tool/Measure.ts"),o=r("./08ui/tool/Snapping.ts"),s=r("./99api/utils/measure.ts"),l=r("./glMatrix.js"),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=[0,0],d=[0,0],h=function(e){function t(t){var r=e.call(this,"MeasureAngle",t)||this;return r._angle=0,r._radians=!1,r}return u(t,e),t.prototype.destory=function(){e.prototype.destroy.call(this)},t.prototype.setEnabled=function(t){e.prototype.setEnabled.call(this,t)},t.prototype._onMouseWheel=function(e){return!!this._enabled&&(this._clicks>0&&3!==this._clicks&&l.vec3.copy(this._vertices[this._vertices.length-1],this._vertices[this._vertices.length-2]),this._hideMouseAnchor(),!1)},t.prototype.getAngle=function(){return this._angle},t.prototype._onMouseMove=function(t){if(!this._enabled)return!1;if(e.prototype._onMouseMove.call(this,t),t.pressed)return this._clicks>0&&3!==this._clicks&&l.vec3.copy(this._vertices[this._vertices.length-1],this._vertices[this._vertices.length-2]),this._hideMouseAnchor(),!1;if(t.moved){var r=t.x,n=t.y;if(this._snappingEnabled){if(this._snapCoord[0]=r,this._snapCoord[1]=n,!t.pressed&&!this._camera.updated){var i=this._snapping.snap(this._snapCoord);this._updateMouseAnchor({pos:this._snapCoord,isSnapped:i!==o.SnappingMode.NONE})}r=this._snapCoord[0],n=this._snapCoord[1]}var a=this._camera.unproject(r,n);this._vertices.length>0&&this._clicks<3&&l.vec3.copy(this._vertices[this._vertices.length-1],a)}return this._viewer.invalidate(),!0},t.prototype._onMouseUp=function(t){if(!this._enabled||t.moved)return!1;if(e.prototype._onMouseUp.call(this,t),t.button===t.RIGHT_BUTTON)return this._angle=0,this._reset(),!1;var r=this._clicks;this._clicks=this._clicks%3+1;var n=t.x,i=t.y;this._snappingEnabled&&(n=this._snapCoord[0],i=this._snapCoord[1]);var a=this._depthQuery.unproject(n,i,this._renderer,this._camera);return a?(this._snappingEnabled&&!this._camera.updated&&this._snapping.snap(this._snapCoord,a),this._updateLines(n,i,a),!0):(this._clicks=r,!1)},t.prototype._onTouchStop=function(t){if(!this._enabled||1!==t.numCursors)return!1;if(Math.abs(t.cursor(0).dx)>1e-4||Math.abs(t.cursor(0).dy)>1e-4)return!1;e.prototype._onTouchStop.call(this,t);var r=this._clicks;this._clicks=this._clicks%3+1;var n=t.cursor(0).x,i=t.cursor(0).y;this._snappingEnabled&&(n=this._snapCoord[0],i=this._snapCoord[1]);var a=this._depthQuery.unproject(n,i,this._renderer,this._camera);return a?(this._snappingEnabled&&!this._camera.updated&&this._snapping.snap(this._snapCoord,a),this._updateLines(n,i,a),!0):(this._clicks=r,!1)},t.prototype._updateLines=function(e,t,r){if(1===this._clicks)this._reset(),this._vertices.push(l.vec3.clone(r)),this._vertices.push(l.vec3.clone(r)),this._lines.push(new i.default("measure-angle-"+this._lines.length,this._resourceManager,this._lineColor,!1)),this._clicks=1,this._viewer.getEventEmitter().emit("Measure-Update",{angle:0});else if(l.vec3.copy(this._vertices[this._vertices.length-1],r),this._vertices.length<3&&(this._vertices.push(l.vec3.clone(r)),this._lines.push(new i.default("measure-angle-"+this._lines.length,this._resourceManager,this._lineColor,!1))),3===this._clicks){var n=l.vec3.create(),a=l.vec3.create();l.vec3.sub(n,this._vertices[0],this._vertices[1]),l.vec3.sub(a,this._vertices[2],this._vertices[1]),this._angle=l.vec3.angle(n,a);var o=this._radians?this._angle:this._angle/Math.PI*180;this._viewer.getEventEmitter().emit("Measure-Update",{angle:o}),this._updateAnchorValues([{value:o.toFixed(2)+(this._radians?"":"°"),color:"red"}]);var s=l.vec3.length(n),u=l.vec3.length(a),c=Math.min(s,u);l.vec3.lerp(n,this._vertices[1],this._vertices[0],.1*c/s),l.vec3.lerp(a,this._vertices[1],this._vertices[2],.1*c/u),this._vertices.push(a),this._vertices.push(n),this._lines.push(new i.default("measure-angle-"+this._lines.length,this._resourceManager,this._lineColor,!1)),this._lines.push(new i.default("measure-angle-"+this._lines.length,this._resourceManager,this._lineColor,!1))}},t.prototype.render=function(){if(this._enabled){for(var e=0;e<this._lines.length;e++){var t=this._vertices[e],r=this._vertices[e+1];this._projectLineSegmentToScreen(t,r,c,d)&&(this._lines[e].updateVertices(c[0],c[1],d[0],d[1],this._viewer.getWidth(),this._viewer.getHeight()),this._lines[e].render(this._rtLine,this._renderer,this._camera))}var n=[],i=this._vertices.length-1;3===this._clicks&&(i=3);for(e=0;e<i;++e)n.push(this._camera.project(this._vertices[e]));this._updateAnchorPoints(n),3===n.length?this._updateAnchorValues([{pos:Object(s.getCenterPoint)(c,d)}]):this._hideAnchorValues()}},t.prototype.useRadians=function(e){if(this._radians!==e){var t=e?this._angle:this._angle/Math.PI*180;this._updateAnchorValues([{value:t.toFixed(2)+(this._radians?"":"°"),color:"red"}]),this._viewer.getEventEmitter().emit("Measure-Update",{angle:t})}this._radians=e},t.prototype.isRadians=function(){return this._radians},t}(a.default);t.default=h},"./08ui/tool/MeasureArea.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./08ui/tool/m3d_line.js"),a=r("./08ui/tool/Measure.ts"),o=r("./08ui/tool/Snapping.ts"),s=r("./glMatrix.js"),l=r("./99api/utils/measure.ts"),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=[0,0],d=[0,0],h=function(e){function t(t){var r=e.call(this,"MeasureArea",t)||this;return r._area=0,r._subLines.push(new i.default("area_subline_0",r._resourceManager,r._lineColor,!0)),r._subLines.push(new i.default("area_subline_1",r._resourceManager,r._lineColor,!0)),r}return u(t,e),t.prototype.setEnabled=function(t){e.prototype.setEnabled.call(this,t)},t.prototype._onKeyUp=function(e){if(!this._enabled||this._finished)return!1;27!==e.key&&13!==e.key||(this._vertices.pop(),this._finished=!0)},t.prototype._onMouseWheel=function(e){return!!this._enabled&&(this._finished||this._clicks>0&&s.vec3.copy(this._vertices[this._vertices.length-1],this._vertices[this._vertices.length-2]),this._hideMouseAnchor(),!1)},t.prototype._onMouseMove=function(t){if(!this._enabled)return!1;if(e.prototype._onMouseMove.call(this,t),t.pressed)return this._finished||this._clicks>0&&s.vec3.copy(this._vertices[this._vertices.length-1],this._vertices[this._vertices.length-2]),this._hideMouseAnchor(),!1;if(t.moved){var r=t.x,n=t.y;if(this._snapping){if(this._snapCoord[0]=r,this._snapCoord[1]=n,!t.pressed&&!this._camera.updated){var i=this._snapping.snap(this._snapCoord);this._finished?this._hideMouseAnchor():this._updateMouseAnchor({pos:this._snapCoord,isSnapped:i!==o.SnappingMode.NONE})}r=this._snapCoord[0],n=this._snapCoord[1]}var a=this._camera.unproject(r,n);this._vertices.length>0&&!this._finished&&s.vec3.copy(this._vertices[this._vertices.length-1],a)}return!0},t.prototype._onMouseUp=function(t){if(!this._enabled||t.moved)return!1;if(e.prototype._onMouseUp.call(this,t),t.button===t.RIGHT_BUTTON)return this._reset(),!1;this._finished&&this._reset(),this._clicks++;var r=t.x,n=t.y;this._snapping&&(r=this._snapCoord[0],n=this._snapCoord[1]);var i=this._depthQuery.unproject(r,n,this._renderer,this._camera);return i?(this._snapping&&!this._camera.updated&&this._snapping.snap(this._snapCoord,i),this._updateLines(r,n,i),!0):(this._clicks--,!1)},t.prototype._onTouchStop=function(t){if(!this._enabled||1!==t.numCursors)return!1;if(e.prototype._onTouchStop.call(this,t),Math.abs(t.cursor(0).dx)>1e-4||Math.abs(t.cursor(0).dy)>1e-4)return!1;this._finished&&this._reset(),this._clicks++;var r=t.cursor(0).x,n=t.cursor(0).y;this._snapping&&(r=this._snapCoord[0],n=this._snapCoord[1]);var i=this._depthQuery.unproject(r,n,this._renderer,this._camera);return i?(this._snapping&&!this._camera.updated&&this._snapping.snap(this._snapCoord,i),this._updateLines(r,n,i),!0):(this._clicks--,!1)},t.prototype._updateLines=function(e,t,r){if(1===this._clicks?this._vertices.push(s.vec3.clone(r)):s.vec3.copy(this._vertices[this._vertices.length-1],r),this._vertices.push(s.vec3.clone(r)),this._lines.push(new i.default("measure-area-"+this._lines.length,this._resourceManager,this._lineColor,!1)),this._lines.length>=3){var n=this._lines.length,a=s.vec3.create(),o=s.vec3.create(),l=s.vec3.create(),u=s.vec3.create(),c=s.vec3.create();s.vec3.sub(a,this._vertices[1],this._vertices[0]),s.vec3.sub(o,this._vertices[2],this._vertices[1]),s.vec3.cross(c,a,o),s.vec3.normalize(c,c);for(var d=0;d<n;d++)s.vec3.sub(a,this._vertices[(d+1)%n],this._vertices[d%n]),s.vec3.sub(o,this._vertices[(d+2)%n],this._vertices[(d+1)%n]),s.vec3.cross(l,a,o),s.vec3.add(u,u,l);this._area=Math.abs(.5*s.vec3.dot(c,u));var h=this._convertArea(this._area);this._notifyResult("Measure-Update",{area:h}),this._updateAnchorValues([{value:h.toFixed(2),color:"red"}])}},t.prototype.render=function(){if(this._enabled){if(this._clicks<1)return this._hideAnchorPoints(),void this._hideAnchorValues();for(var e=this._lines.length,t=Math.max(e,2),r=0;r<e;r++){var n=this._vertices[r%t],i=this._vertices[(r+1)%t];this._projectLineSegmentToScreen(n,i,c,d)&&(this._lines[r].updateVertices(c[0],c[1],d[0],d[1],this._viewer.getWidth(),this._viewer.getHeight()),this._lines[r].render(this._rtLine,this._renderer,this._camera))}if(this._clicks>1&&!this._finished){i=this._vertices[this._vertices.length-1],n=this._vertices[0];this._projectLineSegmentToScreen(n,i,c,d)&&(this._subLines[0].updateVertices(c[0],c[1],d[0],d[1],this._viewer.getWidth(),this._viewer.getHeight()),this._subLines[0].render(this._rtLine,this._renderer,this._camera)),n=this._vertices[this._vertices.length-2],this._projectLineSegmentToScreen(n,i,c,d)&&(this._subLines[1].updateVertices(c[0],c[1],d[0],d[1],this._viewer.getWidth(),this._viewer.getHeight()),this._subLines[1].render(this._rtLine,this._renderer,this._camera))}var a=[0,0,0],o=[],s=this._finished?this._vertices.length:this._vertices.length-1;for(r=0;r<this._vertices.length;++r)a[0]+=this._vertices[r][0],a[1]+=this._vertices[r][1],a[2]+=this._vertices[r][2],o.push(this._camera.project(this._vertices[r]));a[0]/=s,a[1]/=s,a[2]/=s,this._updateAnchorPoints(o.slice(0,o.length-1)),this._updateAnchorValues([{pos:this._camera.project(a)}])}},t.prototype.setUnit=function(e){var t=this,r=e!==this._unit,n=this._scaling;switch(e){case"m":this._unit="m",this._scaling=.3048;break;case"cm":this._unit="cm",this._scaling=30.48;break;case"feet":this._unit="feet",this._scaling=1;break;case"inches":this._unit="inches",this._scaling=12;break;default:console.log('Unsupported length unit! Please use either "feet", "inches", "cm" or "m"')}if(r&&""!==this._lastEventName){var i=this._scaling/n,a=this._lastEventObject;a.area&&(a.area*=i*i,a.area=a.area.toFixed(2)),this._viewer.getEventEmitter().emit(this._lastEventName,a),this._anchorValues.forEach(function(e,r){if(t._lastAnchorUpdates[r]){var n=t._lastAnchorUpdates[r];n.value&&(n.value*=i*i,n.value=n.value.toFixed(2)),Object(l.updateAnchorValue)(e,n)}})}},t}(a.default);t.default=h},"./08ui/tool/MeasureLine.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./08ui/tool/m3d_line.js"),a=r("./08ui/tool/Measure.ts"),o=r("./08ui/tool/Snapping.ts"),s=r("./99api/utils/measure.ts"),l=r("./glMatrix.js"),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=[0,0],d=[0,0],h=function(e){function t(t){var r=e.call(this,"MeasureLine",t)||this;return r._perimeter=0,r}return u(t,e),t.prototype.destory=function(){e.prototype.destroy.call(this)},t.prototype.setEnabled=function(t){e.prototype.setEnabled.call(this,t)},t.prototype.getPerimeter=function(){return this._perimeter},t.prototype._onMouseWheel=function(e){return!!this._enabled&&(this._clicks%2==1&&l.vec3.copy(this._vertices[1],this._vertices[0]),this._hideMouseAnchor(),!1)},t.prototype._onMouseMove=function(t){if(!this._enabled)return!1;if(e.prototype._onMouseMove.call(this,t),t.pressed)return this._clicks%2==1&&l.vec3.copy(this._vertices[1],this._vertices[0]),this._hideMouseAnchor(),!1;if(t.moved){var r=t.x,n=t.y;if(this._snappingEnabled){if(this._snapCoord[0]=r,this._snapCoord[1]=n,!t.pressed&&!this._camera.updated){var i=this._snapping.snap(this._snapCoord);this._updateMouseAnchor({pos:this._snapCoord,isSnapped:i!==o.SnappingMode.NONE})}r=this._snapCoord[0],n=this._snapCoord[1]}if(this._clicks%2==1){var a=this._camera.unproject(r,n);this._vertices.length>0&&l.vec3.copy(this._vertices[1],a)}}return!0},t.prototype._onMouseUp=function(t){if(!this._enabled||t.moved)return!1;if(e.prototype._onMouseUp.call(this,t),t.button===t.RIGHT_BUTTON)return this._perimeter=0,this._reset(),!1;this._clicks++;var r=t.x,n=t.y;this._snappingEnabled&&(r=this._snapCoord[0],n=this._snapCoord[1]);var i=this._depthQuery.unproject(r,n,this._renderer,this._camera);return i?(this._snappingEnabled&&!this._camera.updated&&this._snapping.snap(this._snapCoord,i),this._updateLine(r,n,i),!0):(this._clicks--,!1)},t.prototype._updateLine=function(e,t,r){if(this._clicks%2==0){l.vec3.copy(this._vertices[1],r),this._vertices[2][0]=this._vertices[0][0],this._vertices[2][1]=this._vertices[0][1],this._vertices[2][2]=this._vertices[1][2],this._vertices[3][0]=this._vertices[0][0],this._vertices[3][1]=this._vertices[1][1],this._vertices[3][2]=this._vertices[1][2],this._perimeter=l.vec3.distance(this._vertices[0],this._vertices[1]);var n=this._convertLength(this._vertices[1][0]-this._vertices[0][0]),a=this._convertLength(this._vertices[1][1]-this._vertices[0][1]),o=this._convertLength(this._vertices[1][2]-this._vertices[0][2]);this._notifyResult("Measure-Update",{distance:this._convertLength(this._perimeter),x:n,y:a,z:o}),this._updateAnchorValues([{value:n,color:"red"},{value:a,color:"limegreen"},{value:o,color:"blue"}].map(function(e){return{value:Math.abs(e.value).toFixed(2),color:e.color}}))}else{this._vertices=[];for(var s=0;s<4;s++)this._vertices[s]=l.vec3.clone(r);this._lines[0]=new i.default("line_0",this._resourceManager,this._lineColor,!1),this._lines[1]=new i.default("line_1",this._resourceManager,[0,0,1],!0),this._lines[2]=new i.default("line_2",this._resourceManager,[0,1,0],!0),this._lines[3]=new i.default("line_3",this._resourceManager,[1,0,0],!0),this._notifyResult("Measure-Update",{distance:0,x:0,y:0,z:0})}},t.prototype._onTouchStop=function(t){if(!this._enabled||1!==t.numCursors)return!1;if(e.prototype._onTouchStop.call(this,t),Math.abs(t.cursor(0).dx)>1e-4||Math.abs(t.cursor(0).dy)>1e-4)return!1;this._clicks++;var r=t.cursor(0).x,n=t.cursor(0).y;this._snappingEnabled&&(r=this._snapCoord[0],n=this._snapCoord[1]);var i=this._depthQuery.unproject(r,n,this._renderer,this._camera);return i?(this._snappingEnabled&&!this._camera.updated&&this._snapping.snap(this._snapCoord,i),this._updateLine(r,n,i),!0):(this._clicks--,!1)},t.prototype.render=function(){if(this._enabled){if(0===this._vertices.length)return this._hideAnchorPoints(),void this._hideAnchorValues();this._projectLineSegmentToScreen(this._vertices[0],this._vertices[1],c,d)&&(this._lines[0].updateVertices(c[0],c[1],d[0],d[1],this._viewer.getWidth(),this._viewer.getHeight()),this._lines[0].render(this._rtLine,this._renderer,this._camera)),this._clicks%2==0&&(this._projectLineSegmentToScreen(this._vertices[0],this._vertices[2],c,d)&&(this._lines[1].updateVertices(c[0],c[1],d[0],d[1],this._viewer.getWidth(),this._viewer.getHeight()),this._lines[1].render(this._rtLine,this._renderer,this._camera)),this._projectLineSegmentToScreen(this._vertices[2],this._vertices[3],c,d)&&(this._lines[2].updateVertices(c[0],c[1],d[0],d[1],this._viewer.getWidth(),this._viewer.getHeight()),this._lines[2].render(this._rtLine,this._renderer,this._camera)),this._projectLineSegmentToScreen(this._vertices[3],this._vertices[1],c,d)&&(this._lines[3].updateVertices(c[0],c[1],d[0],d[1],this._viewer.getWidth(),this._viewer.getHeight()),this._lines[3].render(this._rtLine,this._renderer,this._camera)));for(var e=[],t=this._clicks%2==0?this._vertices.length:1,r=0;r<t;++r)e.push(this._camera.project(this._vertices[r]));this._updateAnchorPoints([e[0],e[1]]),4===e.length?this._updateAnchorValues([{pos:Object(s.getCenterPoint)(e[1],e[3])},{pos:Object(s.getCenterPoint)(e[2],e[3])},{pos:Object(s.getCenterPoint)(e[2],e[0])}]):this._hideAnchorValues()}},t}(a.default);t.default=h},"./08ui/tool/MeasureLineFan.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./08ui/tool/m3d_line.js"),a=r("./08ui/tool/Measure.ts"),o=r("./08ui/tool/Snapping.ts"),s=r("./99api/utils/measure.ts"),l=r("./glMatrix.js"),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},d=[0,0],h=[0,0],f=function(e){function t(t){var r=e.call(this,"MeasureLineFan",t)||this;return r._perimeter=0,r}return u(t,e),t.prototype.destory=function(){e.prototype.destroy.call(this)},t.prototype.setEnabled=function(t){e.prototype.setEnabled.call(this,t)},t.prototype.getPerimeter=function(){return this._perimeter},t.prototype._onKeyUp=function(e){if(!this._enabled||this._finished)return!1;27!==e.key&&13!==e.key||(l.vec3.copy(this._vertices[2],this._vertices[0]),this._finished=!0)},t.prototype._onMouseWheel=function(e){return!!this._enabled&&(this._clicks>0&&l.vec3.copy(this._vertices[2],this._vertices[0]),this._hideMouseAnchor(),!1)},t.prototype._onMouseMove=function(t){if(!this._enabled)return!1;if(e.prototype._onMouseMove.call(this,t),t.pressed)return this._clicks>0&&l.vec3.copy(this._vertices[2],this._vertices[0]),this._hideMouseAnchor(),!1;if(t.moved){var r=t.x,n=t.y;if(this._snappingEnabled){if(this._snapCoord[0]=r,this._snapCoord[1]=n,!t.pressed&&!this._camera.updated){var i=this._snapping.snap(this._snapCoord);this._finished?this._hideMouseAnchor():this._updateMouseAnchor({pos:this._snapCoord,isSnapped:i!==o.SnappingMode.NONE})}r=this._snapCoord[0],n=this._snapCoord[1]}var a=this._camera.unproject(r,n);this._vertices.length>0&&!this._finished&&l.vec3.copy(this._vertices[2],a)}return this._viewer.invalidate(),!0},t.prototype._onMouseUp=function(t){if(!this._enabled||t.moved)return!1;if(e.prototype._onMouseUp.call(this,t),t.button===t.RIGHT_BUTTON)return this._perimeter=0,this._reset(),!1;this._finished&&this._reset(),this._clicks++;var r=t.x,n=t.y;this._snappingEnabled&&(r=this._snapCoord[0],n=this._snapCoord[1]);var i=this._depthQuery.unproject(r,n,this._renderer,this._camera);return i?(this._snappingEnabled&&!this._camera.updated&&this._snapping.snap(this._snapCoord,i),this._updateLines(r,n,i),!0):(this._clicks--,!1)},t.prototype._onTouchStop=function(t){if(!this._enabled||1!==t.numCursors)return!1;if(e.prototype._onTouchStop.call(this,t),Math.abs(t.cursor(0).dx)>1e-4||Math.abs(t.cursor(0).dy)>1e-4)return!1;this._finished&&this._reset(),this._clicks++;var r=t.cursor(0).x,n=t.cursor(0).y;this._snappingEnabled&&(r=this._snapCoord[0],n=this._snapCoord[1]);var i=this._depthQuery.unproject(r,n,this._renderer,this._camera);return i?(this._snappingEnabled&&!this._camera.updated&&this._snapping.snap(this._snapCoord,i),this._updateLines(r,n,i),!0):(this._clicks--,!1)},t.prototype._updateLines=function(e,t,r){var n=this;if(1===this._clicks){for(var a=0;a<5;a++)this._vertices.push(l.vec3.clone(r));this._lines[0]=new i.default("measure-linefan-0",this._resourceManager,this._lineColor,!1),this._lines[1]=new i.default("measure-linefan-1",this._resourceManager,this._lineColor,!1),this._lines[2]=new i.default("measure-linefan-x",this._resourceManager,[0,0,1],!0),this._lines[3]=new i.default("measure-linefan-y",this._resourceManager,[0,1,0],!0),this._lines[4]=new i.default("measure-linefan-z",this._resourceManager,[1,0,0],!0)}else{l.vec3.copy(this._vertices[1],r),l.vec3.copy(this._vertices[2],r),this._vertices[3][0]=this._vertices[0][0],this._vertices[3][1]=this._vertices[0][1],this._vertices[3][2]=this._vertices[1][2],this._vertices[4][0]=this._vertices[0][0],this._vertices[4][1]=this._vertices[1][1],this._vertices[4][2]=this._vertices[1][2],this._perimeter=l.vec3.distance(this._vertices[0],this._vertices[1]);this._vertices[1][0],this._vertices[0][0];var o=this._vertices[1][1]-this._vertices[0][1],s=this._vertices[1][2]-this._vertices[0][2],u=c([s,o,s].map(function(e){return n._convertLength(e)}),3),d=u[0],h=u[1],f=u[2];this._notifyResult("Measure-Update",{x:d,y:h,z:f,distance:this._convertLength(this._perimeter)}),this._updateAnchorValues([{value:d,color:"red"},{value:h,color:"limegreen"},{value:f,color:"blue"}].map(function(e){return{value:Math.abs(e.value).toFixed(2),color:e.color}}))}},t.prototype.render=function(){if(this._enabled){if(0===this._vertices.length)return this._hideAnchorPoints(),void this._hideAnchorValues();this._projectLineSegmentToScreen(this._vertices[0],this._vertices[1],d,h)&&(this._lines[0].updateVertices(d[0],d[1],h[0],h[1],this._viewer.getWidth(),this._viewer.getHeight()),this._lines[0].render(this._rtLine,this._renderer,this._camera)),this._projectLineSegmentToScreen(this._vertices[0],this._vertices[2],d,h)&&(this._lines[1].updateVertices(d[0],d[1],h[0],h[1],this._viewer.getWidth(),this._viewer.getHeight()),this._lines[1].render(this._rtLine,this._renderer,this._camera)),this._clicks>1&&(this._projectLineSegmentToScreen(this._vertices[0],this._vertices[3],d,h)&&(this._lines[2].updateVertices(d[0],d[1],h[0],h[1],this._viewer.getWidth(),this._viewer.getHeight()),this._lines[2].render(this._rtLine,this._renderer,this._camera)),this._projectLineSegmentToScreen(this._vertices[3],this._vertices[4],d,h)&&(this._lines[3].updateVertices(d[0],d[1],h[0],h[1],this._viewer.getWidth(),this._viewer.getHeight()),this._lines[3].render(this._rtLine,this._renderer,this._camera)),this._projectLineSegmentToScreen(this._vertices[4],this._vertices[1],d,h)&&(this._lines[4].updateVertices(d[0],d[1],h[0],h[1],this._viewer.getWidth(),this._viewer.getHeight()),this._lines[4].render(this._rtLine,this._renderer,this._camera)));for(var e=[],t=this._clicks>1?this._vertices.length:1,r=0;r<t;++r)2!==r&&e.push(this._camera.project(this._vertices[r]));this._updateAnchorPoints([e[0],e[1]]),4===e.length&&this._updateAnchorValues([{pos:Object(s.getCenterPoint)(e[1],e[3])},{pos:Object(s.getCenterPoint)(e[2],e[3])},{pos:Object(s.getCenterPoint)(e[2],e[0])}])}},t}(a.default);t.default=f},"./08ui/tool/MeasureLineStrip.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./08ui/tool/m3d_line.js"),a=r("./08ui/tool/Measure.ts"),o=r("./08ui/tool/Snapping.ts"),s=r("./99api/utils/measure.ts"),l=r("./glMatrix.js"),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=[0,0],d=[0,0],h=function(e){function t(t){var r=e.call(this,"MeasureLineStrip",t)||this;return r._perimeter=0,r}return u(t,e),t.prototype.destory=function(){e.prototype.destroy.call(this)},t.prototype.setEnabled=function(t){e.prototype.setEnabled.call(this,t)},t.prototype.getPerimeter=function(){return this._perimeter},t.prototype._onKeyUp=function(e){if(!this._enabled||this._finished)return!1;27!==e.key&&13!==e.key||(this._vertices.pop(),this._lines.pop(),this._finished=!0)},t.prototype._onMouseWheel=function(e){return!!this._enabled&&(this._finished||this._clicks>0&&l.vec3.copy(this._vertices[this._vertices.length-1],this._vertices[this._vertices.length-2]),this._hideMouseAnchor(),!1)},t.prototype._onMouseMove=function(t){if(!this._enabled)return!1;if(e.prototype._onMouseMove.call(this,t),t.pressed)return this._finished||this._clicks>0&&l.vec3.copy(this._vertices[this._vertices.length-1],this._vertices[this._vertices.length-2]),this._hideMouseAnchor(),!1;if(t.moved){var r=t.x,n=t.y;if(this._snappingEnabled){if(this._snapCoord[0]=r,this._snapCoord[1]=n,!t.pressed&&!this._camera.updated){var i=this._snapping.snap(this._snapCoord);this._finished?this._hideMouseAnchor():this._updateMouseAnchor({pos:this._snapCoord,isSnapped:i!==o.SnappingMode.NONE})}r=this._snapCoord[0],n=this._snapCoord[1]}var a=this._camera.unproject(r,n);this._vertices.length>0&&!this._finished&&l.vec3.copy(this._vertices[this._vertices.length-1],a)}return this._viewer.invalidate(),!0},t.prototype._onMouseUp=function(t){if(!this._enabled||t.moved)return!1;if(e.prototype._onMouseUp.call(this,t),t.button===t.RIGHT_BUTTON)return this._perimeter=0,this._reset(),!1;this._finished&&this._reset(),this._clicks++;var r=t.x,n=t.y;this._snappingEnabled&&(r=this._snapCoord[0],n=this._snapCoord[1]);var i=this._depthQuery.unproject(r,n,this._renderer,this._camera);return i?(this._snappingEnabled&&!this._camera.updated&&this._snapping.snap(this._snapCoord,i),this._updateLines(r,n,i),!0):(this._clicks--,!1)},t.prototype._onTouchStop=function(t){if(!this._enabled||1!==t.numCursors)return!1;if(e.prototype._onTouchStop.call(this,t),Math.abs(t.cursor(0).dx)>1e-4||Math.abs(t.cursor(0).dy)>1e-4)return!1;this._finished&&this._reset(),this._clicks++;var r=t.cursor(0).x,n=t.cursor(0).y;this._snappingEnabled&&(r=this._snapCoord[0],n=this._snapCoord[1]);var i=this._depthQuery.unproject(r,n,this._renderer,this._camera);return i?(this._snappingEnabled&&!this._camera.updated&&this._snapping.snap(this._snapCoord,i),this._updateLines(r,n,i),!0):(this._clicks--,!1)},t.prototype._updateLines=function(e,t,r){if(this._lines.push(new i.default("measure-linestrip-"+this._lines.length,this._resourceManager,this._lineColor,!1)),1===this._clicks)this._vertices.push(l.vec3.clone(r)),this._vertices.push(l.vec3.clone(r));else{l.vec3.copy(this._vertices[this._vertices.length-1],r),this._vertices.push(l.vec3.clone(r)),this._perimeter=0;for(var n=0;n<this._vertices.length-1;n++)this._perimeter+=l.vec3.distance(this._vertices[n],this._vertices[n+1]);var a=this._convertLength(this._perimeter);this._notifyResult("Measure-Update",{distance:a}),this._updateAnchorValues([{value:a.toFixed(2),color:"red"}])}},t.prototype.render=function(){if(this._enabled){for(var e=0;e<this._lines.length;e++){var t=this._vertices[e],r=this._vertices[e+1];this._projectLineSegmentToScreen(t,r,c,d)&&(this._lines[e].updateVertices(c[0],c[1],d[0],d[1],this._viewer.getWidth(),this._viewer.getHeight()),this._lines[e].render(this._rtLine,this._renderer,this._camera))}var n=[];for(e=0;e<this._vertices.length;++e)n.push(this._camera.project(this._vertices[e]));this._finished||n.pop(),this._updateAnchorPoints(n),n.length>=2?this._updateAnchorValues([{pos:Object(s.getCenterPoint)(n[n.length-2],n[n.length-1])}]):this._hideAnchorValues()}},t}(a.default);t.default=h},"./08ui/tool/MeasureLines.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./08ui/tool/m3d_line.js"),a=r("./08ui/tool/Measure.ts"),o=r("./08ui/tool/Snapping.ts"),s=r("./99api/utils/measure.ts"),l=r("./glMatrix.js"),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=[0,0],d=[0,0],h=function(e){function t(t){var r=e.call(this,"MeasureLines",t)||this;return r._perimeter=0,r}return u(t,e),t.prototype.destory=function(){e.prototype.destroy.call(this)},t.prototype.setEnabled=function(t){e.prototype.setEnabled.call(this,t)},t.prototype.getPerimeter=function(){return this._perimeter},t.prototype._onKeyUp=function(e){if(!this._enabled||this._finished)return!1;27!==e.key&&13!==e.key||(this._clicks%2==1&&(this._vertices.pop(),this._lines.pop()),this._finished=!0)},t.prototype._onMouseWheel=function(e){return!!this._enabled&&(this._finished||this._clicks%2==1&&l.vec3.copy(this._vertices[this._vertices.length-1],this._vertices[this._vertices.length-2]),this._hideMouseAnchor(),!1)},t.prototype._onMouseMove=function(t){if(!this._enabled)return!1;if(e.prototype._onMouseMove.call(this,t),t.pressed)return this._finished||this._clicks%2==1&&l.vec3.copy(this._vertices[this._vertices.length-1],this._vertices[this._vertices.length-2]),this._hideMouseAnchor(),!1;if(t.moved){var r=t.x,n=t.y;if(this._snappingEnabled){if(this._snapCoord[0]=r,this._snapCoord[1]=n,!t.pressed&&!this._camera.updated){var i=this._snapping.snap(this._snapCoord);this._finished?this._hideMouseAnchor():this._updateMouseAnchor({pos:this._snapCoord,isSnapped:i!==o.SnappingMode.NONE})}r=this._snapCoord[0],n=this._snapCoord[1]}if(this._clicks%2==1){var a=this._camera.unproject(r,n);this._vertices.length>0&&!this._finished&&l.vec3.copy(this._vertices[this._vertices.length-1],a)}}return this._viewer.invalidate(),!0},t.prototype._onMouseUp=function(t){if(!this._enabled||t.moved)return!1;if(e.prototype._onMouseUp.call(this,t),t.button===t.RIGHT_BUTTON)return this._perimeter=0,this._reset(),!1;this._finished&&this._reset(),this._clicks++;var r=t.x,n=t.y;this._snappingEnabled&&(r=this._snapCoord[0],n=this._snapCoord[1]);var i=this._depthQuery.unproject(r,n,this._renderer,this._camera);return i?(this._snappingEnabled&&!this._camera.updated&&this._snapping.snap(this._snapCoord,i),this._updateLines(r,n,i),!0):(this._clicks--,!1)},t.prototype._onTouchStop=function(t){if(!this._enabled||1!==t.numCursors)return!1;if(e.prototype._onTouchStop.call(this,t),Math.abs(t.cursor(0).dx)>1e-4||Math.abs(t.cursor(0).dy)>1e-4)return!1;this._finished&&this._reset(),this._clicks++;var r=t.cursor(0).x,n=t.cursor(0).y;this._snappingEnabled&&(r=this._snapCoord[0],n=this._snapCoord[1]);var i=this._depthQuery.unproject(r,n,this._renderer,this._camera);return i?(this._snappingEnabled&&!this._camera.updated&&this._snapping.snap(this._snapCoord,i),this._updateLines(r,n,i),!0):(this._clicks--,!1)},t.prototype._updateLines=function(e,t,r){if(this._clicks%2==0){l.vec3.copy(this._vertices[this._vertices.length-1],r),this._perimeter=0;for(var n=0;n<this._vertices.length;n+=2)this._perimeter+=l.vec3.distance(this._vertices[n],this._vertices[n+1]);var a=this._convertLength(this._perimeter);this._notifyResult("Measure-Update",{distance:a}),this._updateAnchorValues([{value:a.toFixed(2),color:"red"}])}else this._vertices.push(l.vec3.clone(r)),this._vertices.push(l.vec3.clone(r)),this._lines.push(new i.default("measure-lines-"+this._lines.length,this._resourceManager,this._lineColor,!1))},t.prototype.render=function(){if(this._enabled){for(var e=0;e<this._lines.length;e++){var t=this._vertices[2*e],r=this._vertices[2*e+1];this._projectLineSegmentToScreen(t,r,c,d)&&(this._lines[e].updateVertices(c[0],c[1],d[0],d[1],this._viewer.getWidth(),this._viewer.getHeight()),this._lines[e].render(this._rtLine,this._renderer,this._camera))}var n=[];for(e=0;e<this._vertices.length;++e)n.push(this._camera.project(this._vertices[e]));this._finished||this._clicks%2!=1||n.pop(),this._updateAnchorPoints(n),n.length>0&&n.length%2==0?this._updateAnchorValues([{pos:Object(s.getCenterPoint)(n[n.length-2],n[n.length-1])}]):this._hideAnchorValues()}},t}(a.default);t.default=h},"./08ui/tool/PickQuery.ts":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/Environment.ts"),i=r("./02resource/m3d_shader_library.js"),a=r("./03scene/camera/m3d_base_camera.js"),o=r("./04renderer/pipeline/RenderTarget.ts"),s=r("./glMatrix.js"),l=function(){function e(e,t){this._scene=e,this._material=null,this._shaders=[null,null,null],this._ready=!1,this._renderTarget=null,this._phonyCamera=new a.default([0,0,1,1]),this._pickMatrix=s.mat4.create(),this._gl=t.gl,this._material=e.materialManager.createMaterialAdhoc("pick-query"),this.recompileShader(t,[]),this._renderTarget=new o.default("query",t,5,5,{clearColor:[0,0,0,0]}),this._ready=this._renderTarget.ready}return e.prototype.destroy=function(){this._ready&&(this._material.destroy(),this._material=null,delete this._material,this._renderTarget.destroy(),this._renderTarget=null,delete this._renderTarget)},e.prototype._beginRegion=function(e,t,r,n,i,a){t=i.viewport[3]-1-t,n=i.viewport[3]-1-n;var o=Math.abs(r-e)+1,l=Math.abs(n-t)+1;o==this._renderTarget.getWidth()&&l==this._renderTarget.getHeight()||this._renderTarget.resize(o,l),this._pickMatrix[0]=i.viewport[2]/o,this._pickMatrix[5]=i.viewport[3]/l,this._pickMatrix[12]=(i.viewport[2]-e-r)/o,this._pickMatrix[13]=(i.viewport[3]-t-n)/l,s.mat4.multiply(this._phonyCamera.vpMatrix,this._pickMatrix,i.vpMatrix),this._phonyCamera.viewport[0]=i.viewport[0],this._phonyCamera.viewport[1]=i.viewport[1],this._phonyCamera.viewport[2]=o,this._phonyCamera.viewport[3]=l},e.prototype._endRegion=function(e,t){var r=this._gl,n=[],i=new Uint8Array(e*t*4);r.readPixels(0,0,e,t,r.RGBA,r.UNSIGNED_BYTE,i);for(var a={},o=0;o<t;o+=2)for(var s=0;s<e;s+=2){var l=4*(o*e+s),u=i[l]+256*i[l+1]+256*i[l+2]*256+256*i[l+3]*256*256;u>0&&(a[u-=1]||(n.push(u),a[u]=1))}return n},e.prototype._changeMaterial=function(e,t){e+=1;var r=[0,0,0];r[0]=(.49+(255&e))/255,r[1]=(.49+(e>>8&255))/255,r[2]=(.49+(e>>16&255))/255;var n=(.49+(e>>24&255))/255;t.setDiffuse(r),t.setTransparent(n)},e.prototype.pickModel=function(e,t,r,n){for(var i=0,a=this._scene.models.length;i<a;i++)if(this.pickDrawable(e,t,r,n,this._scene.models[i].drawables))return i;return-1},e.prototype.pickDrawable=function(e,t,r,i,a){e=Math.floor(e*n.Environment.devicePixelRatio),t=Math.floor(t*n.Environment.devicePixelRatio),this._scene.clipping.isEnabled()&&r.renderState.invalidateClip();var o=this._gl;this._beginRegion(e,t,e,t,i,r),r.clear(this._renderTarget,o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),r.drawDrawablesCustom(this._renderTarget,a,this._phonyCamera,this._shaders,this._material,this._scene.clipping,this._scene.needRenderDoubleSided(),this._changeMaterial);var s=this._endRegion(1,1);return 0===s.length?null:a[s[0]]},e.prototype.pickNodesInsideRegion=function(e,t,r,i,a,o,s){if(!this._ready)return null;e=Math.floor(e*n.Environment.devicePixelRatio),t=Math.floor(t*n.Environment.devicePixelRatio),r=Math.floor(r*n.Environment.devicePixelRatio),i=Math.floor(i*n.Environment.devicePixelRatio),this._scene.clipping.isEnabled()&&a.renderState.invalidateClip();var l=this._gl;this._beginRegion(e,t,r,i,o,a),a.clear(this._renderTarget,l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT),a.drawDrawablesCustom(this._renderTarget,s,this._phonyCamera,this._shaders,this._material,this._scene.clipping,this._scene.needRenderDoubleSided(),this._changeMaterial);var u=this._endRegion(r-e+1,i-t+1),c=[];u.forEach(function(e){s[e].nodes&&s[e].nodes.forEach(function(e){e.visible&&c.push(e)})}),a.clear(this._renderTarget,l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT),a.drawNodesCustom(this._renderTarget,c,this._phonyCamera,this._shaders,this._material,this._scene.clipping,this._scene.needRenderDoubleSided(),this._changeMaterial),u=this._endRegion(r-e+1,i-t+1);var d=[];return u.forEach(function(e){d.push(c[e])}),d},e.prototype.recompileShader=function(e,t){var r=t.slice(0);this._shaders[0]=e.getShader("constant",r),this._shaders[0].ready||this._shaders[0].createFromShaderSource(i.default.constant,r),r.push("MODEL_TRANSFORM"),this._shaders[1]=e.getShader("constant",r),this._shaders[1].ready||this._shaders[1].createFromShaderSource(i.default.constant,r),r.push("INSTANCING"),this._shaders[2]=e.getShader("constant",r),this._shaders[2].ready||this._shaders[2].createFromShaderSource(i.default.constant,r),this._material.attachShader(this._shaders[0]),this._material.setDiffuse(s.vec3.fromValues(0,0,0)),this._material.setTransparent(0)},e}();t.default=l},"./08ui/tool/Section.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./00utility/m3d_math.js"),a=r("./00utility/Config.ts"),o=r("./00utility/Environment.ts"),s=r("./02resource/MeshAttributes.ts"),l=r("./02resource/m3d_shader_library.js"),u=r("./03scene/drawables/Gizmo.ts"),c=r("./03scene/materials/Material.ts"),d=r("./04renderer/pipeline/RenderTarget.ts"),h=r("./04renderer/pipeline/RenderPass.ts"),f=r("./08ui/tool/Tool.ts"),p=r("./glMatrix.js"),m=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),v=function(){function e(e,t,r,n,i){var a=e.gl;this._gl=a,this.renderTarget=new d.default("section-normal-depth",e,n,i,{colorFormat:a.RGBA32F,clearColor:[0,0,0,0],colorBuffer:0,depthFormat:a.DEPTH24_STENCIL8,depthBuffer:0}),this.buffer=new Float32Array(n*i*4),this.bufferDirty=!0,this.bufferDirtyTime=0,this.normal=p.vec3.create(),this.position=p.vec3.create(),this.nearPlaneSize=null,this.isPerspective=!0,this.inversedViewMatrix=p.mat4.create(),this.renderPass=new h.default(e,t,!1,{line:!1});var o=e.getShader("normaldepth",["WORLDSPACE_NORMAL"]);if(!o.ready){var s=l.default.normaldepth;o.createFromShaderSource(s,["WORLDSPACE_NORMAL"])}this.renderPass.setOverridedShader(o),this.renderPass.setOverridedMaterial(new c.default("section-normal-depth"))}return e.prototype.resize=function(e,t){this.renderTarget.resize(e,t),this.buffer=new Float32Array(e*t*4)},e.prototype.destroy=function(){this.buffer=null,this.normal=null,this.inversedViewMatrix=null,this.renderTarget.destroy(),this.renderPass.destroy()},e.prototype.render=function(e,t){var r=this._gl;e.invalidate(),e.clear(this.renderTarget,r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),this.renderPass.render(this.renderTarget,e,t),r.readPixels(0,0,this.renderTarget.getWidth(),this.renderTarget.getHeight(),r.RGBA,r.FLOAT,this.buffer),this.nearPlaneSize=t.getNearPlaneSize(),this.isPerspective=t.isPerspective(),p.mat4.invert(this.inversedViewMatrix,t.viewMatrix)},e.prototype.getNormalDepth=function(e,t){var r=this.renderTarget.getWidth(),n=this.renderTarget.getHeight(),i=4*(e+(n-t)*r),a=this.buffer[i+3];return 0!==a&&(this.normal[0]=this.buffer[i],this.normal[1]=this.buffer[i+1],this.normal[2]=this.buffer[i+2],!(isNaN(this.normal[0])||isNaN(this.normal[1])||isNaN(this.normal[2]))&&(this.position[2]=a,this.isPerspective?(this.position[0]=2*this.nearPlaneSize[0]*(e/r-.5)*a/this.nearPlaneSize[2],this.position[1]=2*this.nearPlaneSize[1]*((n-1-t)/n-.5)*a/this.nearPlaneSize[2]):(this.position[0]=2*this.nearPlaneSize[0]*(e/r-.5),this.position[1]=2*this.nearPlaneSize[1]*((n-1-t)/n-.5)),p.vec3.transformMat4(this.position,this.position,this.inversedViewMatrix),!0))},e}(),_=new Uint8Array([0,1,1,2,2,3,3,0,0,4,1,5,2,6,3,7,4,5,5,6,6,7,7,4]),g=function(e){function t(t){var r=e.call(this,"Section",!0,t)||this;r._cube=null,r._plane=null,r._sensitivity=.005,r._smartCullingEnabled=!1,r._vertices=new Float32Array(24),r._indices=[],r._indices[0]=new Uint16Array([0,4,7,7,3,0]),r._indices[1]=new Uint16Array([0,1,5,5,4,0]),r._indices[2]=new Uint16Array([0,3,2,2,1,0]),r._indices[3]=new Uint16Array([5,1,2,2,6,5]),r._indices[4]=new Uint16Array([6,2,3,3,7,6]),r._indices[5]=new Uint16Array([4,5,6,6,7,4]),r._cubeRT=r._getRenderTarget(),r._planeRT=r._getRenderTarget({depthTest:!1,blend:!0});var n=r._resourceManager.getMesh("wiredcube");n.createWiredCube(),r._cube=new u.default(n,r._resourceManager),r._cube.setColor([.2,.2,.2]),r._cube.setTransparent(1);var a=r._resourceManager.gl,o=new s.default;o.builtin(a.FLOAT),(n=r._resourceManager.getMesh("cliplane")).create(a.TRIANGLES,o,r._vertices,r._indices[0]),r._plane=new u.default(n,r._resourceManager),r._plane.setColor([.969,.322,.137]),r._plane.setTransparent(.19),r._isPressed=!1,r._planeUpdated=!1,r._gizmoPlaneIndex=null,r._rotate=!1,r._rotateMatrix=p.mat4.create(),r._invertedRotateMatrix=p.mat4.create(),r._bbox=i.default.aabb.create(),r._sectionedBBox=i.default.aabb.create(),r._points=i.default.aabb.points(r._scene.clipping.getBBox());var l=r._viewer.getCamera().core,c=l.viewport[2],d=l.viewport[3];return r._normalDepth=new v(r._resourceManager,r._viewer.getRenderScene().getRenderQueueManager(),r._scene,c,d),r}return m(t,e),t.prototype.destroy=function(){this._vertices=null,this._indices=null,this._plane.destroy(),this._cube.destroy(),o.Environment.isMobile||this._normalDepth.destroy()},t.prototype.setSectionBox=function(e){this._sectionedBBox=e,this._updatePoints(),this.updateGeometry(),this._renderer.renderState.invalidateClip(),this._viewer.invalidate()},t.prototype.getSectionBox=function(){return this._sectionedBBox},t.prototype.resize=function(e,t){this._cubeRT.resize(e,t),this._planeRT.resize(e,t),o.Environment.isMobile||this._normalDepth.resize(e,t)},t.prototype.doesSupportMobile=function(e){return!0},t.prototype.doesSupport3D=function(e){return!0},t.prototype.updateGeometry=function(e){var t=this._resourceManager.gl;this._vertices[0]=this._points[0][0],this._vertices[1]=this._points[0][1],this._vertices[2]=this._points[0][2],this._vertices[3]=this._points[1][0],this._vertices[4]=this._points[1][1],this._vertices[5]=this._points[1][2],this._vertices[6]=this._points[2][0],this._vertices[7]=this._points[2][1],this._vertices[8]=this._points[2][2],this._vertices[9]=this._points[3][0],this._vertices[10]=this._points[3][1],this._vertices[11]=this._points[3][2],this._vertices[12]=this._points[4][0],this._vertices[13]=this._points[4][1],this._vertices[14]=this._points[4][2],this._vertices[15]=this._points[5][0],this._vertices[16]=this._points[5][1],this._vertices[17]=this._points[5][2],this._vertices[18]=this._points[6][0],this._vertices[19]=this._points[6][1],this._vertices[20]=this._points[6][2],this._vertices[21]=this._points[7][0],this._vertices[22]=this._points[7][1],this._vertices[23]=this._points[7][2],this._cube.mesh.update(this._vertices,_,t.UNSIGNED_BYTE),e&&e.renderState.invalidateClip()},t.prototype.render=function(){if(this._enabled&&this._interactive){var e=this._resourceManager.gl;this._renderer.drawGizmo(this._cubeRT,this._cube,this._camera,e.CCW),this._renderer.clear(this._renderer._renderTarget,e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT),null!==this._gizmoPlaneIndex&&this._renderer.drawGizmo(this._planeRT,this._plane,this._camera,e.CCW)}},t.prototype.reset=function(e){this._rotate=!1,this._updateBBox([0,-1,0]),this._updatePoints(),this.updateGeometry(e),o.Environment.isMobile||(this._normalDepth.bufferDirty=!0),this._viewer.getRenderScene().updateShadow()},t.prototype.setClipRanges=function(e,t){if(this._scene.clipping.set(e,t),"number"==typeof t[0])this._updateBBox([0,-1,0]);else{this._updateBBox(e[5]);for(var r=0;r<this._points.length;r++)p.vec3.copy(this._points[r],t[r])}for(r=0;r<this._points.length;r++)p.vec3.transformMat4(this._points[r],this._points[r],this._rotateMatrix);i.default.aabb.createFromPoints(this._sectionedBBox,this._points),this._updatePoints(),this.updateGeometry(),this._gizmoPlaneIndex=null},t.prototype.setEnabled=function(e){var t=this;if(this._enabled=e,this._enabled?(this._scene.clipping.initialize(this._scene.bbox),this._updateBBox([0,-1,0]),this._updatePoints(),this.updateGeometry(this._renderer)):this.reset(this._renderer),this._enabled&&this._normalDepth&&!this._normalDepth.renderPass.queue.isValid())for(var r in this._scene.models){this._scene.models[r].drawables.forEach(function(e){t._normalDepth.renderPass.queue.addDrawable(e)})}this._scene.clipping.setEnabled(e),this._viewer.getRenderScene().setClippingEnabled(e),e?(this._smartCullingEnabled=this._viewer.isSmartCullingEnabled(),this._viewer.setSmartCullingEnabled(!1)):this._viewer.setSmartCullingEnabled(this._smartCullingEnabled),e||(this._scene.updateBBox(),this._camera.update());var n=[];this._scene.clipping.isEnabled()&&n.push("CLIPPING"),a.Config.compressNormals&&n.push("COMPRESSION"),this._scene.needRenderDoubleSided()&&n.push("DOUBLESIDED"),this._recompileShader(n)},t.prototype.setRotatable=function(e){this._rotate=e,e&&(this._gizmoPlaneIndex=null)},t.prototype.isRotatable=function(){return this._rotate},t.prototype.addInput=function(e){"mouse"===e.name?(e.addMouseDownListener(this._onMouseDown.bind(this)),e.addMouseWheelListener(this._onMouseWheel.bind(this)),e.addMouseMoveListener(this._onMouseMove.bind(this)),e.addMouseUpListener(this._onMouseUp.bind(this))):"touch"===e.name&&(e.addTouchMoveListener(this._onTouchMove.bind(this)),e.addTouchStartListener(this._onTouchStart.bind(this)))},t.prototype._onTouchStart=function(e){if(!this._enabled||!this._interactive||1!==e.numCursors)return!1;var t=e.cursor(0),r=t.x,n=t.y;return this._focusPlane(r,n)},t.prototype._onTouchMove=function(e){if(!this._enabled||!this._interactive||1!==e.numCursors)return!1;this._isPressed=!0;var t=e.cursor(0);return this._renderer.renderState.invalidateClip(),this._updatePlane(t.dx)},t.prototype._onTouchStop=function(e){return!(!this._enabled||!this._interactive)&&(this._gizmoPlaneIndex=null,this._isPressed=!1,!0)},t.prototype._onMouseDown=function(e){return this._enabled&&this._interactive},t.prototype._onMouseWheel=function(e){return!!this._enabled&&(this._rotate&&(this._normalDepth.bufferDirty=!0,this._normalDepth.bufferDirtyTime=this._viewer.getElapsedFrames()),!1)},t.prototype._onMouseMove=function(e){if(!this._enabled||!this._interactive)return!1;if(this._isPressed=e.pressed,0!==e.getEvent().buttonDown&&e.moved&&this._rotate)return this._normalDepth.bufferDirty=!0,this._normalDepth.bufferDirtyTime=this._viewer.getElapsedFrames(),!1;e.moved&&this._normalDepth.bufferDirty&&!this._camera.updated&&this._normalDepth.bufferDirtyTime<this._viewer.getElapsedFrames()&&(this._normalDepth.render(this._renderer,this._camera),this._normalDepth.bufferDirty=!1);var t=!1;return t=e.pressed?this._updatePlane(e.dx):this._rotate&&!this._normalDepth.bufferDirty?this.updateCube(e,[.5,.5,.5]):this._focusPlane(e.x,e.y),this._renderer.renderState.invalidateClip(),this._viewer.invalidate(),t},t.prototype._onMouseUp=function(e){if(!this._enabled||!this._interactive)return!1;this._rotate&&!this._normalDepth.bufferDirty&&(this.updateCube(e,[.2,.2,.2])&&(this._cutByFaceClicked(),this._viewer.getEventEmitter().emit("Section-RotateFacePicked")));return this._gizmoPlaneIndex=null,this._isPressed=!1,this._renderer.renderState.invalidateClip(),this._viewer.invalidate(),!0},t.prototype._cutByFaceClicked=function(){var e=p.vec3.create(),t=p.vec3.create();p.vec3.transformMat4(e,this._normalDepth.normal,this._rotateMatrix),p.vec3.transformMat4(t,t,this._rotateMatrix),p.vec3.sub(e,e,t);for(var r=i.default.aabb.planes(this._sectionedBBox),n=0;n<6;++n)if(Math.abs(p.vec3.dot(e,r[n])-1)<1e-6){this._gizmoPlaneIndex=n;break}p.vec3.transformMat4(e,this._normalDepth.position,this._rotateMatrix),p.vec3.scaleAndAdd(e,e,r[this._gizmoPlaneIndex],1),this._updatePlane(null,e[2])},t.prototype.updateCube=function(e,t){var r=this._normalDepth.getNormalDepth(Math.floor(e.x*o.Environment.devicePixelRatio),Math.floor(e.y*o.Environment.devicePixelRatio));return r&&(this._updateBBox(this._normalDepth.normal),this._cube.setColor(t),this.updateGeometry(),this._scene.radius=this._scene.clipping.getRadius(),this._camera._updateProjection()),r},t.prototype.setSensitivity=function(e){this._sensitivity=e},t.prototype._updatePlane=function(e,t){if(null!==this._gizmoPlaneIndex){var r=this._gizmoPlaneIndex>2?1:0,n=this._gizmoPlaneIndex%3,a=this._gizmoPlaneIndex>2?-1:1,o=void 0,s=void 0;if(0===r?(s=this._bbox[n]+2e-5,o=this._sectionedBBox[3+n]-2e-5):(s=this._sectionedBBox[n]+2e-5,o=this._bbox[3+n]-2e-5),t)this._sectionedBBox[3*r+n]=i.default.clamp(t,s,o);else{var l=e*this._sensitivity;l*=a*(this._scene.bbox[3+n]-this._scene.bbox[n]),this._sectionedBBox[3*r+n]=i.default.clamp(this._sectionedBBox[3*r+n]+l,s,o)}return this._updatePoints(),this.updateGeometry(),this._plane.mesh.update(this._vertices,this._indices[this._gizmoPlaneIndex]),!0}return!1},t.prototype._focusPlane=function(e,t){if(!this._rotate){var r=void 0,n=void 0,a=void 0;this._camera.isPerspective()?(r=p.vec3.create(),p.vec3.copy(r,this._camera.eye),n=this._camera.unproject(e,t)):(r=this._camera.unproject(e,t),n=p.vec3.create(),a=this._camera.getViewDirection(),p.vec3.add(n,r,a)),p.vec3.transformMat4(r,r,this._rotateMatrix),p.vec3.transformMat4(n,n,this._rotateMatrix),(a=[])[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2];var o=i.default.intersect.ray_aabb(r,a,this._sectionedBBox),s=i.default.aabb.planes(this._sectionedBBox);if(null!==o){for(var l=0;l<6;++l)if(Math.abs(p.vec3.dot(o,s[l])+s[l][3])<1e-6)return this._gizmoPlaneIndex!==l&&(this._gizmoPlaneIndex=l,this._plane.mesh.update(this._vertices,this._indices[l]),this._planeUpdated=!0),!0}else this._gizmoPlaneIndex=null}return!1},t.prototype._updateBBox=function(e){var t=i.default.aabb.center(this._scene.bbox),r=p.vec3.create();p.vec3.scaleAndAdd(r,t,e,this._scene.radius),Math.abs(e[2])>.9999?p.mat4.lookAt(this._rotateMatrix,r,t,[0,1,0]):p.mat4.lookAt(this._rotateMatrix,r,t,[0,0,1]),p.mat4.invert(this._invertedRotateMatrix,this._rotateMatrix);var n=this._scene.clipping.getBBox();if(a.Config.compressNormals){n[0]-=1e-4,n[1]-=1e-4,n[2]-=1e-4,n[3]+=1e-4,n[4]+=1e-4,n[5]+=1e-4}i.default.aabb.points2(n,this._points);for(var o=0,s=this._points.length;o<s;o++)p.vec3.transformMat4(this._points[o],this._points[o],this._rotateMatrix);i.default.aabb.createFromPoints(this._bbox,this._points),i.default.aabb.copy(this._sectionedBBox,this._bbox),this._updatePoints()},t.prototype._updatePoints=function(){i.default.aabb.points2(this._sectionedBBox,this._points),p.vec3.transformMat4(this._points[0],this._points[0],this._invertedRotateMatrix),p.vec3.transformMat4(this._points[1],this._points[1],this._invertedRotateMatrix),p.vec3.transformMat4(this._points[2],this._points[2],this._invertedRotateMatrix),p.vec3.transformMat4(this._points[3],this._points[3],this._invertedRotateMatrix),p.vec3.transformMat4(this._points[4],this._points[4],this._invertedRotateMatrix),p.vec3.transformMat4(this._points[5],this._points[5],this._invertedRotateMatrix),p.vec3.transformMat4(this._points[6],this._points[6],this._invertedRotateMatrix),p.vec3.transformMat4(this._points[7],this._points[7],this._invertedRotateMatrix),this._scene.clipping.update(this._points)},t.prototype._recompileShader=function(e){e.push("WORLDSPACE_NORMAL"),this._normalDepth&&this._normalDepth.renderPass.recompileOverridedShader(e)},t}(f.default);t.default=g},"./08ui/tool/SelectElements.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./00utility/Environment.ts"),a=r("./00utility/Config.ts"),o=r("./00utility/m3d_math.js"),s=r("./08ui/tool/PickQuery.ts"),l=r("./08ui/tool/DepthQuery.ts"),u=r("./03scene/drawables/Gizmo2D.ts"),c=r("./08ui/tool/Tool.ts"),d=r("./08ui/tool/assets.ts"),h=r("./04renderer/pipeline/RenderQueue.ts"),f=r("./02resource/m3d_shader_library.js"),p=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),m=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},v=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e},_=function(e){function t(t){var r=e.call(this,"SelectElement",!0,t)||this;r._dashLength=1,r._lineWidth=1,r._renderScene=t.getRenderScene(),r._multiselect=!1,r._elements={},r._pickQuery=null,r._depthQuery=null,r._regionSelectEnabled=!1,r._interactive=!1,r._closeup=!0,r._highlight=!0,r._bbox=o.default.aabb.create(),r._renderScene=t.getRenderScene(),r._renderTarget=r._getRenderTarget({depthTest:!1}),r._material=r._scene.materialManager.createMaterialAdhoc("select-elements-other"),r._overridedColor=[1,1,1,.4],r._clearselect=!0;var n=[],a=r._renderScene.getScene();if(a.clipping.isEnabled()&&n.push("CLIPPING"),a.needRenderDoubleSided()&&n.push("DOUBLESIDED"),a.compressed&&n.push("COMPRESSION"),i.Environment.isMobile&&n.push("ENCODE_NORMAL"),n.push("VISIBILITY"),r._shader=r._renderScene.getResourceManager().getShader("solid",n),!r._shader.ready){var s=f.default.solid;r._shader.createFromShaderSource(s,n)}r._smartCullingEnabled=!1,r._startX=-1,r._startY=-1,r._endX=-1,r._endY=-1,r._vertices=new Float32Array(80),r._indices=new Uint8Array(24);for(var l=0;l<4;++l)r._indices[0+6*l]=0+4*l,r._indices[1+6*l]=1+4*l,r._indices[2+6*l]=2+4*l,r._indices[3+6*l]=2+4*l,r._indices[4+6*l]=3+4*l,r._indices[5+6*l]=0+4*l;r._clippingEnabled=r._scene.clipping.isEnabled();var c=r._viewer.getResourceManager().gl,h=r._resourceManager.getMesh("region-select");return h.createQuad(),r._drawable=new u.default(h,r._resourceManager),r._drawable.setColor([.969,.398,.238]),r._resourceManager.getTexture("regionSelect").createFromFile(d.DASH_LINE_TEXTURE_IMAGE,c.RGB,c.LINEAR,c.REPEAT,function(e){r._drawable.setTexture(e),r._dashLength=e.width}),r._resetVertices(),r}return p(t,e),t.prototype.destroy=function(){this._pickQuery&&(this._pickQuery.destroy(),this._pickQuery=null,delete this._pickQuery),this._depthQuery&&(this._depthQuery.destroy(),this._depthQuery=null,delete this._depthQuery),this._bbox=null,delete this._bbox,this._elements=null,delete this._elements,this._vertices=null,delete this._vertices,this._indices=null,delete this._indices,this._renderScene=null,delete this._renderScene,this._material.destroy(),this._material=null,delete this._material,e.prototype.destroy.call(this)},t.prototype.doesSupportMobile=function(e){return!0},t.prototype.doesSupport3D=function(e){return!0},t.prototype.setSelectionRectangleColor=function(e){this._drawable.setColor(e),this._drawable.setTransparent(e[3])},t.prototype.setEnabled=function(t){this._viewer.getMouse();e.prototype.setEnabled.call(this,t),t&&(null===this._pickQuery&&(this._pickQuery=new s.default(this._scene,this._resourceManager)),null===this._depthQuery&&(this._depthQuery=new l.default(this._scene,this._resourceManager)))},t.prototype.render=function(){this._enabled&&this._interactive&&(Math.abs(this._endX-this._startX)<2||Math.abs(this._endY-this._startY)<2||this._renderer.drawDrawable(this._renderTarget,this._drawable,this._camera,null,null,null,!1))},t.prototype.addInput=function(e){"mouse"===e.name?(e.addMouseDownListener(this._onMouseDown.bind(this)),e.addMouseMoveListener(this._onMouseMove.bind(this)),e.addMouseUpListener(this._onMouseUp.bind(this))):"touch"===e.name?(e.addTouchStartListener(this._onTouchStart.bind(this)),e.addTouchMoveListener(this._onTouchMove.bind(this)),e.addTouchStopListener(this._onTouchStop.bind(this))):"keyboard"==e.name&&(e.addKeyDownListener(this._onKeyDown.bind(this)),e.addKeyUpListener(this._onKeyUp.bind(this)))},t.prototype.setRegionSelectEnabled=function(e){this._regionSelectEnabled!=e&&(this._regionSelectEnabled=e,e?(this._smartCullingEnabled=this._viewer.isSmartCullingEnabled(),this._viewer.setSmartCullingEnabled(!1)):this._viewer.setSmartCullingEnabled(this._smartCullingEnabled),this._interactive=e,this._viewer.invalidate())},t.prototype.setCloseUpEnabled=function(e){this._closeup=e},t.prototype.setHighlightEnabled=function(e){this._highlight=e},t.prototype._onKeyDown=function(e){return 17==e.key&&this.setMultiselectEnabled(!0),!1},t.prototype._onKeyUp=function(e){return 17==e.key&&this.setMultiselectEnabled(!1),!1},t.prototype._onTouchStart=function(e){if(!this._enabled||Object.keys(e.cursors).length>1)return!1;if(document.activeElement.blur(),this._startX=e.cursor(0).x,this._startY=e.cursor(0).y,this._endX=this._startX,this._endY=this._startY,this._scene.clipping.isEnabled()&&!this._clippingEnabled){this._clippingEnabled=!0;var t=["VISIBILITY","CLIPPING"];a.Config.compressNormals&&t.push("COMPRESSION"),this._scene.needRenderDoubleSided()&&t.push("DOUBLESIDED"),this.recompileShader(t)}else if(!this._scene.clipping.isEnabled()&&!this._clippingEnabled){this._clippingEnabled=!1;t=["VISIBILITY"];a.Config.compressNormals&&t.push("COMPRESSION"),this._scene.needRenderDoubleSided()&&t.push("DOUBLESIDED"),this.recompileShader(t)}return this._regionSelectEnabled&&this._updateVertices(),!1},t.prototype._onTouchMove=function(e){return!(!this._enabled||Object.keys(e.cursors).length>1||!this._regionSelectEnabled)&&(!this._regionSelectEnabled||(this._endX+=e.cursor(0).dx,this._endY+=e.cursor(0).dy,this._updateVertices(),!0))},t.prototype._onTouchStop=function(e){if(!this._enabled||Object.keys(e.cursors).length>1)return!1;if(this._endX=e.cursor(0).x,this._endY=e.cursor(0).y,Math.abs(e.cursor(0).dx)<=1e-4&&Math.abs(e.cursor(0).dy)<=1e-4)this._select();else if(this._regionSelectEnabled){if(this._startX>this._endX){var t=this._startX;this._startX=this._endX,this._endX=t}if(this._startY>this._endY){t=this._startY;this._startY=this._endY,this._endY=t}this._selectRegion(),this._resetVertices(),this._viewer.getEventEmitter().emit("SelectElemets-Disabled")}return!0},t.prototype._onMouseDown=function(e){if(!this._enabled||e.button!==e.LEFT_BUTTON)return!1;if(document.activeElement.blur(),this._startX=e.x,this._startY=e.y,this._endX=this._startX,this._endY=this._startY,this._scene.clipping.isEnabled()&&!this._clippingEnabled){this._clippingEnabled=!0;var t=["VISIBILITY","CLIPPING"];a.Config.compressNormals&&t.push("COMPRESSION"),this._scene.needRenderDoubleSided()&&t.push("DOUBLESIDED"),this.recompileShader(t)}else if(!this._scene.clipping.isEnabled()&&!this._clippingEnabled){this._clippingEnabled=!1;t=["VISIBILITY"];a.Config.compressNormals&&t.push("COMPRESSION"),this._scene.needRenderDoubleSided()&&t.push("DOUBLESIDED"),this.recompileShader(t)}return this._regionSelectEnabled&&this._updateVertices(),!0},t.prototype._onMouseMove=function(e){return!!(this._enabled&&e.button===e.LEFT_BUTTON&&e.pressed&&this._regionSelectEnabled)&&(!!this._regionSelectEnabled&&(this._endX+=e.dx,this._endY+=e.dy,this._updateVertices(),!0))},t.prototype._onMouseUp=function(e){if(!this._enabled||e.button!==e.LEFT_BUTTON)return!1;if(this._endX=e.x,this._endY=e.y,Math.abs(this._endX-this._startX)<1||Math.abs(this._endY-this._startY)<1)this._select();else if(this._regionSelectEnabled){if(this._startX>this._endX){var t=this._startX;this._startX=this._endX,this._endX=t}if(this._startY>this._endY){t=this._startY;this._startY=this._endY,this._endY=t}this._selectRegion(),this._resetVertices(),this._viewer.getEventEmitter().emit("onRegionSelectFinished")}return!0},t.prototype.setMultiselectEnabled=function(e){this._multiselect=e},t.prototype.setClearselectEnabled=function(e){this._clearselect=e},t.prototype.recompileShader=function(e){this._enabled&&(this._pickQuery&&this._pickQuery.recompileShader(this._resourceManager,e),this._depthQuery&&this._depthQuery.recompileShader(this._resourceManager,e))},t.prototype._select=function(){var e=this._endX,t=this._endY;this._viewer.invalidate();var r=this._pickQuery.pickNodesInsideRegion(e,t,e,t,this._renderer,this._camera,this._getPickables()),n=null,i=null;if(r&&r.length>0&&(i=(n=r[0].getElement()).model.name+"+"+n.getDocument().id+"/"+n.id,this._viewer.getEventEmitter().emit("onPointPicked",v(this._depthQuery.unproject(this._endX,this._endY,this._renderer,this._camera).slice(0,3)))),n)this._multiselect?this._elements[i]?delete this._elements[i]:this._elements[i]=n:(this._elements={},this._elements[i]=n,this._closeup&&this._camera.lookTo(o.default.aabb.center(n.bbox),o.default.aabb.length(n.bbox)/2)),this._highlight&&(this._highlightELements(Object.keys(this._elements)),this._viewer.invalidate());else{if(!this._clearselect)return;this._multiselect||(this._elements={},this._highlight&&(this._viewer.invalidate(),this._highlightELements(null)))}this._viewer.getEventEmitter().emit("onElementSelected",Object.keys(this._elements))},t.prototype._getPickables=function(){if(!this._pickables){var e=new h.default("pickQueue",{line:!1});for(var t in this._scene.models)this._scene.models[t].drawables.forEach(function(t){e.addDrawable(t)});this._pickables=e.drawables}return this._pickables},t.prototype._selectRegion=function(){var e={};this._viewer.invalidate();var t=this._pickQuery.pickNodesInsideRegion(this._startX,this._startY,this._endX,this._endY,this._renderer,this._camera,this._getPickables());if(null!==t&&t.length>0){t.forEach(function(t){var r=t.getElement(),n=r.model.name+"+"+r.getDocument().id+"/"+r.id;e[n]||(e[n]=r)});var r=o.default.aabb.create();for(var n in e)t=t.concat(e[n].getNodes()),o.default.aabb.union(r,r,e[n].bbox);this._closeup&&this._camera.lookTo(o.default.aabb.center(r),o.default.aabb.length(r)/2),this._elements=e,this._highlight&&this._highlightELements(Object.keys(this._elements))}else this._elements={},this._highlight&&this._highlightELements(null);this._highlight&&this._viewer.invalidate();var i=Object.keys(this._elements);this._viewer.getEventEmitter().emit("onElementSelected",i)},t.prototype._highlightELements=function(e){e?(this._renderScene.setOverridedMaterials(this._material),this._renderScene.setOverridedShaders(this._shader),this._material.setDiffuse(this._overridedColor),this._material.setTransparent(this._overridedColor[3]),this._renderScene.renderElements(e,!0)):(this._renderScene.setOverridedMaterials(null),this._renderScene.setOverridedShaders(null),this._renderScene.renderElements(null))},t.prototype.pick=function(e,t){var r=this;if(this._enabled){if(!e||e.length<1)return this._elements={},void(this._highlight&&(this._highlightELements(null),this._viewer.invalidate()));for(var n=0,i=e.length;n<i;n++){var a=e[n],s=a.split("+")[0],l=this._scene.models[s].tree.elements[a];l?this._elements[a]=l:console.warn("Element: "+a+" can not be found!")}if(this._highlight&&(this._highlightELements(e),this._viewer.invalidate()),t){this._bbox=new o.default.aabb.createFromArray([1/0,1/0,1/0,-1/0,-1/0,-1/0]);var u=!1;e.forEach(function(e){var t=e.split("+")[0],n=r._scene.models[t].tree.elements[e];n&&(o.default.aabb.union(r._bbox,r._bbox,n.bbox),u=!0)}),this._closeup&&u&&this._camera.lookTo(o.default.aabb.center(this._bbox),o.default.aabb.length(this._bbox)/2)}}},t.prototype._updateVertices=function(){var e=this._startX,t=this._endX,r=this._startY,n=this._endY;this._startX>this._endX&&(e=this._endX,t=this._startX),this._startY>this._endY&&(r=this._endY,n=this._startY);var a=this._viewer.getCamera().core.viewport[3];e=Math.floor(e*i.Environment.devicePixelRatio),r=Math.floor(a-1-r*i.Environment.devicePixelRatio);var o=(t=Math.floor(t*i.Environment.devicePixelRatio))-e,s=r-(n=Math.floor(a-1-n*i.Environment.devicePixelRatio)),l=Math.floor(this._lineWidth*i.Environment.devicePixelRatio);this._addQuad(e,r,e+l,n,0,0,s,s,0),this._addQuad(e,r,t,r+l,0,o,o,0,20),this._addQuad(t-l,r,t,n,0,0,s,s,40),this._addQuad(e,n-l,t,n,0,o,o,0,60);var u=this._viewer.getResourceManager().gl;this._drawable.mesh.update(this._vertices,this._indices,u.UNSIGNED_BYTE)},t.prototype._addQuad=function(e,t,r,n,i,a,o,s,l){var u=this._viewer.getCamera().core.viewport[2],c=this._viewer.getCamera().core.viewport[3];e=e/u*2-1,r=r/u*2-1,t=t/c*2-1,n=n/c*2-1,this._vertices[0+l]=e,this._vertices[1+l]=t,this._vertices[2+l]=0,this._vertices[3+l]=i/this._dashLength,this._vertices[4+l]=.5,this._vertices[5+l]=r,this._vertices[6+l]=t,this._vertices[7+l]=0,this._vertices[8+l]=a/this._dashLength,this._vertices[9+l]=.5,this._vertices[10+l]=r,this._vertices[11+l]=n,this._vertices[12+l]=0,this._vertices[13+l]=o/this._dashLength,this._vertices[14+l]=.5,this._vertices[15+l]=e,this._vertices[16+l]=n,this._vertices[17+l]=0,this._vertices[18+l]=s/this._dashLength,this._vertices[19+l]=.5},t.prototype._resetVertices=function(){for(var e=0;e<80;++e)this._vertices[e]=-1e6;this._drawable.mesh.update(this._vertices,this._indices,this._viewer.getResourceManager().gl.UNSIGNED_BYTE)},t.prototype.setLineColor=function(e){this._renderScene.setNodesLineColor(e)},t.prototype.setOverridedColor=function(e){this._overridedColor[0]=e[0],this._overridedColor[1]=e[1],this._overridedColor[2]=e[2],void 0!==e[3]&&(this._overridedColor[3]=e[3])},t}(c.default);t.default=_},"./08ui/tool/SelectModel.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./08ui/tool/Snapping.ts"),a=r("./08ui/tool/PickQuery.ts"),o=r("./08ui/tool/Tool.ts"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=[0,0],u=[0,0,0],c=function(e){function t(t){var r=e.call(this,"SelectModel",!1,t)||this;return r._snapping=null,r._pickQuery=null,r._snapped=-1,r.currentModel=-1,r.currentPosition=new Array(3),r}return s(t,e),t.prototype.destroy=function(){this._snapping&&(this._snapping.destroy(),this._snapping=null,delete this._snapping),this._pickQuery&&(this._pickQuery.destroy(),this._pickQuery=null,delete this._pickQuery),this.currentModel=null,delete this.currentModel,this.currentPosition=null,delete this.currentPosition},t.prototype.addInput=function(e){"mouse"===e.name&&(e.addMouseMoveListener(this._onMouseMove.bind(this)),e.addMouseUpListener(this._onMouseUp.bind(this)))},t.prototype.doesSupportMobile=function(e){return!e},t.prototype.doesSupport3D=function(e){return!0},t.prototype._udpateSnapping=function(e){this._snapping.update(this._renderer,this._scene,this._camera)},t.prototype.render=function(){this._enabled&&this._snapping.render(this._renderer,this._camera)},t.prototype.resize=function(e,t){this._snapping.resize(e,t)},t.prototype.setEnabled=function(t){e.prototype.setEnabled.call(this,t),t?(null===this._snapping&&(this._snapping=new i.default(this._scene,this._camera,this._resourceManager,this._viewer.getRenderScene().getRenderQueueManager()),this._snapping.setRenderingEnabled(!0),this._snapping.setSnappingRadius(8)),null===this._pickQuery&&(this._pickQuery=new a.default(this._scene,this._resourceManager)),this._camera.addUpdateStopListener(this._udpateSnapping.bind(this))):this._camera.removeUpdateStopListener(this._udpateSnapping.bind(this)),this._viewer.setSmartCullingEnabled(!t)},t.prototype._onMouseMove=function(e){return!!this._enabled&&(e.pressed||this._camera.updated||(l[0]=e.x,l[1]=e.y,this._snapped=this._snapping.snap(l,u),this._snapped>=0&&(this.currentPosition[0]=u[0],this.currentPosition[1]=u[1],this.currentPosition[2]=u[2]),this._viewer.getEventEmitter().emit("SelectModel-SnappedTo",l)),!1)},t.prototype._onMouseUp=function(e){return!!this._enabled&&(e.moved||(this.currentModel=-1,l[0]=e.x,l[1]=e.y,this._snapped<0&&(this._snapped=this._snapping.snap(l,u)),this._snapped>=0&&(this.currentModel=this._pickQuery.pickModel(l[0],l[1],this._renderer,this._camera),this._viewer.getEventEmitter().emit("SelectModel-Selected",this.currentModel,u))),!1)},t}(o.default);t.default=c},"./08ui/tool/Snapping.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"SnappingMode",function(){return n});var n,i=r("./00utility/Environment.ts"),a=r("./02resource/m3d_shader_library.js"),o=r("./03scene/drawables/Gizmo.ts"),s=r("./03scene/materials/Material.ts"),l=r("./04renderer/pipeline/RenderTarget.ts"),u=r("./04renderer/pipeline/RenderPass.ts"),c=r("./04renderer/pipeline/RenderPassEdgeMap.ts"),d=r("./08ui/tool/SpiralOrder.ts"),h=r("./glMatrix.js");!function(e){e[e.NONE=-1]="NONE",e[e.VERTEX=0]="VERTEX",e[e.EDGE=1]="EDGE",e[e.EDGEMIDPOINT=2]="EDGEMIDPOINT"}(n||(n={}));var f=[0,0,0],p=function(){function e(e,t,r,n){var i=r.gl;if(this._gl=i,i.isWebGL2){this._rendering=!1,this._camera=t,this._edgeIndex=-1,this._radius=5,this._edgePass=new c.default(r,n),this._notEdgePass=new u.default(r,n,!1,{line:!1});var d=r.getMesh("edge");d.createLine(),this._edge=new o.default(d,r),this._edge.setColor([1,177/255,0]);var h=r.getMesh("snapping-dot");h.ready||h.createSphere(16,32),this._dot=new o.default(h,r),this._dot.setColor([1,177/255,0]),this._dot.transform.matrix[0]=.1,this._dot.transform.matrix[5]=.1,this._dot.transform.matrix[10]=.1;var f=r.getShader("mark",[]);if(!f.ready){var p=a.default.mark;f.createFromShaderSource(p,[])}this._edgePass.setOverridedShader(f),this._edgePass.setOverridedMaterial(new s.default("edgemap")),this._notEdgePass.setCullFace(i.CCW);var m=t.viewport[2],v=t.viewport[3];if(this._rtEdge=new l.default("rtEdge",r,m,v,{depthTest:!0,colorFormat:i.RGBA8,colorFilter:i.NEAREST,depthBuffer:0,colorBuffer:0,clearColor:[1,1,1,1]}),this._rtNotEdge=new l.default("rtNotEdge",r,m,v,{depthTest:!0,colorFormat:i.RGBA8,colorFilter:i.NEAREST,depthBuffer:0,colorBuffer:0,colorMask:[0,0,0,0],clearColor:[1,1,1,1]}),this._rtDefault=new l.default("default",r,m,v,{depthFunc:i.LEQUAL}),!this._edgePass.queue.isValid())for(var _=0,g=e.models.length;_<g;++_)for(var y=0,b=(x=e.models[_].drawables).length;y<b;y++)this._edgePass.queue.addDrawable(x[y]);if(!this._notEdgePass.queue.isValid())for(_=0,g=e.models.length;_<g;++_){var x;for(y=0,b=(x=e.models[_].drawables).length;y<b;y++)this._notEdgePass.queue.addDrawable(x[y])}this._edgeBuffer=new Float32Array(6),this.resize(m,v)}else console.warn("Snapping requires a WebGL 2.0 context")}return e.prototype.destroy=function(){this._edge.mesh.destroy(),this._edge.destroy(),this._edge=null,delete this._edge,this._dot.destroy(),this._dot=null,delete this._dot,this._edgeBuffer=null,delete this._edgeBuffer,this._edgesBuffer=null,delete this._edgesBuffer,this._rtEdge.destroy(),this._rtEdge=null,delete this._rtEdge,this._rtNotEdge.destroy(),this._rtNotEdge=null,delete this._rtNotEdge,this._rtDefault.destroy(),this._rtDefault=null,delete this._rtDefault,this._edgePass.destroy(),this._edgePass=null,delete this._edgePass,this._notEdgePass.destroy(),this._notEdgePass=null,delete this._notEdgePass},e.prototype.recompileShader=function(e,t){this._edgePass.recompileOverridedShader(t)},e.prototype.setSnappingRadius=function(e){this._radius=Math.max(Math.min(e,11),0)},e.prototype.setRenderingEnabled=function(e){this._rendering=e},e.prototype.resize=function(e,t){this._rtEdge.resize(e,t),this._edgesBuffer=new Uint8Array(e*t*4)},e.prototype.render=function(e,t){this._rendering},e.prototype.snap=function(e,t){var r=this._rtEdge.getWidth(),a=this._rtEdge.getHeight(),o=Math.floor(e[0]*i.Environment.devicePixelRatio),s=Math.floor(a-1-e[1]*i.Environment.devicePixelRatio),l=!1,u=this._edgeIndex;this._edgeIndex=-1;for(var c=this._radius*this._radius-1,p=0;p<c;p++){var m=o+d.SPIRAL[p][0],v=s+d.SPIRAL[p][1];if(!(m<1||m>r-1||v<1||v>a-1)){var _=4*(m+v*r),g=this._edgesBuffer[_+0],y=this._edgesBuffer[_+1],b=this._edgesBuffer[_+2],x=this._edgesBuffer[_+3];if(255!==g||255!==y||255!==b||255!==x){var w=x<<24|b<<16|y<<8|g;this._edgeIndex=-2&w,l=!0,e[0]=Math.floor(m/i.Environment.devicePixelRatio),e[1]=Math.floor((a-1-v)/i.Environment.devicePixelRatio);break}}}if(this._edgeIndex!==u&&l)for(var E=0,M=(m=0,this._edgePass.queue.drawables.length);m<M;m++){var A=this._edgePass.queue.drawables[m],T=A.mesh,S=T.length;if(this._edgeIndex>=E&&this._edgeIndex<E+S){if(T.getVBSubData(12*(this._edgeIndex-E),this._edgeBuffer),!A.transform.identity){var k=A.transform.matrix;h.vec3.transformMat4(this._edgeBuffer,this._edgeBuffer,k),f[0]=this._edgeBuffer[3],f[1]=this._edgeBuffer[4],f[2]=this._edgeBuffer[5],h.vec3.transformMat4(f,f,k),this._edgeBuffer[3]=f[0],this._edgeBuffer[4]=f[1],this._edgeBuffer[5]=f[2]}this._rendering&&this._edge.mesh.update(this._edgeBuffer,new Uint16Array([0,1]));break}E+=S}return l?(t=t||[0,0,0],this._snapToMidPoint(e,t)?n.EDGEMIDPOINT:this._snapToVertex(e,t)?n.VERTEX:(this._snapToEdge(e,t),n.EDGE)):-1},e.prototype.update=function(e,t,r){var n=this._gl;e.invalidate(),e.clear(this._rtEdge,n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),this._notEdgePass.render(this._rtNotEdge,e,r),this._edgePass.render(this._rtEdge,e,r),n.readPixels(0,0,this._rtEdge.getWidth(),this._rtEdge.getHeight(),n.RGBA,n.UNSIGNED_BYTE,this._edgesBuffer)},e.prototype._snapToEdge=function(e,t){var r=[this._edgeBuffer[0],this._edgeBuffer[1],this._edgeBuffer[2]],n=[this._edgeBuffer[3],this._edgeBuffer[4],this._edgeBuffer[5]],i=this._camera.eye,a=this._camera.unproject(e[0],e[1]),o=h.vec3.create(),s=h.vec3.create(),l=h.vec3.create(),u=h.vec3.create();h.vec3.sub(o,n,r),h.vec3.sub(s,a,i),h.vec3.sub(l,i,r),h.vec3.cross(l,l,s),h.vec3.cross(u,o,s);var c=h.vec3.dot(l,u)/h.vec3.squaredLength(u);return h.vec3.lerp(t,r,n,c),!0},e.prototype._snapToMidPoint=function(e,t){var r=this._camera.project([.5*(this._edgeBuffer[0]+this._edgeBuffer[3]),.5*(this._edgeBuffer[1]+this._edgeBuffer[4]),.5*(this._edgeBuffer[2]+this._edgeBuffer[5])]),n=r[0]-e[0],i=r[1]-e[1];return n*n+i*i<this._radius*this._radius&&(e[0]=r[0],e[1]=r[1],t[0]=.5*(this._edgeBuffer[0]+this._edgeBuffer[3]),t[1]=.5*(this._edgeBuffer[1]+this._edgeBuffer[4]),t[2]=.5*(this._edgeBuffer[2]+this._edgeBuffer[5]),this._rendering&&(this._dot.transform.matrix[12]=t[0],this._dot.transform.matrix[13]=t[1],this._dot.transform.matrix[14]=t[2]),!0)},e.prototype._snapToVertex=function(e,t){var r=this._camera.project(this._edgeBuffer),n=this._camera.project([this._edgeBuffer[3],this._edgeBuffer[4],this._edgeBuffer[5]]),i=r[0]-e[0],a=r[1]-e[1],o=n[0]-e[0],s=n[1]-e[1],l=i*i+a*a,u=o*o+s*s,c=this._radius*this._radius;return l<c&&l<u?(e[0]=r[0],e[1]=r[1],t[0]=this._edgeBuffer[0],t[1]=this._edgeBuffer[1],t[2]=this._edgeBuffer[2],this._rendering&&(this._dot.transform.matrix[12]=t[0],this._dot.transform.matrix[13]=t[1],this._dot.transform.matrix[14]=t[2]),!0):u<c&&u<l&&(e[0]=n[0],e[1]=n[1],t[0]=this._edgeBuffer[3],t[1]=this._edgeBuffer[4],t[2]=this._edgeBuffer[5],this._rendering&&(this._dot.transform.matrix[12]=t[0],this._dot.transform.matrix[13]=t[1],this._dot.transform.matrix[14]=t[2]),!0)},e}();t.default=p},"./08ui/tool/SnappingApprox.ts":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/Environment.ts"),i=r("./02resource/m3d_shader_library.js"),a=r("./03scene/materials/Material.ts"),o=r("./03scene/drawables/Gizmo.ts"),s=r("./04renderer/pipeline/RenderTarget.ts"),l=r("./04renderer/pipeline/RenderPass.ts"),u=r("./08ui/tool/SpiralOrder.ts"),c=r("./08ui/tool/Snapping.ts"),d=r("./glMatrix.js"),h=[0,0,0],f=[0,0,0],p=[0,0,0],m=[0,0,0],v=[0,0,0],_=function(){function e(e,t,r,n){this._normalDepthPass=new l.default(r,n,!1,{line:!1}),this._rendering=!1,this._camera=t;var u=t.viewport[2],c=t.viewport[3],d=r.gl;this._gl=d,this._rtNormalDepth=new s.default(name+"_depth",r,u,c,{colorFormat:d.RGBA32F,colorFilter:d.NEAREST,colorBuffer:0,depthBuffer:0,clearColor:[0,0,0,0]}),this._rtDefault=new s.default("default",r,u,c,{depthFunc:d.LEQUAL});var h=r.getShader("normaldepth",["WORLDSPACE_NORMAL"]);if(!h.ready){var f=i.default.normaldepth;h.createFromShaderSource(f,["WORLDSPACE_NORMAL"])}this._normalDepthPass.setOverridedShader(h),this._normalDepthPass.setOverridedMaterial(new a.default("ruler-position-depth")),this._radius=10,this.resize(u,c);var p=r.getMesh("snapping-dot");if(p.ready||p.createSphere(16,32),this._dot=new o.default(p,r),this._dot.setColor([1,177/255,0]),this._dot.transform.matrix[0]=.1,this._dot.transform.matrix[5]=.1,this._dot.transform.matrix[10]=.1,!this._normalDepthPass.queue.isValid())for(var m=0,v=e.models.length;m<v;++m)for(var _=e.models[m].drawables,g=0,y=_.length;g<y;g++)this._normalDepthPass.queue.addDrawable(_[g])}return e.prototype.destroy=function(){this._normalDepthPass.destroy(),this._normalDepthPass=null,delete this._normalDepthPass,this._dot.destroy(),this._dot=null,delete this._dot,this._rtNormalDepth.destroy(),this._rtNormalDepth=null,delete this._rtNormalDepth,this._rtDefault.destroy(),this._rtDefault=null,delete this._rtDefault,this._normalDepthBuffer=null,delete this._normalDepthBuffer},e.prototype.setSnappingRadius=function(e){this._radius=Math.max(Math.min(e,11),0)},e.prototype.snap=function(e,t){e[0],e[1];var r=this._rtNormalDepth.getWidth(),i=this._rtNormalDepth.getHeight(),a=Math.floor(e[0]*n.Environment.devicePixelRatio),o=Math.floor(i-1-e[1]*n.Environment.devicePixelRatio);if(t=t||[0,0,0],this._fetchNormal(a,o))for(var s=0;s<this._radius*this._radius-1;s++){var l=a+u.SPIRAL[s][0],d=o+u.SPIRAL[s][1];if(!(l<0||l>r-1||d<0||d>i-1)&&this._detectEdge(l,d))return e[0]=Math.floor(l/n.Environment.devicePixelRatio),e[1]=Math.floor((i-1-d)/n.Environment.devicePixelRatio),this._fetchPosition(l,d,t),this._rendering&&(this._dot.transform.matrix[12]=t[0],this._dot.transform.matrix[13]=t[1],this._dot.transform.matrix[14]=t[2]),c.SnappingMode.EDGE}return this._rendering&&(this._fetchPosition(a,o,t),this._dot.transform.matrix[12]=t[0],this._dot.transform.matrix[13]=t[1],this._dot.transform.matrix[14]=t[2]),-1},e.prototype._fetchNormal=function(e,t,r){var n=4*(e+t*this._rtNormalDepth.getWidth()),i=this._normalDepthBuffer[n],a=this._normalDepthBuffer[n+1],o=this._normalDepthBuffer[n+2];return i*i+a*a+o*o>.01&&(r&&(r[0]=i,r[1]=a,r[2]=o,d.vec3.normalize(r,r)),!0)},e.prototype._fetchPosition=function(e,t,r){var i=this._rtNormalDepth.getWidth(),a=this._rtNormalDepth.getHeight(),o=4*(e+t*i),s=this._normalDepthBuffer[o],l=this._normalDepthBuffer[o+1],u=this._normalDepthBuffer[o+2];if(s*s+l*l+u*u<.01)return!1;var c=e/n.Environment.devicePixelRatio,d=(a-1-t)/n.Environment.devicePixelRatio,h=this._normalDepthBuffer[o+3],f=this._camera.unproject(c,d,-h);return r[0]=f[0],r[1]=f[1],r[2]=f[2],!0},e.prototype._detectEdge=function(e,t){this._fetchNormal(e-1,t,h),this._fetchPosition(e-1,t,p),this._fetchNormal(e+1,t,f),this._fetchPosition(e+1,t,m),d.vec3.subtract(v,p,m),d.vec3.normalize(v,v);var r=Math.max(Math.abs(d.vec3.dot(v,h)),Math.abs(d.vec3.dot(v,f)));this._fetchNormal(e,t-1,h),this._fetchPosition(e,t-1,p),this._fetchNormal(e,t+1,f),this._fetchPosition(e,t+1,m),d.vec3.subtract(v,p,m),d.vec3.normalize(v,v);var n=Math.max(Math.abs(d.vec3.dot(v,h)),Math.abs(d.vec3.dot(v,f)));return r*r+n*n>.25},e.prototype.resize=function(e,t){this._rtNormalDepth.resize(e,t),this._normalDepthBuffer=new Float32Array(e*t*4)},e.prototype.update=function(e,t,r){var n=this._gl;e.invalidate(),e.clear(this._rtNormalDepth,n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),this._normalDepthPass.render(this._rtNormalDepth,e,r),n.readPixels(0,0,this._rtNormalDepth.getWidth(),this._rtNormalDepth.getHeight(),n.RGBA,n.FLOAT,this._normalDepthBuffer)},e.prototype.render=function(e,t){this._rendering&&e.drawGizmo(this._rtDefault,this._dot,t)},e.prototype.setRenderingEdgeEnabled=function(e){this._rendering=e},e}();t.default=_},"./08ui/tool/SpiralOrder.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"SPIRAL",function(){return n});var n=[[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1],[2,-1],[2,0],[2,1],[2,2],[1,2],[0,2],[-1,2],[-2,2],[-2,1],[-2,0],[-2,-1],[-2,-2],[-1,-2],[0,-2],[1,-2],[2,-2],[3,-2],[3,-1],[3,0],[3,1],[3,2],[3,3],[2,3],[1,3],[0,3],[-1,3],[-2,3],[-3,3],[-3,2],[-3,1],[-3,0],[-3,-1],[-3,-2],[-3,-3],[-2,-3],[-1,-3],[0,-3],[1,-3],[2,-3],[3,-3],[4,-3],[4,-2],[4,-1],[4,0],[4,1],[4,2],[4,3],[4,4],[3,4],[2,4],[1,4],[0,4],[-1,4],[-2,4],[-3,4],[-4,4],[-4,3],[-4,2],[-4,1],[-4,0],[-4,-1],[-4,-2],[-4,-3],[-4,-4],[-3,-4],[-2,-4],[-1,-4],[0,-4],[1,-4],[2,-4],[3,-4],[4,-4],[5,-4],[5,-3],[5,-2],[5,-1],[5,0],[5,1],[5,2],[5,3],[5,4],[5,5],[4,5],[3,5],[2,5],[1,5],[0,5],[-1,5],[-2,5],[-3,5],[-4,5],[-5,5],[-5,4],[-5,3],[-5,2],[-5,1],[-5,0],[-5,-1],[-5,-2],[-5,-3],[-5,-4],[-5,-5],[-4,-5],[-3,-5],[-2,-5],[-1,-5],[0,-5],[1,-5],[2,-5],[3,-5],[4,-5],[5,-5],[6,-5],[6,-4],[6,-3],[6,-2],[6,-1],[6,0],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[5,6],[4,6],[3,6],[2,6],[1,6],[0,6],[-1,6],[-2,6],[-3,6],[-4,6],[-5,6],[-6,6],[-6,5],[-6,4],[-6,3],[-6,2],[-6,1],[-6,0],[-6,-1],[-6,-2],[-6,-3],[-6,-4],[-6,-5],[-6,-6],[-5,-6],[-4,-6],[-3,-6],[-2,-6],[-1,-6],[0,-6],[1,-6],[2,-6],[3,-6],[4,-6],[5,-6],[6,-6],[7,-6],[7,-5],[7,-4],[7,-3],[7,-2],[7,-1],[7,0],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[6,7],[5,7],[4,7],[3,7],[2,7],[1,7],[0,7],[-1,7],[-2,7],[-3,7],[-4,7],[-5,7],[-6,7],[-7,7],[-7,6],[-7,5],[-7,4],[-7,3],[-7,2],[-7,1],[-7,0],[-7,-1],[-7,-2],[-7,-3],[-7,-4],[-7,-5],[-7,-6],[-7,-7],[-6,-7],[-5,-7],[-4,-7],[-3,-7],[-2,-7],[-1,-7],[0,-7],[1,-7],[2,-7],[3,-7],[4,-7],[5,-7],[6,-7],[7,-7],[8,-7],[8,-6],[8,-5],[8,-4],[8,-3],[8,-2],[8,-1],[8,0],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[7,8],[6,8],[5,8],[4,8],[3,8],[2,8],[1,8],[0,8],[-1,8],[-2,8],[-3,8],[-4,8],[-5,8],[-6,8],[-7,8],[-8,8],[-8,7],[-8,6],[-8,5],[-8,4],[-8,3],[-8,2],[-8,1],[-8,0],[-8,-1],[-8,-2],[-8,-3],[-8,-4],[-8,-5],[-8,-6],[-8,-7],[-8,-8],[-7,-8],[-6,-8],[-5,-8],[-4,-8],[-3,-8],[-2,-8],[-1,-8],[0,-8],[1,-8],[2,-8],[3,-8],[4,-8],[5,-8],[6,-8],[7,-8],[8,-8],[9,-8],[9,-7],[9,-6],[9,-5],[9,-4],[9,-3],[9,-2],[9,-1],[9,0],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[9,9],[8,9],[7,9],[6,9],[5,9],[4,9],[3,9],[2,9],[1,9],[0,9],[-1,9],[-2,9],[-3,9],[-4,9],[-5,9],[-6,9],[-7,9],[-8,9],[-9,9],[-9,8],[-9,7],[-9,6],[-9,5],[-9,4],[-9,3],[-9,2],[-9,1],[-9,0],[-9,-1],[-9,-2],[-9,-3],[-9,-4],[-9,-5],[-9,-6],[-9,-7],[-9,-8],[-9,-9],[-8,-9],[-7,-9],[-6,-9],[-5,-9],[-4,-9],[-3,-9],[-2,-9],[-1,-9],[0,-9],[1,-9],[2,-9],[3,-9],[4,-9],[5,-9],[6,-9],[7,-9],[8,-9],[9,-9],[10,-9],[10,-8],[10,-7],[10,-6],[10,-5],[10,-4],[10,-3],[10,-2],[10,-1],[10,0],[10,1],[10,2],[10,3],[10,4],[10,5],[10,6],[10,7],[10,8],[10,9],[10,10],[9,10],[8,10],[7,10],[6,10],[5,10],[4,10],[3,10],[2,10],[1,10],[0,10],[-1,10],[-2,10],[-3,10],[-4,10],[-5,10],[-6,10],[-7,10],[-8,10],[-9,10],[-10,10],[-10,9],[-10,8],[-10,7],[-10,6],[-10,5],[-10,4],[-10,3],[-10,2],[-10,1],[-10,0],[-10,-1],[-10,-2],[-10,-3],[-10,-4],[-10,-5],[-10,-6],[-10,-7],[-10,-8],[-10,-9],[-10,-10],[-9,-10],[-8,-10],[-7,-10],[-6,-10],[-5,-10],[-4,-10],[-3,-10],[-2,-10],[-1,-10],[0,-10],[1,-10],[2,-10],[3,-10],[4,-10],[5,-10],[6,-10],[7,-10],[8,-10],[9,-10],[10,-10],[11,-10],[11,-9],[11,-8],[11,-7],[11,-6],[11,-5],[11,-4],[11,-3],[11,-2],[11,-1],[11,0],[11,1],[11,2],[11,3],[11,4],[11,5],[11,6],[11,7],[11,8],[11,9],[11,10],[11,11],[10,11],[9,11],[8,11],[7,11],[6,11],[5,11],[4,11],[3,11],[2,11],[1,11],[0,11],[-1,11],[-2,11],[-3,11],[-4,11],[-5,11],[-6,11],[-7,11],[-8,11],[-9,11],[-10,11],[-11,11],[-11,10],[-11,9],[-11,8],[-11,7],[-11,6],[-11,5],[-11,4],[-11,3],[-11,2],[-11,1],[-11,0],[-11,-1],[-11,-2],[-11,-3],[-11,-4],[-11,-5],[-11,-6],[-11,-7],[-11,-8],[-11,-9],[-11,-10],[-11,-11],[-10,-11],[-9,-11],[-8,-11],[-7,-11],[-6,-11],[-5,-11],[-4,-11],[-3,-11],[-2,-11],[-1,-11],[0,-11],[1,-11],[2,-11],[3,-11],[4,-11],[5,-11],[6,-11],[7,-11],[8,-11],[9,-11],[10,-11],[11,-11]]},"./08ui/tool/Tool.ts":function(e,t,r){"use strict";r.r(t);var n=r("./04renderer/pipeline/RenderTarget.ts"),i=function(){function e(e,t,r){if(this.name=e,this._viewer=r,r){this._scene=r.getScene().core,this._camera=r.getCamera().core,this._cameras=[];for(var n=0;n<r.getCamera().cores.length;n++)this._cameras.push(r.getCamera().cores[n]);this._resourceManager=r.getResourceManager(),this._renderer=r.getRenderer()}else this._scene=null,this._camera=null,this._cameras=[],this._resourceManager=null,this._renderer=null;this._renderable=t,this._renderTargets=[],this._interactive=!0,this._enabled=!1}return e.prototype.destroy=function(){this.name=null,delete this.name,this._viewer=null,delete this._viewer,this._scene=null,delete this._scene,this._camera=null,delete this._camera,this._cameras=null,delete this._cameras,this._renderer=null,delete this._renderer,this._resourceManager=null,delete this._resourceManager;for(var e=0;e<this._renderTargets.length;e++)this._renderTargets[e].destroy();this._renderTargets=null,delete this._renderTargets},e.prototype.doesSupportMobile=function(e){return!1},e.prototype.doesSupport3D=function(e){return!1},e.prototype.isEnabled=function(){return this._enabled},e.prototype.setEnabled=function(e){this._enabled=e},e.prototype.setInteractive=function(e){this._interactive=e},e.prototype.isInteractive=function(){return this._interactive&&this._enabled},e.prototype.addInput=function(e){},e.prototype.resize=function(e,t){for(var r=0;r<this._renderTargets.length;r++)this._renderTargets[r].resize(e,t)},e.prototype.render=function(){},e.prototype._getRenderTarget=function(e){if(this._renderable&&this._viewer){var t=this._viewer.getRenderScene().getRenderTarget().getName(),r=this._viewer.getCamera().core,i=r.viewport[2],a=r.viewport[3],o=new n.default(t,this._resourceManager,i,a,e||{});return this._renderTargets.push(o),o}return null},e}();t.default=i},"./08ui/tool/TransformGizmo.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/drawables/Gizmo.ts"),a=r("./08ui/tool/PickQuery.ts"),o=r("./08ui/tool/Tool.ts"),s=r("./08ui/input/Mouse.ts"),l=r("./glMatrix.js"),u=r("./08ui/input/Touch.ts"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),d={"axis-x":l.vec4.fromValues(1,0,0,1),"axis-y":l.vec4.fromValues(0,1,0,1),"axis-z":l.vec4.fromValues(0,0,1,1),"rotate-xy":l.vec4.fromValues(0,0,1,1),"rotate-yz":l.vec4.fromValues(1,0,0,1),"rotate-xz":l.vec4.fromValues(0,1,0,1),picked:l.vec4.fromValues(1,1,0,1)},h=function(e){function t(t,r,n){void 0===n&&(n=1);var i=e.call(this,"TransformGizmo",!0,t)||this;if(i._transformMatrix=l.mat4.create(),r){if(i._model=t.getScene().core.models[r],!i._model)return console.warn("No modelId "+r+" is found!"),i.destroy(),i;i._model.updateBBox(),i._model.isMatrixIdentity&&(i._model.drawables.forEach(function(e){e.recompileShader("MODEL_TRANSFORM",!0)}),t.invalidate()),i._transformMatrix[12]=.5*(i._model.bbox[0]+i._model.bbox[3]),i._transformMatrix[13]=.5*(i._model.bbox[1]+i._model.bbox[4]),i._transformMatrix[14]=.5*(i._model.bbox[2]+i._model.bbox[5])}else console.warn("please use .setModel to add model");return i._renderTarget=i._getRenderTarget(),i._picked=null,i._drawables=[],i._scale=.2*n,i._scaleMatrix=l.mat4.create(),i._tempMat=l.mat4.create(),i._planeNormal=l.vec3.create(),i}return c(t,e),t.prototype.setModel=function(e){if(this._model=this._viewer.getScene().core.models[e],!this._model)return console.warn("No modelId "+e+" is found!"),void this.destroy();this._model.updateBBox();var t=this._model.getTransformMatrix();this._model.isMatrixIdentity&&(this._model.drawables.forEach(function(e){e.recompileShader("MODEL_TRANSFORM",!0)}),this._viewer.invalidate()),l.mat4.copy(this._transformMatrix,t)},t.prototype.destroy=function(){this._drawables.length>0&&(this._drawables[0].destroy(),this._drawables[1].destroy(),this._drawables[2].destroy(),this._drawables[3].destroy(),this._drawables[4].destroy(),this._drawables[5].destroy()),this._drawables=null,delete this._drawables,this._pickQuery&&(this._pickQuery.destroy(),this._pickQuery=null,delete this._pickQuery),this._model=null,delete this._model},t.prototype.setEnabled=function(e){this._enabled=e,this._enabled&&0===this._drawables.length&&(this._createGizmo(),this._pickQuery=new a.default(this._scene,this._resourceManager)),this._viewer.invalidate()},t.prototype._beginRenderGizmo=function(){l.mat4.copy(this._tempMat,this._camera.vpMatrix);var e=l.vec3.create(),t=l.vec3.fromValues(this._transformMatrix[12],this._transformMatrix[13],this._transformMatrix[14]);l.vec3.subtract(e,this._camera._at,this._camera.eye),l.vec3.normalize(e,e),l.vec3.subtract(t,t,this._camera.eye),this._scaleMatrix[0]=this._scaleMatrix[5]=this._scaleMatrix[10]=l.vec3.dot(e,t),l.mat4.multiply(this._scaleMatrix,this._transformMatrix,this._scaleMatrix),l.mat4.multiply(this._camera.vpMatrix,this._camera.vpMatrix,this._scaleMatrix),this._renderer.clear(this._renderTarget,this._resourceManager.gl.DEPTH_BUFFER_BIT),this._renderer.invalidate()},t.prototype._endRenderGizmo=function(){l.mat4.copy(this._camera.vpMatrix,this._tempMat),l.mat4.identity(this._scaleMatrix)},t.prototype.render=function(){if(this._enabled){this._beginRenderGizmo();for(var e=0;e<this._drawables.length;e++)this._renderer.drawGizmo(this._renderTarget,this._drawables[e],this._camera);this._endRenderGizmo()}},t.prototype.addInput=function(e){e instanceof s.default?(e.addMouseDownListener(this._onMouseDown.bind(this)),e.addMouseMoveListener(this._onMouseMove.bind(this)),e.addMouseUpListener(this._onMouseUp.bind(this))):e instanceof u.default&&(e.addTouchStartListener(this._onTouchStart.bind(this)),e.addTouchStopListener(this._onTouchStop.bind(this)),e.addTouchMoveListener(this._onTouchMove.bind(this)))},t.prototype.doesSupportMobile=function(e){return!0},t.prototype.doesSupport3D=function(e){return!0},t.prototype._onMouseDown=function(e){return this._picked&&(this._currentAxisX=l.vec3.fromValues(this._transformMatrix[0],this._transformMatrix[1],this._transformMatrix[2]),this._currentAxisY=l.vec3.fromValues(this._transformMatrix[4],this._transformMatrix[5],this._transformMatrix[6]),this._currentAxisZ=l.vec3.fromValues(this._transformMatrix[8],this._transformMatrix[9],this._transformMatrix[10])),!1},t.prototype._onMouseUp=function(e){return this._picked&&(this._viewer.getScene().core.updateBBox(),this._viewer.getEventEmitter().emit("TransformGizmo-End")),!1},t.prototype._onMouseMove=function(e){if(!this._enabled)return!1;if(e.pressed){if(this._picked)return this._updateTransform(e),this._scene.updateBBox(),this._viewer.invalidate(),this._viewer.getEventEmitter().emit("TransformGizmo-Move"),!0}else{this._beginRenderGizmo();var t=this._pickQuery.pickDrawable(e.x,e.y,this._renderer,this._camera,this._drawables);this._endRenderGizmo(),t!==this._picked&&(this._picked&&this._picked.setColor(d[this._picked.name]),this._picked=t,this._picked&&this._picked.setColor(d.picked))}return!1},t.prototype._onTouchStart=function(e){var t=this._pickQuery.pickDrawable(e.cursor(0).x,e.cursor(0).y,this._renderer,this._camera,this._drawables);return t!==this._picked&&(this._picked&&this._picked.setColor(d[this._picked.name]),this._picked=t,this._picked&&(this._picked.setColor(d.picked),this._picked&&(this._currentAxisX=l.vec3.fromValues(this._transformMatrix[0],this._transformMatrix[1],this._transformMatrix[2]),this._currentAxisY=l.vec3.fromValues(this._transformMatrix[4],this._transformMatrix[5],this._transformMatrix[6]),this._currentAxisZ=l.vec3.fromValues(this._transformMatrix[8],this._transformMatrix[9],this._transformMatrix[10]))),!0)},t.prototype._onTouchStop=function(e){return this._picked&&(this._picked.setColor(d[this._picked.name]),this._viewer.getEventEmitter().emit("TransformGizmo-End")),this._picked=null,!0},t.prototype._onTouchMove=function(e){return!!this._enabled&&(!(1!==e.numCursors||!this._picked)&&(this._updateTransform(e),this._scene.updateBBox(),this._viewer.invalidate(),this._viewer.getEventEmitter().emit("TransformGizmo-Move"),!0))},t.prototype._intersectPlane=function(e,t,r,n){var i=l.vec3.create();l.vec3.sub(i,t,e);var a=(n-l.vec3.dot(e,r))/l.vec3.dot(i,r),o=l.vec3.create();return l.vec3.scaleAndAdd(o,e,i,a),o},t.prototype._getTranslation=function(e,t,r,n){var i=l.vec3.create(),a=l.vec2.create(),o=l.vec3.create(),s=l.vec3.create(),u=l.mat4.create();u[12]=this._transformMatrix[12],u[13]=this._transformMatrix[13],u[14]=this._transformMatrix[14];var c=this._camera.project(r,u),d=this._camera.project(s,u);l.vec2.sub(i,e,t);a=l.vec2.fromValues(c[0]-d[0],c[1]-d[1]);l.vec2.normalize(a,a);var h=l.vec2.dot(i,a),f=this._camera._distance/(this._camera.viewport[2]-this._camera.viewport[0]);return l.vec3.scale(o,r,h*f),o},t.prototype._getRotation=function(e,t,r,n){t=this._camera.unproject(t[0],t[1]),e=this._camera.unproject(e[0],e[1]);var i=this._intersectPlane(this._camera.eye,e,r,n),a=this._intersectPlane(this._camera.eye,t,r,n),o=l.vec3.fromValues(this._transformMatrix[12],this._transformMatrix[13],this._transformMatrix[14]);if(l.vec3.sub(i,i,o),l.vec3.sub(a,a,o),0===l.vec3.distance(i,a))return 0;var s=Math.acos(l.vec3.dot(i,a)/l.vec3.length(i)/l.vec3.length(a));return l.vec3.cross(i,a,i),s*=Math.sign(l.vec3.dot(i,r))},t.prototype._updateTransform=function(e){var t,r;l.vec3.create();e instanceof s.default?(t=l.vec2.fromValues(e.x,e.y),r=l.vec2.fromValues(e.x-e.dx,e.y-e.dy)):(t=l.vec2.fromValues(e.cursor(0).x,e.cursor(0).y),r=l.vec2.fromValues(e.cursor(0).x-e.cursor(0).dx,e.cursor(0).y-e.cursor(0).dy));var n=[0,0,0],i=0,a=[0,0,1],o=0,u=l.vec3.fromValues(this._transformMatrix[12],this._transformMatrix[13],this._transformMatrix[14]);switch(this._picked.name){case"axis-x":a=this._currentAxisX,o=l.vec3.dot(u,this._currentAxisY)/l.vec3.length(this._currentAxisZ),n=this._getTranslation(t,r,a,o);break;case"axis-y":a=this._currentAxisY,o=l.vec3.dot(u,this._currentAxisX)/l.vec3.length(this._currentAxisZ),n=this._getTranslation(t,r,a,o);break;case"axis-z":a=this._currentAxisZ,o=l.vec3.dot(u,this._currentAxisX)/l.vec3.length(this._currentAxisX),n=this._getTranslation(t,r,a,o);break;case"rotate-xy":a=this._currentAxisZ,o=l.vec3.dot(u,a)/l.vec3.length(a),i=this._getRotation(t,r,a,o);break;case"rotate-yz":a=this._currentAxisX,o=l.vec3.dot(u,a)/l.vec3.length(a),i=this._getRotation(t,r,a,o);break;case"rotate-xz":a=this._currentAxisY,o=l.vec3.dot(u,a)/l.vec3.length(a),i=this._getRotation(t,r,a,o)}var c=l.vec3.fromValues(this._transformMatrix[12],this._transformMatrix[13],this._transformMatrix[14]),d=l.mat4.create();l.mat4.fromRotation(d,i,a);var h=l.vec3.create();l.vec3.transformMat4(h,c,d),d[12]=c[0]-h[0],d[13]=c[1]-h[1],d[14]=c[2]-h[2],l.mat4.multiply(this._transformMatrix,d,this._transformMatrix),this._transformMatrix[12]+=n[0],this._transformMatrix[13]+=n[1],this._transformMatrix[14]+=n[2],this._model.setTransformMatrix(this._transformMatrix);for(var f=0;f<this._cameras.length;f++)this._cameras[f]._updateProjection();var p,m={x:this._transformMatrix[12]-this._model.initMatrix[12],y:this._transformMatrix[13]-this._model.initMatrix[13],z:this._transformMatrix[14]-this._model.initMatrix[14],type:"translation"},v={x:(p=l.mat4.getEuler(this._transformMatrix))[0],y:p[1],z:p[2],type:"rotation"};switch(this._picked.name){case"axis-x":case"axis-y":case"axis-z":this._viewer.getEventEmitter().emit("TransformGizmo-Update",m);break;case"rotate-xy":case"rotate-yz":case"rotate-xz":this._viewer.getEventEmitter().emit("TransformGizmo-Update",v)}},t.prototype._createGizmo=function(){var e=.05*this._scale,t=this._scale,r=this._resourceManager.getMesh("transformX");r.createArrow(e,t);var n=this._resourceManager.getMesh("rotateXY");n.createArc(.5*this._scale,.05*this._scale,Math.PI/2,100),this._drawables=new Array(6),this._drawables[0]=new i.default(r,this._resourceManager,new Float32Array([0,0,0,2*e,2*e,t])),this._drawables[0].transform.setRotation([0,1,0],Math.PI/2),this._drawables[0].setColor(d["axis-x"]),this._drawables[0].name="axis-x",this._drawables[1]=new i.default(r,this._resourceManager,new Float32Array([0,0,0,2*e,2*e,t])),this._drawables[1].transform.setRotation([1,0,0],-Math.PI/2),this._drawables[1].setColor(d["axis-y"]),this._drawables[1].name="axis-y",this._drawables[2]=new i.default(r,this._resourceManager,new Float32Array([0,0,0,2*e,2*e,t])),this._drawables[2].setColor(d["axis-z"]),this._drawables[2].name="axis-z",this._drawables[3]=new i.default(n,this._resourceManager,new Float32Array([0,0,0,t,t,t])),this._drawables[3].setColor(d["axis-z"]),this._drawables[3].name="rotate-xy",this._drawables[4]=new i.default(n,this._resourceManager,new Float32Array([0,0,0,t,t,t])),this._drawables[4].transform.setRotation([0,1,0],-Math.PI/2),this._drawables[4].setColor(d["axis-x"]),this._drawables[4].name="rotate-yz",this._drawables[5]=new i.default(n,this._resourceManager,new Float32Array([0,0,0,t,t,t])),this._drawables[5].transform.setRotation([1,0,0],Math.PI/2),this._drawables[5].setColor(d["axis-y"]),this._drawables[5].name="rotate-xz"},t.prototype.translate=function(e,t,r){if(this._model){this._transformMatrix[12]=this._model.initMatrix[12]+e,this._transformMatrix[13]=this._model.initMatrix[13]+t,this._transformMatrix[14]=this._model.initMatrix[14]+r,this._model.setTransformMatrix(this._transformMatrix);for(var n=0;n<this._cameras.length;n++)this._cameras[n]._updateProjection()}},t.prototype.rotate=function(e,t,r){var n=[this._transformMatrix[12],this._transformMatrix[13],this._transformMatrix[14]],i=l.mat4.create();l.mat4.setFromEuler(i,e,t,r);var a=l.vec3.create();l.vec3.transformMat4(a,n,i),i[12]=n[0]-a[0],i[13]=n[1]-a[1],i[14]=n[2]-a[2];var o=l.mat4.create();o[12]=n[0],o[13]=n[1],o[14]=n[2],l.mat4.multiply(this._transformMatrix,i,o),this._model.setTransformMatrix(this._transformMatrix);for(var s=0;s<this._cameras.length;s++)this._cameras[s]._updateProjection()},t.prototype.getRotation=function(){var e=l.mat4.create();l.mat4.copy(e,this._transformMatrix);return l.mat4.getEuler(e)},t.prototype.getTranslation=function(){var e=[];return e[0]=this._transformMatrix[12]-this._model.initMatrix[12],e[1]=this._transformMatrix[13]-this._model.initMatrix[13],e[2]=this._transformMatrix[14]-this._model.initMatrix[14],e},t.prototype.getTransformMatrix=function(){var e=l.mat4.create();return l.mat4.copy(e,this._transformMatrix),e},t.prototype.getinitTranslation=function(){if(this._model){var e=[];return e[0]=this._model.initMatrix[12],e[1]=this._model.initMatrix[13],e[2]=this._model.initMatrix[14],e}console.warn("please use .setModel to add model")},t.prototype.getworldMatrix=function(){var e=l.mat4.create();return l.mat4.copy(e,this._transformMatrix),e},t}(o.default);t.default=h},"./08ui/tool/assets.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"DASH_LINE_TEXTURE_IMAGE",function(){return n});var n="data:image/png;base64,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"},"./08ui/tool/m3d_line.js":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/Environment.ts"),i=r("./01wrapper/glenum.ts"),a=r("./03scene/drawables/Gizmo2D.ts");t.default=function(){function e(e,t,r,o){this._dashed=o,this._lineWidth=Math.floor(3*n.Environment.devicePixelRatio);var s=t.getMesh("line_mesh_"+e);if(s.createQuad(!1),this._drawable=new a.default(s,t),this._drawable.setColor(r),this._dashed){this._vertices=new Float32Array(240),this._indices=new Uint8Array(120);for(var l=0;l<20;++l)this._indices[0+6*l]=0+4*l,this._indices[1+6*l]=1+4*l,this._indices[2+6*l]=2+4*l,this._indices[3+6*l]=2+4*l,this._indices[4+6*l]=3+4*l,this._indices[5+6*l]=0+4*l}else this._vertices=new Float32Array(12),this._indices=new Uint8Array(6),this._indices[0]=0,this._indices[1]=1,this._indices[2]=2,this._indices[3]=2,this._indices[4]=3,this._indices[5]=0;for(l=0;l<this._vertices.length;++l)this._vertices[l]=-1e6;this._drawable.mesh.update(this._vertices,this._indices,i.gl.UNSIGNED_BYTE)}return e.prototype.render=function(e,t,r){t.drawDrawable(e,this._drawable,r,null,null,null,!1)},e.prototype._addQuad=function(e,t,r,n,i,a,o){var s=r-e,l=n-t,u=Math.atan2(s,l),c=Math.sign(s*l)||1,d=Math.sin(u)*this._lineWidth*.5/o*c,h=Math.cos(u)*this._lineWidth*.5/a*c;e=e/a*2-1,r=r/a*2-1,t=t/o*2-1,n=n/o*2-1,this._vertices[0+i]=e-h,this._vertices[1+i]=t+d,this._vertices[3+i]=e+h,this._vertices[4+i]=t-d,this._vertices[6+i]=r+h,this._vertices[7+i]=n-d,this._vertices[9+i]=r-h,this._vertices[10+i]=n+d,this._vertices[2+i]=0,this._vertices[5+i]=0,this._vertices[8+i]=0,this._vertices[11+i]=0},e.prototype.updateVertices=function(e,t,r,a,o,s){var l=e,u=r,c=t,d=a;l*=n.Environment.devicePixelRatio,c=s-1-c*n.Environment.devicePixelRatio;var h=(u*=n.Environment.devicePixelRatio)-l,f=(d=s-1-d*n.Environment.devicePixelRatio)-c;if(this._dashed)for(var p=0;p<20;p++){var m=l+h/39*2*p,v=c+f/39*2*p,_=m+h/39,g=v+f/39;this._addQuad(m,v,_,g,12*p,o,s)}else this._addQuad(l,c,u,d,0,o,s);this._drawable.mesh.update(this._vertices,this._indices,i.gl.UNSIGNED_BYTE)},e.prototype.setLineWidth=function(e){this._lineWidth=Math.floor(Math.min(e,1)*n.Environment.devicePixelRatio)},e.prototype.destroy=function(){this._drawable.destroy(),this._vertices=null,this._indices=null},e}()},"./09app/Camera.ts":function(e,t,r){"use strict";r.r(t);var n=r("./03scene/camera/m3d_scene_camera.js"),i=r("./99api/utils/index.ts"),a=r("./08ui/tool/CameraManipulator.ts"),o=r("./03scene/camera/m3d_camera_animator_transition.js"),s=function(){function e(e){this._viewer=e;var t=[0,0,this._viewer.getCanvas().width,this._viewer.getCanvas().height];this._viewer?this._scene=e.getScene():this._scene=null,this._manipulator=null,this._scene?this.core=new n.default(this._scene.core,t):this.core=new n.default(null,t),this._animator=new o.default(e.getEventEmitter()),this.cores=[],this.cores.push(this.core)}return e.prototype.destroy=function(){this.core=null,delete this.core;for(var e=0;e<this.cores.length;e++)this.cores[e].destroy();this.cores=null,delete this.cores,this._manipulator&&(this._manipulator.destroy(),this._manipulator=null,delete this._manipulator),this._viewer&&(this._viewer=null,delete this._viewer),this._scene=null,delete this._scene},e.prototype.update=function(){return this.core.update()},e.prototype.setFov=function(e){this.core.setTargetFov(e),this._viewer&&this._viewer.invalidate()},e.prototype.setFirstPersonViewEnabled=function(e){this.core.setFirstPerson(e)},e.prototype.isFirstPersonViewEnabled=function(){return this.core.isFirstPerson()},e.prototype.setRestrictedViewEnabled=function(e){this.core.setFirstPerson(e),this._manipulator.setRestrictedViewEnabled(e)},e.prototype.isRestrictedViewEnabled=function(){return this.core.isFirstPerson()&&this._manipulator.isRestrictedViewEnabled()},e.prototype.switchToView=function(e){var t=[[0,-.5*Math.PI],[0,.5*Math.PI],[0,Math.PI],[0,0],[.49999*Math.PI,.49999*-Math.PI],[-.49999*Math.PI,.49999*-Math.PI]],r=null;if(e>=i.ViewAngle.FRONT&&e<=i.ViewAngle.BOTTOM){r=t[e];for(var n=0;n<this.cores.length;n++)this.cores[n].reset(!1),this.cores[n].rotateTo(r[0],r[1])}else{for(n=0;n<this.cores.length;n++)this.cores[n].setFirstPerson(!1),this.cores[n].setPerspective(!0);this._viewer.getEventEmitter().emit("orthoViewChanged",!0);for(n=0;n<this.cores.length;n++)this.cores[n].reset(!1);this.core.reset(!1)}},e.prototype.setSensitivity=function(e){this._manipulator.setInputSensitivity(e)},e.prototype.addInput=function(e){this._manipulator||(this._manipulator=new a.default(this._viewer)),this._manipulator.addInput(e)},e.prototype.resize=function(e,t){for(var r=[0,0,e,t],n=0;n<this.cores.length;n++)this.cores[n].setViewport(r),this.cores[n].update()},e.prototype.transformToPerspective=function(){for(var e=0;e<this.cores.length;e++)this.cores[e].transformOrthogonalToPerspective();this._viewer&&(this._viewer.invalidate(),this._viewer.getEventEmitter().emit("orthoViewChanged",!1))},e.prototype.transformToOrthogonal=function(){for(var e=0;e<this.cores.length;e++)this.cores[e].transformPerspectiveToOrthogonal();this._viewer&&(this._viewer.invalidate(),this._viewer.getEventEmitter().emit("orthoViewChanged",!0))},e.prototype.getData=function(){return this.core.dump()},e.prototype.setData=function(e,t){void 0===t&&(t=!1),t?(this.core.animator instanceof o.default&&this.core.animator.stop(!0),this._animator.attach(this.core),this._animator.start(e,!1)):this.core.restore(e)},e.prototype.switchToWorldView=function(){for(var e=0;e<this.cores.length;e++)this.cores[e].setFirstPerson(!1),this.cores[e].setPerspective(!0);this._viewer.getEventEmitter().emit("orthoViewChanged",!1);for(e=0;e<this.cores.length;e++)this.cores[e].reset(!1)},e.prototype.project=function(e,t){return this.core.project(e,t)},e.prototype.unproject=function(e,t){return this._manipulator.unproject(e,t)},e.prototype.setMinPitchAngle=function(e){for(var t=0;t<this.cores.length;t++)this.cores[t].setMinPitchAngle(e)},e.prototype.setMaxPitchAngle=function(e){for(var t=0;t<this.cores.length;t++)this.cores[t].setMaxPitchAngle(e)},e.prototype.setMaxTargetDistanceRatio=function(e){for(var t=0;t<this.cores.length;t++)this.cores[t].setMaxTargetDistanceRatio(e)},e.prototype.setMinTargetDistanceRatio=function(e){for(var t=0;t<this.cores.length;t++)this.cores[t].setMinTargetDistanceRatio(e)},e.prototype.setNearPlaneDistanceRatio=function(e){for(var t=0;t<this.cores.length;t++)this.cores[t].setMinZnearRatio(e)},e}();t.default=s},"./09app/Camera360.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/camera/m3d_scene_camera.js"),a=r("./03scene/camera/m3d_camera_animator_morphing.js"),o=r("./03scene/camera/m3d_camera_animator_panorama.js"),s=r("./09app/Camera.ts"),l=r("./glMatrix.js"),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=function(e){function t(t,r){var n=e.call(this,t)||this,s=[0,0,n._viewer.getCanvas().width,n._viewer.getCanvas().height];return n.cores.push(new i.default(null,s)),n.cores[0].setFirstPerson(!0),l.vec3.set(n.cores[0].eye,0,0,0),n.cores[1].setFirstPerson(!0),l.vec3.set(n.cores[1].eye,0,0,0),n._fov=78,n._FOV_CHANGE_SPEED=.3,n.cores[0].setTargetFov(n._fov),n.cores[0]._targetPhi=0,n.cores[0]._targetTheta=0,n.cores[1].setTargetFov(n._fov),n.cores[1]._targetPhi=0,n.cores[1]._targetTheta=0,n._animators=new Array(2),n._eventEmitter=r,n._animators[0]=new a.default(n._eventEmitter),n._animators[1]=new a.default(n._eventEmitter),n._transition=new o.default(n._eventEmitter),n._transition.setTransitionSpeed(80),n}return u(t,e),t.prototype.destroy=function(){this._animators[0].destroy(),this._animators[1].destroy(),this._animators=null,delete this._animators,e.prototype.destroy.call(this)},t.prototype.setFov=function(e){this.cores[0].setTargetFov(e),this.cores[1].setTargetFov(e),this._viewer&&this._viewer.invalidate()},t.prototype.resize=function(e,t){this.cores[0].setViewport([0,0,e,t]),this.cores[0].update(),this.cores[1].setViewport([0,0,e,t]),this.cores[1].update()},t.prototype.update=function(){var e=this.cores[0].update(),t=this.cores[1].update();return e||t},t.prototype.addInput=function(t){var r=this;(e.prototype.addInput.call(this,t),this._manipulator.setCamera(this.cores),this._manipulator.setPanoramaEnabled(!0),"mouse"===t.name)&&t.addMouseWheelListener(function(e){var t=-e.delta*r._FOV_CHANGE_SPEED;return r._fov+=t,r._fov>180&&(r._fov=179.99999),r._fov<0&&(r._fov=.001),r.cores[0].setTargetFov(r._fov),r.cores[1].setTargetFov(r._fov),!0})},t.prototype.transit=function(e,t){var r=this.cores[e],n=this.cores[1-e],i=this._animators[e],a=this._animators[1-e];i.attach(r),i.start(null,null,null,10),a.attach(n),t?(n._targetFov=n._fov=t.fov,n._targetPhi=n._phi=t.phi,n._targetTheta=n._theta=t.theta,a.start(null,null,140,t.fov)):a.start(null,null,140,78),this._manipulator.setCamera(this.cores,1-e)},t.prototype.getCameraInfo=function(e){return{fov:this.cores[e]._targetFov,phi:this.cores[e]._targetPhi,theta:this.cores[e]._targetTheta,position:l.vec3.clone(this.cores[e]._at)}},t.prototype.moveTo=function(e,t){var r=new o.default(this._eventEmitter);r.setTransitionSpeed(300),r.attach(this.cores[e]),r.start(t)},t}(s.default);t.default=c},"./09app/CameraMultiple.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/camera/m3d_scene_camera.js"),a=r("./08ui/tool/CameraManipulator.ts"),o=r("./09app/Camera.ts"),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(e){function t(t){var r=e.call(this,t)||this;return r._horizontal=!0,r._percentage=.5,r._viewports=new Array(2),r._viewports[0]=new Uint32Array(4),r._viewports[1]=new Uint32Array(4),r.cores.push(new i.default(r._scene.cores[1],r._viewports[1])),r._updateViewports(),r}return s(t,e),t.prototype.destroy=function(){this._viewports=null,delete this._viewports,e.prototype.destroy.call(this)},t.prototype.setSplitPercentage=function(e){this._percentage=e,this._updateViewports()},t.prototype.setSplitHorizontal=function(e){this._horizontal=e,this._updateViewports()},t.prototype.setFov=function(e){this.cores[0].setTargetFov(e),this.cores[1].setTargetFov(e),this._viewer&&this._viewer.invalidate()},t.prototype.resize=function(e,t){this._updateViewports(),this.cores[0].setViewport(this._viewports[0]),this.cores[0].update(),this.cores[1].setViewport(this._viewports[1]),this.cores[1].update()},t.prototype.update=function(){var e=this.cores[0].update(),t=this.cores[1].update();return e||t},t.prototype.addInput=function(t){e.prototype.addInput.call(this,t),this._manipulator||(this._manipulator=new a.default(this._viewer)),this._manipulator.setCamera(this.cores),this._manipulator.addInput(t)},t.prototype.transformToPerspective=function(){this.cores[0].transformOrthogonalToPerspective(),this.cores[1].transformOrthogonalToPerspective(),this._viewer&&this._viewer.invalidate()},t.prototype.transformToOrthogonal=function(){this.cores[0].transformPerspectiveToOrthogonal(),this.cores[1].transformPerspectiveToOrthogonal(),this._viewer&&this._viewer.invalidate()},t.prototype._updateViewports=function(){var e=this._viewer.getCanvas().width,t=this._viewer.getCanvas().height;this._horizontal?(this._viewports[0][0]=0,this._viewports[0][1]=0,this._viewports[0][2]=Math.round(e*this._percentage),this._viewports[0][3]=t,this._viewports[1][0]=this._viewports[0][2],this._viewports[1][1]=0,this._viewports[1][2]=Math.round(e*(1-this._percentage)),this._viewports[1][3]=t):(this._viewports[0][0]=0,this._viewports[0][1]=0,this._viewports[0][2]=e,this._viewports[0][3]=Math.round(t*this._percentage),this._viewports[1][0]=0,this._viewports[1][1]=this._viewports[0][3],this._viewports[1][2]=e,this._viewports[1][3]=Math.round(t*(1-this._percentage))),this.cores[0].setViewport(this._viewports[0]),this.cores[1].setViewport(this._viewports[1])},t}(o.default);t.default=l},"./09app/EventEmitter.ts":function(e,t,r){"use strict";r.r(t);var n=function(){function e(){this.events={}}return e.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Array.prototype.slice.call(arguments,1);this.events[e]&&this.events[e].forEach(function(e){return e.apply(null,n)})},e.prototype.on=function(e,t){var r=this;return this.events[e]||(this.events[e]=[]),this.events[e].push(t),function(){r.events[e]=r.events[e].filter(function(e){return e!==t})}},e.prototype.remove=function(e,t){if(this.events[e]){var r=this.events[e].indexOf(t);-1!==r&&this.events[e].splice(r,1)}},e.prototype.clear=function(){this.events={}},e}();t.default=n},"./09app/Scene.ts":function(e,t,r){"use strict";r.r(t);var n=function(){function e(e){}return e.prototype.destroy=function(){},e}();t.default=n},"./09app/Scene3D.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/Scene.ts"),a=r("./03scene/model/Element.ts"),o=r("./09app/Scene.ts"),s=r("./09app/Viewer.ts"),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(e){function t(t,r){var n=e.call(this,t)||this;return n.core=new i.default(t.getResourceManager(),r),n.cores=[],n.cores.push(n.core),n._viewer=t,n}return l(t,e),t.prototype.destroy=function(){for(var t=0;t<this.cores.length;t++)this.cores[t].destroy();this.cores=null,delete this.cores,this.core=null,delete this.core,e.prototype.destroy.call(this)},t.prototype.setElementsColor=function(e,t){this.core.setElementsColor(e,t),this._viewer.invalidate()},t.prototype.setElementsVisibility=function(e,t,r){this.core.setElementsVisibility(e,t,r),this._viewer.invalidate()},t.prototype.isElementVisible=function(e){return this.core.isElementVisible(e)},t.prototype.getElementsNames=function(e,t){return void 0===e&&(e=a.ElementType.ANY),void 0===t&&(t=!1),this.core.getElementsNames(e,t)},t.prototype.getElementsBBox=function(e){return this.core.getElementsBBox(e)},t.prototype.getElementBBox=function(e){return this.core.getElementBBox(e)},t.prototype.getElementMaterials=function(e){return this.core.getElementMaterials(e)},t.prototype.getElementMaterialNames=function(e){return this.core.getElementMaterialNames(e)},t.prototype.getPawnMaterialNames=function(e){return this.core.getPawnMaterialNames(e)},t.prototype.getMaterialType=function(e){return this.core.getMaterialType(e)},t.prototype.getModelMaterialNames=function(){return this.core.getModelMaterialNames()},t.prototype.getElementNamesByMaterialName=function(e){return this.core.getElementNamesByMaterialName(e)},t.prototype.getMaterialParameter=function(e,t){return this.core.getMaterialParameter(e,t)},t.prototype.setMaterialParameter=function(e,t,r){return this.core.setMaterialParameter(e,t,r)},t.prototype.setModelVisibility=function(e,t,r){this.core.setModelVisibility(e,t,r),this._viewer.invalidate()},t.prototype.getElementGuid=function(e){var t=e.split("+")[0],r=this.core.models[t].tree.elements[e];return void 0===r?(console.warn("elementName: "+e+" not found!"),null):r.guid},t.prototype.getElementNameByGuid=function(e){var t;for(var r in this.core.models)if(t=this.core.models[r].tree.guidElementMap[e])return t;return console.warn("guid: "+e+" not found!"),null},t.prototype.getClippingData=function(){return this.core.clipping.isEnabled()?{planes:this.core.clipping.getClippingPlanes(!0),points:this.core.clipping.getClippingPoints(!0)}:null},t.prototype.translateModel=function(e,t,r,n){var i=this.core.models[e];i&&(i.translate(t,r,n),this._viewer.invalidate())},t.prototype.rotateModel=function(e,t,r,n){var i=this.core.models[e];i&&(i.rotate(t,r,n),this._viewer.invalidate())},t.prototype.addPawn=function(e,t){var r=this;void 0===t&&(t=!0),this.core.addPawn(e),e.drawables.forEach(function(e){r._viewer._renderScene.addDrawable(e)}),e.skeletons.forEach(function(e){r._viewer._renderScene.addSkeleton(e)}),t&&this._viewer.getCamera().core.reset(!0),this._viewer.state=s.State.RENDERING,this._viewer.invalidate()},t.prototype.removePawn=function(e){var t=this;this.core.removePawn(e),e.drawables.forEach(function(e){t._viewer._renderScene.removeDrawable(e)}),e.skeletons.forEach(function(e){t._viewer._renderScene.removeSkeleton(e)}),this._viewer.invalidate()},t.prototype.addText3D=function(e,t){var r=this;void 0===t&&(t=!0),this.core.addText3D(e),e.drawables.forEach(function(e){r._viewer._renderScene.addDrawable(e)}),t&&this._viewer.getCamera().core.reset(!0),this._viewer.state=s.State.RENDERING,this._viewer.invalidate()},t.prototype.removeText3D=function(e){var t=this;this.core.removeText3D(e),e.drawables.forEach(function(e){t._viewer._renderScene.removeDrawable(e)}),this._viewer.invalidate()},t.prototype.addModel=function(e,t,r){var n=this;void 0===t&&(t=!0),this.core.addModel(e),e.drawables.forEach(function(e){n._viewer._renderScene.addDrawable(e)}),t&&(r?this._viewer.getCamera().core.reset(!0,r):this._viewer.getCamera().core.reset(!0)),this._viewer.invalidate()},t.prototype.removeModel=function(e){console.error("TBD")},t.prototype.hasContours=function(){return this.core.hasContours()},t.prototype.addVisualize=function(e){this._viewer.getRenderScene().addVisualize(e),this._viewer.invalidate()},t.prototype.removeVisualize=function(e){this._viewer.getRenderScene().removeVisualize(e),this._viewer.invalidate()},t.prototype.getVisualize=function(e,t){return void 0===t&&(t=0),this._viewer.getRenderScene().getVisualize(e,t)},t.prototype.getVisualizes=function(e){return this._viewer.getRenderScene().getVisualizes(e)},t.prototype.setBackgroundImage=function(e,t){void 0===t&&(t=!1),this.core.background.setImages(e),t&&this.core.setReflectionMap(this.core.background.skybox.getTexture())},t.prototype.setReflectionMap=function(e){var t=this,r=this._viewer.getResourceManager().getTexture("mx-reflection-map");if(!r.ready&&e||(r.destroy(),r=this._viewer.getResourceManager().getTexture("mx-reflection-map")),e){var n=this._viewer.getResourceManager().gl;if("string"==typeof e){var i=e.split(".");if("dds"!==i[i.length-1].toLowerCase())return void console.error("File format of"+e+"is not supported!");r.createFromDDS(e,function(){t.core.setReflectionMap(r),t._viewer.invalidate()})}else e[0]instanceof HTMLImageElement?(r.createFromImages(e,n.RGB,n.UNSIGNED_BYTE,n.LINEAR,n.CLAMP_TO_EDGE),r.generateCubeMapMipMap(),this.core.setReflectionMap(r),this._viewer.invalidate()):r.createFromFiles(e,n.RGB,n.LINEAR,n.CLAMP_TO_EDGE,function(){r.generateCubeMapMipMap(),t.core.setReflectionMap(r),t._viewer.invalidate()})}else this.core.setReflectionMap(null)},t.prototype.setToneMappingEnabled=function(e){this.core.setToneMappingEnabled(e)},t.prototype.setToneMappingExposure=function(e){this.core.setToneMappingExposure(e)},t}(o.default);t.default=u},"./09app/Scene3DMultiple.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/Scene.ts"),a=r("./09app/Scene3D.ts"),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t){var r=e.call(this,t,t.getMaterialManager())||this;return r.cores.push(new i.default(t.getResourceManager(),t.getMaterialManager())),r}return o(t,e),t.prototype.addPawnViewport=function(e,t){var r=this;this.cores[e].addPawn(t),t.drawables.forEach(function(t){r._viewer._renderScenes[e].addDrawable(t)}),this._viewer.invalidate()},t.prototype.addModelViewport=function(e,t){var r=this;this.cores[e].addModel(t),t.drawables.forEach(function(t){r._viewer._renderScenes[e].addDrawable(t)}),this._viewer.invalidate()},t}(a.default);t.default=s},"./09app/Viewer.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"State",function(){return n}),r.d(t,"Viewer",function(){return l});var n,i=r("./node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js"),a=r("./00utility/Environment.ts"),o=r("./00utility/m3d_hwinfo.js"),s=r("./09app/EventEmitter.ts");!function(e){e[e.INITIALIZED=-1]="INITIALIZED",e[e.UNINITIALIZED=-2]="UNINITIALIZED",e[e.RENDERING=-3]="RENDERING",e[e.INITIALIZED_PAUSED=-4]="INITIALIZED_PAUSED",e[e.RENDERING_PAUSED=-5]="RENDERING_PAUSED"}(n||(n={}));var l=function(){function e(e,t){var r=this;if(void 0===t&&(t={isMobile:!1}),this.state=n.UNINITIALIZED,this._canvasId="ModeloCanvas-"+e,this._container=document.getElementById(e),!this._container)throw Error("The container '"+e+"' doesn't exist.");if(0===this._container.clientHeight)throw Error("The container '"+e+"' should have height");if(this._canvas=document.getElementById(this._canvasId),this._canvas)throw Error("A viewer has already been created in container '"+this._canvas.parentElement.id+"'. Please call viewer.destroy() first.");this._canvas=document.createElement("canvas"),this._canvas.id=this._canvasId,this._canvas.style.display="block",this._container.appendChild(this._canvas),this._canvas.oncontextmenu=function(){return!1};var l=this._container.clientWidth,u=this._container.clientHeight;a.Environment.devicePixelRatio=t.devicePixelRatio||window.devicePixelRatio;var c=Math.floor(l*a.Environment.devicePixelRatio),d=Math.floor(u*a.Environment.devicePixelRatio);this._canvas.width=c,this._canvas.height=d,this._canvas.style.width=l+"px",this._canvas.style.height=u+"px";var h=new o.default;a.Environment.littleEndian=h.littleEndian,a.Environment.gpuMemory=Math.round(.5*h.vramSize),a.Environment.browserName=h.browserName,a.Environment.browserVersion=h.browserVersion,a.Environment.isMobile=t.isMobile,this._eventEmitter=new s.default,this._inputs=[],this._tools=[],this._ro=new i.default(function(e){e.forEach(function(e){var t=e.contentRect,n=t.width,i=t.height;r.resize(n,i)})}),this._ro.observe(this._container),this.state=n.INITIALIZED}return e.prototype.resize=function(e,t){e=e||1,t=t||1;var r=Math.floor(e*a.Environment.devicePixelRatio),n=Math.floor(t*a.Environment.devicePixelRatio);this._canvas.width=r,this._canvas.height=n,this._canvas.style.width=e+"px",this._canvas.style.height=t+"px"},e.prototype.destroy=function(){this.state!==n.UNINITIALIZED&&(this._ro.unobserve(this._container),this._ro=null,delete this._ro,this._inputs.forEach(function(e){e.destroy()}),this._inputs=null,delete this._inputs,this._tools.forEach(function(e){e.destroy()}),this._tools=null,delete this._tools,this._eventEmitter=null,delete this._eventEmitter,this.state=n.UNINITIALIZED,this._canvas.remove(),this._canvas=null,delete this._canvas,this._container=null,delete this._container,console.log("%cThe viewer gets destroyed","font-weight:bold;"))},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.invalidate=function(){},e.prototype.addInput=function(e){if(!e.isAvailable(a.Environment.isMobile))return console.warn(e.name+" is not supported on current platform."),-1;for(var t=0;t<this._inputs.length;t++)if(this._inputs[t].name===e.name)return-1;e.setEnabled(!0);var r=this._inputs.length;return this._inputs.push(e),r},e.prototype.removeInput=function(e){var t=this._inputs[e];e>=0&&e<this._inputs.length&&this._inputs.slice(e,1),t.destroy()},e.prototype.getInput=function(e){return e>=0&&e<this._inputs.length?this._inputs[e]:null},e.prototype.addTool=function(e){if(!e.doesSupportMobile(a.Environment.isMobile))return null;for(var t=0;t<this._tools.length;t++)if(this._tools[t].name===e.name)return null;for(t=0;t<this._inputs.length;t++)e.addInput(this._inputs[t]);return this._tools.push(e),e},e.prototype.getTool=function(e){for(var t=0;t<this._tools.length;t++)if(this._tools[t].name===e)return this._tools[t];return null},e.prototype.removeTool=function(e){for(var t=0;t<this._tools.length;t++)if(this._tools[t].name===e){this._tools[t].destroy(),this._tools.splice(t,1);break}},e.prototype.getWidth=function(){return this._canvas.width},e.prototype.getHeight=function(){return this._canvas.height},e.prototype.getCanvas=function(){return this._canvas},e.prototype.getEventEmitter=function(){return this._eventEmitter},e}()},"./09app/Viewer360.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./03scene/drawables/Skybox.ts"),a=r("./03scene/camera/m3d_camera_animator_morphing.js"),o=r("./04renderer/pipeline/RenderTarget.ts"),s=r("./07loadsave/Load360.ts"),l=r("./09app/Camera360.ts"),u=r("./09app/Viewer.ts"),c=r("./09app/Viewer3D.ts"),d=r("./glMatrix.js"),h=r("./99api/utils/client/index.ts"),f=r("./node_modules/axios/index.js"),p=r.n(f),m=r("./00utility/Environment.ts"),v=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),_=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},g=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};var y=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n._data={},n._skyboxes=[],n._renderTarget=null,n._viewDirection=d.vec3.create(),n._current=0,n._currentAssetId="",n._camera=new l.default(n,n._eventEmitter),n._renderTarget=new o.default("default",n._resourceManager,n._canvas.width,n._canvas.height,{blend:!0,depthTest:!1}),n._skyboxes[0]=new i.default(n._resourceManager),n._skyboxes[0].setMode(i.SkyBoxMode.SKYBOX_CUBEMAP),n._skyboxes[1]=new i.default(n._resourceManager),n._skyboxes[1].setMode(i.SkyBoxMode.SKYBOX_CUBEMAP),n}return v(t,e),t.prototype.destroy=function(){this.state!==u.State.UNINITIALIZED&&(this.pause(),this._renderTarget.destroy(),this._renderTarget=null,delete this._renderTarget,this._data=null,delete this._data,this._skyboxes[0].destroy(),this._skyboxes[1].destroy(),this._skyboxes=null,delete this._skyboxes,e.prototype.destroy.call(this))},t.prototype._detectIndicator=function(e,t){if(void 0===t&&(t=.607),d.vec3.set(this._viewDirection,-e.viewMatrix[2],-e.viewMatrix[6],-e.viewMatrix[10]),this._data[this._currentAssetId]){for(var r=[],n=0;n<this._data[this._currentAssetId].toAssets.length;n++)if(this._data[this._currentAssetId].ready){var i=this._data[this._currentAssetId].toAssets[n],a=d.vec3.clone(i.position);d.vec3.normalize(a,a);var o=d.vec3.dot(a,this._viewDirection),s=e.project(i.position);"panorama"===i.type?r.push({assetId:i.assetId,name:this._data[i.assetId].name,screenPosition:[s[0],s[1]],visible:!!(o>t&&s[2])}):r.push({annotation:i,screenPosition:[s[0],s[1]],visible:!!(o>t&&s[2])})}this._eventEmitter.emit("updatePanoramaIndicator",r)}},t.prototype.switchPanorama=function(e,t,r){void 0===r&&(r=!0),this.state=u.State.INITIALIZED,r&&this._resetScene(t),this._currentAssetId=e,this._skyboxes[this._current].setImage(this._data[this._currentAssetId].images),this.state=u.State.RENDERING},t.prototype.moveTo=function(e){this._camera.moveTo(this._current,e)},t.prototype.loadPanos=function(e,t){return _(this,void 0,void 0,function(){var r,n,i,a,o,s,l=this;return g(this,function(u){switch(u.label){case 0:return"object"==typeof(c=t)&&null!==c?(r=t.onProgress,n=t.onIndicatorsUpdate,i=t.resolution):r=t,r||(r=function(){}),e.indicators||(e.indicators=[]),e.annotations||(e.annotations=[]),[4,Promise.all(e.panoIds.map(function(e){return Object(h.getAsset)(e)}))];case 1:return(a=u.sent()).forEach(function(e){if(!e.panoConvertedUrl)throw Error("asset "+e.id+" is not a panorama image")}),[4,Promise.all(a.map(function(e){return p.a.get(e.panoConvertedUrl)}))];case 2:return o=u.sent(),s={},o.forEach(function(e,t){var r=[],n=e.data,o=Object.keys(n);o.forEach(function(e){if(e.startsWith("1024_left")?r.push(1024):e.startsWith("2048_left")?r.push(2048):e.startsWith("4096_left")&&r.push(4096),!r.length)throw Error("asset "+a[t].id+" image urls error");if(i&&!r.includes(i))throw Error("resolution not valid");i||(i=r[r.length-1]),s[a[t].id]={imageUrls:o.filter(function(e){return e.startsWith(i+"")}).map(function(e){return n[e]}),images:[],name:a[t].name,ready:!1,toAssets:[],type:"cubemaps"}})}),e.indicators.forEach(function(e,t){s[e.from].toAssets.push({id:"indicator-"+t,type:"panorama",assetId:e.to,camera:e.camera,position:e.position,fromAsset:e.from})}),e.annotations.forEach(function(e,t){s[e.from].toAssets.push({id:"annotation-"+t,type:"annotation",fromAsset:e.from,position:e.position})}),this.getEventEmitter().on("updatePanoramaIndicator",function(t){n&&n(t.map(function(t,r){return t.annotation?{position:t.screenPosition,visible:t.visible,annotation:t.annotation}:{from:e.indicators[r].from,to:t.assetId,camera:e.indicators[r].camera,position:t.screenPosition,visible:t.visible,name:t.name||s[t.assetId].name}}))}),[2,new Promise(function(t,n){l._load360(s,e.panoIds,t,n,r)})]}var c})})},t.prototype.loadPano=function(e,t){return _(this,void 0,void 0,function(){return g(this,function(r){return[2,this.loadPanos({panoIds:[e],indicators:[],annotations:[]},t)]})})},t.prototype._load360=function(e,t,r,n,i){var a=this;this._data=e,new s.default(this._data,this).load(null,{},t,function(){var e=t[0];a._data[e].ready&&(a._currentAssetId=t[0],a._skyboxes[0].setImage(a._data[e].images)),a.state=u.State.RENDERING},function(){a.invalidate(),r()},function(e,t){i(e,t)}).catch(function(e){n(e)})},t.prototype.getCameraInfo=function(){return this._camera.getCameraInfo(this._current)},t.prototype.getCurrentCamera=function(){return this._camera.cores[this._current]},t.prototype.dumpScreen=function(e,t){e||t?t||(t=e*this._canvas.height/this._canvas.width):(e=this._canvas.width,t=this._canvas.height);var r=Math.floor(this._canvas.width/m.Environment.devicePixelRatio),n=Math.floor(this._canvas.height/m.Environment.devicePixelRatio),i=Math.floor(e/m.Environment.devicePixelRatio),a=Math.floor(t/m.Environment.devicePixelRatio);i===r&&a===n||this.resize(i,a),this._update(!0);var o=this._canvas.toDataURL("image/jpeg",.75);return i!==r||a!==n?this.resize(r,n):this.invalidate(),o},t.prototype._resetScene=function(e){this._camera.transit(this._current,e),this._current=1-this._current},t.prototype.resize=function(t,r){e.prototype.resize.call(this,t,r),this._camera.resize(this._canvas.width,this._canvas.height),this._renderTarget.resize(this._canvas.width,this._canvas.height),this.invalidate()},t.prototype._drawScene=function(){var e=this._camera;e.cores[this._current].animator instanceof a.default?(this._renderer.drawSkybox(this._renderTarget,this._skyboxes[1-this._current],e.cores[1-this._current]),this._renderer.endFrame(),this._renderer.beginFrame(),this._skyboxes[this._current].setTransparency(1-e.cores[this._current].animator.getProgress())):this._detectIndicator(e.cores[this._current]),this._renderer.drawSkybox(this._renderTarget,this._skyboxes[this._current],e.cores[this._current])},t.prototype._update=function(e){void 0===e&&(e=!1),this.state===u.State.RENDERING&&(this._camera.update()||e)&&(this._renderer.beginFrame(),this._drawScene(),this._renderer.endFrame())},t}(c.default);t.default=y},"./09app/Viewer3D.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"defaultGLConfig",function(){return M});var n,i=r("./00utility/m3d_math.js"),a=r("./01wrapper/m3d_wgl.release.js"),o=r("./02resource/ResourceManager.ts"),s=r("./03scene/MaterialManager.ts"),l=r("./03scene/model/Model.ts"),u=r("./04renderer/pipeline/m3d_renderer.js"),c=r("./04renderer/pipeline/RenderScenePR.ts"),d=r("./04renderer/pipeline/RenderSceneExploded.ts"),h=r("./08ui/tool/Snapping.ts"),f=r("./08ui/tool/SnappingApprox.ts"),p=r("./09app/Scene3D.ts"),m=r("./09app/Camera.ts"),v=r("./09app/Viewer.ts"),_=r("./99api/Version.ts"),g=r("./99api/Comment.ts"),y=r("./00utility/Environment.ts"),b=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),x=function(){return(x=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},w=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},E=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};var M={isMobile:!1,transparent:!1,stencil:!1,samples:4},A=function(e){function t(t,r){var n=e.call(this,t,r)||this;console.log("["+n._canvas.id+"] %cmodeloapi version: "+_.VERSION,"font-weight:bold;"),n._elapsedFrames=0;var i=n._setupGL(x({},M,r));return n._resourceManager=new o.default(i),n._renderer=new u.default(n._resourceManager),n._materialManager=new s.default(n._resourceManager),n._scene=new p.default(n,n._materialManager),n._camera=new m.default(n),n._renderScene=new c.default(n._scene.core,n._camera.core,n._resourceManager,n._renderer,r&&r.stencil),n._snapping=null,n._onContextLostFn=null,n._onContextRestoreFn=null,n._canvas.addEventListener("webglcontextlost",n._onGLContextLost.bind(n),!1),n._canvas.addEventListener("webglcontextrestored",n._onGLContextRestore.bind(n),!1),n._onUpdate=null,n._animationFn=n._requestAnimationFrame.bind(n),n._animationId=window.requestAnimationFrame(n._animationFn),n._update(!0),n}return b(t,e),t.prototype.destroy=function(){if(this.state!==v.State.UNINITIALIZED){this._cancelAnimationFrame(),this._canvas.removeEventListener("webglcontextlost",this._onGLContextLost.bind(this),!1),this._canvas.removeEventListener("webglcontextrestored",this._onGLContextRestore.bind(this),!1),this._renderScene.destroy(),this._renderScene=null,delete this._renderScene,this._renderer.destroy(),this._renderer=null,delete this._renderer,this._scene.destroy(),this._scene=null,delete this._scene;var t=this._resourceManager.gl;this._resourceManager.destroy(),this._resourceManager=null,delete this._resourceManager,this._camera&&(this._camera.destroy(),this._camera=null,delete this._camera),this._snapping&&(this._snapping.destroy(),this._snapping=null,delete this._snapping),this._destroyGL(t),e.prototype.destroy.call(this)}},t.prototype.invalidate=function(){this._renderer.invalidate(),this._renderScene.refreshRendering(),e.prototype.invalidate.call(this)},t.prototype.resize=function(t,r){if(e.prototype.resize.call(this,t,r),this.state!==v.State.UNINITIALIZED&&this.state!==v.State.INITIALIZED_PAUSED&&this.state!==v.State.RENDERING_PAUSED){t=this._canvas.width,r=this._canvas.height,this._camera.resize(t,r),this._renderScene.resize(t,r),null!==this._snapping&&this._snapping.resize(t,r);for(var n=0;n<this._tools.length;n++)this._tools[n].resize(t,r);this.invalidate()}},t.prototype.loadModel=function(e,t,r,n,i){return w(this,void 0,void 0,function(){var a,o,s,l,u,c;return E(this,function(d){return a=!1,"object"==typeof(h=t)&&null!==h?(a=t.usePbr,r=r||t.changeCamera,o=t.cameraInfo,s=t.onProgress,c=void 0===s?function(){}:s,l=t.initialTransform,u=void 0===l?[]:l,[2,this._load(e,u,c,r,a,o,n,i)]):(c=t||function(){},[2,this._load(e,[],c,r,a,null,n,i)]);var h})})},t.prototype._load=function(e,t,r,n,i,a,o,s){return w(this,void 0,void 0,function(){var u,c=this;return E(this,function(d){return u=new l.default(e,t,this._resourceManager,this._materialManager,i,o),t&&0!==t.length||(t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),[2,u.load(e,r,o,s).then(function(){c.state=v.State.RENDERING,c._elapsedFrames=1,c._scene.addModel(u,n,a),c._renderScene.optimize();var t=function(){c._camera.core.setCullingEnabled(!0),c._camera.core.removeUpdateStopListener(t)};return c._camera.core.addUpdateStopListener(t),g.Comment.create=g.create.bind(null,c),g.Comment.activate=g.activate.bind(null,c),Promise.resolve(e)})]})})},t.prototype.setDefaultCam=function(e){this._camera.core.setDefaultCam(e)},t.prototype._cancelAnimationFrame=function(){window.cancelAnimationFrame(this._animationId),this._animationId=-1},t.prototype._requestAnimationFrame=function(){this._update(),this._animationId=window.requestAnimationFrame(this._animationFn)},t.prototype._update=function(e){if(void 0===e&&(e=!1),e||this.state===v.State.RENDERING){this.getEventEmitter().emit("before-rendering"),this._camera.update()&&this._renderScene.refreshRendering(1),this._onUpdate&&this._onUpdate(),this._renderer.beginFrame();var t=!1;this._tools.forEach(function(e){t=t||e.isInteractive()});var r=this._renderScene.draw(t);t&&this._tools.forEach(function(e){e.render()}),r&&this._renderer.present(this._renderScene.getRenderTarget().getFramebuffer()),this._renderer.endFrame(),r&&this._elapsedFrames++}},t.prototype.pause=function(){this.state!==v.State.INITIALIZED&&this.state!==v.State.RENDERING||(this.state=this.state===v.State.INITIALIZED?v.State.INITIALIZED_PAUSED:v.State.RENDERING_PAUSED,this._resourceManager.discard(),this._cancelAnimationFrame()),e.prototype.pause.call(this)},t.prototype.resume=function(){this.state!==v.State.INITIALIZED_PAUSED&&this.state!==v.State.RENDERING_PAUSED||(this._resourceManager.restore(),this.state=this.state===v.State.INITIALIZED_PAUSED?v.State.INITIALIZED:v.State.RENDERING);var t=parseInt(this._canvas.style.width.replace("px","")),r=parseInt(this._canvas.style.height.replace("px",""));this.resize(t,r),this.invalidate(),this._requestAnimationFrame(),e.prototype.resume.call(this)},t.prototype.dumpScreen=function(e,t,r){var n=[];n[0]=this._scene.core.background.color[0],n[1]=this._scene.core.background.color[1],n[2]=this._scene.core.background.color[2],n[3]=this._scene.core.background.color[3],e||t?t||(t=e*this._canvas.height/this._canvas.width):(e=this._canvas.width,t=this._canvas.height);var i=Math.floor(this._canvas.width/y.Environment.devicePixelRatio),a=Math.floor(this._canvas.height/y.Environment.devicePixelRatio),o=Math.floor(e/y.Environment.devicePixelRatio),s=Math.floor(t/y.Environment.devicePixelRatio);r?this.setBackgroundColor(r):this._scene.core.background.skybox||this.setBackgroundColor([.96,.96,.96,1]),o!==i||s!==a?this.resize(o,s):this.invalidate(),this._renderScene.drawHD(),this.setBackgroundColor(n);var l=this._canvas.toDataURL("image/jpg");return o!==i||s!==a?this.resize(i,a):this.invalidate(),l},t.prototype.setLightingLatitude=function(e){this._scene.core.setLightingLatitude(e),this._renderScene.updateShadow(!0),this.invalidate()},t.prototype.setLightingLongitude=function(e){this._scene.core.setLightingLongitude(e),this._renderScene.updateShadow(!0),this.invalidate()},t.prototype.setLightingIntensity=function(e){this._scene.core.setLightingIntensity(e),this.invalidate()},t.prototype.setRenderingLinesEnabled=function(e){this._renderScene.setLineRendering(e),this.invalidate()},t.prototype.setBaseRenderingEnabled=function(e){this._renderScene.setBaseRenderingEnabled(e),this.invalidate()},t.prototype.setSpecularEnabled=function(e){this._renderScene.setSpecularEnabled(e),this.invalidate()},t.prototype.setShadowEnabled=function(e){this._renderScene.setShadowEnabled(e),this.invalidate()},t.prototype.addInput=function(t){var r=e.prototype.addInput.call(this,t);return this._camera.addInput(t),r},t.prototype.getMouse=function(){for(var e=0;e<this._inputs.length;e++)if("mouse"===this._inputs[e].name)return this._inputs[e];return null},t.prototype.getKeyboard=function(){for(var e=0;e<this._inputs.length;e++)if("keyboard"===this._inputs[e].name)return this._inputs[e];return null},t.prototype._setupGL=function(e){var t=e.isMobile,r=e.stencil,n=e.samples,i=y.Environment.browserName,o=y.Environment.browserVersion,s=!0,l=!0;"chrome"===i&&"62"===o&&(l=!1),"mobile safari"===i&&(s=!1),t&&512===y.Environment.gpuMemory&&(s=!1);var u=Object(a.default)(this._canvas,{depth:!0,alpha:!0,premultipliedAlpha:!1,samples:n,stencil:r,preserveDrawingBuffer:!1,vao:l,instancing:!1,webgl2:s});if(null!==u){var c=u.isWebGL2?"2.0":"1.0";console.group("["+this._canvas.id+"] A WebGL "+c+" context created"),console.log("color: RGBA, depth: enabled, stencil: "+(r?"enabled":"disabled")),console.log("  VAO: "+(l?"enabled":"disabled")),console.log("  Instancing: "+(u.instancingExtension?"enabled":"disabled")),console.groupEnd()}return u},t.prototype._destroyGL=function(e){if(e){var t=e.isWebGL2?"2.0":"1.0";console.group("A WebGL "+t+" context is destroyed");var r=e.getExtension("WEBGL_lose_context");null!==r&&r.loseContext(),e=void 0,console.groupEnd()}},t.prototype.setBackgroundColor=function(e){this._scene.core.background.setColor(e),this.invalidate()},t.prototype.setBackgroundImage=function(e,t){void 0===t&&(t=!1),this._scene.setBackgroundImage(e,t),this.invalidate()},t.prototype.setReflectionImages=function(e){this._scene.setReflectionMap(e),this.invalidate()},t.prototype.setBackgroundMode=function(e){this._scene.core.background.setMode(e),this.invalidate()},t.prototype.getScene=function(){return this._scene},t.prototype.getSnapping=function(){return null===this._snapping&&(this._resourceManager.gl.isWebGL2&&this.getScene().hasContours()?this._snapping=new h.default(this._scene.core,this._camera.core,this._resourceManager,this._renderScene.getRenderQueueManager()):(this._snapping=new f.default(this._scene.core,this._camera.core,this._resourceManager,this._renderScene.getRenderQueueManager()),this._snapping.setSnappingRadius(8))),this._snapping},t.prototype.getResourceManager=function(){return this._resourceManager},t.prototype.getMaterialManager=function(){return this._materialManager},t.prototype.getRenderer=function(){return this._renderer},t.prototype.getRenderScene=function(){return this._renderScene},t.prototype.getCamera=function(){return this._camera},t.prototype.setLazyRenderingEnabled=function(e){this._renderScene.setProgressiveRenderingEnabled(e)},t.prototype._onGLContextLost=function(){this._cancelAnimationFrame(),this._onContextLostFn&&this._onContextLostFn()},t.prototype._onGLContextRestore=function(){this._onContextRestoreFn&&this._onContextRestoreFn()},t.prototype.setContextLostCbk=function(e){this._onContextLostFn=e},t.prototype.setContextRestoreCbk=function(e){this._onContextRestoreFn=e},t.prototype.setUpdateCallback=function(e){this._onUpdate=e},t.prototype.setSmartCullingEnabled=function(e){this._renderScene.setSmartCullingEnabled(e)},t.prototype.isSmartCullingEnabled=function(){return this._renderScene.isSmartCullingEnabled()},t.prototype.setEffectEnabled=function(e,t){this._renderScene.setEffectEnabled(e,t),this.invalidate()},t.prototype.setEffectParameter=function(e,t,r){this._renderScene.getEffect(e).setParameter(t,r),this.invalidate()},t.prototype.isEffectEnabled=function(e){return this._renderScene.isEffectEnabled(e)},t.prototype.enterExplodedView=function(e,t){if(!(this._renderScene instanceof d.default)){var r=new d.default(this._scene.core,this._renderScene,this._camera.core,this._resourceManager,this._renderer);r.previous=this._renderScene,this._renderScene=r;for(var n=0;n<e.length;n++)r.renderElements(e[n]);r.renderElementsTranslations(t),r.enter(2e3),this.invalidate()}},t.prototype.quitExplodedView=function(){var e=this;this._renderScene instanceof d.default&&(this._renderScene.quit(function(){var t=e._renderScene;e._renderScene=t.previous,t.destroy(),e.invalidate()}),this.invalidate())},t.prototype.setOverrideColor=function(e){var t,r=this._materialManager.createMaterialAdhoc("override");this._resourceManager.hasShader("solid",[])&&(t=this._resourceManager.getShader("solid",[])),this._resourceManager.hasShader("texture",[])&&(t=this._resourceManager.getShader("texture",[])),this._resourceManager.hasShader("dark",[])&&(t=this._resourceManager.getShader("dark",[])),r.attachShader(t),r.setDiffuse(e),r.setTransparent(e[3]),this._renderScene.setOverridedMaterials({opaques:r}),this.invalidate()},t.prototype.setOITEnabled=function(e){this._renderScene.setOITEnabled(e),this.invalidate()},t.prototype.focusElements=function(e,t){if(void 0===t&&(t=1),null!=e&&0!=e.length){var r=this._scene.getElementsBBox(e);i.default.aabb.length(r)>=1/0||this._camera.cores.forEach(function(e){e.lookTo(i.default.aabb.center(r),t*i.default.aabb.length(r)/2)})}},t.prototype.getSelectedElements=function(){var e=this.getTool("SelectElement");return e?e.getSelectedElements():[]},t.prototype.getElapsedFrames=function(){return this._elapsedFrames},t.prototype.setMaterialParameter=function(e,t,r){this._scene.setMaterialParameter(e,t,r),"opacity"===t&&this._renderScene.onOpacityChanged(this._scene.core.getDrawablesByMaterialName(e)),this.invalidate()},t.prototype.getMaterialParameter=function(e,t){return this._scene.getMaterialParameter(e,t)},t.prototype.setToneMappingEnabled=function(e){this._scene.setToneMappingEnabled(e),this.invalidate()},t.prototype.setToneMappingExposure=function(e){e<=0?console.warn("Exposure should be greater than 0!"):(this._scene.setToneMappingExposure(e),this.invalidate())},t.prototype.enabledTwoPointsPerspective=function(e){this._camera.core.enabledTwoPointsPerspective(e),this.invalidate()},t}(v.Viewer);t.default=A},"./09app/Viewer3DCompare.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./09app/Viewer.ts"),a=r("./03scene/model/Model.ts"),o=r("./09app/Viewer3D.ts"),s=r("./04renderer/pipeline/RenderSceneForward.ts"),l=r("./09app/Scene3DMultiple.ts"),u=r("./09app/CameraMultiple.ts"),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),d=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},h=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};var f=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n._scene=new l.default(n),n._camera=new u.default(n),n._renderScenes=[],n._renderScenes.push(new s.default(n._scene.cores[0],n._camera.cores[0],n._resourceManager,n._renderer)),n._renderScenes.push(new s.default(n._scene.cores[1],n._camera.cores[1],n._resourceManager,n._renderer)),n._renderScenes[0].setScissorEnabled(!0),n._renderScenes[1].setScissorEnabled(!0),n._material=n._materialManager.createMaterialAdhoc("select-elements-other"),n._update(!0),n}return c(t,e),t.prototype.destroy=function(){this._renderScenes[0].destroy(),this._renderScenes[1].destroy(),this._renderScenes=null,delete this._renderScenes,this._camera.destroy(),this._camera=null,delete this._camera,e.prototype.destroy.call(this)},t.prototype.resize=function(t,r){this._paused||(e.prototype.resize.call(this,t,r),this.invalidate())},t.prototype.loadModelAtViewport=function(e,t,r){return d(this,void 0,void 0,function(){var n,i,a,o;return h(this,function(s){return((t=t||0)<0||t>1)&&console.error("Invalid viewport index. Maximum 2 viewports are supported."),"object"==typeof(l=r)&&null!==l?(n=r.onProgress,o=void 0===n?function(){}:n,i=r.initialTransform,a=void 0===i?[]:i,[2,this._loadToViewport(e,t,a,o)]):(o=r||function(){},[2,this._loadToViewport(e,t,[],o)]);var l})})},t.prototype._loadToViewport=function(e,t,r,n){return d(this,void 0,void 0,function(){var o,s=this;return h(this,function(l){return r&&0!==r.length||(r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),[2,(o=new a.default(e,r,this._resourceManager,this._materialManager)).load(e,n).then(function(){return s.state=i.State.RENDERING,s._elapsedFrames=1,s._scene.addModelViewport(t,o),s._renderScenes[t].optimize(),s._camera.cores[t].setCullingEnabled(!0),Promise.resolve(e)})]})})},t.prototype._update=function(e){void 0===e&&(e=!1),!e&&this.state!==i.State.RENDERING||void 0===this._renderScenes||(this._camera.update()&&(this._renderScenes[0].refreshRendering(1),this._renderScenes[1].refreshRendering(1)),this._onUpdate&&this._onUpdate(),this._renderer.beginFrame(),this._renderer.invalidate(),this._renderScenes[0].draw(!1),this._renderer.invalidate(),this._renderScenes[1].draw(!1),this._renderer.present(this._renderScene.getRenderTarget().getFramebuffer()),this._renderer.endFrame(),this._elapsedFrames++)},t.prototype.focusElementsInViewport=function(e,t,r,n){this._renderScenes[e].setOverridedMaterials(this._material),this._material.setDiffuse([1,1,1]),this._material.setTransparent(.4),this._renderScenes[e].renderElements(t,n),r&&this.focusElements(t)},t}(o.default);t.default=f},"./09app/Viewer3DDark.ts":function(e,t,r){"use strict";r.r(t);var n,i=r("./02resource/m3d_shader_library.js"),a=r("./09app/Viewer3D.ts"),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},l=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},u=function(e){function t(t,r){return e.call(this,t,r)||this}return o(t,e),t.prototype.loadModel=function(t,r,n,a,o){return s(this,void 0,void 0,function(){var s=this;return l(this,function(l){return[2,e.prototype.loadModel.call(this,t,r,n,a,o).then(function(e){s.setBackgroundColor([26/255,26/255,55/255,1]);var t=s._resourceManager.getShader("dark",[]);if(!t.ready){var r=i.default.dark;t.createFromShaderSource(r,[])}return s._renderScene.setOverridedShaders(t),s.setSpecularEnabled(!0),s.setEffectEnabled("Sketch",!0),s.setEffectParameter("Sketch","color",[81/255,185/255,1]),s.setEffectParameter("Sketch","colored",!1),s.setEffectParameter("Sketch","surfaceColor",[.2,145/255,1,.2]),s.setEffectParameter("Sketch","transparents",!0),s.setEffectEnabled("SSAO",!0),s.setEffectParameter("SSAO","transparents",!0),Promise.resolve(e)})]})})},t}(a.default);t.default=u},"./09app/animator/PathFollowingAnimator.ts":function(e,t,r){"use strict";r.r(t);var n=r("./00utility/Path.ts"),i=r("./glMatrix.js"),a=function(){function e(e,t,r){var a=this;void 0===r&&(r=!0),this._update=function(){if(a._playing){var e=a._speed*a._frameNumber;if(e>a._distances[a._distances.length-1]){if(!a._loop)return void(a._playing=!1);e=0,a._frameNumber=0}for(var t=0;t<a._distances.length-2&&!(e>=a._distances[t]&&e<a._distances[t+1]);t++);var r=(e-a._distances[t])/(a._distances[t+1]-a._distances[t]);i.vec3.lerp(a._currentPosition,a._points[t],a._points[t+1],r),a._currentPoseMatrix=[a._binormals[t][0],a._binormals[t][1],a._binormals[t][2],0,a._tangents[t][0],a._tangents[t][1],a._tangents[t][2],0,a._normals[t][0],a._normals[t][1],a._normals[t][2],0,a._currentPosition[0],a._currentPosition[1],a._currentPosition[2],1];for(var n=0;n<a._pawns.length;n++)i.mat4.copy(a._currentMatrix,a._pawns[n].getTransformMatrix()),a._currentMatrix[12]=0,a._currentMatrix[13]=0,a._currentMatrix[14]=0,i.mat4.multiply(a._currentMatrix,a._currentPoseMatrix,a._currentMatrix),a._pawns[n].drawables.forEach(function(e){e.transform.set(a._currentMatrix),e.updateBBox()});a._frameNumber++}},this._useDefaultUpVector=r;var o=new n.Path3D(t,[0,0,1],r);this._points=o.getCurve(),this._normals=o.getNormals(),this._tangents=o.getTangents(),this._binormals=o.getBinormals(),this._distances=o.getDistances(),this._pawns=[],this._speed=.1,this._frameNumber=0,this._currentPoseMatrix=i.mat4.create(),this._currentMatrix=i.mat4.create(),this._playing=!1,this._currentPosition=i.vec3.create(),this._loop=!0,this._viewer=e,e.getEventEmitter().on("before-rendering",this._update)}return e.prototype.destroy=function(){this._useDefaultUpVector=null,delete this._useDefaultUpVector,this._points=null,delete this._points,this._normals=null,delete this._normals,this._tangents=null,delete this._tangents,this._binormals=null,delete this._binormals,this._distances=null,delete this._distances,this._pawns=null,delete this._pawns,this._speed=null,delete this._speed,this._frameNumber=null,delete this._frameNumber,this._currentPoseMatrix=null,delete this._currentPoseMatrix,this._currentMatrix=null,delete this._currentMatrix,this._playing=null,delete this._playing,this._currentPosition=null,delete this._currentPosition,this._viewer=null,delete this._viewer,this._viewer.getEventEmitter().remove("before-rendering",this._update)},e.prototype.isInteractive=function(){return!0},e.prototype.doesSupportMobile=function(e){return!0},e.prototype.addPawn=function(e){this._pawns.push(e)},e.prototype.start=function(){this._playing=!0,this._frameNumber=0},e.prototype.stop=function(){this._playing=!1},e.prototype.resume=function(){this._playing=!0},e.prototype.setSpeed=function(e){this._speed=e},e.prototype.setLoop=function(e){this._loop=e},e}();t.default=a},"./99api/Asset.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"Asset",function(){return n});var n,i=r("./99api/utils/client/asset.ts"),a=r("./99api/utils/index.ts"),o=r("./99api/graphql.types.ts"),s=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},l=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};!function(e){e.upload=function(e,t){return s(this,void 0,void 0,function(){var r,n,s;return l(this,function(l){return"object"==typeof(u=t)&&null!==u?(r=t.onProgress,s=void 0===r?function(){}:r,(n=t.type)&&Object(a.assert)(n,Object(a.oneOf)([o.AssetType.File,o.AssetType.Dwg,o.AssetType.Img,o.AssetType.Wbs,o.AssetType.ModelConvertedPdf,o.AssetType.Image360]),"asset type not supported"),[2,Object(i.uploadAsset)(e,n,s)]):(s=t||function(){},[2,Object(i.uploadAsset)(e,null,s)]);var u})})},e.get=function(e){return s(this,void 0,void 0,function(){return l(this,function(t){return[2,Object(i.getAsset)(e)]})})},e.remove=function(e){return s(this,void 0,void 0,function(){return l(this,function(t){return[2,Object(i.deleteAsset)(e)]})})},e.update=function(e,t){return s(this,void 0,void 0,function(){return l(this,function(r){return[2,Object(i.updateAsset)(e,t)]})})}}(n||(n={}))},"./99api/BIM.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"BIM",function(){return n});var n,i=r("./99api/utils/client/index.ts"),a=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},o=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};!function(e){!function(e){e.Family="family",e.Level="level",e.Element="element",e.Category="category",e.Type="type",e.File="file"}(e.BIMTreeNodeType||(e.BIMTreeNodeType={})),e.getElementProperties=function(e,t){return a(this,void 0,void 0,function(){return o(this,function(r){return[2,i.getElementProperties(e,t)]})})},e.getElementsProperties=function(e,t){return a(this,void 0,void 0,function(){return o(this,function(r){return[2,i.getElementsProperties(e,t)]})})},e.addCustomElementProperty=function(e,t,r,n){return a(this,void 0,void 0,function(){return o(this,function(a){return[2,i.addCustomElementProperty(e,t,r,n)]})})},e.addCustomElementsProperty=function(e,t,r,n){return a(this,void 0,void 0,function(){return o(this,function(a){return[2,i.addCustomElementsProperty(e,t,r,n)]})})},e.removeCustomElementProperty=function(e,t,r){return a(this,void 0,void 0,function(){return o(this,function(n){return[2,i.removeCustomElementProperty(e,t,r)]})})},e.removeCustomElementsProperty=function(e,t,r){return a(this,void 0,void 0,function(){return o(this,function(n){return[2,i.removeCustomElementsProperty(e,t,r)]})})},e.updateElementProperty=function(e,t,r){return a(this,void 0,void 0,function(){return o(this,function(n){return[2,i.updateElementProperty(e,t,r)]})})},e.updateElementsProperty=function(e,t,r){return a(this,void 0,void 0,function(){return o(this,function(n){return[2,i.updateElementsProperty(e,t,r)]})})},e.getTreeInfo=function(e,t){return a(this,void 0,void 0,function(){return o(this,function(r){return[2,i.getBimTree(e,t)]})})}}(n||(n={}))},"./99api/Comment.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"create",function(){return c}),r.d(t,"activate",function(){return d}),r.d(t,"Comment",function(){return n});var n,i=r("./99api/utils/client/index.ts"),a=r("./08ui/tool/Comment.ts"),o=r("./99api/utils/common/index.ts"),s=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},l=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},u={};function c(e,t,r){return s(this,void 0,void 0,function(){var n;return l(this,function(o){return n=function(e){var t=e.getTool("Comment");t||(t=e.addTool(new a.default(e)));return t.create()}(e),[2,new Promise(function(e,a){i.createComment(t,n,r||{}).then(function(t){return u[t.id]=t.renderData,e(t)}).catch(a)})]})})}function d(e,t){var r=e.getTool("Comment");r||(r=e.addTool(new a.default(e))),r.activate(u[t]),r.setEnabled(!0)}!function(e){e.get=function(e){return s(this,void 0,void 0,function(){return l(this,function(t){return[2,new Promise(function(t,r){i.getModelComments(e).then(function(e){var r=Object(o.decodeComments)(e);return r.forEach(function(e){u[e.id]=e.renderData}),t(r)}).catch(r)})]})})},e.remove=function(e){return s(this,void 0,void 0,function(){return l(this,function(t){return[2,new Promise(function(t,r){i.deleteModelComment(e).then(function(e){return delete u[e],t(e)}).catch(r)})]})})},e.update=function(e,t){return s(this,void 0,void 0,function(){return l(this,function(r){return[2,i.updateModelComment(e,t)]})})}}(n||(n={}))},"./99api/Model.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"Model",function(){return n});var n,i=r("./99api/utils/client/index.ts"),a=r("./99api/utils/client/model.ts"),o=r("./03scene/model/Element.ts"),s=r("./99api/utils/model/downloader.ts"),l=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},u=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};!function(e){e.ElementType=o.ElementType,e.get=function(e){return l(this,void 0,void 0,function(){return u(this,function(t){return[2,Object(i.getModel)(e)]})})},e.remove=function(e){return l(this,void 0,void 0,function(){return u(this,function(t){return[2,Object(a.deleteModel)(e)]})})},e.update=function(e,t){return l(this,void 0,void 0,function(){return u(this,function(r){return[2,Object(a.updateModel)(e,t)]})})},e.upload=function(e,t){return l(this,void 0,void 0,function(){var r,n,i;return u(this,function(o){return"object"==typeof(s=t)&&null!==s?(r=t.onProgress,i=void 0===r?function(){}:r,n=t.reduceTextures,[2,Object(a.uploadModel)(e,n,i)]):(i=t||function(){},[2,Object(a.uploadModel)(e,!1,i)]);var s})})},e.merge=function(e,t,r){return l(this,void 0,void 0,function(){return u(this,function(n){return[2,Object(a.mergeModel)(e,t,r)]})})},e.generate3DPDF=function(e){return l(this,void 0,void 0,function(){return u(this,function(t){return[2,Object(a.generate3DPDF)(e)]})})},e.compare=function(e,t){return l(this,void 0,void 0,function(){return u(this,function(r){return[2,new Promise(function(r,n){var i=new Blob(['\n        function Node(name, type) {\n            this.father   = null;\n            this.children = null;\n            this.name     = name;\n            this.type     = type;\n            this.docId    = null;\n        }\n        var extractNode = function(element, nodes) {\n            if (element.children === null) {\n                nodes.push(element.name);\n            } else {\n                for (var i = 0, len = element.children.length; i < len; i++) {\n                    extractNode(element.children[i], nodes);\n                }\n            }\n        }\n        \n        var parseGraph = function(modelGraphBin, modelBin) {\n            var byteLength = modelGraphBin.byteLength;\n            var len = byteLength / 9;\n            var index = 0;\n            var e_name, e_father, e_type;\n            var root = new Node(-1, -1);\n            root.children = [];\n            var fathers = [];\n            fathers.push(root);\n    \n            var currentDocName = 0;\n    \n            var elements = [];\n            for (var i = 0; i < len; i++) {\n                var data = new Uint8Array(modelGraphBin, i * 9, 9);\n                e_name   = ((data[3] << 24) | (data[2] << 16) | (data[1] << 8) | data[0]);\n                e_father = ((data[7] << 24) | (data[6] << 16) | (data[5] << 8) | data[4]);\n                e_type   = data[8];\n                \n                while (fathers.length > 0 && fathers[fathers.length - 1].name !== e_father) {\n                    fathers.pop();\n                }\n                if (fathers.length === 0) {\n                    postMessage("father of " + e_name + " is wrong");\n                    close();\n                }\n                var father = fathers[fathers.length - 1];\n                if (e_type === 4) { // NODE\n                    var node = new Node(e_name, e_type);\n                    node.father = father;\n                    father.children.push(node);\n                } else {\n                    if (e_type === 5) { // link\n                        currentDocName = e_name;\n                    } \n                    var element = new Node(e_name, e_type);\n                    element.children = [];\n                    element.docId = currentDocName;\n                    if (e_type === 3) { // ElEMENT\n                        elements.push(element);\n                    }\n                    element.father = father;\n                    father.children.push(element);\n                    fathers.push(element);\n                }\n            }\n            for (var i = 0, len = elements.length; i < len; i++) {\n                var element = elements[i];\n                element.nodes = [];\n                extractNode(element, element.nodes);\n            }\n    \n            return elements;\n        };    \n    \n        var parseBBox = function(bboxBuffer, index) {\n            return new Float32Array(bboxBuffer, (index * 21 + 3) * 4, 6);\n        };\n    \n        var getElementBBox = function(nodes, bboxBuffer) {\n            var bbox = new Float32Array([Infinity, Infinity, Infinity, -Infinity, -Infinity, -Infinity]);\n            for (var i = 0, len = nodes.length; i < len; i++) {\n                var nodeBBox = parseBBox(bboxBuffer, nodes[i]);\n                if (bbox[0] > nodeBBox[0]) {\n                    bbox[0] = nodeBBox[0]\n                }\n                if (bbox[1] > nodeBBox[1]) {\n                    bbox[1] = nodeBBox[1]\n                }\n                if (bbox[2] > nodeBBox[2]) {\n                    bbox[2] = nodeBBox[2]\n                }\n                if (bbox[3] < nodeBBox[3]) {\n                    bbox[3] = nodeBBox[3]\n                }\n                if (bbox[4] < nodeBBox[4]) {\n                    bbox[4] = nodeBBox[4]\n                }\n                if (bbox[5] < nodeBBox[5]) {\n                    bbox[5] = nodeBBox[5]\n                }\n            }\n            return bbox;\n        }\n        var compareModel = function(elements1, elements2, bboxBuffer1, bboxBuffer2, modelId1, modelId2) {\n            if (elements1 === null || elements2 === null || bboxBuffer1 === null || bboxBuffer2 === null) {\n                return;\n            }\n            var EPS                 = 0.001;\n            var newElementIds1      = [];\n            var newElementIds2      = [];\n            var modifiedElementIds1 = [];\n            var modifiedElementIds2 = [];\n            elements1.sort(function(a, b) {\n                return a.name - b.name;\n            });\n            elements2.sort(function(a, b) {\n                return a.name - b.name;\n            });\n            var idx1 = 0, idx2 = 0;\n            var element1 = elements1[idx1];\n            var element2 = elements2[idx2];\n            while(element1 !== undefined && element2 !== undefined) {\n                if (element1.name === element2.name) {\n                    // compare nodes number and bbox\n                    if (element1.nodes.length != element2.nodes.length) {\n                        modifiedElementIds1.push(modelId1 + "+" + element1.docId + "/" + element1.name);\n                        modifiedElementIds2.push(modelId2 + "+" + element1.docId + "/" + element2.name);\n                    } else {\n                        var bbox1 = getElementBBox(element1.nodes, bboxBuffer1);\n                        var bbox2 = getElementBBox(element2.nodes, bboxBuffer2);\n                        if (Math.abs(bbox1[0] - bbox2[0]) > EPS ||\n                            Math.abs(bbox1[1] - bbox2[1]) > EPS ||\n                            Math.abs(bbox1[2] - bbox2[2]) > EPS ||\n                            Math.abs(bbox1[3] - bbox2[3]) > EPS ||\n                            Math.abs(bbox1[4] - bbox2[4]) > EPS ||\n                            Math.abs(bbox1[5] - bbox2[5]) > EPS) {\n                            modifiedElementIds1.push(modelId1 + "+" + element1.docId + "/" + element1.name);\n                            modifiedElementIds2.push(modelId2 + "+" + element1.docId + "/" + element2.name);\n                        }\n                    }\n                    idx1++;\n                    idx2++;\n                    element1 = elements1[idx1];\n                    element2 = elements2[idx2];\n                } else if (element1 === undefined || element1.name > element2.name) {\n                    // element2 doesn\'t exist in elements1;\n                    newElementIds2.push(modelId2 + "+" + element2.docId + "/" + element2.name);\n                    idx2++;\n                    element2 = elements2[idx2];\n                } else if (element2 === undefined || element1.name <= element2.name) {\n                    // element1 doesn\'t exist in elements2;\n                    newElementIds1.push(modelId1 + "+" + element1.docId + "/" + element1.name);\n                    idx1++;\n                    element1 = elements1[idx1];\n                }\n            }\n            postMessage({\n                newElements1: newElementIds1,\n                newElements2: newElementIds2,\n                modifiedElements1: modifiedElementIds1,\n                modifiedElements2: modifiedElementIds2\n            });\n            close();\n        }\n        var elements1 = null;\n        var elements2 = null;\n        var bboxBuffer1 = null;\n        var bboxBuffer2 = null;\n        var modelId1 = null;\n        var modelId2 = null;\n            \n        onmessage = function(evt) {\n            switch(evt.data.name) {\n                case "graph1":\n                    elements1 = parseGraph(evt.data.buffer);\n                    break;\n                case "graph2":\n                    elements2 = parseGraph(evt.data.buffer);\n                    break;\n                case "model1": \n                    var len = new Uint32Array(evt.data.buffer, 0, 1)[0];\n                    var nodesLocation = len * 20 + 8; // len * sizeof(uint32) * 5 + 8\n                    bboxBuffer1 = evt.data.buffer.slice(nodesLocation);\n                    modelId1 = evt.data.modelId;\n                    break;\n                case "model2":\n                    var len = new Uint32Array(evt.data.buffer, 0, 1)[0];\n                    var nodesLocation = len * 20 + 8; // len * sizeof(uint32) * 5 + 8\n                    bboxBuffer2 = evt.data.buffer.slice(nodesLocation);\n                    modelId2 = evt.data.modelId;\n                    break;\n            }\n            compareModel(elements1, elements2, bboxBuffer1, bboxBuffer2, modelId1, modelId2);\n        };\n        '],{type:"text/javascript"}),a=new Worker(window.URL.createObjectURL(i));a.onmessage=function(e){if(e.data instanceof String)n(e.data);else{var t=e.data;r(t)}},Object(s.generatePromises)(e).then(function(t){t["model.bin"].downloadFile().then(function(t){var r={buffer:t.data,name:"model1",modelId:e};a.postMessage(r,[r.buffer]),t.data.byteLength&&console.warn("transferred buffer not supported")},function(e){n(e)}),t["modelgraph.bin"].downloadFile().then(function(e){var t={buffer:e.data,name:"graph1"};a.postMessage(t,[t.buffer]),e.data.byteLength&&console.warn("transferred buffer not supported")},function(e){n(e)})}).catch(function(e){n(e)}),Object(s.generatePromises)(t).then(function(e){e["model.bin"].downloadFile().then(function(e){var r={buffer:e.data,name:"model2",modelId:t};a.postMessage(r,[r.buffer])},function(e){n(e)}),e["modelgraph.bin"].downloadFile().then(function(e){var t={buffer:e.data,name:"graph2"};a.postMessage(t,[t.buffer])},function(e){n(e)})}).catch(function(e){n(e)})})]})})},e.get3DPDFURL=function(e){return l(this,void 0,void 0,function(){return u(this,function(t){return[2,Object(a.get3DPDFURL)(e)]})})},e.getBBox=function(e){return l(this,void 0,void 0,function(){return u(this,function(t){return[2,new Promise(function(t,r){Object(s.generatePromises)(e).then(function(e){e["model.json"].downloadFile().then(function(e){var r=e.data;t(r["model.bin"].bbox)}).catch(function(){r("error")})})})]})})}}(n||(n={}))},"./99api/RenderSetting.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"activate",function(){return c}),r.d(t,"RenderSetting",function(){return l});var n,i=r("./99api/utils/client/index.ts"),a=r("./03scene/drawables/Skybox.ts"),o=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},s=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};!function(e){e.Architect="Architect",e.Product="Product"}(n||(n={}));var l,u={};function c(e,t){return o(this,void 0,void 0,function(){var r;return s(this,function(n){return r=u[t],e.setEffectEnabled("SSAO",r.enhancedRendering),e.setSmartCullingEnabled(r.acceleratedRendering),e.setEffectEnabled("Sketch",r.architectEffect),e.setEffectParameter("Sketch","detail",r.penDetail),e.setEffectParameter("Sketch","contrast",r.inkContrast),e.setEffectParameter("Sketch","colored",r.blackAndWhite),e.setShadowEnabled(r.shadow),e.setLightingIntensity(r.brightness),e.setLightingLatitude(r.latitude),e.setLightingLongitude(r.longitude),e.setBackgroundMode(r.backgroundMode),r.backgroundMode===a.SkyBoxMode.SKYBOX_SOLIDCOLOR&&e.setBackgroundColor(function(e){if(7!==e.length)throw Error("No a color");for(var t=[0,0,0],r=0;r<3;r++){var n=2*r+1,i=e[n]+e[n+1];t[r]=parseInt(i,16)/255}return t}(r.backgroundColor)),r.backgroundMode===a.SkyBoxMode.SKYBOX_CUBEMAP&&e.setBackgroundImage(r.backgroundImage),r.backgroundMode===a.SkyBoxMode.SKYBOX_WALLPAPER&&e.setBackgroundImage(r.backgroundImage[0]),[2]})})}!function(e){!function(e){e.Architect="Architect",e.Product="Product"}(e.ModelShaderSetting||(e.ModelShaderSetting={})),e.get=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){return[2,new Promise(function(t,r){i.getModelRenderSettings(e).then(function(e){return e.forEach(function(e){u[e.id]=e}),t(e)}).catch(r)})]})})},e.create=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(r){return[2,i.createModelRenderSetting(e,t)]})})},e.update=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(r){return[2,i.updateModelRenderSetting(e,t)]})})},e.remove=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){return[2,i.deleteModelRenderSetting(e)]})})}}(l||(l={}))},"./99api/Version.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"VERSION",function(){return n});var n="2.8.8"},"./99api/View.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"View",function(){return n});var n,i=r("./08ui/input/Mouse.ts"),a=r("./08ui/input/Touch.ts"),o=r("./08ui/input/Keyboard.ts"),s=r("./09app/Viewer.ts"),l=r("./03scene/pawn/Pawn.ts"),u=r("./03scene/text/Text3D.ts"),c=r("./03scene/text/Text3DBillboard.ts"),d=r("./03scene/pawn/PawnBillboard.ts"),h=r("./03scene/model/Model.ts"),f=r("./09app/Scene3D.ts"),p=r("./09app/Camera.ts"),m=r("./09app/Viewer3D.ts"),v=r("./09app/Viewer360.ts"),_=r("./09app/Viewer3DCompare.ts"),g=r("./09app/Viewer3DDark.ts"),y=r("./08ui/tool/MeasureLine.ts"),b=r("./08ui/tool/MeasureLines.ts"),x=r("./08ui/tool/MeasureLineFan.ts"),w=r("./08ui/tool/MeasureLineStrip.ts"),E=r("./08ui/tool/MeasureAngle.ts"),M=r("./08ui/tool/MeasureArea.ts"),A=r("./08ui/tool/Section.ts"),T=r("./08ui/tool/MagnifyGlass.ts"),S=r("./08ui/tool/SelectElements.ts"),k=r("./08ui/tool/CameraNavigator.ts"),D=r("./09app/animator/PathFollowingAnimator.ts"),P=r("./08ui/tool/CameraManipulator.ts"),I=r("./08ui/tool/TransformGizmo.ts"),N=r("./08ui/tool/Comment.ts"),O=r("./08ui/tool/SelectModel.ts"),R=r("./04renderer/visualize/BarChart.ts"),F=r("./04renderer/visualize/HeatMap.ts"),C=r("./04renderer/visualize/HeightMap.ts"),B=r("./04renderer/visualize/MetaBall.ts"),L=r("./04renderer/visualize/Trail.ts"),j=r("./04renderer/visualize/Volume.ts"),V=r("./04renderer/visualize/MultiLayerVolume.ts"),z=r("./04renderer/visualize/MultiLayerColor.ts"),U=r("./04renderer/visualize/AnimatingRibbon.ts"),G=r("./04renderer/visualize/AnimatingStripe.ts");!function(e){!function(e){!function(e){e[e.LINES=0]="LINES",e[e.LINE=1]="LINE",e[e.LINESTRIP=2]="LINESTRIP",e[e.LINEFAN=3]="LINEFAN",e[e.ANGLE=4]="ANGLE",e[e.AREA=5]="AREA"}(e.MeasureType||(e.MeasureType={})),function(e){e.FEET="feet",e.INCHES="inches",e.CM="cm",e.M="m"}(e.MeasureUnit||(e.MeasureUnit={})),function(e){e[e.NONE=-1]="NONE",e[e.VERTEX=0]="VERTEX",e[e.EDGE=1]="EDGE",e[e.EDGE_MIDPOINT=2]="EDGE_MIDPOINT"}(e.SnappingMode||(e.SnappingMode={})),e.MeasureLine=y.default,e.MeasureLineFan=x.default,e.MeasureLines=b.default,e.MeasureLineStrip=w.default,e.MeasureAngle=E.default,e.MeasureArea=M.default,e.Section=A.default,e.MagnifyGlass=T.default,e.SelectElements=S.default,e.CameraManipulator=P.default,e.TransformGizmo=I.default,e.Comment=N.default,e.SelectModel=O.default,e.CameraNavigator=k.default}(e.Tool||(e.Tool={})),function(e){e.Mouse=i.default,e.Keyboard=o.default,e.Touch=a.default}(e.Input||(e.Input={})),function(e){e[e.NONE=-1]="NONE",e[e.FRONT=0]="FRONT",e[e.BACK=1]="BACK",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT",e[e.TOP=4]="TOP",e[e.BOTTOM=5]="BOTTOM",e[e.WORLD=6]="WORLD"}(e.ViewAngle||(e.ViewAngle={})),function(e){e[e.SOLIDCOLOR=0]="SOLIDCOLOR",e[e.WALLPAPER=1]="WALLPAPER",e[e.EQUIRECTANGLE=2]="EQUIRECTANGLE",e[e.CUBEMAP=3]="CUBEMAP",e[e.WALLPAPER_TILED=4]="WALLPAPER_TILED"}(e.ViewBackground||(e.ViewBackground={})),e.State=s.State,e.Scene3D=f.default,e.Camera=p.default,e.Pawn=l.default,e.Text3D=u.default,e.Text3DBillboard=c.default,e.PawnBillboard=d.default,e.Model=h.default,function(e){e.AnimatingRibbon=U.default,e.AnimatingStripe=G.default,e.BarChart=R.default,e.HeatMap=F.default,e.HeightMap=C.default,e.MetaBall=B.default,e.Trail=L.default,e.Volume=j.default,e.MultiLayerVolume=V.default,e.MultiLayerColor=z.default}(e.Visualize||(e.Visualize={})),e.Viewer3D=m.default,e.Viewer360=v.default,e.Viewer3DCompare=_.default,e.Viewer3DDark=g.default,e.PathFollowingAnimator=D.default}(n||(n={}))},"./99api/config.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"setConfig",function(){return a}),r.d(t,"init",function(){return o});var n=r("./99api/utils/index.ts"),i={endpoint:"",appToken:"",headers:null},a=function(e){i.endpoint=e.endpoint,i.appToken=e.appToken,i.headers=e.headers};function o(e){Object(n.assert)(e,Object(n.hasKeys)(["endpoint","appToken"]),"initial config not valid"),a(e)}t.default=i},"./99api/graphql.types.ts":function(e,t,r){"use strict";var n,i,a,o,s,l,u,c,d,h,f,p;r.r(t),r.d(t,"ComStatus",function(){return n}),r.d(t,"AssetType",function(){return i}),r.d(t,"TaskPriority",function(){return a}),r.d(t,"TaskCommentType",function(){return o}),r.d(t,"IssuePriority",function(){return s}),r.d(t,"IssueStatus",function(){return l}),r.d(t,"ModelType",function(){return u}),r.d(t,"ModelStatus",function(){return c}),r.d(t,"SelectionType",function(){return d}),r.d(t,"ModelShaderSetting",function(){return h}),r.d(t,"AssetStatus",function(){return f}),r.d(t,"WechatMessageType",function(){return p}),function(e){e.Init="INIT",e.Error="ERROR",e.Done="DONE"}(n||(n={})),function(e){e.Wbs="wbs",e.Img="img",e.File="file",e.Dwg="dwg",e.ModelConvertedPdf="modelConvertedPdf",e.Image360="image360"}(i||(i={})),function(e){e.Urgent="urgent",e.Critical="critical",e.Normal="normal"}(a||(a={})),function(e){e.Img="img",e.Txt="txt"}(o||(o={})),function(e){e.Urgent="urgent",e.Critical="critical",e.Normal="normal"}(s||(s={})),function(e){e.Open="open",e.InProgress="inProgress",e.Resolved="resolved",e.Bot="bot"}(l||(l={})),function(e){e.Normal="normal",e.Versioned="versioned",e.Partial="partial"}(u||(u={})),function(e){e.Error="ERROR",e.Init="INIT",e.Uploaded="UPLOADED",e.Converted="CONVERTED"}(c||(c={})),function(e){e.ElementId="elementId",e.Type="type",e.Family="family",e.Category="category",e.Level="level"}(d||(d={})),function(e){e.Architect="Architect",e.Product="Product"}(h||(h={})),function(e){e.Error="ERROR",e.Init="INIT",e.Uploaded="UPLOADED",e.Converted="CONVERTED"}(f||(f={})),function(e){e.Txt="txt",e.Img="img",e.File="file"}(p||(p={}))},"./99api/graphql/AddCombinedModel.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddCombinedModel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"folderId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelIds"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"Id"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addCombinedModel"},arguments:[{kind:"Argument",name:{kind:"Name",value:"folderId"},value:{kind:"Variable",name:{kind:"Name",value:"folderId"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"modelIds"},value:{kind:"Variable",name:{kind:"Name",value:"modelIds"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:197}};r.loc.source={body:"mutation AddCombinedModel($folderId: Int!, $name: String!, $modelIds: [Id]!) {\r\n    addCombinedModel(folderId: $folderId, name: $name, modelIds: $modelIds) {\r\n        id\r\n        status\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.AddCombinedModel=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"AddCombinedModel")},"./99api/graphql/AddModelComment.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddModelComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"message"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"plainText"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"bimdata"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"camera"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NamedType",name:{kind:"Name",value:"Id"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addModelComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"message"},value:{kind:"Variable",name:{kind:"Name",value:"message"}}},{kind:"Argument",name:{kind:"Name",value:"plainText"},value:{kind:"Variable",name:{kind:"Name",value:"plainText"}}},{kind:"Argument",name:{kind:"Name",value:"bimdata"},value:{kind:"Variable",name:{kind:"Name",value:"bimdata"}}},{kind:"Argument",name:{kind:"Name",value:"camera"},value:{kind:"Variable",name:{kind:"Name",value:"camera"}}},{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bimdata"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"camera"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modelId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plainText"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:383}};r.loc.source={body:"mutation AddModelComment($message: String!, $plainText: String!, $bimdata: String, $camera: String, $modelId: Id) {\r\n    addModelComment(message: $message, plainText: $plainText, bimdata: $bimdata, camera: $camera, modelId: $modelId) {\r\n        id\r\n        bimdata\r\n        camera\r\n        modelId\r\n        message\r\n        plainText\r\n        createdAt\r\n        updatedAt\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.AddModelComment=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"AddModelComment")},"./99api/graphql/AddModelRenderSetting.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddModelRenderSetting"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filter"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"enhancedRendering"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"acceleratedRendering"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"architectEffect"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"penDetail"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"inkContrast"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"blackAndWhite"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"shadow"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"brightness"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"latitude"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"longitude"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"materials"}},type:{kind:"NamedType",name:{kind:"Name",value:"JSONObject"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"backgroundMode"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"backgroundColor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"backgroundImage"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"reflectionImage"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"shader"}},type:{kind:"NamedType",name:{kind:"Name",value:"ModelShaderSetting"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addModelSettings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"Variable",name:{kind:"Name",value:"filter"}}},{kind:"Argument",name:{kind:"Name",value:"enhancedRendering"},value:{kind:"Variable",name:{kind:"Name",value:"enhancedRendering"}}},{kind:"Argument",name:{kind:"Name",value:"acceleratedRendering"},value:{kind:"Variable",name:{kind:"Name",value:"acceleratedRendering"}}},{kind:"Argument",name:{kind:"Name",value:"architectEffect"},value:{kind:"Variable",name:{kind:"Name",value:"architectEffect"}}},{kind:"Argument",name:{kind:"Name",value:"penDetail"},value:{kind:"Variable",name:{kind:"Name",value:"penDetail"}}},{kind:"Argument",name:{kind:"Name",value:"inkContrast"},value:{kind:"Variable",name:{kind:"Name",value:"inkContrast"}}},{kind:"Argument",name:{kind:"Name",value:"blackAndWhite"},value:{kind:"Variable",name:{kind:"Name",value:"blackAndWhite"}}},{kind:"Argument",name:{kind:"Name",value:"shadow"},value:{kind:"Variable",name:{kind:"Name",value:"shadow"}}},{kind:"Argument",name:{kind:"Name",value:"brightness"},value:{kind:"Variable",name:{kind:"Name",value:"brightness"}}},{kind:"Argument",name:{kind:"Name",value:"latitude"},value:{kind:"Variable",name:{kind:"Name",value:"latitude"}}},{kind:"Argument",name:{kind:"Name",value:"longitude"},value:{kind:"Variable",name:{kind:"Name",value:"longitude"}}},{kind:"Argument",name:{kind:"Name",value:"materials"},value:{kind:"Variable",name:{kind:"Name",value:"materials"}}},{kind:"Argument",name:{kind:"Name",value:"backgroundMode"},value:{kind:"Variable",name:{kind:"Name",value:"backgroundMode"}}},{kind:"Argument",name:{kind:"Name",value:"backgroundColor"},value:{kind:"Variable",name:{kind:"Name",value:"backgroundColor"}}},{kind:"Argument",name:{kind:"Name",value:"backgroundImage"},value:{kind:"Variable",name:{kind:"Name",value:"backgroundImage"}}},{kind:"Argument",name:{kind:"Name",value:"reflectionImage"},value:{kind:"Variable",name:{kind:"Name",value:"reflectionImage"}}},{kind:"Argument",name:{kind:"Name",value:"shader"},value:{kind:"Variable",name:{kind:"Name",value:"shader"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modelId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"filter"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enhancedRendering"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"acceleratedRendering"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"architectEffect"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"penDetail"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"inkContrast"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"blackAndWhite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shadow"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"brightness"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"latitude"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"longitude"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"materials"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"backgroundMode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"backgroundColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"backgroundImage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reflectionImage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shader"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:1664}};r.loc.source={body:"mutation AddModelRenderSetting(\r\n    $modelId: Id!\r\n    $name: String\r\n    $filter: String\r\n    $enhancedRendering: Boolean\r\n    $acceleratedRendering: Boolean\r\n    $architectEffect: Boolean\r\n    $penDetail: Float\r\n    $inkContrast: Float\r\n    $blackAndWhite: Boolean\r\n    $shadow: Boolean\r\n    $brightness: Float\r\n    $latitude: Float\r\n    $longitude: Float\r\n    $materials: JSONObject\r\n    $backgroundMode: Int\r\n    $backgroundColor: String\r\n    $backgroundImage: [String]\r\n    $reflectionImage: [String]\r\n    $shader: ModelShaderSetting\r\n) {\r\n    addModelSettings(\r\n        modelId: $modelId\r\n        name: $name\r\n        filter: $filter\r\n        enhancedRendering: $enhancedRendering\r\n        acceleratedRendering: $acceleratedRendering\r\n        architectEffect: $architectEffect\r\n        penDetail: $penDetail\r\n        inkContrast: $inkContrast\r\n        blackAndWhite: $blackAndWhite\r\n        shadow: $shadow\r\n        brightness: $brightness\r\n        latitude: $latitude\r\n        longitude: $longitude\r\n        materials: $materials\r\n        backgroundMode: $backgroundMode\r\n        backgroundColor: $backgroundColor\r\n        backgroundImage: $backgroundImage\r\n        reflectionImage: $reflectionImage\r\n        shader: $shader\r\n    ) {\r\n        id\r\n        modelId\r\n        name\r\n        filter\r\n        enhancedRendering\r\n        acceleratedRendering\r\n        architectEffect\r\n        penDetail\r\n        inkContrast\r\n        blackAndWhite\r\n        shadow\r\n        brightness\r\n        latitude\r\n        longitude\r\n        materials\r\n        backgroundMode\r\n        backgroundColor\r\n        backgroundImage\r\n        reflectionImage\r\n        shader\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.AddModelRenderSetting=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"AddModelRenderSetting")},"./99api/graphql/AddModelSelectionSet.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddModelSelectionSet"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"elementIds"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addModelSelectionSet"},arguments:[{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"elementIds"},value:{kind:"Variable",name:{kind:"Name",value:"elementIds"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modelId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"elementIds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:284}};r.loc.source={body:"mutation AddModelSelectionSet($name: String!, $modelId: Id!, $elementIds: [String]!) {\r\n    addModelSelectionSet(name: $name, modelId: $modelId, elementIds: $elementIds) {\r\n        id\r\n        name\r\n        modelId\r\n        elementIds\r\n        createdAt\r\n        updatedAt\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.AddModelSelectionSet=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"AddModelSelectionSet")},"./99api/graphql/AddSliceModel.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddSliceModel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"folderId"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isTerrain"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sliceModel"},arguments:[{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"folderId"},value:{kind:"Variable",name:{kind:"Name",value:"folderId"}}},{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}},{kind:"Argument",name:{kind:"Name",value:"isTerrain"},value:{kind:"Variable",name:{kind:"Name",value:"isTerrain"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"folderId"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:224}};r.loc.source={body:"mutation AddSliceModel($name: String!, $folderId: Int, $query: String!, $isTerrain: Boolean) {\r\n  sliceModel(name: $name, folderId: $folderId, query: $query, isTerrain: $isTerrain) {\r\n    id\r\n    name\r\n    folderId\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.AddSliceModel=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"AddSliceModel")},"./99api/graphql/BatchAddProperty.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"BatchAddProperty"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"docAndCatIdArr"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"elementIdArr"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"propertyArr"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"strValueArr"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numValueArr"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"Float"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"batchAddProperties"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"docAndCatIdArr"},value:{kind:"Variable",name:{kind:"Name",value:"docAndCatIdArr"}}},{kind:"Argument",name:{kind:"Name",value:"elementIdArr"},value:{kind:"Variable",name:{kind:"Name",value:"elementIdArr"}}},{kind:"Argument",name:{kind:"Name",value:"propertyArr"},value:{kind:"Variable",name:{kind:"Name",value:"propertyArr"}}},{kind:"Argument",name:{kind:"Name",value:"strValueArr"},value:{kind:"Variable",name:{kind:"Name",value:"strValueArr"}}},{kind:"Argument",name:{kind:"Name",value:"numValueArr"},value:{kind:"Variable",name:{kind:"Name",value:"numValueArr"}}}],directives:[]}]}}],loc:{start:0,end:397}};r.loc.source={body:"mutation BatchAddProperty(\r\n  $modelId: Id!\r\n  $docAndCatIdArr: [Int]!\r\n  $elementIdArr: [Int]!\r\n  $propertyArr: [String]!\r\n  $strValueArr: [String]\r\n  $numValueArr: [Float]\r\n) {\r\n  batchAddProperties(\r\n    modelId: $modelId\r\n    docAndCatIdArr: $docAndCatIdArr\r\n    elementIdArr: $elementIdArr\r\n    propertyArr: $propertyArr\r\n    strValueArr: $strValueArr\r\n    numValueArr: $numValueArr\r\n  )\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.BatchAddProperty=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"BatchAddProperty")},"./99api/graphql/BatchDeleteProperty.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"BatchDeleteProperties"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"docAndCatIdArr"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"elementIdArr"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"propertyArr"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"batchDeleteProperties"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"docAndCatIdArr"},value:{kind:"Variable",name:{kind:"Name",value:"docAndCatIdArr"}}},{kind:"Argument",name:{kind:"Name",value:"elementIdArr"},value:{kind:"Variable",name:{kind:"Name",value:"elementIdArr"}}},{kind:"Argument",name:{kind:"Name",value:"propertyArr"},value:{kind:"Variable",name:{kind:"Name",value:"propertyArr"}}}],directives:[]}]}}],loc:{start:0,end:292}};r.loc.source={body:"mutation BatchDeleteProperties(\r\n  $modelId: Id!\r\n  $docAndCatIdArr: [Int]!\r\n  $elementIdArr: [Int]!\r\n  $propertyArr: [String]!\r\n) {\r\n  batchDeleteProperties(\r\n    modelId: $modelId\r\n    docAndCatIdArr: $docAndCatIdArr\r\n    elementIdArr: $elementIdArr\r\n    propertyArr: $propertyArr\r\n  )\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.BatchDeleteProperties=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"BatchDeleteProperties")},"./99api/graphql/BatchGetProperties.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BatchGetProperties"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"elementIdArr"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"propertyArr"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"batchGetElementProperties"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"elementIdArr"},value:{kind:"Variable",name:{kind:"Name",value:"elementIdArr"}}},{kind:"Argument",name:{kind:"Name",value:"propertyArr"},value:{kind:"Variable",name:{kind:"Name",value:"propertyArr"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"elementIdArr"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"properties"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"property"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"strValues"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numValues"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:332}};r.loc.source={body:"query BatchGetProperties($modelId: Id!, $elementIdArr: [Int]!, $propertyArr: [String]!) {\r\n    batchGetElementProperties(modelId: $modelId, elementIdArr: $elementIdArr, propertyArr: $propertyArr) {\r\n        elementIdArr\r\n        properties {\r\n            property\r\n            strValues\r\n            numValues\r\n        }\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.BatchGetProperties=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"BatchGetProperties")},"./99api/graphql/BatchUpdateProperty.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"BatchUpdateProperty"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"docAndCatIdArr"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"elementIdArr"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"propertyArr"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"strValueArr"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numValueArr"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"Float"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"batchUpdateProperties"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"docAndCatIdArr"},value:{kind:"Variable",name:{kind:"Name",value:"docAndCatIdArr"}}},{kind:"Argument",name:{kind:"Name",value:"elementIdArr"},value:{kind:"Variable",name:{kind:"Name",value:"elementIdArr"}}},{kind:"Argument",name:{kind:"Name",value:"propertyArr"},value:{kind:"Variable",name:{kind:"Name",value:"propertyArr"}}},{kind:"Argument",name:{kind:"Name",value:"strValueArr"},value:{kind:"Variable",name:{kind:"Name",value:"strValueArr"}}},{kind:"Argument",name:{kind:"Name",value:"numValueArr"},value:{kind:"Variable",name:{kind:"Name",value:"numValueArr"}}}],directives:[]}]}}],loc:{start:0,end:403}};r.loc.source={body:"mutation BatchUpdateProperty(\r\n  $modelId: Id!\r\n  $docAndCatIdArr: [Int]!\r\n  $elementIdArr: [Int]!\r\n  $propertyArr: [String]!\r\n  $strValueArr: [String]\r\n  $numValueArr: [Float]\r\n) {\r\n  batchUpdateProperties(\r\n    modelId: $modelId\r\n    docAndCatIdArr: $docAndCatIdArr\r\n    elementIdArr: $elementIdArr\r\n    propertyArr: $propertyArr\r\n    strValueArr: $strValueArr\r\n    numValueArr: $numValueArr\r\n  )\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.BatchUpdateProperty=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"BatchUpdateProperty")},"./99api/graphql/DeleteAsset.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteAsset"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assetId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteAsset"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"assetId"}}}],directives:[]}]}}],loc:{start:0,end:72}};r.loc.source={body:"mutation DeleteAsset($assetId: Int!) {\r\n  deleteAsset(id: $assetId)\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.DeleteAsset=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"DeleteAsset")},"./99api/graphql/DeleteModel.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteModel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteModel"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[]}]}}],loc:{start:0,end:71}};r.loc.source={body:"mutation DeleteModel($modelId: Id!) {\r\n  deleteModel(id: $modelId)\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.DeleteModel=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"DeleteModel")},"./99api/graphql/DeleteModelComment.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteModelComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteModelComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[]}]}}],loc:{start:0,end:78}};r.loc.source={body:"mutation DeleteModelComment($id: Int!) {\r\n    deleteModelComment(id: $id)\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.DeleteModelComment=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"DeleteModelComment")},"./99api/graphql/DeleteModelRenderSetting.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteModelRenderSetting"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteModelSettings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[]}]}}],loc:{start:0,end:83}};r.loc.source={body:"mutation DeleteModelRenderSetting($id: Int!) {\r\n  deleteModelSettings(id: $id)\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.DeleteModelRenderSetting=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"DeleteModelRenderSetting")},"./99api/graphql/DeleteModelSelectionSet.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteModelSelectionSet"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteModelSelectionSet"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[]}]}}],loc:{start:0,end:88}};r.loc.source={body:"mutation DeleteModelSelectionSet($id: Int!) {\r\n    deleteModelSelectionSet(id: $id)\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.DeleteModelSelectionSet=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"DeleteModelSelectionSet")},"./99api/graphql/Generate3DPDF.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Generate3DPDF"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"modelStartConvertToPdf"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assetId"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:109}};r.loc.source={body:"mutation Generate3DPDF($modelId: Id!) {\r\n  modelStartConvertToPdf(modelId: $modelId) {\r\n    assetId\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.Generate3DPDF=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"Generate3DPDF")},"./99api/graphql/Get3DPDFURL.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Get3DPDFURL"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assetId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"asset"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"assetId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"downloadUrls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:108}};r.loc.source={body:"query Get3DPDFURL($assetId: Int!) {\r\n  asset(id: $assetId) {\r\n    downloadUrls {\r\n      url\r\n    }\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.Get3DPDFURL=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"Get3DPDFURL")},"./99api/graphql/GetAsset.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetAsset"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assetId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"asset"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"assetId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"filenames"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"convertedUrls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"downloadUrls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"panoConvertedUrl"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:333}};r.loc.source={body:"query GetAsset($assetId: Int!) {\r\n  asset(id: $assetId) {\r\n    id\r\n    name\r\n    type\r\n    status\r\n    filenames\r\n    createdBy {\r\n      id\r\n      username\r\n    }\r\n    createdAt\r\n    updatedAt\r\n    convertedUrls {\r\n      filename\r\n      url\r\n    }\r\n    downloadUrls {\r\n      filename\r\n      url\r\n    }\r\n    panoConvertedUrl\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.GetAsset=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"GetAsset")},"./99api/graphql/GetAssetFolder.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetAssetFolder"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"projects"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assetFolder"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:155}};r.loc.source={body:"query GetAssetFolder {\r\n    user {\r\n        projects {\r\n            id\r\n            assetFolder {\r\n                id\r\n            }\r\n        }\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.GetAssetFolder=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"GetAssetFolder")},"./99api/graphql/GetElementProperties.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetElementProperties"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"docAndCatId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"elementId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"elementProperties"},arguments:[{kind:"Argument",name:{kind:"Name",value:"docAndCatId"},value:{kind:"Variable",name:{kind:"Name",value:"docAndCatId"}}},{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"elementId"},value:{kind:"Variable",name:{kind:"Name",value:"elementId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"property"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"strValue"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numValue"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:241}};r.loc.source={body:"query GetElementProperties($docAndCatId: Int!, $modelId: Id!, $elementId: Int!) {\r\n    elementProperties(docAndCatId: $docAndCatId, modelId: $modelId, elementId: $elementId) {\r\n        property\r\n        strValue\r\n        numValue\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.GetElementProperties=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"GetElementProperties")},"./99api/graphql/GetModel.gql":function(e,t,r){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetModel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ModelInfo"},directives:[]},{kind:"Field",name:{kind:"Name",value:"versionedModels"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ModelInfo"},directives:[]}]}}]}}]}}],loc:{start:0,end:185}};n.loc.source={body:'#import "./ModelInfo.gql"\r\n\r\nquery GetModel($modelId: Id!) {\r\n    model(id: $modelId) {\r\n        ...ModelInfo\r\n        versionedModels {\r\n            ...ModelInfo\r\n        }\r\n    }\r\n}\r\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};n.definitions=n.definitions.concat(r("./99api/graphql/ModelInfo.gql").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!i[t]&&(i[t]=!0,!0)}));var a={};function o(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}n.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),a[e.name.value]=t}}),e.exports=n,e.exports.GetModel=function(e,t){var r={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var n=a[t]||new Set,i=new Set,s=new Set;for(n.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){i.has(e)||(i.add(e),(a[e]||new Set).forEach(function(e){s.add(e)}))})}return i.forEach(function(t){var n=o(e,t);n&&r.definitions.push(n)}),r}(n,"GetModel")},"./99api/graphql/GetModelComment.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetModelComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"commentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"modelComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"commentId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bimdata"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"camera"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modelId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plainText"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:295}};r.loc.source={body:"query GetModelComment($commentId: Int!) {\r\n    modelComment(id: $commentId) {\r\n        id\r\n        bimdata\r\n        camera\r\n        modelId\r\n        message\r\n        plainText\r\n        createdAt\r\n        updatedAt\r\n        createdBy {\r\n            id\r\n            username\r\n        }\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.GetModelComment=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"GetModelComment")},"./99api/graphql/GetModelComments.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetModelComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"modelComments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bimdata"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"camera"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modelId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plainText"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:297}};r.loc.source={body:"query GetModelComments($modelId: Id!) {\r\n    modelComments(modelId: $modelId) {\r\n        id\r\n        bimdata\r\n        camera\r\n        modelId\r\n        message\r\n        plainText\r\n        createdAt\r\n        updatedAt\r\n        createdBy {\r\n            id\r\n            username\r\n        }\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.GetModelComments=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"GetModelComments")},"./99api/graphql/GetModelFiles.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetModelFiles"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"downloadUrls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"convertedUrls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:236}};r.loc.source={body:"query GetModelFiles($modelId: Id!) {\r\n    model(id: $modelId) {\r\n        id\r\n        downloadUrls {\r\n            filename\r\n            url\r\n        }\r\n        convertedUrls {\r\n            filename\r\n            url\r\n        }\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.GetModelFiles=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"GetModelFiles")},"./99api/graphql/GetModelFolder.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetModelFolder"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"projects"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modelFolder"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:155}};r.loc.source={body:"query GetModelFolder {\r\n    user {\r\n        projects {\r\n            id\r\n            modelFolder {\r\n                id\r\n            }\r\n        }\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.GetModelFolder=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"GetModelFolder")},"./99api/graphql/GetModelRenderSetting.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetModelRenderSetting"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modelId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"filter"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enhancedRendering"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"acceleratedRendering"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"architectEffect"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"penDetail"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"inkContrast"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"blackAndWhite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shadow"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"brightness"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"latitude"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"longitude"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"materials"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"backgroundMode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"backgroundColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"backgroundImage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reflectionImage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shader"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:617}};r.loc.source={body:"query GetModelRenderSetting($modelId: Id!) {\r\n    model(id: $modelId) {\r\n        id\r\n        settings {\r\n            id\r\n            name\r\n            modelId\r\n            filter\r\n            enhancedRendering\r\n            acceleratedRendering\r\n            architectEffect\r\n            penDetail\r\n            inkContrast\r\n            blackAndWhite\r\n            shadow\r\n            brightness\r\n            latitude\r\n            longitude\r\n            materials\r\n            backgroundMode\r\n            backgroundColor\r\n            backgroundImage\r\n            reflectionImage\r\n            shader\r\n        }\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.GetModelRenderSetting=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"GetModelRenderSetting")},"./99api/graphql/GetModelSelectionSets.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetModelSelectionSets"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"model"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modelSelectionSets"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modelId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"elementIds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:261}};r.loc.source={body:"query GetModelSelectionSets($modelId: Id!) {\r\n    model(id: $modelId) {\r\n        id\r\n        modelSelectionSets {\r\n            id\r\n            name\r\n            modelId\r\n            elementIds\r\n            createdAt\r\n            updatedAt\r\n        }\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.GetModelSelectionSets=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"GetModelSelectionSets")},"./99api/graphql/InitElementProperty.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"InitElementProperty"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"property"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"strValue"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numValue"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"initModelElementProperties"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"property"},value:{kind:"Variable",name:{kind:"Name",value:"property"}}},{kind:"Argument",name:{kind:"Name",value:"strValue"},value:{kind:"Variable",name:{kind:"Name",value:"strValue"}}},{kind:"Argument",name:{kind:"Name",value:"numValue"},value:{kind:"Variable",name:{kind:"Name",value:"numValue"}}}],directives:[]}]}}],loc:{start:0,end:221}};r.loc.source={body:"mutation InitElementProperty($modelId: Id!, $property: String!, $strValue: String, $numValue: Float) {\r\n    initModelElementProperties(modelId: $modelId, property: $property, strValue: $strValue, numValue: $numValue)\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.InitElementProperty=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"InitElementProperty")},"./99api/graphql/ModelInfo.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ModelInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Model"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"folderId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetModelId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"downloadUrls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"convertedUrls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:321}};r.loc.source={body:"fragment ModelInfo on Model {\r\n    id\r\n    folderId\r\n    targetModelId\r\n    type\r\n    name\r\n    status\r\n    version\r\n    createdBy {\r\n        id\r\n        username\r\n    }\r\n    createdAt\r\n    updatedAt\r\n    downloadUrls {\r\n        filename\r\n        url\r\n    }\r\n    convertedUrls {\r\n        filename\r\n        url\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=r},"./99api/graphql/UpdateAsset.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateAsset"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assetId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"folderId"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateAsset"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"assetId"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"folderId"},value:{kind:"Variable",name:{kind:"Name",value:"folderId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:152}};r.loc.source={body:"mutation UpdateAsset($assetId: Int!, $name: String, $folderId: Int) {\r\n  updateAsset(id: $assetId, name: $name, folderId: $folderId) {\r\n    id\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.UpdateAsset=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"UpdateAsset")},"./99api/graphql/UpdateElementProperty.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateElementProperty"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"docAndCatId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"elementId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"property"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"strValue"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numValue"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePropertyValue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"docAndCatId"},value:{kind:"Variable",name:{kind:"Name",value:"docAndCatId"}}},{kind:"Argument",name:{kind:"Name",value:"elementId"},value:{kind:"Variable",name:{kind:"Name",value:"elementId"}}},{kind:"Argument",name:{kind:"Name",value:"property"},value:{kind:"Variable",name:{kind:"Name",value:"property"}}},{kind:"Argument",name:{kind:"Name",value:"strValue"},value:{kind:"Variable",name:{kind:"Name",value:"strValue"}}},{kind:"Argument",name:{kind:"Name",value:"numValue"},value:{kind:"Variable",name:{kind:"Name",value:"numValue"}}}],directives:[]}]}}],loc:{start:0,end:388}};r.loc.source={body:"mutation UpdateElementProperty(\r\n    $modelId: Id!\r\n    $docAndCatId: Int!\r\n    $elementId: Int!\r\n    $property: String!\r\n    $strValue: String\r\n    $numValue: Float\r\n) {\r\n    updatePropertyValue(\r\n        modelId: $modelId\r\n        docAndCatId: $docAndCatId\r\n        elementId: $elementId\r\n        property: $property\r\n        strValue: $strValue\r\n        numValue: $numValue\r\n    )\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.UpdateElementProperty=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"UpdateElementProperty")},"./99api/graphql/UpdateModel.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateModel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"folderId"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateModel"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"folderId"},value:{kind:"Variable",name:{kind:"Name",value:"folderId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:159}};r.loc.source={body:"mutation UpdateModel($modelId: Id!, $name: String, $folderId: Int) {\r\n    updateModel(id: $modelId, name: $name, folderId: $folderId) {\r\n        id\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.UpdateModel=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"UpdateModel")},"./99api/graphql/UpdateModelComment.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateModelComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"message"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"plainText"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateModelComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"message"},value:{kind:"Variable",name:{kind:"Name",value:"message"}}},{kind:"Argument",name:{kind:"Name",value:"plainText"},value:{kind:"Variable",name:{kind:"Name",value:"plainText"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bimdata"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"camera"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modelId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plainText"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:305}};r.loc.source={body:"mutation UpdateModelComment($id: Int!, $message: String!, $plainText: String!) {\r\n    updateModelComment(id: $id, message: $message, plainText: $plainText) {\r\n        id\r\n        bimdata\r\n        camera\r\n        modelId\r\n        message\r\n        plainText\r\n        createdAt\r\n        updatedAt\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.UpdateModelComment=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"UpdateModelComment")},"./99api/graphql/UpdateModelRenderSetting.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateModelRenderSetting"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NamedType",name:{kind:"Name",value:"Id"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filter"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"enhancedRendering"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"acceleratedRendering"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"architectEffect"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"penDetail"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"inkContrast"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"blackAndWhite"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"shadow"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"brightness"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"latitude"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"longitude"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"materials"}},type:{kind:"NamedType",name:{kind:"Name",value:"JSONObject"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"backgroundMode"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"backgroundColor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"backgroundImage"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"reflectionImage"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"shader"}},type:{kind:"NamedType",name:{kind:"Name",value:"ModelShaderSetting"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateModelSettings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"modelId"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"Variable",name:{kind:"Name",value:"filter"}}},{kind:"Argument",name:{kind:"Name",value:"enhancedRendering"},value:{kind:"Variable",name:{kind:"Name",value:"enhancedRendering"}}},{kind:"Argument",name:{kind:"Name",value:"acceleratedRendering"},value:{kind:"Variable",name:{kind:"Name",value:"acceleratedRendering"}}},{kind:"Argument",name:{kind:"Name",value:"architectEffect"},value:{kind:"Variable",name:{kind:"Name",value:"architectEffect"}}},{kind:"Argument",name:{kind:"Name",value:"penDetail"},value:{kind:"Variable",name:{kind:"Name",value:"penDetail"}}},{kind:"Argument",name:{kind:"Name",value:"inkContrast"},value:{kind:"Variable",name:{kind:"Name",value:"inkContrast"}}},{kind:"Argument",name:{kind:"Name",value:"blackAndWhite"},value:{kind:"Variable",name:{kind:"Name",value:"blackAndWhite"}}},{kind:"Argument",name:{kind:"Name",value:"shadow"},value:{kind:"Variable",name:{kind:"Name",value:"shadow"}}},{kind:"Argument",name:{kind:"Name",value:"brightness"},value:{kind:"Variable",name:{kind:"Name",value:"brightness"}}},{kind:"Argument",name:{kind:"Name",value:"latitude"},value:{kind:"Variable",name:{kind:"Name",value:"latitude"}}},{kind:"Argument",name:{kind:"Name",value:"longitude"},value:{kind:"Variable",name:{kind:"Name",value:"longitude"}}},{kind:"Argument",name:{kind:"Name",value:"materials"},value:{kind:"Variable",name:{kind:"Name",value:"materials"}}},{kind:"Argument",name:{kind:"Name",value:"backgroundMode"},value:{kind:"Variable",name:{kind:"Name",value:"backgroundMode"}}},{kind:"Argument",name:{kind:"Name",value:"backgroundColor"},value:{kind:"Variable",name:{kind:"Name",value:"backgroundColor"}}},{kind:"Argument",name:{kind:"Name",value:"backgroundImage"},value:{kind:"Variable",name:{kind:"Name",value:"backgroundImage"}}},{kind:"Argument",name:{kind:"Name",value:"reflectionImage"},value:{kind:"Variable",name:{kind:"Name",value:"reflectionImage"}}},{kind:"Argument",name:{kind:"Name",value:"shader"},value:{kind:"Variable",name:{kind:"Name",value:"shader"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modelId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"filter"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enhancedRendering"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"acceleratedRendering"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"architectEffect"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"penDetail"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"inkContrast"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"blackAndWhite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shadow"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"brightness"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"latitude"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"longitude"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"materials"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"backgroundMode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"backgroundColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"backgroundImage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reflectionImage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shader"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:1701}};r.loc.source={body:"mutation UpdateModelRenderSetting(\r\n    $id: Int!\r\n    $modelId: Id\r\n    $name: String\r\n    $filter: String\r\n    $enhancedRendering: Boolean\r\n    $acceleratedRendering: Boolean\r\n    $architectEffect: Boolean\r\n    $penDetail: Float\r\n    $inkContrast: Float\r\n    $blackAndWhite: Boolean\r\n    $shadow: Boolean\r\n    $brightness: Float\r\n    $latitude: Float\r\n    $longitude: Float\r\n    $materials: JSONObject\r\n    $backgroundMode: Int\r\n    $backgroundColor: String\r\n    $backgroundImage: [String]\r\n    $reflectionImage: [String]\r\n    $shader: ModelShaderSetting\r\n) {\r\n    updateModelSettings(\r\n        id: $id\r\n        modelId: $modelId\r\n        name: $name\r\n        filter: $filter\r\n        enhancedRendering: $enhancedRendering\r\n        acceleratedRendering: $acceleratedRendering\r\n        architectEffect: $architectEffect\r\n        penDetail: $penDetail\r\n        inkContrast: $inkContrast\r\n        blackAndWhite: $blackAndWhite\r\n        shadow: $shadow\r\n        brightness: $brightness\r\n        latitude: $latitude\r\n        longitude: $longitude\r\n        materials: $materials\r\n        backgroundMode: $backgroundMode\r\n        backgroundColor: $backgroundColor\r\n        backgroundImage: $backgroundImage\r\n        reflectionImage: $reflectionImage\r\n        shader: $shader\r\n    ) {\r\n        id\r\n        modelId\r\n        name\r\n        filter\r\n        enhancedRendering\r\n        acceleratedRendering\r\n        architectEffect\r\n        penDetail\r\n        inkContrast\r\n        blackAndWhite\r\n        shadow\r\n        brightness\r\n        latitude\r\n        longitude\r\n        materials\r\n        backgroundMode\r\n        backgroundColor\r\n        backgroundImage\r\n        reflectionImage\r\n        shader\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.UpdateModelRenderSetting=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"UpdateModelRenderSetting")},"./99api/graphql/UpdateModelSelectionSet.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateModelSelectionSet"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"elementIds"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateModelSelectionSet"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"elementIds"},value:{kind:"Variable",name:{kind:"Name",value:"elementIds"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modelId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"elementIds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:274}};r.loc.source={body:"mutation UpdateModelSelectionSet($id: Int!, $name: String, $elementIds: [String]) {\r\n    updateModelSelectionSet(id: $id, name: $name, elementIds: $elementIds) {\r\n        id\r\n        name\r\n        modelId\r\n        elementIds\r\n        createdAt\r\n        updatedAt\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.UpdateModelSelectionSet=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"UpdateModelSelectionSet")},"./99api/graphql/UploadAsset.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UploadAsset"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"folderId"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assetName"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"fileNames"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"type"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AssetType"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uploadAsset"},arguments:[{kind:"Argument",name:{kind:"Name",value:"folderId"},value:{kind:"Variable",name:{kind:"Name",value:"folderId"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"assetName"}}},{kind:"Argument",name:{kind:"Name",value:"filenames"},value:{kind:"Variable",name:{kind:"Name",value:"fileNames"}}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"type"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uploadUrls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:275}};r.loc.source={body:"mutation UploadAsset(\r\n  $folderId: Int\r\n  $assetName: String!\r\n  $fileNames: [String]!\r\n  $type: AssetType!\r\n) {\r\n  uploadAsset(folderId: $folderId, name: $assetName, filenames: $fileNames, type: $type) {\r\n    id\r\n    uploadUrls {\r\n      filename\r\n      url\r\n    }\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.UploadAsset=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"UploadAsset")},"./99api/graphql/UploadAssetSuccess.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UploadAssetSuccess"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assetId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uploadAssetSuccess"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"assetId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"folderId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"filenames"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"downloadUrls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:302}};r.loc.source={body:"mutation UploadAssetSuccess($assetId: Int!) {\r\n  uploadAssetSuccess(id: $assetId) {\r\n    id\r\n    name\r\n    folderId\r\n    type\r\n    status\r\n    filenames\r\n    downloadUrls {\r\n        filename\r\n        url\r\n    }\r\n    createdBy {\r\n        id\r\n      username\r\n    }\r\n    createdAt\r\n    updatedAt\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.UploadAssetSuccess=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"UploadAssetSuccess")},"./99api/graphql/UploadModel.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UploadModel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"folderId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filenames"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cvtOptions"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uploadModel"},arguments:[{kind:"Argument",name:{kind:"Name",value:"folderId"},value:{kind:"Variable",name:{kind:"Name",value:"folderId"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"filenames"},value:{kind:"Variable",name:{kind:"Name",value:"filenames"}}},{kind:"Argument",name:{kind:"Name",value:"cvtOptions"},value:{kind:"Variable",name:{kind:"Name",value:"cvtOptions"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uploadUrls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:296}};r.loc.source={body:"mutation UploadModel($folderId: Int!, $name: String!, $filenames: [String]!, $cvtOptions: String) {\r\n    uploadModel(folderId: $folderId, name: $name, filenames: $filenames, cvtOptions: $cvtOptions) {\r\n        id\r\n        uploadUrls {\r\n            filename\r\n            url\r\n        }\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.UploadModel=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"UploadModel")},"./99api/graphql/UploadModelSuccess.gql":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UploadModelSuccess"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modelId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uploadModelSuccess"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"modelId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"folderId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetModelId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"downloadUrls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"convertedUrls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:467}};r.loc.source={body:"mutation UploadModelSuccess($modelId: Id!) {\r\n    uploadModelSuccess(id: $modelId) {\r\n        id\r\n        folderId\r\n        targetModelId\r\n        type\r\n        name\r\n        status\r\n        version\r\n        createdBy {\r\n            id\r\n            username\r\n        }\r\n        createdAt\r\n        updatedAt\r\n        downloadUrls {\r\n            filename\r\n            url\r\n        }\r\n        convertedUrls {\r\n            filename\r\n            url\r\n        }\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,r)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,r)}),t.definitions&&t.definitions.forEach(function(t){e(t,r)})}(e,t),n[e.name.value]=t}}),e.exports=r,e.exports.UploadModelSuccess=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;for(a.forEach(function(e){s.add(e)});s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(r,"UploadModelSuccess")},"./99api/index.ts":function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"init",function(){return f});var n=r("./99api/config.ts"),i=r("./99api/Model.ts"),a=r("./99api/Asset.ts"),o=r("./99api/BIM.ts"),s=r("./99api/View.ts"),l=r("./99api/Comment.ts"),u=r("./99api/RenderSetting.ts"),c=r("./99api/utils/index.ts"),d=r("./webgl-utils.js"),h=r("./99api/graphql.types.ts");function f(e){Object(c.assert)(e,Object(c.hasKeys)(["endpoint","appToken"]),"initial config not valid"),Object(n.setConfig)(e)}r.d(t,"ComStatus",function(){return h.ComStatus}),r.d(t,"AssetType",function(){return h.AssetType}),r.d(t,"TaskPriority",function(){return h.TaskPriority}),r.d(t,"TaskCommentType",function(){return h.TaskCommentType}),r.d(t,"IssuePriority",function(){return h.IssuePriority}),r.d(t,"IssueStatus",function(){return h.IssueStatus}),r.d(t,"ModelType",function(){return h.ModelType}),r.d(t,"ModelStatus",function(){return h.ModelStatus}),r.d(t,"SelectionType",function(){return h.SelectionType}),r.d(t,"ModelShaderSetting",function(){return h.ModelShaderSetting}),r.d(t,"AssetStatus",function(){return h.AssetStatus}),r.d(t,"WechatMessageType",function(){return h.WechatMessageType}),e.WebGLUtils=Object(d.default)(),t.default={Model:i.Model,Asset:a.Asset,BIM:o.BIM,Comment:l.Comment,RenderSetting:u.RenderSetting,View:s.View,isSupportWebGL:c.isSupportWebGL,isSupportWebGL2:c.isSupportWebGL2,init:f}}.call(this,r("./node_modules/webpack/buildin/global.js"))},"./99api/utils/IBimTree.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"TypesInfoBySpaces",function(){return a}),r.d(t,"normaliseBimTextTree",function(){return o});var n=r("./99api/utils/types.ts"),i=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},a=[{type:n.BIMTreeNodeType.File,idLabel:"modelId",container:"models"},{type:n.BIMTreeNodeType.Level,idLabel:"levelId",container:"levels"},{type:n.BIMTreeNodeType.Category,idLabel:"categoryId",container:"categories"},{type:n.BIMTreeNodeType.Family,idLabel:"familyId",container:"families"},{type:n.BIMTreeNodeType.Type,idLabel:"typeId",container:"types"},{type:n.BIMTreeNodeType.Element,idLabel:"elementId",container:"elements"}];function o(e,t,r,o){void 0===o&&(o={parseProps:!1,useElementIdAsId:!1,onlyDocNames:!1,ignoreElements:!1,modelId:null,docModelId:null,prependModelId:!1});var s=r.split("\n").splice(1),l={};s.forEach(function(e){var t=i(e.split(","),3),r=t[0],n=t[1],a=t[2];n&&a&&(l[n+"-"+a.trim()]=r)});var u=1,c=1,d=o.prependModelId?o.modelId+"+":"",h=(o.parseProps,!!o.useElementIdAsId),f={elements:{},types:{},families:{},levels:{},models:{},categories:{}},p=t.split("\n"),m=[null,null,null,null,null];if(o.onlyDocNames){for(var v=0;v<p.length;v++){var _=p[v];if(0!==_.length&&" "!==_.charAt(0)){var g=i(p[0].match(/(.*)\((\d)\)$/),3),y=g[0],b=(g[1],g[2]);f.models[d+b]={type:n.BIMTreeNodeType.File,index:0,id:d+b,name:"地形环境",childrenNum:0,isTerrain:!0,levels:[],pathName:y+"("+b+")"}}}return f}return p.forEach(function(t){for(var r=0;" "===t.charAt(0)&&t.length>0;)r++,t=t.substr(1);t=t.trim();var s=a[r],p={type:s.type,index:c++,id:d+s.idLabel+"-"+u++,name:t||"undefined",pathName:t||"",childrenNum:0};if(s.type===n.BIMTreeNodeType.File){if(!t)return;var v=(t=t.slice(0,-1)).lastIndexOf("(");if(-1===v)throw new Error("Not a valid bim.txt");var _=t.substring(v+1),g=i(o.docModelId?o.docModelId[_].split("_"):[null,null],2),y=g[0],b=g[1];p.id=d+_,p.docId=_,p.name=t.substring(0,v),p.originModelId=y||o.modelId,p.originDocId=b||_,p.pathName=p.name+"("+p.docId+")"}if(s.type===n.BIMTreeNodeType.Element){if(o.ignoreElements)return;p.modelId=e,p.props="{}";var x=m[0],w=m[2];p.docId=x.docId;var E=i(o.docModelId?o.docModelId[p.docId].split("_"):[null,null],2);y=E[0],b=E[1];p.docAndCatId=parseInt(l[x.docId+"-"+w.name]),p.originModelId=y||o.modelId,p.originDocId=b||p.docId,h&&(p.id=d+(x.docId+"/")+t),p.elementId=""+t}else{p[a[r+1].container]=[]}if(s.type!==n.BIMTreeNodeType.File){var M=a[r-1],A=m[r-1];A[s.container].push(p.id),A.childrenNum+=1,p[M.idLabel]=A.id}s.type===n.BIMTreeNodeType.Family&&(p.levelId=m[1].id),m[r]=p,f[s.container][p.id]=p}),f}},"./99api/utils/client/BIMProperty.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"initElementStatus",function(){return D}),r.d(t,"deleteElementsStatus",function(){return P}),r.d(t,"addCustomElementsProperty",function(){return I}),r.d(t,"addCustomElementProperty",function(){return N}),r.d(t,"updateElementStatus",function(){return O}),r.d(t,"removeCustomElementsProperty",function(){return R}),r.d(t,"removeCustomElementProperty",function(){return F}),r.d(t,"updateElementsStatus",function(){return C}),r.d(t,"getElementStatus",function(){return B}),r.d(t,"getBIMStatus",function(){return L}),r.d(t,"getElementsStatus",function(){return j}),r.d(t,"getElementProperties",function(){return V}),r.d(t,"getElementsProperties",function(){return z}),r.d(t,"updateElementProperty",function(){return U}),r.d(t,"updateElementsProperty",function(){return G});var n=r("./99api/utils/model/index.ts"),i=r("./99api/utils/client/model.ts"),a=r("./99api/utils/client/BIMTree.ts"),o=r("./99api/graphql/GetElementProperties.gql"),s=r.n(o),l=r("./99api/graphql/BatchAddProperty.gql"),u=r.n(l),c=r("./99api/graphql/BatchGetProperties.gql"),d=r.n(c),h=r("./99api/graphql/InitElementProperty.gql"),f=r.n(h),p=r("./99api/graphql/BatchDeleteProperty.gql"),m=r.n(p),v=r("./99api/graphql/UpdateElementProperty.gql"),_=r.n(v),g=r("./99api/graphql/BatchUpdateProperty.gql"),y=r.n(g),b=r("./99api/utils/propertyGroups.json"),x=r("./99api/utils/client/gqlClient.ts"),w=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},E=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},M=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},A=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(M(arguments[t]));return e},T=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},S=void 0,k=/(.*)\+(.*)\/(.*)/,D=function(e,t){return w(S,void 0,void 0,function(){var r,n,i,o;return E(this,function(s){switch(s.label){case 0:return[4,Object(a.getBimTree)(e)];case 1:return r=s.sent(),Object.keys(r.elements).map(function(e){return r.elements[e]}),n=A([t[0]],t).join("<>"),[4,Object(x.getGQLClient)().mutate({mutation:f.a,variables:{modelId:e,property:"MODELO-STATUS@688",strValue:n}})];case 2:if(i=s.sent(),i.data,o=i.errors)throw Error(o[0].message);return[2]}})})},P=function(e){return w(S,void 0,void 0,function(){var t,r;return E(this,function(n){switch(n.label){case 0:return[4,Object(a.getBimTree)(e)];case 1:return t=n.sent(),r=Object.keys(t.elements).map(function(e){return t.elements[e]}),[4,Object(x.getGQLClient)().mutate({mutation:m.a,variables:{modelId:e,docAndCatIdArr:r.map(function(e){return e.docAndCatId}),elementIdArr:r.map(function(e){return e.elementId}),propertyArr:r.map(function(e){return"MODELO-STATUS@688"})}})];case 2:return n.sent().data,[2]}})})},I=function(e,t,r,n){return w(S,void 0,void 0,function(){var i,o;return E(this,function(s){switch(s.label){case 0:return[4,Object(a.getBimTree)(e)];case 1:return i=s.sent(),o=t.map(function(e){return i.elements[e]}),[4,Object(x.getGQLClient)().mutate({mutation:u.a,variables:{modelId:e,docAndCatIdArr:o.map(function(e){return e.docAndCatId}),elementIdArr:o.map(function(e){return e.elementId}),propertyArr:o.map(function(e){return r+"@689"}),strValueArr:o.map(function(e){return n})}})];case 2:return s.sent().data,[2,!0]}})})},N=function(e,t,r,n){return w(S,void 0,void 0,function(){return E(this,function(i){return[2,I(e,[t],r,n)]})})},O=function(e,t,r){return w(S,void 0,void 0,function(){var n,i,a;return E(this,function(o){switch(o.label){case 0:if(!k.test(t))throw Error("elementId "+t+" seems not correct");return[4,V(e,t)];case 1:if(n=o.sent(),!(i=n.find(function(e){return"MODELO-STATUS"===e.name&&688===e.groupKey})))throw Error("status needs to be initialized first");return(a=i.strValue.split("<>"))[0]=r,[4,U(e,t,{name:"MODELO-STATUS",group:"MODELO",groupKey:688,strValue:a.join("<>")})];case 2:return o.sent(),[2,r]}})})},R=function(e,t,r){return w(S,void 0,void 0,function(){var n,i;return E(this,function(o){switch(o.label){case 0:return[4,Object(a.getBimTree)(e)];case 1:return n=o.sent(),i=t.map(function(e){return n.elements[e]}),[4,Object(x.getGQLClient)().mutate({mutation:m.a,variables:{modelId:e,docAndCatIdArr:i.map(function(e){return e.docAndCatId}),elementIdArr:i.map(function(e){return e.elementId}),propertyArr:i.map(function(e){return r+"@689"})}})];case 2:return o.sent().data,[2,!0]}})})},F=function(e,t,r){return w(S,void 0,void 0,function(){return E(this,function(n){return[2,R(e,[t],r)]})})},C=function(e,t,r){return w(S,void 0,void 0,function(){var n,i,a;return E(this,function(o){switch(o.label){case 0:return 0===t.length?[2]:1===t.length?[2,O(e,t[0],r)]:[4,V(e,t[0])];case 1:if(n=o.sent(),!(i=n.find(function(e){return"MODELO-STATUS"===e.name&&688===e.groupKey})))throw Error("status needs to be initialized first");return(a=i.strValue.split("<>"))[0]=r,[4,G(e,t,{name:"MODELO-STATUS",group:"MODELO",groupKey:688,strValue:a.join("<>")})];case 2:return o.sent(),[2,r]}})})},B=function(e,t){return w(S,void 0,void 0,function(){var r,n;return E(this,function(i){switch(i.label){case 0:return[4,V(e,t)];case 1:if(r=i.sent(),!(n=r.find(function(e){return"MODELO-STATUS"===e.name&&688===e.groupKey})))throw Error("status needs to be initialized first");return[2,n.strValue.split("<>")[0]]}})})},L=function(e){return w(S,void 0,void 0,function(){var t,r,n,i;return E(this,function(o){switch(o.label){case 0:return[4,Object(a.getBimTree)(e)];case 1:return t=o.sent(),r=t.elements[Object.keys(t.elements)[0]],[4,V(e,r.id)];case 2:if(n=o.sent(),!(i=n.find(function(e){return"MODELO-STATUS"===e.name&&688===e.groupKey})))throw Error("status needs to be initialized first");return[2,i.strValue.split("<>").slice(1)]}})})},j=function(e,t){return w(S,void 0,void 0,function(){var r,n,i,o,s,l,u,c;return E(this,function(h){switch(h.label){case 0:return 0===t.length?[2,{}]:1!==t.length?[3,2]:[4,B(e,t[0])];case 1:return r=h.sent(),[2,(c={},c[t[0]]=r,c)];case 2:return[4,Object(a.getBimTree)(e)];case 3:return n=h.sent(),i=t.map(function(e){return n.elements[e]}),[4,Object(x.getGQLClient)().query({query:d.a,variables:{modelId:e,elementIdArr:i.map(function(e){return e.elementId}),propertyArr:i.map(function(e){return"MODELO-STATUS@688"})}})];case 4:if(o=h.sent(),s=o.data,l=o.errors)throw l[0];if(!s.batchGetElementProperties.properties[0].strValues)throw Error("status needs to be initialized first");return u={},s.batchGetElementProperties.elementIdArr.forEach(function(e,r){var n=t.find(function(t){return t.endsWith(e+"")}),i=s.batchGetElementProperties.properties[0].strValues[r];if(!i)throw Error("status needs to be initialized first");u[n]=i.split("<>")[0]}),[2,u]}})})},V=function(e,t){return w(S,void 0,void 0,function(){var r,n,i,o;return E(this,function(l){switch(l.label){case 0:if(!k.test(t))throw Error("elementId "+t+" seems not correct");return[4,Object(a.getBimTree)(e)];case 1:return r=l.sent(),[4,q(e,"unit.json")];case 2:return n=l.sent(),i=r.elements[t],o=n[i.docId],[4,Object(x.getGQLClient)().query({query:s.a,variables:{modelId:i.originModelId,docAndCatId:i.docAndCatId,elementId:i.elementId}})];case 3:return[2,l.sent().data.elementProperties.map(function(e){var t=e.property,r=e.numValue,n=e.strValue,i=M(t.split("@"),2),a=i[0],s=i[1];return{name:a,group:b[s],groupKey:parseInt(s),strValue:n,numValue:r,unit:o[a]||null}})]}})})},z=function(e,t){return w(S,void 0,void 0,function(){var r,n,i,o,s,l,u,c,d,h,f;return E(this,function(p){switch(p.label){case 0:return 0===t.length?[2,[]]:1===t.length?[2,V(e,t[0])]:[4,Object(a.getBimTree)(e)];case 1:return r=p.sent(),n=t.map(function(e){if(!k.test(e))throw Error("elementId "+e+" seems not correct");return r.elements[e]}),[4,q(e,"unit.json")];case 2:return p.sent(),[4,q(e,"typeKeys.json")];case 3:i=p.sent(),o=[];try{for(s=T(n),l=s.next();!l.done;l=s.next())u=l.value,c=r.types[u.typeId],o=o.concat(i[u.docId][c.name]||[])}catch(e){h={error:e}}finally{try{l&&!l.done&&(f=s.return)&&f.call(s)}finally{if(h)throw h.error}}return d=A(new Set(o)).map(function(e){var t=M(e.split("@"),3),r=t[0],n=t[1],i=t[2];return{name:r,group:b[n],groupKey:parseInt(n),strValue:"2"===i?"multiple values":null,numValue:"1"===i?"multiple values":null}}),[2,new Promise(function(e){return e(d)})]}})})},U=function(e,t,r){return w(S,void 0,void 0,function(){var n,i;return E(this,function(o){switch(o.label){case 0:return Q(r),[4,Object(a.getBimTree)(e)];case 1:return n=o.sent(),i=n.elements[t],[4,Object(x.getGQLClient)().mutate({mutation:_.a,variables:{modelId:e,docAndCatId:i.docAndCatId,elementId:i.elementId,property:r.name+"@"+r.groupKey,strValue:r.strValue,numValue:r.numValue}})];case 2:return o.sent(),[2,r]}})})},G=function(e,t,r){return w(S,void 0,void 0,function(){var n,i,o;return E(this,function(s){switch(s.label){case 0:return Q(r),[4,Object(a.getBimTree)(e)];case 1:return n=s.sent(),i=t.map(function(e){return n.elements[e]}),o={modelId:e,docAndCatIdArr:i.map(function(e){return e.docAndCatId}),elementIdArr:i.map(function(e){return e.elementId}),propertyArr:i.map(function(){return r}).map(function(e){return e.name+"@"+e.groupKey})},"string"==typeof r.strValue&&(o.strValueArr=i.map(function(){return r}).map(function(e){return e.strValue})),"number"==typeof r.numValue&&(o.numValueArr=i.map(function(){return r}).map(function(e){return e.numValue})),[4,Object(x.getGQLClient)().mutate({mutation:y.a,variables:o})];case 2:return s.sent(),[2,r]}})})},q=function(e,t){return w(S,void 0,void 0,function(){var r,a,o,s,l;return E(this,function(u){switch(u.label){case 0:return[4,Object(i.getModelFiles)(e)];case 1:if(r=u.sent(),!(a=r.convertedUrls.find(function(e){return e.filename===t})))throw Error("this model does not contain "+t);return t.endsWith(".json")?[4,Object(n.downloadFile)(e,a)]:[3,3];case 2:return[2,o=u.sent().data];case 3:return t.endsWith(".csv")?[4,Object(n.downloadFile)(e,a)]:[3,5];case 4:return o=u.sent().data,s=o.split("\n").splice(1),l={},s.filter(function(e){return e}).forEach(function(e){var t=M(e.trim().split(","),3),r=t[0],n=t[1],i=t[2];l[n+"-"+i]=parseInt(r)}),[2,l];case 5:return[2,null]}})})},Q=function(e){if("number"!=typeof e.numValue&&"string"!=typeof e.strValue)throw Error("[strValue, numValue] should set one correct value");if("number"==typeof e.numValue&&"string"==typeof e.strValue)throw Error("[strValue, numValue] can only set one value");return!0}},"./99api/utils/client/BIMTree.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"getBimTree",function(){return c});var n=r("./99api/utils/IBimTree.ts"),i=r("./99api/utils/client/model.ts"),a=r("./99api/utils/model/index.ts"),o=r("./03scene/model/m3d_load_misc.js"),s=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},l=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},u={};function c(e,t){return s(this,void 0,void 0,function(){var r,s,c,d,h,f,p,m,v,_,g,y,b;return l(this,function(l){switch(l.label){case 0:return u[e]?[2,u[e]]:"localmodel"===e&&t?[3,7]:[4,Object(i.getModelFiles)(e)];case 1:if(r=l.sent(),!(p=r.convertedUrls.filter(function(e){return"bim.txt"===e.filename})[0]))throw new Error("this model does not contain bim tree information");if(!(m=r.convertedUrls.filter(function(e){return"reference.csv"===e.filename})[0]))throw new Error("this model does not contain reference.csv");return(v=r.convertedUrls.find(function(e){return"docModelId.json"===e.filename}))?[4,Object(a.downloadFile)(e,v)]:[3,3];case 2:return c=l.sent().data,[3,4];case 3:c=null,l.label=4;case 4:return s=c,[4,Object(a.downloadFile)(e,p)];case 5:return d=l.sent().data,[4,Object(a.downloadFile)(e,m)];case 6:return h=l.sent().data,b=Object(n.normaliseBimTextTree)(e,d,h,{useElementIdAsId:!0,docModelId:s,modelId:e,prependModelId:!0}),u[e]=b,[2,b];case 7:return p=(f=t||"/"+e)+"/bim.txt",m=f+"/reference.csv",v=f+"/docModelId.json",[4,o.default.OpenFile1(p,"",Promise).downloadFile()];case 8:return _=l.sent(),[4,o.default.OpenFile1(m,"",Promise).downloadFile()];case 9:g=l.sent(),y=null,l.label=10;case 10:return l.trys.push([10,12,,13]),[4,o.default.OpenFile1(v,"json",Promise).downloadFile()];case 11:return y=l.sent(),[3,13];case 12:return l.sent(),[3,13];case 13:return b=Object(n.normaliseBimTextTree)(e,_.data,g.data,{useElementIdAsId:!0,docModelId:y?y.data:null,modelId:e,prependModelId:!0}),u[e]=b,[2,b]}})})}},"./99api/utils/client/asset.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"assetTypes",function(){return E}),r.d(t,"uploadAsset",function(){return M}),r.d(t,"deleteAsset",function(){return A}),r.d(t,"getAsset",function(){return T}),r.d(t,"updateAsset",function(){return S});var n=r("./node_modules/mime/index.js"),i=r.n(n),a=r("./node_modules/axios/index.js"),o=r.n(a),s=r("./99api/graphql/GetAsset.gql"),l=r.n(s),u=r("./99api/graphql/UploadAsset.gql"),c=r.n(u),d=r("./99api/graphql/UpdateAsset.gql"),h=r.n(d),f=r("./99api/graphql/DeleteAsset.gql"),p=r.n(f),m=r("./99api/graphql/UploadAssetSuccess.gql"),v=r.n(m),_=r("./99api/utils/client/gqlClient.ts"),g=r("./99api/utils/client/folder.ts"),y=r("./99api/utils/index.ts"),b=r("./99api/graphql.types.ts"),x=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},w=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},E={dwg:b.AssetType.Dwg},M=function(e,t,r){return x(void 0,void 0,void 0,function(){var n,a,s,l,u,d,h;return w(this,function(f){switch(f.label){case 0:return[4,Object(g.getAssetFolder)()];case 1:return n=f.sent(),a=t,t||(s=Object(y.getExtension)(e.name),a=s&&E[s]?E[s]:b.AssetType.File),[4,Object(_.getGQLClient)().mutate({mutation:c.a,variables:{folderId:n.id,assetName:e.name,fileNames:[e.name],type:a}})];case 2:return l=f.sent().data,u=l.uploadAsset,d=u.id,h=u.uploadUrls,[4,o.a.put(h[0].url,e,{headers:{"Content-Type":i.a.getType(e.name)},onUploadProgress:function(e){var t=e.loaded/e.total;r&&r(t)}})];case 3:return f.sent(),[4,Object(_.getGQLClient)().mutate({mutation:v.a,variables:{assetId:d}})];case 4:return[2,k(f.sent().data.uploadAssetSuccess)]}})})},A=function(e){return x(void 0,void 0,void 0,function(){var t;return w(this,function(r){switch(r.label){case 0:return[4,Object(_.getGQLClient)().mutate({mutation:p.a,variables:{assetId:e}})];case 1:if(t=r.sent().errors)throw Error(t[0].message);return[2,e]}})})},T=function(e){return x(void 0,void 0,void 0,function(){var t,r,n;return w(this,function(i){switch(i.label){case 0:return[4,Object(_.getGQLClient)().query({query:l.a,variables:{assetId:e}})];case 1:if(t=i.sent(),r=t.data,n=t.errors,!r.asset)throw Error("asset does not exist");if(n)throw Error(n[0].message);return[2,k(r.asset)]}})})},S=function(e,t){return x(void 0,void 0,void 0,function(){return w(this,function(r){switch(r.label){case 0:return[4,Object(_.getGQLClient)().mutate({mutation:h.a,variables:{assetId:e,name:t}})];case 1:return r.sent(),[2,e]}})})};function k(e){if(!e.downloadUrls)throw Error("get download url for "+e.name+" failed");return{id:e.id,name:e.name,status:e.status,type:e.type,downloadUrl:e.downloadUrls[0].url,convertedUrls:e.convertedUrls?e.convertedUrls.map(function(e){return{filename:e.filename,url:e.url}}):null,panoConvertedUrl:e.panoConvertedUrl?e.panoConvertedUrl:null,updatedAt:e.updatedAt}}},"./99api/utils/client/auth.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"signIn",function(){return u}),r.d(t,"signOut",function(){return c});var n=r("./node_modules/axios/index.js"),i=r.n(n),a=r("./99api/config.ts"),o=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},s=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},l=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o};var u=function(e,t,r){return o(void 0,void 0,void 0,function(){var t,n,o,u,c;return s(this,function(s){switch(s.label){case 0:if(!a.default.endpoint)throw Error("ModeloAPI needs to be initialized first. Call Modelo.init().");return d=e,t=decodeURIComponent(escape(window.atob(d))),n=l(t.split(","),2),o=n[0],u=n[1],[4,i.a.post(a.default.endpoint+"/login",{username:o,password:u},{headers:r})];case 1:return c=s.sent(),localStorage.setItem("token",c.data.token),[2]}var d})})},c=function(){localStorage.removeItem("token")}},"./99api/utils/client/comment.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"getModelComments",function(){return g}),r.d(t,"deleteModelComment",function(){return y}),r.d(t,"addModelComment",function(){return b}),r.d(t,"updateModelComment",function(){return x}),r.d(t,"createComment",function(){return w});var n=r("./99api/graphql/GetModelComments.gql"),i=r.n(n),a=r("./99api/graphql/GetModelComment.gql"),o=r.n(a),s=r("./99api/graphql/DeleteModelComment.gql"),l=r.n(s),u=r("./99api/graphql/UpdateModelComment.gql"),c=r.n(u),d=r("./99api/graphql/AddModelComment.gql"),h=r.n(d),f=r("./99api/utils/client/gqlClient.ts"),p=r("./99api/utils/common/index.ts"),m=function(){return(m=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},v=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},_=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},g=function(e){return v(void 0,void 0,void 0,function(){var t,r,n;return _(this,function(a){switch(a.label){case 0:return[4,Object(f.getGQLClient)().query({query:i.a,variables:{modelId:e}})];case 1:if(t=a.sent(),r=t.data,n=t.errors)throw Error(n[0].message);if(!r.modelComments)throw Error("model "+e+" does not exist");return[2,r.modelComments]}})})},y=function(e){return v(void 0,void 0,void 0,function(){var t,r,n;return _(this,function(i){switch(i.label){case 0:return[4,Object(f.getGQLClient)().mutate({mutation:l.a,variables:{id:e}})];case 1:if(t=i.sent(),r=t.data,n=t.errors,!r)throw Error("comment "+e+" does not exist");if(n)throw Error(n[0].message);return[2,e]}})})},b=function(e,t,r,n,i){return v(void 0,void 0,void 0,function(){var a,o,s,l,u,c;return _(this,function(d){switch(d.label){case 0:return a=t,o=n,s=i,[4,Object(f.getGQLClient)().mutate({mutation:h.a,variables:{message:r,plainText:a,bimdata:s,camera:o,modelId:e}})];case 1:if(l=d.sent(),u=l.data,c=l.errors,!u)throw Error("model "+e+" does not exist");if(c)throw Error(c[0].message);return[2,u.addModelComment.id]}})})},x=function(e,t){return v(void 0,void 0,void 0,function(){var r,n,i,a,s,l,u,d;return _(this,function(h){switch(h.label){case 0:return[4,Object(f.getGQLClient)().query({query:o.a,variables:{commentId:e},fetchPolicy:"cache-first"})];case 1:if(r=h.sent(),n=r.data,i=r.errors,!n)throw Error("comment "+e+" does not exist");if(i)throw Error(i[0].message);return a=n.modelComment,s=m({},JSON.parse(a.message),t),[4,Object(f.getGQLClient)().mutate({mutation:c.a,variables:{id:e,message:JSON.stringify(s),plainText:"placeholder"}})];case 2:if(l=h.sent(),u=l.data,d=l.errors,!u)throw Error("comment "+e+" does not exist");if(d)throw Error(d[0].message);return[2,Object(p.decodeComment)(u.updateModelComment)]}})})},w=function(e,t,r){return v(void 0,void 0,void 0,function(){var n,i;return _(this,function(a){switch(a.label){case 0:return[4,Object(f.getGQLClient)().mutate({mutation:h.a,variables:{modelId:e,plainText:"placeholder",message:JSON.stringify(r),camera:JSON.stringify(t)}})];case 1:return n=a.sent().data,i=n.addModelComment,[2,Object(p.decodeComment)(i)]}})})}},"./99api/utils/client/folder.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"getModelFolder",function(){return c}),r.d(t,"getAssetFolder",function(){return d});var n=r("./99api/utils/client/gqlClient.ts"),i=r("./99api/graphql/GetModelFolder.gql"),a=r.n(i),o=r("./99api/graphql/GetAssetFolder.gql"),s=r.n(o),l=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},u=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},c=function(){return l(void 0,void 0,void 0,function(){var e,t,r;return u(this,function(i){switch(i.label){case 0:return[4,Object(n.getGQLClient)().query({query:a.a,variables:{}})];case 1:if(e=i.sent(),t=e.data,r=e.errors)throw Error(r[0].message);return[2,t.user.projects[0].modelFolder]}})})},d=function(){return l(void 0,void 0,void 0,function(){var e,t,r;return u(this,function(i){switch(i.label){case 0:return[4,Object(n.getGQLClient)().query({query:s.a,variables:{}})];case 1:if(e=i.sent(),t=e.data,r=e.errors)throw Error(r[0].message);return[2,t.user.projects[0].assetFolder]}})})}},"./99api/utils/client/gqlClient.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"getGQLClient",function(){return d});var n=r("./node_modules/apollo-client/bundle.esm.js"),i=r("./node_modules/apollo-link-http/lib/bundle.esm.js"),a=r("./node_modules/apollo-link/lib/bundle.esm.js"),o=r("./node_modules/apollo-cache-inmemory/lib/bundle.esm.js"),s=r("./node_modules/apollo-link-error/lib/bundle.esm.js"),l=r("./99api/config.ts"),u=function(){return(u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},c={},d=function(){if(c.gqlClient)return c.gqlClient;var e=new i.HttpLink({uri:l.default.endpoint+"/graphql"}),t=Object(s.onError)(function(e){var t=e.graphQLErrors,r=(e.networkError,e.operation),n=e.response;t&&/Expected type \"Id\"/.test(t[0].message)&&(n.errors=[Error("model id is not valid")]),"InitElementProperty"===r.operationName&&t&&t[0]&&"property already exist"===t[0].message&&(n.errors=[Error("element Status cannot be initialized multiple times")])}),r=new a.ApolloLink(function(e,t){var r={"x-access-token":l.default.appToken};return l.default.headers&&(r=u({},l.default.headers,r)),e.setContext({headers:r}),t(e)}),d=new n.ApolloClient({link:a.ApolloLink.from([t,r,e]),cache:new o.InMemoryCache,defaultOptions:{watchQuery:{fetchPolicy:"cache-and-network",errorPolicy:"all"},query:{fetchPolicy:"network-only",errorPolicy:"all"},mutate:{errorPolicy:"all"}}});return c.gqlClient=d,d}},"./99api/utils/client/index.ts":function(e,t,r){"use strict";r.r(t);var n=r("./99api/utils/client/model.ts");r.d(t,"getModel",function(){return n.getModel}),r.d(t,"getModelFiles",function(){return n.getModelFiles}),r.d(t,"deleteModel",function(){return n.deleteModel}),r.d(t,"uploadModel",function(){return n.uploadModel}),r.d(t,"updateModel",function(){return n.updateModel}),r.d(t,"combineModel",function(){return n.combineModel}),r.d(t,"sliceModel",function(){return n.sliceModel}),r.d(t,"mergeModel",function(){return n.mergeModel}),r.d(t,"generate3DPDF",function(){return n.generate3DPDF}),r.d(t,"get3DPDFURL",function(){return n.get3DPDFURL});var i=r("./99api/utils/client/asset.ts");r.d(t,"assetTypes",function(){return i.assetTypes}),r.d(t,"uploadAsset",function(){return i.uploadAsset}),r.d(t,"deleteAsset",function(){return i.deleteAsset}),r.d(t,"getAsset",function(){return i.getAsset}),r.d(t,"updateAsset",function(){return i.updateAsset});var a=r("./99api/utils/client/auth.ts");r.d(t,"signIn",function(){return a.signIn}),r.d(t,"signOut",function(){return a.signOut});var o=r("./99api/utils/client/BIMProperty.ts");r.d(t,"initElementStatus",function(){return o.initElementStatus}),r.d(t,"deleteElementsStatus",function(){return o.deleteElementsStatus}),r.d(t,"addCustomElementsProperty",function(){return o.addCustomElementsProperty}),r.d(t,"addCustomElementProperty",function(){return o.addCustomElementProperty}),r.d(t,"updateElementStatus",function(){return o.updateElementStatus}),r.d(t,"removeCustomElementsProperty",function(){return o.removeCustomElementsProperty}),r.d(t,"removeCustomElementProperty",function(){return o.removeCustomElementProperty}),r.d(t,"updateElementsStatus",function(){return o.updateElementsStatus}),r.d(t,"getElementStatus",function(){return o.getElementStatus}),r.d(t,"getBIMStatus",function(){return o.getBIMStatus}),r.d(t,"getElementsStatus",function(){return o.getElementsStatus}),r.d(t,"getElementProperties",function(){return o.getElementProperties}),r.d(t,"getElementsProperties",function(){return o.getElementsProperties}),r.d(t,"updateElementProperty",function(){return o.updateElementProperty}),r.d(t,"updateElementsProperty",function(){return o.updateElementsProperty});var s=r("./99api/utils/client/BIMTree.ts");r.d(t,"getBimTree",function(){return s.getBimTree});var l=r("./99api/utils/client/folder.ts");r.d(t,"getModelFolder",function(){return l.getModelFolder}),r.d(t,"getAssetFolder",function(){return l.getAssetFolder});var u=r("./99api/utils/client/comment.ts");r.d(t,"getModelComments",function(){return u.getModelComments}),r.d(t,"deleteModelComment",function(){return u.deleteModelComment}),r.d(t,"addModelComment",function(){return u.addModelComment}),r.d(t,"updateModelComment",function(){return u.updateModelComment}),r.d(t,"createComment",function(){return u.createComment});var c=r("./99api/utils/client/selectionSet.ts");r.d(t,"createModelSelectionSet",function(){return c.createModelSelectionSet}),r.d(t,"getModelSelectionSets",function(){return c.getModelSelectionSets}),r.d(t,"updateModelSelectionSet",function(){return c.updateModelSelectionSet}),r.d(t,"deleteModelSelectionSet",function(){return c.deleteModelSelectionSet});var d=r("./99api/utils/client/renderSetting.ts");r.d(t,"getModelRenderSettings",function(){return d.getModelRenderSettings}),r.d(t,"createModelRenderSetting",function(){return d.createModelRenderSetting}),r.d(t,"deleteModelRenderSetting",function(){return d.deleteModelRenderSetting}),r.d(t,"updateModelRenderSetting",function(){return d.updateModelRenderSetting})},"./99api/utils/client/model.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"getModel",function(){return P}),r.d(t,"getModelFiles",function(){return I}),r.d(t,"deleteModel",function(){return N}),r.d(t,"uploadModel",function(){return O}),r.d(t,"updateModel",function(){return R}),r.d(t,"combineModel",function(){return F}),r.d(t,"sliceModel",function(){return C}),r.d(t,"mergeModel",function(){return B}),r.d(t,"generate3DPDF",function(){return L}),r.d(t,"get3DPDFURL",function(){return j});var n=r("./99api/graphql/GetModel.gql"),i=r.n(n),a=r("./99api/graphql/GetModelFiles.gql"),o=r.n(a),s=r("./99api/graphql/DeleteModel.gql"),l=r.n(s),u=r("./99api/graphql/UploadModel.gql"),c=r.n(u),d=r("./99api/graphql/UploadModelSuccess.gql"),h=r.n(d),f=r("./99api/graphql/UpdateModel.gql"),p=r.n(f),m=r("./99api/graphql/AddCombinedModel.gql"),v=r.n(m),_=r("./99api/graphql/AddSliceModel.gql"),g=r.n(_),y=r("./99api/graphql/Generate3DPDF.gql"),b=r.n(y),x=r("./99api/graphql/Get3DPDFURL.gql"),w=r.n(x),E=r("./node_modules/axios/index.js"),M=r.n(E),A=r("./99api/utils/client/gqlClient.ts"),T=r("./99api/utils/client/folder.ts"),S=r("./99api/utils/model/index.ts"),k=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},D=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},P=function(e){return k(void 0,void 0,void 0,function(){var t,r,n;return D(this,function(a){switch(a.label){case 0:return[4,Object(A.getGQLClient)().query({query:i.a,variables:{modelId:e}})];case 1:if(t=a.sent(),r=t.data,n=t.errors,!r||!r.model)throw Error("model does not exist");if(n)throw Error(n[0].message);return[2,V(r.model)]}})})},I=function(e){return k(void 0,void 0,void 0,function(){var t,r,n;return D(this,function(i){switch(i.label){case 0:return[4,Object(A.getGQLClient)().query({query:o.a,variables:{modelId:e},fetchPolicy:"cache-first"})];case 1:if(t=i.sent(),r=t.data,n=t.errors,!r.model)throw Error("model does not exist");if(n)throw Error(n[0].message);return[2,r.model]}})})},N=function(e){return k(void 0,void 0,void 0,function(){var t;return D(this,function(r){switch(r.label){case 0:return[4,Object(A.getGQLClient)().mutate({mutation:l.a,variables:{modelId:e},errorPolicy:"all"})];case 1:if(t=r.sent().errors)throw Error(t[0].message);return[2,e]}})})},O=function(e,t,r){return k(void 0,void 0,void 0,function(){var n,i,a,o,s;return D(this,function(l){switch(l.label){case 0:if(!Object(S.validateFileExt)(e.name))throw Error("file format not valid");return[4,Object(T.getModelFolder)()];case 1:return n=l.sent(),[4,Object(A.getGQLClient)().mutate({mutation:c.a,variables:{folderId:n.id,name:e.name,filenames:[e.name],cvtOptions:t?"-comptex":""}})];case 2:return i=l.sent().data,a=i.uploadModel,o=a.id,s=a.uploadUrls,[4,M.a.put(s[0].url,e,{onUploadProgress:function(e){var t=e.loaded/e.total;r&&r(t)}})];case 3:return l.sent(),[4,Object(A.getGQLClient)().mutate({mutation:h.a,variables:{modelId:o}})];case 4:return[2,V(l.sent().data.uploadModelSuccess)]}})})},R=function(e,t){return k(void 0,void 0,void 0,function(){return D(this,function(r){switch(r.label){case 0:return[4,Object(A.getGQLClient)().mutate({mutation:p.a,variables:{modelId:e,name:t}})];case 1:return r.sent(),[2,e]}})})},F=function(e,t){return k(void 0,void 0,void 0,function(){var r;return D(this,function(n){switch(n.label){case 0:return[4,Object(T.getModelFolder)()];case 1:if(r=n.sent(),2!==t.length)throw Error("combined model requires two models");return[4,Object(A.getGQLClient)().mutate({mutation:v.a,variables:{folderId:r.id,name:e,modelIds:t}})];case 2:return[2,n.sent().data.addCombinedModel]}})})},C=function(e,t){return k(void 0,void 0,void 0,function(){var r;return D(this,function(n){switch(n.label){case 0:return[4,Object(T.getModelFolder)()];case 1:return r=n.sent(),[4,Object(A.getGQLClient)().mutate({mutation:g.a,variables:{name:e,query:t,folderId:r.id}})];case 2:return[2,n.sent().data.sliceModel.id]}})})},B=function(e,t,r){return k(void 0,void 0,void 0,function(){var n,i;return D(this,function(a){switch(a.label){case 0:if(t.length<2)throw Error("merge model requires at least 2 models");if(n={modelFragments:t.map(function(e){return{modelId:e,tree:"*",transform:[]}})},r)for(i=0;i<r.length;i++)n.modelFragments[i].transform=r[i];return[4,C(e,JSON.stringify(n,null,0))];case 1:return[2,a.sent()]}})})},L=function(e){return k(void 0,void 0,void 0,function(){return D(this,function(t){switch(t.label){case 0:if(null==e)throw Error("Please enter a valid modelId");return[4,Object(A.getGQLClient)().mutate({mutation:b.a,variables:{modelId:e}})];case 1:return[2,t.sent().data.modelStartConvertToPdf.assetId]}})})},j=function(e){return k(void 0,void 0,void 0,function(){return D(this,function(t){switch(t.label){case 0:return[4,Object(A.getGQLClient)().query({query:w.a,variables:{assetId:e}})];case 1:return[2,t.sent().data.asset.downloadUrls[0].url]}})})};function V(e){var t,r;return e.downloadUrls&&e.downloadUrls.length&&(t=e.downloadUrls[0],r=e.downloadUrls.filter(function(t){return t.filename!==e.name})),{id:e.id,name:e.name,convertedUrls:e.convertedUrls?e.convertedUrls.map(function(e){return{filename:e.filename,url:e.url}}):null,downloadUrl:t?t.url:null,attachments:r,status:e.status,createdAt:e.createdAt}}},"./99api/utils/client/renderSetting.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"getModelRenderSettings",function(){return m}),r.d(t,"createModelRenderSetting",function(){return v}),r.d(t,"deleteModelRenderSetting",function(){return _}),r.d(t,"updateModelRenderSetting",function(){return g});var n=r("./99api/utils/client/gqlClient.ts"),i=r("./99api/graphql/GetModelRenderSetting.gql"),a=r.n(i),o=r("./99api/graphql/AddModelRenderSetting.gql"),s=r.n(o),l=r("./99api/graphql/DeleteModelRenderSetting.gql"),u=r.n(l),c=r("./99api/graphql/UpdateModelRenderSetting.gql"),d=r.n(c),h=function(){return(h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},f=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},p=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function m(e){return f(this,void 0,void 0,function(){var t,r,i;return p(this,function(o){switch(o.label){case 0:return[4,Object(n.getGQLClient)().query({query:a.a,variables:{modelId:e}})];case 1:if(t=o.sent(),r=t.data,i=t.errors)throw Error(i[0].message);return[2,r.model.settings]}})})}function v(e,t){return f(this,void 0,void 0,function(){var r,i,a;return p(this,function(o){switch(o.label){case 0:return[4,Object(n.getGQLClient)().mutate({mutation:s.a,variables:h({modelId:e},t)})];case 1:if(r=o.sent(),i=r.data,a=r.errors)throw Error(a[0].message);return[2,i]}})})}function _(e){return f(this,void 0,void 0,function(){var t,r,i;return p(this,function(a){switch(a.label){case 0:return[4,Object(n.getGQLClient)().mutate({mutation:u.a,variables:{id:e}})];case 1:if(t=a.sent(),r=t.data,i=t.errors,!r)throw Error("render setting "+e+" does not exist");if(i)throw Error(i[0].message);return[2,e]}})})}function g(e,t){return f(this,void 0,void 0,function(){var r,i,a;return p(this,function(o){switch(o.label){case 0:return[4,Object(n.getGQLClient)().mutate({mutation:d.a,variables:h({},t,{id:e})})];case 1:if(r=o.sent(),i=r.data,a=r.errors,!i)throw Error("render setting "+e+" does not exist");if(a)throw Error(a[0].message);return[2,i.updateModelSettings]}})})}},"./99api/utils/client/selectionSet.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"createModelSelectionSet",function(){return m}),r.d(t,"getModelSelectionSets",function(){return v}),r.d(t,"updateModelSelectionSet",function(){return _}),r.d(t,"deleteModelSelectionSet",function(){return g});var n=r("./99api/graphql/AddModelSelectionSet.gql"),i=r.n(n),a=r("./99api/graphql/GetModelSelectionSets.gql"),o=r.n(a),s=r("./99api/graphql/UpdateModelSelectionSet.gql"),l=r.n(s),u=r("./99api/graphql/DeleteModelSelectionSet.gql"),c=r.n(u),d=r("./99api/utils/client/gqlClient.ts"),h=r("./99api/utils/common/index.ts"),f=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},p=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},m=function(e,t,r){return f(void 0,void 0,void 0,function(){var n;return p(this,function(a){switch(a.label){case 0:return[4,Object(d.getGQLClient)().mutate({mutation:i.a,variables:{name:t,modelId:e,elementIds:r}})];case 1:return n=a.sent().data,[2,Object(h.omitTypes)(n.addModelSelectionSet)]}})})},v=function(e){return f(void 0,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,Object(d.getGQLClient)().query({query:o.a,variables:{modelId:e}})];case 1:return[2,t.sent().data.model.modelSelectionSets.map(function(e){return Object(h.omitTypes)(e)})]}})})},_=function(e,t,r){return f(void 0,void 0,void 0,function(){var n;return p(this,function(i){switch(i.label){case 0:return[4,Object(d.getGQLClient)().mutate({mutation:l.a,variables:{id:e,name:t,elementIds:r}})];case 1:return n=i.sent().data,[2,Object(h.omitTypes)(n.updateModelSelectionSet)]}})})},g=function(e){return f(void 0,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,Object(d.getGQLClient)().mutate({mutation:c.a,variables:{id:e}})];case 1:return t.sent(),[2,e]}})})}},"./99api/utils/common/index.ts":function(e,t,r){"use strict";function n(e){var t=Object.create(null);for(var r in e)"symbol"!=typeof e[r]&&"__typename"!==r&&(t[r]=e[r]);return t}function i(e){var t={id:e.id,renderData:JSON.parse(e.camera),createdAt:e.createdAt};return"{}"!==e.message&&(t.extData=JSON.parse(e.message)),t}function a(e){return e.map(function(e){return i(e)})}r.r(t),r.d(t,"omitTypes",function(){return n}),r.d(t,"decodeComment",function(){return i}),r.d(t,"decodeComments",function(){return a})},"./99api/utils/index.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"hasKeys",function(){return i}),r.d(t,"hasKey",function(){return a}),r.d(t,"oneOf",function(){return o}),r.d(t,"assert",function(){return s}),r.d(t,"isSupportWebGL",function(){return l}),r.d(t,"isSupportWebGL2",function(){return u}),r.d(t,"ViewAngle",function(){return n}),r.d(t,"deprecate",function(){return c}),r.d(t,"getExtension",function(){return d});var n,i=function(e){return function(t){return e.every(function(e){return e in t})}},a=function(e){return function(t){return e in t}},o=function(e){return function(t){return e.includes(t)}};function s(e,t,r){if(!t(e)){var n=JSON.stringify(e,null,2);throw Error(r+" "+n||"validation of "+n+" failed")}}function l(e){var t=e.createElement("canvas");return null!==WebGLUtils.setupWebGL(t,{webgl2:!1})}function u(e){var t=e.createElement("canvas"),r=WebGLUtils.setupWebGL(t,{webgl2:!0});return!!r&&null!==r.getParameter(r.VERSION).match("WebGL 2.0")}function c(e,t){var r=!1;return function(){return r||(console.warn(t),r=!0),e.apply(this,arguments)}}function d(e){var t=e.split(".");return 1===t.length?null:t[t.length-1].toLowerCase()}!function(e){e[e.FRONT=0]="FRONT",e[e.BACK=1]="BACK",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT",e[e.TOP=4]="TOP",e[e.BOTTOM=5]="BOTTOM",e[e.WORLD=6]="WORLD"}(n||(n={}))},"./99api/utils/measure.ts":function(e,t,r){"use strict";function n(e){void 0===e&&(e="#6092e2");var t=document.createElement("div");return t.style.width="16px",t.style.width="16px",t.style.height="16px",t.style.borderRadius="100%",t.style.pointerEvents="none",t.style.backgroundColor=e,t.style.position="absolute",t.style.top="-8px",t.style.left="-10px",t.style.transform="translate(0, 0)",t.style.borderWidth="3px",t.style.display="none",t.style.borderColor=e,t}function i(){var e=document.createElement("div");return e.style.position="relative",e.style.left="0px",e.style.top="-100%",e.style.width="100%",e.style.height="100%",e.style.pointerEvents="none",e.style.overflow="hidden",e}function a(e,t){t?(e.style.display="block",e.style.transform="translate("+t.pos[0]+"px, "+t.pos[1]+"px)","boolean"==typeof t.isSnapped&&(t.isSnapped?(e.style.backgroundColor="transparent",e.style.border="3px solid #f75223"):e.style.backgroundColor="#f75223")):e.style.display="none"}function o(e){void 0===e&&(e="red");var t=document.createElement("div");return t.style.fontSize="14px",t.style.lineHeight="14px",t.style.height="14px",t.style.width="60px",t.style.pointerEvents="none",t.style.position="absolute",t.style.color=e,t.style.transformOrigin="center",t.style.left="0",t.style.top="-7px",t.style.padding="0 10px",t}function s(e,t){t?(t.pos?(e.style.display="block",e.style.transform="translate("+t.pos[0]+"px, "+t.pos[1]+"px)"):e.style.display="none",t.value&&(e.innerText=t.value),t.color&&(e.style.color=t.color)):e.style.display="none"}r.r(t),r.d(t,"createAnchorPoint",function(){return n}),r.d(t,"createOverlays",function(){return i}),r.d(t,"updateAnchorPoint",function(){return a}),r.d(t,"createAnchorValue",function(){return o}),r.d(t,"updateAnchorValue",function(){return s}),r.d(t,"getCenterPoint",function(){return l});var l=function(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2,(e[2]+t[2])/2]}},"./99api/utils/model/downloader.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"generatePromises",function(){return u}),r.d(t,"downloadFile",function(){return c});var n=r("./99api/utils/model/localStorage.ts"),i=r("./99api/utils/client/index.ts"),a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},s=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},l={bin:{mime:"application/octet-binary",responseType:"arraybuffer",type:n.FileTypes.ArrayBuffer},xml:{mime:"application/xml",responseType:"text",type:n.FileTypes.XML},json:{mime:"application/json",responseType:"json",type:n.FileTypes.JSON},txt:{mime:"text/plain",responseType:"text",type:n.FileTypes.Text},csv:{mime:"text/plain",responseType:"text",type:n.FileTypes.Text},jpeg:{mime:"image/jpg",responseType:"blob",type:n.FileTypes.Image},jpg:{mime:"image/jpg",responseType:"blob",type:n.FileTypes.Image},png:{mime:"image/png",responseType:"blob",type:n.FileTypes.Image},gif:{mime:"image/gif",responseType:"blob",type:n.FileTypes.Image},bmp:{mime:"image/bmp",responseType:"blob",type:n.FileTypes.Image}};function u(e,t){return o(this,void 0,void 0,function(){var r,n,l,u=this;return s(this,function(c){switch(c.label){case 0:return r=[],t?(r=t,[3,3]):[3,1];case 1:return[4,Object(i.getModel)(e)];case 2:if(!(n=c.sent()))throw Error("model does not exist");r=n.convertedUrls,c.label=3;case 3:return l={},(r=r.map(function(e){return a({},e,{filename:e.filename.lastIndexOf(".gz")>=0?e.filename.replace(".gz",""):e.filename})})).forEach(function(t){var r,n=[],i=!1,a=function(e){i||n.forEach(function(t){t(e)})},c=new Promise(function(e,t){r=function(){i=!0,e()}});l[t.filename]={progressEvents:n,progressFn:a,cancel:r,filename:t.filename,downloadFile:function(){return o(u,void 0,void 0,function(){return s(this,function(r){return i?[2]:[2,d(e,t,a,c)]})})},onProgress:function(e){n.push(e)}}}),[2,l]}})})}function c(e,t){return d(e,t,function(){})}function d(e,t,r,i){return o(this,void 0,void 0,function(){var a,o;return s(this,function(s){switch(s.label){case 0:return u=t.filename,c=u.split(".").pop()||"",a=l[c.toLowerCase()],[4,Object(n.openFile)("model-"+e+"/"+t.filename,a)];case 1:return(o=s.sent())?[3,3]:[4,f(a,t.url,r,i)];case 2:return o=s.sent().data,Object(n.saveFile)(o,a,"model-"+e+"/"+t.filename).then(function(){}),[3,4];case 3:new ProgressEvent("mesh"),r({loaded:o.byteLength||0,total:o.byteLength||1}),s.label=4;case 4:return"blob"!==a.responseType?[2,{data:o}]:[2,h(o,t.filename)]}var u,c})})}function h(e,t){return o(this,void 0,void 0,function(){var r,n;return s(this,function(i){return r=window.URL||window.webkitURL,n=r.createObjectURL(e),[2,new Promise(function(e,r){var i=new Image;i.name=t,i.src=n,i.crossOrigin="",i.onload=function(){return e(i)},i.onerror=function(e){r("error downloading image:"+t)}})]})})}function f(e,t,r,n){return o(this,void 0,void 0,function(){return s(this,function(i){return[2,new Promise(function(i,a){var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType=e.responseType,o.onload=function(){200===o.status||206===o.status?i({data:o.response}):a()},o.onprogress=function(e){r(e)},o.onerror=function(e){a(e)},n&&n.then(function(){o.abort()}),o.send()})]})})}},"./99api/utils/model/index.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"validateFileExt",function(){return a});var n=r("./99api/utils/model/downloader.ts");r.d(t,"generatePromises",function(){return n.generatePromises}),r.d(t,"downloadFile",function(){return n.downloadFile});var i=[".obj",".3dm",".skp",".stl",".m3d",".zip",".ifc",".rvt",".fbx",".rfa",".nwc",".nwd",".s3d",".max",".dgn"];function a(e){return i.some(function(t){return e.toLowerCase().endsWith(t)})}},"./99api/utils/model/localStorage.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"FileTypes",function(){return n}),r.d(t,"openFile",function(){return h}),r.d(t,"saveFile",function(){return p});var n,i=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},a=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};!function(e){e.Text="text",e.ArrayBuffer="arraybuffer",e.Image="blob",e.JSON="json",e.XML="text"}(n||(n={}));var o=(/Chrome/.test(navigator.userAgent)||/Safari/.test(navigator.userAgent))&&(/Google Inc/.test(navigator.vendor)||/Apple Computer, Inc/.test(navigator.vendor)),s={temporary:1073741824};function l(e,t){return i(this,void 0,void 0,function(){var r;return a(this,function(i){return r=new FileReader,[2,new Promise(function(i,a){switch(r.onloadend=function(){void 0!==r.result||null!==r.result?i(r.result):a(r.error)},e.type){case n.JSON:case n.XML:r.readAsText(t);break;case n.ArrayBuffer:case n.Image:r.readAsArrayBuffer(t);break;default:throw new Error("File has no type")}})]})})}function u(e,t){return i(this,void 0,void 0,function(){var r;return a(this,function(n){return r={create:t},[2,new Promise(function(t,n){(function(){return i(this,void 0,void 0,function(){return a(this,function(e){return[2,new Promise(function(e,t){o&&(window.requestFileSystem||window.webkitRequestFileSystem)?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,s.temporary,e,t)):t("FILESYSTEM_NOT_SUPPORTED")})]})})})().then(function(i){return i.root.getDirectory(e,r,t,n)}).catch(n)})]})})}function c(e,t,r){return i(this,void 0,void 0,function(){var n;return a(this,function(i){return n={create:t},[2,new Promise(function(i,a){u(e,t).then(function(e){return e.getFile(r,n,i,a)}).catch(a)})]})})}function d(e){var t=e.split("/").pop()||"";return{directory:e.replace(t,""),fileName:t}}function h(e,t){return i(this,void 0,void 0,function(){return a(this,function(r){return[2,f(e,t).then(function(e){return e}).catch(function(e){return null})]})})}function f(e,t){return i(this,void 0,void 0,function(){var r,i,o,s,u,h;return a(this,function(a){switch(a.label){case 0:return r=d(e),i=r.directory,o=r.fileName,[4,c(i,!1,o)];case 1:return s=a.sent(),[4,new Promise(function(e,t){return s.file(e,t)})];case 2:if(0===(u=a.sent()).size)throw new Error("FILE_SIZE_ZERO");return[4,l(t,u)];case 3:return h=a.sent(),t.type===n.Image?[2,new Blob([h],{type:t.mime})]:t.type===n.JSON?[2,JSON.parse(h)]:[2,h]}})})}function p(e,t,r){return i(this,void 0,void 0,function(){var i,o;return a(this,function(a){return t.type===n.JSON?(o=JSON.stringify(e),i=new Blob([o],{type:t.mime})):i=t.type===n.Image?e:new Blob([e],{type:t.mime}),[2,m(r,i,!1)]})})}function m(e,t,r){return i(this,void 0,void 0,function(){var r,n,i,o,s;return a(this,function(a){switch(a.label){case 0:return r=d(e),n=r.directory,i=r.fileName,[4,c(n,!0,i)];case 1:return o=a.sent(),[4,new Promise(function(e){return o.createWriter(e)})];case 2:return s=a.sent(),[2,new Promise(function(e,r){s.onerror=function(e){return r()},s.onwriteend=function(){return e()},s.write(t)})]}})})}},"./99api/utils/propertyGroups.json":function(e){e.exports={0:"PG_IDENTITY_DATA",1:"PG_GEOMETRY",3:"PG_CONSTRUCTION",4:"PG_GRAPHICS",5:"PG_MATERIALS",6:"PG_UNDERLAY",7:"PG_STAIR_TREADS",8:"PG_STAIR_RISERS",9:"PG_STAIR_STRINGERS",10:"PG_ELECTRICAL",11:"PG_PLUMBING",12:"PG_STRUCTURAL",13:"PG_MECHANICAL",14:"PG_PHASING",19:"PG_CONSTRAINTS",20:"PG_PATTERN",21:"PG_VIEW_EXTENTS",22:"PG_VIEW_CAMERA",23:"PG_TEXT",24:"PG_ELECTRICAL_LIGHTING",25:"PG_ELECTRICAL_LOADS",26:"PG_MECHANICAL_LOADS",27:"PG_MECHANICAL_AIRFLOW",28:"PG_STRUCTURAL_ANALYSIS",29:"PG_ENERGY_ANALYSIS",30:"PG_AELECTRICAL",31:"PG_IFC",33:"PG_CURTAIN_GRID_VERT",34:"PG_CURTAIN_GRID_1",35:"PG_CURTAIN_GRID_HORIZ",36:"PG_CURTAIN_GRID_2",37:"PG_CURTAIN_MULLION_VERT",38:"PG_CURTAIN_MULLION_1",39:"PG_CURTAIN_MULLION_HORIZ",40:"PG_CURTAIN_MULLION_2",41:"PG_CURTAIN_GRID",43:"PG_REBAR_SYSTEM_LAYERS",44:"PG_REBAR_ARRAY",45:"PG_ANALYTICAL_MODEL",46:"PG_TRANSLATION_IN",47:"PG_ROTATION_ABOUT",48:"PG_FIRE_PROTECTION",49:"PG_TITLE",50:"PG_TRUSS_FAMILY_VERT_WEB",51:"PG_TRUSS_FAMILY_DIAG_WEB",52:"PG_TRUSS_FAMILY_TOP_CHORD",53:"PG_TRUSS_FAMILY_BOTTOM_CHORD",54:"PG_PROFILE",55:"PG_PROFILE_1",56:"PG_PROFILE_2",57:"PG_GREEN_BUILDING",58:"PG_PATTERN_APPLICATION",59:"PG_LIGHT_PHOTOMETRICS",60:"PG_SLAB_SHAPE_EDIT",61:"PG_ANALYSIS_RESULTS",62:"PG_DISPLAY",63:"PG_CURTAIN_GRID_U",64:"PG_CURTAIN_GRID_V",65:"PG_ADSK_MODEL_PROPERTIES",66:"PG_AREA",67:"PG_CONCEPTUAL_ENERGY_DATA",68:"PG_FITTING",69:"PG_ENERGY_ANALYSIS_DETAILED_AND_CONCEPTUAL_MODELS",70:"PG_ENERGY_ANALYSIS_DETAILED_MODEL",71:"PG_ENERGY_ANALYSIS_CONCEPTUAL_MODEL",72:"PG_FLEXIBLE",73:"PG_GENERAL",74:"PG_ELECTRICAL_CIRCUITING",75:"PG_DATA",76:"PG_CONCEPTUAL_ENERGY_DATA_BUILDING_SERVICES",77:"PG_RAILING_SYSTEM_FAMILY_TOP_RAIL",78:"PG_RAILING_SYSTEM_FAMILY_HANDRAILS",79:"PG_RAILING_SYSTEM_FAMILY_SEGMENT_PATTERN",80:"PG_RAILING_SYSTEM_SEGMENT_PATTERN_REPEAT",81:"PG_RAILING_SYSTEM_SEGMENT_PATTERN_REMAINDER",82:"PG_RAILING_SYSTEM_SEGMENT_POSTS",83:"PG_RAILING_SYSTEM_SEGMENT_U_GRID",84:"PG_RAILING_SYSTEM_SEGMENT_V_GRID",85:"PG_SUPPORT",86:"PG_VISIBILITY",87:"PG_OVERALL_LEGEND",88:"PG_INSULATION",89:"PG_LINING",90:"PG_SYSTEMTYPE_RISEDROP",91:"PG_ANALYTICAL_ALIGNMENT",92:"PG_ANALYTICAL_PROPERTIES",93:"PG_NODES",94:"PG_LENGTH",95:"PG_SPLIT_PROFILE_DIMENSIONS",96:"PG_STAIRS_CALCULATOR_RULES",97:"PG_STAIRS_TREADS_RISERS",98:"PG_TERMINTATION",99:"PG_RAILING_SYSTEM_SECONDARY_FAMILY_HANDRAILS",100:"PG_STAIRS_OPEN_END_CONNECTION",101:"PG_STAIRS_SUPPORTS",102:"PG_STAIRS_WINDERS",103:"PG_CONTINUOUSRAIL_BEGIN_BOTTOM_EXTENSION",104:"PG_CONTINUOUSRAIL_END_TOP_EXTENSION",105:"PG_SEGMENTS_FITTINGS",106:"PG_DIVISION_GEOMETRY",107:"PG_GEOMETRY_POSITIONING",108:"PG_REFERENCE",110:"PG_FABRICATION_PRODUCT_DATA",111:"PG_FORCES",112:"PG_MOMENTS",113:"PG_PRIMARY_END",114:"PG_SECONDARY_END",116:"PG_RELEASES_MEMBER_FORCES",117:"PG_ENERGY_ANALYSIS_ADVANCED",118:"PG_COUPLER_ARRAY",119:"PG_ENERGY_ANALYSIS_BUILDING_DATA",120:"PG_ENERGY_ANALYSIS_ROOM_SPACE_DATA",121:"PG_ENERGY_ANALYSIS_BLDG_CONS_MTL_THERMAL_PROPS",125:"PG_STRUCTURAL_SECTION_GEOMETRY",126:"PG_GEO_LOCATION",688:"MODELO_PROPERTIES",689:"MODELO_CUSTOM_PROPERTIES",888:"MODELO_CONNECTED_DATA","-1":"INVALID"}},"./99api/utils/types.ts":function(e,t,r){"use strict";var n;r.r(t),r.d(t,"BIMTreeNodeType",function(){return n}),function(e){e.Family="family",e.Level="level",e.Element="element",e.Category="category",e.Type="type",e.File="file"}(n||(n={}))},"./glMatrix.js":function(e,t,r){var n;n=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){t.glMatrix=r(1),t.mat2=r(2),t.mat2d=r(3),t.mat3=r(4),t.mat4=r(5),t.quat=r(6),t.vec2=r(9),t.vec3=r(7),t.vec4=r(8)},function(e,t){var r={EPSILON:1e-6};r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.ENABLE_SIMD=!1,r.SIMD_AVAILABLE=r.ARRAY_TYPE===Float32Array&&"SIMD"in this,r.USE_SIMD=r.ENABLE_SIMD&&r.SIMD_AVAILABLE,r.setMatrixArrayType=function(e){r.ARRAY_TYPE=e};var n=Math.PI/180;r.toRadian=function(e){return e*n},e.exports=r},function(e,t,r){var n=r(1),i={create:function(){var e=new n.ARRAY_TYPE(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},clone:function(e){var t=new n.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},transpose:function(e,t){if(e===t){var r=t[1];e[1]=t[2],e[2]=r}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},invert:function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r*a-i*n;return o?(o=1/o,e[0]=a*o,e[1]=-n*o,e[2]=-i*o,e[3]=r*o,e):null},adjoint:function(e,t){var r=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=r,e},determinant:function(e){return e[0]*e[3]-e[2]*e[1]},multiply:function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=r[0],l=r[1],u=r[2],c=r[3];return e[0]=n*s+a*l,e[1]=i*s+o*l,e[2]=n*u+a*c,e[3]=i*u+o*c,e}};i.mul=i.multiply,i.rotate=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+a*s,e[1]=i*l+o*s,e[2]=n*-s+a*l,e[3]=i*-s+o*l,e},i.scale=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=r[0],l=r[1];return e[0]=n*s,e[1]=i*s,e[2]=a*l,e[3]=o*l,e},i.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e},i.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},i.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},i.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},i.LDU=function(e,t,r,n){return e[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-e[2]*r[1],[e,t,r]},e.exports=i},function(e,t,r){var n=r(1),i={create:function(){var e=new n.ARRAY_TYPE(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},clone:function(e){var t=new n.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},invert:function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=r*a-n*i;return l?(l=1/l,e[0]=a*l,e[1]=-n*l,e[2]=-i*l,e[3]=r*l,e[4]=(i*s-a*o)*l,e[5]=(n*o-r*s)*l,e):null},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=r[0],c=r[1],d=r[2],h=r[3],f=r[4],p=r[5];return e[0]=n*u+a*c,e[1]=i*u+o*c,e[2]=n*d+a*h,e[3]=i*d+o*h,e[4]=n*f+a*p+s,e[5]=i*f+o*p+l,e}};i.mul=i.multiply,i.rotate=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+a*u,e[1]=i*c+o*u,e[2]=n*-u+a*c,e[3]=i*-u+o*c,e[4]=s,e[5]=l,e},i.scale=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=r[0],c=r[1];return e[0]=n*u,e[1]=i*u,e[2]=a*c,e[3]=o*c,e[4]=s,e[5]=l,e},i.translate=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=r[0],c=r[1];return e[0]=n,e[1]=i,e[2]=a,e[3]=o,e[4]=n*u+a*c+s,e[5]=i*u+o*c+l,e},i.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e},i.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},i.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},i.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},i.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},e.exports=i},function(e,t,r){var n=r(1),i={create:function(){var e=new n.ARRAY_TYPE(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat4:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},clone:function(e){var t=new n.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},transpose:function(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},invert:function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=c*o-s*u,h=-c*a+s*l,f=u*a-o*l,p=r*d+n*h+i*f;return p?(p=1/p,e[0]=d*p,e[1]=(-c*n+i*u)*p,e[2]=(s*n-i*o)*p,e[3]=h*p,e[4]=(c*r-i*l)*p,e[5]=(-s*r+i*a)*p,e[6]=f*p,e[7]=(-u*r+n*l)*p,e[8]=(o*r-n*a)*p,e):null},adjoint:function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=o*c-s*u,e[1]=i*u-n*c,e[2]=n*s-i*o,e[3]=s*l-a*c,e[4]=r*c-i*l,e[5]=i*a-r*s,e[6]=a*u-o*l,e[7]=n*l-r*u,e[8]=r*o-n*a,e},determinant:function(e){var t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*(u*a-o*l)+r*(-u*i+o*s)+n*(l*i-a*s)},multiply:function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=r[0],f=r[1],p=r[2],m=r[3],v=r[4],_=r[5],g=r[6],y=r[7],b=r[8];return e[0]=h*n+f*o+p*u,e[1]=h*i+f*s+p*c,e[2]=h*a+f*l+p*d,e[3]=m*n+v*o+_*u,e[4]=m*i+v*s+_*c,e[5]=m*a+v*l+_*d,e[6]=g*n+y*o+b*u,e[7]=g*i+y*s+b*c,e[8]=g*a+y*l+b*d,e}};i.mul=i.multiply,i.translate=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=r[0],f=r[1];return e[0]=n,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=h*n+f*o+u,e[7]=h*i+f*s+c,e[8]=h*a+f*l+d,e},i.rotate=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=Math.sin(r),f=Math.cos(r);return e[0]=f*n+h*o,e[1]=f*i+h*s,e[2]=f*a+h*l,e[3]=f*o-h*n,e[4]=f*s-h*i,e[5]=f*l-h*a,e[6]=u,e[7]=c,e[8]=d,e},i.scale=function(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},i.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},i.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},i.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},i.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},i.fromQuat=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r+r,s=n+n,l=i+i,u=r*o,c=n*o,d=n*s,h=i*o,f=i*s,p=i*l,m=a*o,v=a*s,_=a*l;return e[0]=1-d-p,e[3]=c-_,e[6]=h+v,e[1]=c+_,e[4]=1-u-p,e[7]=f-m,e[2]=h-v,e[5]=f+m,e[8]=1-u-d,e},i.normalFromMat4=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],v=t[14],_=t[15],g=r*s-n*o,y=r*l-i*o,b=r*u-a*o,x=n*l-i*s,w=n*u-a*s,E=i*u-a*l,M=c*m-d*p,A=c*v-h*p,T=c*_-f*p,S=d*v-h*m,k=d*_-f*m,D=h*_-f*v,P=g*D-y*k+b*S+x*T-w*A+E*M;return P?(P=1/P,e[0]=(s*D-l*k+u*S)*P,e[1]=(l*T-o*D-u*A)*P,e[2]=(o*k-s*T+u*M)*P,e[3]=(i*k-n*D-a*S)*P,e[4]=(r*D-i*T+a*A)*P,e[5]=(n*T-r*k-a*M)*P,e[6]=(m*E-v*w+_*x)*P,e[7]=(v*b-p*E-_*y)*P,e[8]=(p*w-m*b+_*g)*P,e):null},i.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},i.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},e.exports=i},function(e,t,r){var n=r(1),i={scalar:{},SIMD:{},fromValues:function(e,t,r,n,i,a,o,s,l,u,c,d,h,f,p,m){var v=new Float32Array(16);return v[0]=e,v[1]=t,v[2]=r,v[3]=n,v[4]=i,v[5]=a,v[6]=o,v[7]=s,v[8]=l,v[9]=u,v[10]=c,v[11]=d,v[12]=h,v[13]=f,v[14]=p,v[15]=m,v},create:function(){var e=new n.ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},clone:function(e){var t=new n.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},multiplyScalar:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}};i.scalar.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},i.SIMD.transpose=function(e,t){var r,n,i,a,o,s,l,u,c,d;return r=SIMD.Float32x4.load(t,0),n=SIMD.Float32x4.load(t,4),i=SIMD.Float32x4.load(t,8),a=SIMD.Float32x4.load(t,12),o=SIMD.Float32x4.shuffle(r,n,0,1,4,5),s=SIMD.Float32x4.shuffle(i,a,0,1,4,5),l=SIMD.Float32x4.shuffle(o,s,0,2,4,6),u=SIMD.Float32x4.shuffle(o,s,1,3,5,7),SIMD.Float32x4.store(e,0,l),SIMD.Float32x4.store(e,4,u),o=SIMD.Float32x4.shuffle(r,n,2,3,6,7),s=SIMD.Float32x4.shuffle(i,a,2,3,6,7),c=SIMD.Float32x4.shuffle(o,s,0,2,4,6),d=SIMD.Float32x4.shuffle(o,s,1,3,5,7),SIMD.Float32x4.store(e,8,c),SIMD.Float32x4.store(e,12,d),e},i.transpose=n.USE_SIMD?i.SIMD.transpose:i.scalar.transpose,i.scalar.invert=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],v=t[14],_=t[15],g=r*s-n*o,y=r*l-i*o,b=r*u-a*o,x=n*l-i*s,w=n*u-a*s,E=i*u-a*l,M=c*m-d*p,A=c*v-h*p,T=c*_-f*p,S=d*v-h*m,k=d*_-f*m,D=h*_-f*v,P=g*D-y*k+b*S+x*T-w*A+E*M;return P?(P=1/P,e[0]=(s*D-l*k+u*S)*P,e[1]=(i*k-n*D-a*S)*P,e[2]=(m*E-v*w+_*x)*P,e[3]=(h*w-d*E-f*x)*P,e[4]=(l*T-o*D-u*A)*P,e[5]=(r*D-i*T+a*A)*P,e[6]=(v*b-p*E-_*y)*P,e[7]=(c*E-h*b+f*y)*P,e[8]=(o*k-s*T+u*M)*P,e[9]=(n*T-r*k-a*M)*P,e[10]=(p*w-m*b+_*g)*P,e[11]=(d*b-c*w-f*g)*P,e[12]=(s*A-o*S-l*M)*P,e[13]=(r*S-n*A+i*M)*P,e[14]=(m*y-p*x-v*g)*P,e[15]=(c*x-d*y+h*g)*P,e):null},i.SIMD.invert=function(e,t){var r,n,i,a,o,s,l,u,c,d,h=SIMD.Float32x4.load(t,0),f=SIMD.Float32x4.load(t,4),p=SIMD.Float32x4.load(t,8),m=SIMD.Float32x4.load(t,12);return o=SIMD.Float32x4.shuffle(h,f,0,1,4,5),n=SIMD.Float32x4.shuffle(p,m,0,1,4,5),r=SIMD.Float32x4.shuffle(o,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,o,1,3,5,7),o=SIMD.Float32x4.shuffle(h,f,2,3,6,7),a=SIMD.Float32x4.shuffle(p,m,2,3,6,7),i=SIMD.Float32x4.shuffle(o,a,0,2,4,6),a=SIMD.Float32x4.shuffle(a,o,1,3,5,7),o=SIMD.Float32x4.mul(i,a),o=SIMD.Float32x4.swizzle(o,1,0,3,2),s=SIMD.Float32x4.mul(n,o),l=SIMD.Float32x4.mul(r,o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,o),s),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,o),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),o=SIMD.Float32x4.mul(n,i),o=SIMD.Float32x4.swizzle(o,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,o),s),c=SIMD.Float32x4.mul(r,o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(a,o)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,o),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),o=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),a),o=SIMD.Float32x4.swizzle(o,1,0,3,2),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),s),u=SIMD.Float32x4.mul(r,o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(i,o)),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,o),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),o=SIMD.Float32x4.mul(r,n),o=SIMD.Float32x4.swizzle(o,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,o),u),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),c),o=SIMD.Float32x4.swizzle(o,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,o),u),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(i,o)),o=SIMD.Float32x4.mul(r,a),o=SIMD.Float32x4.swizzle(o,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(i,o)),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,o),u),o=SIMD.Float32x4.swizzle(o,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),l),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(n,o)),o=SIMD.Float32x4.mul(r,i),o=SIMD.Float32x4.swizzle(o,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,o),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,o)),o=SIMD.Float32x4.swizzle(o,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(a,o)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,o),c),d=SIMD.Float32x4.mul(r,s),d=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(d,2,3,0,1),d),d=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(d,1,0,3,2),d),o=SIMD.Float32x4.reciprocalApproximation(d),d=SIMD.Float32x4.sub(SIMD.Float32x4.add(o,o),SIMD.Float32x4.mul(d,SIMD.Float32x4.mul(o,o))),(d=SIMD.Float32x4.swizzle(d,0,0,0,0))?(SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(d,s)),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(d,l)),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(d,u)),SIMD.Float32x4.store(e,12,SIMD.Float32x4.mul(d,c)),e):null},i.invert=n.USE_SIMD?i.SIMD.invert:i.scalar.invert,i.scalar.adjoint=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],v=t[14],_=t[15];return e[0]=s*(h*_-f*v)-d*(l*_-u*v)+m*(l*f-u*h),e[1]=-(n*(h*_-f*v)-d*(i*_-a*v)+m*(i*f-a*h)),e[2]=n*(l*_-u*v)-s*(i*_-a*v)+m*(i*u-a*l),e[3]=-(n*(l*f-u*h)-s*(i*f-a*h)+d*(i*u-a*l)),e[4]=-(o*(h*_-f*v)-c*(l*_-u*v)+p*(l*f-u*h)),e[5]=r*(h*_-f*v)-c*(i*_-a*v)+p*(i*f-a*h),e[6]=-(r*(l*_-u*v)-o*(i*_-a*v)+p*(i*u-a*l)),e[7]=r*(l*f-u*h)-o*(i*f-a*h)+c*(i*u-a*l),e[8]=o*(d*_-f*m)-c*(s*_-u*m)+p*(s*f-u*d),e[9]=-(r*(d*_-f*m)-c*(n*_-a*m)+p*(n*f-a*d)),e[10]=r*(s*_-u*m)-o*(n*_-a*m)+p*(n*u-a*s),e[11]=-(r*(s*f-u*d)-o*(n*f-a*d)+c*(n*u-a*s)),e[12]=-(o*(d*v-h*m)-c*(s*v-l*m)+p*(s*h-l*d)),e[13]=r*(d*v-h*m)-c*(n*v-i*m)+p*(n*h-i*d),e[14]=-(r*(s*v-l*m)-o*(n*v-i*m)+p*(n*l-i*s)),e[15]=r*(s*h-l*d)-o*(n*h-i*d)+c*(n*l-i*s),e},i.SIMD.adjoint=function(e,t){var r,n,i,a,o,s,l,u,c,d=SIMD.Float32x4.load(t,0),h=SIMD.Float32x4.load(t,4),f=SIMD.Float32x4.load(t,8),p=SIMD.Float32x4.load(t,12);return o=SIMD.Float32x4.shuffle(d,h,0,1,4,5),n=SIMD.Float32x4.shuffle(f,p,0,1,4,5),r=SIMD.Float32x4.shuffle(o,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,o,1,3,5,7),o=SIMD.Float32x4.shuffle(d,h,2,3,6,7),a=SIMD.Float32x4.shuffle(f,p,2,3,6,7),i=SIMD.Float32x4.shuffle(o,a,0,2,4,6),a=SIMD.Float32x4.shuffle(a,o,1,3,5,7),o=SIMD.Float32x4.mul(i,a),o=SIMD.Float32x4.swizzle(o,1,0,3,2),s=SIMD.Float32x4.mul(n,o),l=SIMD.Float32x4.mul(r,o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,o),s),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,o),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),o=SIMD.Float32x4.mul(n,i),o=SIMD.Float32x4.swizzle(o,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,o),s),c=SIMD.Float32x4.mul(r,o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(a,o)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,o),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),o=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),a),o=SIMD.Float32x4.swizzle(o,1,0,3,2),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),s),u=SIMD.Float32x4.mul(r,o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(i,o)),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,o),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),o=SIMD.Float32x4.mul(r,n),o=SIMD.Float32x4.swizzle(o,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,o),u),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),c),o=SIMD.Float32x4.swizzle(o,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,o),u),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(i,o)),o=SIMD.Float32x4.mul(r,a),o=SIMD.Float32x4.swizzle(o,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(i,o)),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,o),u),o=SIMD.Float32x4.swizzle(o,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),l),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(n,o)),o=SIMD.Float32x4.mul(r,i),o=SIMD.Float32x4.swizzle(o,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,o),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,o)),o=SIMD.Float32x4.swizzle(o,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(a,o)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,o),c),SIMD.Float32x4.store(e,0,s),SIMD.Float32x4.store(e,4,l),SIMD.Float32x4.store(e,8,u),SIMD.Float32x4.store(e,12,c),e},i.adjoint=n.USE_SIMD?i.SIMD.adjoint:i.scalar.adjoint,i.determinant=function(e){var t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],v=e[15];return(t*o-r*a)*(d*v-h*m)-(t*s-n*a)*(c*v-h*p)+(t*l-i*a)*(c*m-d*p)+(r*s-n*o)*(u*v-h*f)-(r*l-i*o)*(u*m-d*f)+(n*l-i*s)*(u*p-c*f)},i.SIMD.multiply=function(e,t,r){var n=SIMD.Float32x4.load(t,0),i=SIMD.Float32x4.load(t,4),a=SIMD.Float32x4.load(t,8),o=SIMD.Float32x4.load(t,12),s=SIMD.Float32x4.load(r,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),o))));SIMD.Float32x4.store(e,0,l);var u=SIMD.Float32x4.load(r,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),o))));SIMD.Float32x4.store(e,4,c);var d=SIMD.Float32x4.load(r,8),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),o))));SIMD.Float32x4.store(e,8,h);var f=SIMD.Float32x4.load(r,12),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),o))));return SIMD.Float32x4.store(e,12,p),e},i.scalar.multiply=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=t[9],f=t[10],p=t[11],m=t[12],v=t[13],_=t[14],g=t[15],y=r[0],b=r[1],x=r[2],w=r[3];return e[0]=y*n+b*s+x*d+w*m,e[1]=y*i+b*l+x*h+w*v,e[2]=y*a+b*u+x*f+w*_,e[3]=y*o+b*c+x*p+w*g,y=r[4],b=r[5],x=r[6],w=r[7],e[4]=y*n+b*s+x*d+w*m,e[5]=y*i+b*l+x*h+w*v,e[6]=y*a+b*u+x*f+w*_,e[7]=y*o+b*c+x*p+w*g,y=r[8],b=r[9],x=r[10],w=r[11],e[8]=y*n+b*s+x*d+w*m,e[9]=y*i+b*l+x*h+w*v,e[10]=y*a+b*u+x*f+w*_,e[11]=y*o+b*c+x*p+w*g,y=r[12],b=r[13],x=r[14],w=r[15],e[12]=y*n+b*s+x*d+w*m,e[13]=y*i+b*l+x*h+w*v,e[14]=y*a+b*u+x*f+w*_,e[15]=y*o+b*c+x*p+w*g,e},i.multiply=n.USE_SIMD?i.SIMD.multiply:i.scalar.multiply,i.mul=i.multiply,i.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},i.getScaling=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[4],o=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.sqrt(r*r+n*n+i*i),e[1]=Math.sqrt(a*a+o*o+s*s),e[2]=Math.sqrt(l*l+u*u+c*c),e},i.getRotation=function(e,t){var r=t[0]+t[5]+t[10],n=0;return r>0?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e},i.scalar.translate=function(e,t,r){var n,i,a,o,s,l,u,c,d,h,f,p,m=r[0],v=r[1],_=r[2];return t===e?(e[12]=t[0]*m+t[4]*v+t[8]*_+t[12],e[13]=t[1]*m+t[5]*v+t[9]*_+t[13],e[14]=t[2]*m+t[6]*v+t[10]*_+t[14],e[15]=t[3]*m+t[7]*v+t[11]*_+t[15]):(n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=t[9],f=t[10],p=t[11],e[0]=n,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=d,e[9]=h,e[10]=f,e[11]=p,e[12]=n*m+s*v+d*_+t[12],e[13]=i*m+l*v+h*_+t[13],e[14]=a*m+u*v+f*_+t[14],e[15]=o*m+c*v+p*_+t[15]),e},i.SIMD.translate=function(e,t,r){var n=SIMD.Float32x4.load(t,0),i=SIMD.Float32x4.load(t,4),a=SIMD.Float32x4.load(t,8),o=SIMD.Float32x4.load(t,12),s=SIMD.Float32x4(r[0],r[1],r[2],0);t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(s,0,0,0,0)),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(s,1,1,1,1)),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(s,2,2,2,2));var l=SIMD.Float32x4.add(n,SIMD.Float32x4.add(i,SIMD.Float32x4.add(a,o)));return SIMD.Float32x4.store(e,12,l),e},i.translate=n.USE_SIMD?i.SIMD.translate:i.scalar.translate,i.scalar.scale=function(e,t,r){var n=r[0],i=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},i.SIMD.scale=function(e,t,r){var n,i,a,o=SIMD.Float32x4(r[0],r[1],r[2],0);return n=SIMD.Float32x4.load(t,0),SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(o,0,0,0,0))),i=SIMD.Float32x4.load(t,4),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(o,1,1,1,1))),a=SIMD.Float32x4.load(t,8),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(o,2,2,2,2))),e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},i.scale=n.USE_SIMD?i.SIMD.scale:i.scalar.scale,i.rotate=function(e,t,r,i){var a,o,s,l,u,c,d,h,f,p,m,v,_,g,y,b,x,w,E,M,A,T,S,k,D=i[0],P=i[1],I=i[2],N=Math.sqrt(D*D+P*P+I*I);return Math.abs(N)<n.EPSILON?null:(D*=N=1/N,P*=N,I*=N,a=Math.sin(r),s=1-(o=Math.cos(r)),l=t[0],u=t[1],c=t[2],d=t[3],h=t[4],f=t[5],p=t[6],m=t[7],v=t[8],_=t[9],g=t[10],y=t[11],b=D*D*s+o,x=P*D*s+I*a,w=I*D*s-P*a,E=D*P*s-I*a,M=P*P*s+o,A=I*P*s+D*a,T=D*I*s+P*a,S=P*I*s-D*a,k=I*I*s+o,e[0]=l*b+h*x+v*w,e[1]=u*b+f*x+_*w,e[2]=c*b+p*x+g*w,e[3]=d*b+m*x+y*w,e[4]=l*E+h*M+v*A,e[5]=u*E+f*M+_*A,e[6]=c*E+p*M+g*A,e[7]=d*E+m*M+y*A,e[8]=l*T+h*S+v*k,e[9]=u*T+f*S+_*k,e[10]=c*T+p*S+g*k,e[11]=d*T+m*S+y*k,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},i.scalar.rotateX=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+u*n,e[5]=o*i+c*n,e[6]=s*i+d*n,e[7]=l*i+h*n,e[8]=u*i-a*n,e[9]=c*i-o*n,e[10]=d*i-s*n,e[11]=h*i-l*n,e},i.SIMD.rotateX=function(e,t,r){var n=SIMD.Float32x4.splat(Math.sin(r)),i=SIMD.Float32x4.splat(Math.cos(r));t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var a=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),SIMD.Float32x4.mul(o,n))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),SIMD.Float32x4.mul(a,n))),e},i.rotateX=n.USE_SIMD?i.SIMD.rotateX:i.scalar.rotateX,i.scalar.rotateY=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],s=t[2],l=t[3],u=t[8],c=t[9],d=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-u*n,e[1]=o*i-c*n,e[2]=s*i-d*n,e[3]=l*i-h*n,e[8]=a*n+u*i,e[9]=o*n+c*i,e[10]=s*n+d*i,e[11]=l*n+h*i,e},i.SIMD.rotateY=function(e,t,r){var n=SIMD.Float32x4.splat(Math.sin(r)),i=SIMD.Float32x4.splat(Math.cos(r));t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var a=SIMD.Float32x4.load(t,0),o=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),SIMD.Float32x4.mul(o,n))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(a,n),SIMD.Float32x4.mul(o,i))),e},i.rotateY=n.USE_SIMD?i.SIMD.rotateY:i.scalar.rotateY,i.scalar.rotateZ=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+u*n,e[1]=o*i+c*n,e[2]=s*i+d*n,e[3]=l*i+h*n,e[4]=u*i-a*n,e[5]=c*i-o*n,e[6]=d*i-s*n,e[7]=h*i-l*n,e},i.SIMD.rotateZ=function(e,t,r){var n=SIMD.Float32x4.splat(Math.sin(r)),i=SIMD.Float32x4.splat(Math.cos(r));t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var a=SIMD.Float32x4.load(t,0),o=SIMD.Float32x4.load(t,4);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),SIMD.Float32x4.mul(o,n))),SIMD.Float32x4.store(e,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),SIMD.Float32x4.mul(a,n))),e},i.rotateZ=n.USE_SIMD?i.SIMD.rotateZ:i.scalar.rotateZ,i.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},i.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.fromRotation=function(e,t,r){var i,a,o,s=r[0],l=r[1],u=r[2],c=Math.sqrt(s*s+l*l+u*u);return Math.abs(c)<n.EPSILON?null:(s*=c=1/c,l*=c,u*=c,i=Math.sin(t),o=1-(a=Math.cos(t)),e[0]=s*s*o+a,e[1]=l*s*o+u*i,e[2]=u*s*o-l*i,e[3]=0,e[4]=s*l*o-u*i,e[5]=l*l*o+a,e[6]=u*l*o+s*i,e[7]=0,e[8]=s*u*o+l*i,e[9]=l*u*o-s*i,e[10]=u*u*o+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},i.fromXRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.fromYRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.fromZRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.fromRotationTranslation=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=n+n,l=i+i,u=a+a,c=n*s,d=n*l,h=n*u,f=i*l,p=i*u,m=a*u,v=o*s,_=o*l,g=o*u;return e[0]=1-(f+m),e[1]=d+g,e[2]=h-_,e[3]=0,e[4]=d-g,e[5]=1-(c+m),e[6]=p+v,e[7]=0,e[8]=h+_,e[9]=p-v,e[10]=1-(c+f),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},i.fromRotationTranslationScale=function(e,t,r,n){var i=t[0],a=t[1],o=t[2],s=t[3],l=i+i,u=a+a,c=o+o,d=i*l,h=i*u,f=i*c,p=a*u,m=a*c,v=o*c,_=s*l,g=s*u,y=s*c,b=n[0],x=n[1],w=n[2];return e[0]=(1-(p+v))*b,e[1]=(h+y)*b,e[2]=(f-g)*b,e[3]=0,e[4]=(h-y)*x,e[5]=(1-(d+v))*x,e[6]=(m+_)*x,e[7]=0,e[8]=(f+g)*w,e[9]=(m-_)*w,e[10]=(1-(d+p))*w,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},i.fromRotationTranslationScaleOrigin=function(e,t,r,n,i){var a=t[0],o=t[1],s=t[2],l=t[3],u=a+a,c=o+o,d=s+s,h=a*u,f=a*c,p=a*d,m=o*c,v=o*d,_=s*d,g=l*u,y=l*c,b=l*d,x=n[0],w=n[1],E=n[2],M=i[0],A=i[1],T=i[2];return e[0]=(1-(m+_))*x,e[1]=(f+b)*x,e[2]=(p-y)*x,e[3]=0,e[4]=(f-b)*w,e[5]=(1-(h+_))*w,e[6]=(v+g)*w,e[7]=0,e[8]=(p+y)*E,e[9]=(v-g)*E,e[10]=(1-(h+m))*E,e[11]=0,e[12]=r[0]+M-(e[0]*M+e[4]*A+e[8]*T),e[13]=r[1]+A-(e[1]*M+e[5]*A+e[9]*T),e[14]=r[2]+T-(e[2]*M+e[6]*A+e[10]*T),e[15]=1,e},i.fromQuat=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r+r,s=n+n,l=i+i,u=r*o,c=n*o,d=n*s,h=i*o,f=i*s,p=i*l,m=a*o,v=a*s,_=a*l;return e[0]=1-d-p,e[1]=c+_,e[2]=h-v,e[3]=0,e[4]=c-_,e[5]=1-u-p,e[6]=f+m,e[7]=0,e[8]=h+v,e[9]=f-m,e[10]=1-u-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.frustum=function(e,t,r,n,i,a,o){var s=1/(r-t),l=1/(i-n),u=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*l,e[10]=(o+a)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*u,e[15]=0,e},i.perspective=function(e,t,r,n,i){var a=1/Math.tan(t/2),o=1/(n-i);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+n)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*n*o,e[15]=0,e},i.perspectiveFromFieldOfView=function(e,t,r,n){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),u=2/(i+a);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(o-s)*l*.5,e[9]=(i-a)*u*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e},i.ortho=function(e,t,r,n,i,a,o){var s=1/(t-r),l=1/(n-i),u=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=(o+a)*u,e[15]=1,e},i.lookAt=function(e,t,r,a){var o,s,l,u,c,d,h,f,p,m,v=t[0],_=t[1],g=t[2],y=a[0],b=a[1],x=a[2],w=r[0],E=r[1],M=r[2];return Math.abs(v-w)<n.EPSILON&&Math.abs(_-E)<n.EPSILON&&Math.abs(g-M)<n.EPSILON?i.identity(e):(h=v-w,f=_-E,p=g-M,o=b*(p*=m=1/Math.sqrt(h*h+f*f+p*p))-x*(f*=m),s=x*(h*=m)-y*p,l=y*f-b*h,(m=Math.sqrt(o*o+s*s+l*l))?(o*=m=1/m,s*=m,l*=m):(o=0,s=0,l=0),u=f*l-p*s,c=p*o-h*l,d=h*s-f*o,(m=Math.sqrt(u*u+c*c+d*d))?(u*=m=1/m,c*=m,d*=m):(u=0,c=0,d=0),e[0]=o,e[1]=u,e[2]=h,e[3]=0,e[4]=s,e[5]=c,e[6]=f,e[7]=0,e[8]=l,e[9]=d,e[10]=p,e[11]=0,e[12]=-(o*v+s*_+l*g),e[13]=-(u*v+c*_+d*g),e[14]=-(h*v+f*_+p*g),e[15]=1,e)},i.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},i.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},i.setFromEuler=function(e,t,r,n){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(r),s=Math.sin(r),l=Math.cos(n),u=Math.sin(n),c=i*l,d=i*u,h=a*l,f=a*u;return e[0]=o*l,e[4]=-o*u,e[8]=s,e[1]=d+h*s,e[5]=c-f*s,e[9]=-a*o,e[2]=f-c*s,e[6]=h+d*s,e[10]=i*o,e},i.getEuler=function(e){var t=e[0],r=e[4],n=e[8],i=(e[1],e[5]),a=e[9],o=(e[2],e[6]),s=e[10],l=[];return Math.max(-1,Math.min(1,n)),l[1]=Math.asin(Math.max(-1,Math.min(1,n))),Math.abs(n)<.9999999?(l[0]=Math.atan2(-a,s),l[2]=Math.atan2(-r,t)):(l[0]=Math.atan2(o,i),l[2]=0),l},e.exports=i},function(e,t,r){var n,i,a,o,s,l,u=r(1),c=r(4),d=r(7),h=r(8),f={};f.create=function(){var e=new u.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},f.rotationTo=(n=d.create(),i=d.fromValues(1,0,0),a=d.fromValues(0,1,0),function(e,t,r){var o=d.dot(t,r);return o<-.999999?(d.cross(n,i,t),d.length(n)<1e-6&&d.cross(n,a,t),d.normalize(n,n),f.setAxisAngle(e,n,Math.PI),e):o>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(d.cross(n,t,r),e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=1+o,f.normalize(e,e))}),f.setAxes=(o=c.create(),function(e,t,r,n){return o[0]=r[0],o[3]=r[1],o[6]=r[2],o[1]=n[0],o[4]=n[1],o[7]=n[2],o[2]=-t[0],o[5]=-t[1],o[8]=-t[2],f.normalize(e,f.fromMat3(e,o))}),f.clone=h.clone,f.fromValues=h.fromValues,f.copy=h.copy,f.set=h.set,f.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},f.setAxisAngle=function(e,t,r){r*=.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e},f.add=h.add,f.multiply=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=r[0],l=r[1],u=r[2],c=r[3];return e[0]=n*c+o*s+i*u-a*l,e[1]=i*c+o*l+a*s-n*u,e[2]=a*c+o*u+n*l-i*s,e[3]=o*c-n*s-i*l-a*u,e},f.mul=f.multiply,f.scale=h.scale,f.rotateX=function(e,t,r){r*=.5;var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+o*s,e[1]=i*l+a*s,e[2]=a*l-i*s,e[3]=o*l-n*s,e},f.rotateY=function(e,t,r){r*=.5;var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l-a*s,e[1]=i*l+o*s,e[2]=a*l+n*s,e[3]=o*l-i*s,e},f.rotateZ=function(e,t,r){r*=.5;var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+i*s,e[1]=i*l-n*s,e[2]=a*l+o*s,e[3]=o*l-a*s,e},f.fromYXZ=function(e,t,r,n){var i=Math.cos(r/2),a=Math.cos(t/2),o=Math.cos(n/2),s=Math.sin(r/2),l=Math.sin(t/2),u=Math.sin(n/2);return e[0]=s*a*o+i*l*u,e[1]=i*l*o-s*a*u,e[2]=i*a*u-s*l*o,e[3]=i*a*o+s*l*u,e},f.calculateW=function(e,t){var r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e},f.dot=h.dot,f.lerp=h.lerp,f.slerp=function(e,t,r,n){var i,a,o,s,l,u=t[0],c=t[1],d=t[2],h=t[3],f=r[0],p=r[1],m=r[2],v=r[3];return(a=u*f+c*p+d*m+h*v)<0&&(a=-a,f=-f,p=-p,m=-m,v=-v),1-a>1e-6?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-n)*i)/o,l=Math.sin(n*i)/o):(s=1-n,l=n),e[0]=s*u+l*f,e[1]=s*c+l*p,e[2]=s*d+l*m,e[3]=s*h+l*v,e},f.sqlerp=(s=f.create(),l=f.create(),function(e,t,r,n,i,a){return f.slerp(s,t,i,a),f.slerp(l,r,n,a),f.slerp(e,s,l,2*a*(1-a)),e}),f.invert=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r*r+n*n+i*i+a*a,s=o?1/o:0;return e[0]=-r*s,e[1]=-n*s,e[2]=-i*s,e[3]=a*s,e},f.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},f.length=h.length,f.len=f.length,f.squaredLength=h.squaredLength,f.sqrLen=f.squaredLength,f.normalize=h.normalize,f.fromMat3=function(e,t){var r,n=t[0]+t[4]+t[8];if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(t[3*i+i]-t[3*a+a]-t[3*o+o]+1),e[i]=.5*r,r=.5/r,e[3]=(t[3*a+o]-t[3*o+a])*r,e[a]=(t[3*a+i]+t[3*i+a])*r,e[o]=(t[3*o+i]+t[3*i+o])*r}return e},f.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},e.exports=f},function(e,t,r){var n,i=r(1),a={};a.create=function(){var e=new i.ARRAY_TYPE(3);return e[0]=0,e[1]=0,e[2]=0,e},a.clone=function(e){var t=new i.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.fromValues=function(e,t,r){var n=new i.ARRAY_TYPE(3);return n[0]=e,n[1]=t,n[2]=r,n},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},a.set=function(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e},a.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e},a.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e},a.sub=a.subtract,a.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e},a.mul=a.multiply,a.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e},a.div=a.divide,a.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e},a.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e},a.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},a.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e},a.distance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)},a.dist=a.distance,a.squaredDistance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i},a.sqrDist=a.squaredDistance,a.length=function(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)},a.len=a.length,a.squaredLength=function(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n},a.sqrLen=a.squaredLength,a.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},a.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},a.normalize=function(e,t){var r=t[0],n=t[1],i=t[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},a.cross=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],s=r[1],l=r[2];return e[0]=i*l-a*s,e[1]=a*o-n*l,e[2]=n*s-i*o,e},a.lerp=function(e,t,r,n){var i=t[0],a=t[1],o=t[2];return e[0]=i+n*(r[0]-i),e[1]=a+n*(r[1]-a),e[2]=o+n*(r[2]-o),e},a.hermite=function(e,t,r,n,i,a){var o=a*a,s=o*(2*a-3)+1,l=o*(a-2)+a,u=o*(a-1),c=o*(3-2*a);return e[0]=t[0]*s+r[0]*l+n[0]*u+i[0]*c,e[1]=t[1]*s+r[1]*l+n[1]*u+i[1]*c,e[2]=t[2]*s+r[2]*l+n[2]*u+i[2]*c,e},a.bezier=function(e,t,r,n,i,a){var o=1-a,s=o*o,l=a*a,u=s*o,c=3*a*s,d=3*l*o,h=l*a;return e[0]=t[0]*u+r[0]*c+n[0]*d+i[0]*h,e[1]=t[1]*u+r[1]*c+n[1]*d+i[1]*h,e[2]=t[2]*u+r[2]*c+n[2]*d+i[2]*h,e},a.random=function(e,t){t=t||1;var r=2*i.RANDOM()*Math.PI,n=2*i.RANDOM()-1,a=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*a,e[1]=Math.sin(r)*a,e[2]=n*t,e},a.transformMat4=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[3]*n+r[7]*i+r[11]*a+r[15];return o=o||1,e[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/o,e[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/o,e[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/o,e},a.transformMat3=function(e,t,r){var n=t[0],i=t[1],a=t[2];return e[0]=n*r[0]+i*r[3]+a*r[6],e[1]=n*r[1]+i*r[4]+a*r[7],e[2]=n*r[2]+i*r[5]+a*r[8],e},a.transformQuat=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],s=r[1],l=r[2],u=r[3],c=u*n+s*a-l*i,d=u*i+l*n-o*a,h=u*a+o*i-s*n,f=-o*n-s*i-l*a;return e[0]=c*u+f*-o+d*-l-h*-s,e[1]=d*u+f*-s+h*-o-c*-l,e[2]=h*u+f*-l+c*-s-d*-o,e},a.rotateX=function(e,t,r,n){var i=[],a=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e},a.rotateY=function(e,t,r,n){var i=[],a=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e},a.rotateZ=function(e,t,r,n){var i=[],a=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e},a.forEach=(n=a.create(),function(e,t,r,i,a,o){var s,l;for(t||(t=3),r||(r=0),l=i?Math.min(i*t+r,e.length):e.length,s=r;s<l;s+=t)n[0]=e[s],n[1]=e[s+1],n[2]=e[s+2],a(n,n,o),e[s]=n[0],e[s+1]=n[1],e[s+2]=n[2];return e}),a.angle=function(e,t){var r=a.fromValues(e[0],e[1],e[2]),n=a.fromValues(t[0],t[1],t[2]);a.normalize(r,r),a.normalize(n,n);var i=a.dot(r,n);return i>1?0:Math.acos(i)},a.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},e.exports=a},function(e,t,r){var n,i=r(1),a={};a.create=function(){var e=new i.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},a.clone=function(e){var t=new i.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.fromValues=function(e,t,r,n){var a=new i.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=n,a},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.set=function(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e},a.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e},a.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e},a.sub=a.subtract,a.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e},a.mul=a.multiply,a.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e},a.div=a.divide,a.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},a.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},a.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},a.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e},a.distance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(r*r+n*n+i*i+a*a)},a.dist=a.distance,a.squaredDistance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return r*r+n*n+i*i+a*a},a.sqrDist=a.squaredDistance,a.length=function(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.sqrt(t*t+r*r+n*n+i*i)},a.len=a.length,a.squaredLength=function(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i},a.sqrLen=a.squaredLength,a.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},a.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},a.normalize=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r*r+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=n*o,e[2]=i*o,e[3]=a*o),e},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},a.lerp=function(e,t,r,n){var i=t[0],a=t[1],o=t[2],s=t[3];return e[0]=i+n*(r[0]-i),e[1]=a+n*(r[1]-a),e[2]=o+n*(r[2]-o),e[3]=s+n*(r[3]-s),e},a.random=function(e,t){return t=t||1,e[0]=i.RANDOM(),e[1]=i.RANDOM(),e[2]=i.RANDOM(),e[3]=i.RANDOM(),a.normalize(e,e),a.scale(e,e,t),e},a.transformMat4=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,e[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,e[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,e[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,e},a.transformQuat=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],s=r[1],l=r[2],u=r[3],c=u*n+s*a-l*i,d=u*i+l*n-o*a,h=u*a+o*i-s*n,f=-o*n-s*i-l*a;return e[0]=c*u+f*-o+d*-l-h*-s,e[1]=d*u+f*-s+h*-o-c*-l,e[2]=h*u+f*-l+c*-s-d*-o,e[3]=t[3],e},a.forEach=(n=a.create(),function(e,t,r,i,a,o){var s,l;for(t||(t=4),r||(r=0),l=i?Math.min(i*t+r,e.length):e.length,s=r;s<l;s+=t)n[0]=e[s],n[1]=e[s+1],n[2]=e[s+2],n[3]=e[s+3],a(n,n,o),e[s]=n[0],e[s+1]=n[1],e[s+2]=n[2],e[s+3]=n[3];return e}),a.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},e.exports=a},function(e,t,r){var n,i=r(1),a={};a.create=function(){var e=new i.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},a.clone=function(e){var t=new i.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},a.fromValues=function(e,t){var r=new i.ARRAY_TYPE(2);return r[0]=e,r[1]=t,r},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},a.set=function(e,t,r){return e[0]=t,e[1]=r,e},a.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e},a.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e},a.sub=a.subtract,a.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e},a.mul=a.multiply,a.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e},a.div=a.divide,a.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e},a.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e},a.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e},a.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e},a.distance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)},a.dist=a.distance,a.squaredDistance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n},a.sqrDist=a.squaredDistance,a.length=function(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)},a.len=a.length,a.squaredLength=function(e){var t=e[0],r=e[1];return t*t+r*r},a.sqrLen=a.squaredLength,a.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},a.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},a.normalize=function(e,t){var r=t[0],n=t[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e},a.rotate=function(e,t,r,n){var i=[],a=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},a.cross=function(e,t,r){var n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e},a.lerp=function(e,t,r,n){var i=t[0],a=t[1];return e[0]=i+n*(r[0]-i),e[1]=a+n*(r[1]-a),e},a.random=function(e,t){t=t||1;var r=2*i.RANDOM()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e},a.transformMat2=function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e},a.transformMat2d=function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e},a.transformMat3=function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e},a.transformMat4=function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e},a.forEach=(n=a.create(),function(e,t,r,i,a,o){var s,l;for(t||(t=2),r||(r=0),l=i?Math.min(i*t+r,e.length):e.length,s=r;s<l;s+=t)n[0]=e[s],n[1]=e[s+1],a(n,n,o),e[s]=n[0],e[s+1]=n[1];return e}),a.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},e.exports=a}])},e.exports=n()},"./node_modules/@wry/context/lib/context.esm.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Slot",function(){return s}),r.d(t,"asyncFromGen",function(){return d}),r.d(t,"bind",function(){return l}),r.d(t,"noContext",function(){return u}),r.d(t,"setTimeout",function(){return c}),r.d(t,"wrapYieldingFiberMethods",function(){return f});var n=null,i={},a=1,o=Array,s=o["@wry/context:Slot"]||function(){var e=function(){function e(){this.id=["slot",a++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return e.prototype.hasValue=function(){for(var e=n;e;e=e.parent)if(this.id in e.slots){var t=e.slots[this.id];if(t===i)break;return e!==n&&(n.slots[this.id]=t),!0}return n&&(n.slots[this.id]=i),!1},e.prototype.getValue=function(){if(this.hasValue())return n.slots[this.id]},e.prototype.withValue=function(e,t,r,i){var a,o=((a={__proto__:null})[this.id]=e,a),s=n;n={parent:s,slots:o};try{return t.apply(i,r)}finally{n=s}},e.bind=function(e){var t=n;return function(){var r=n;try{return n=t,e.apply(this,arguments)}finally{n=r}}},e.noContext=function(e,t,r){if(!n)return e.apply(r,t);var i=n;try{return n=null,e.apply(r,t)}finally{n=i}},e}();try{Object.defineProperty(o,"@wry/context:Slot",{value:o["@wry/context:Slot"]=e,enumerable:!1,writable:!1,configurable:!1})}finally{return e}}(),l=s.bind,u=s.noContext;function c(e,t){return setTimeout(l(e),t)}function d(e){return function(){var t=e.apply(this,arguments),r=l(t.next),n=l(t.throw);return new Promise(function(e,i){function a(r,n){try{var a=r.call(t,n)}catch(e){return i(e)}var l,u=a.done?e:o;(l=a.value)&&"function"==typeof l.then?a.value.then(u,a.done?i:s):u(a.value)}var o=function(e){return a(r,e)},s=function(e){return a(n,e)};o()})}}var h=[];function f(e){if(h.indexOf(e)<0){var t=function(e,t){var r=e[t];e[t]=function(){return u(r,arguments,this)}};t(e,"yield"),t(e.prototype,"run"),t(e.prototype,"throwInto"),h.push(e)}return e}},"./node_modules/@wry/equality/lib/equality.esm.js":function(e,t,r){"use strict";r.r(t),r.d(t,"equal",function(){return s});var n=Object.prototype,i=n.toString,a=n.hasOwnProperty,o=new Map;function s(e,t){try{return function e(t,r){if(t===r)return!0;var n=i.call(t);var o=i.call(r);if(n!==o)return!1;switch(n){case"[object Array]":if(t.length!==r.length)return!1;case"[object Object]":if(l(t,r))return!0;var s=Object.keys(t),u=Object.keys(r),c=s.length;if(c!==u.length)return!1;for(var d=0;d<c;++d)if(!a.call(r,s[d]))return!1;for(var d=0;d<c;++d){var h=s[d];if(!e(t[h],r[h]))return!1}return!0;case"[object Error]":return t.name===r.name&&t.message===r.message;case"[object Number]":if(t!=t)return r!=r;case"[object Boolean]":case"[object Date]":return+t==+r;case"[object RegExp]":case"[object String]":return t==""+r;case"[object Map]":case"[object Set]":if(t.size!==r.size)return!1;if(l(t,r))return!0;for(var f=t.entries(),p="[object Map]"===n;;){var m=f.next();if(m.done)break;var v=m.value,_=v[0],g=v[1];if(!r.has(_))return!1;if(p&&!e(g,r.get(_)))return!1}return!0}return!1}(e,t)}finally{o.clear()}}function l(e,t){var r=o.get(e);if(r){if(r.has(t))return!0}else o.set(e,r=new Set);return r.add(t),!1}t.default=s},"./node_modules/apollo-cache-inmemory/lib/bundle.esm.js":function(e,t,r){"use strict";r.r(t),r.d(t,"HeuristicFragmentMatcher",function(){return v}),r.d(t,"InMemoryCache",function(){return C}),r.d(t,"IntrospectionFragmentMatcher",function(){return _}),r.d(t,"ObjectCache",function(){return A}),r.d(t,"StoreReader",function(){return x}),r.d(t,"StoreWriter",function(){return D}),r.d(t,"WriteError",function(){return S}),r.d(t,"assertIdValue",function(){return M}),r.d(t,"defaultDataIdFromObject",function(){return O}),r.d(t,"defaultNormalizedCacheFactory",function(){return T}),r.d(t,"enhanceErrorWithDocument",function(){return k});var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/apollo-cache/lib/bundle.esm.js"),a=r("./node_modules/apollo-cache-inmemory/node_modules/apollo-utilities/lib/bundle.esm.js"),o=r("./node_modules/optimism/lib/bundle.esm.js"),s=r("./node_modules/ts-invariant/lib/invariant.esm.js"),l=new Map;if(l.set(1,2)!==l){var u=l.set;Map.prototype.set=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u.apply(this,e),this}}var c=new Set;if(c.add(3)!==c){var d=c.add;Set.prototype.add=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.apply(this,e),this}}var h={};"function"==typeof Object.freeze&&Object.freeze(h);try{l.set(h,h).delete(h)}catch(e){var f=function(e){return e&&function(t){try{l.set(t,t).delete(t)}finally{return e.call(Object,t)}}};Object.freeze=f(Object.freeze),Object.seal=f(Object.seal),Object.preventExtensions=f(Object.preventExtensions)}var p=!1;function m(){var e=!p;return Object(a.isTest)()||(p=!0),e}var v=function(){function e(){}return e.prototype.ensureReady=function(){return Promise.resolve()},e.prototype.canBypassInit=function(){return!0},e.prototype.match=function(e,t,r){var n=r.store.get(e.id),i="ROOT_QUERY"===e.id;if(!n)return i;var a=n.__typename,o=void 0===a?i&&"Query":a;return o?o===t||(m()&&s.invariant.error("You are using the simple (heuristic) fragment matcher, but your queries contain union or interface types. Apollo Client will not be able to accurately map fragments. To make this error go away, use the `IntrospectionFragmentMatcher` as described in the docs: https://www.apollographql.com/docs/react/advanced/fragments.html#fragment-matcher"),"heuristic"):(m()&&(s.invariant.warn("You're using fragments in your queries, but either don't have the addTypename:\n  true option set in Apollo Client, or you are trying to write a fragment to the store without the __typename.\n   Please turn on the addTypename option and include __typename when writing fragments so that Apollo Client\n   can accurately match fragments."),s.invariant.warn("Could not find __typename on Fragment ",t,n),s.invariant.warn("DEPRECATION WARNING: using fragments without __typename is unsupported behavior and will be removed in future versions of Apollo client. You should fix this and set addTypename to true now.")),"heuristic")},e}(),_=function(){function e(e){e&&e.introspectionQueryResultData?(this.possibleTypesMap=this.parseIntrospectionResult(e.introspectionQueryResultData),this.isReady=!0):this.isReady=!1,this.match=this.match.bind(this)}return e.prototype.match=function(e,t,r){Object(s.invariant)(this.isReady,"FragmentMatcher.match() was called before FragmentMatcher.init()");var n=r.store.get(e.id),i="ROOT_QUERY"===e.id;if(!n)return i;var a=n.__typename,o=void 0===a?i&&"Query":a;if(Object(s.invariant)(o,"Cannot match fragment because __typename property is missing: "+JSON.stringify(n)),o===t)return!0;var l=this.possibleTypesMap[t];return!!(l&&l.indexOf(o)>-1)},e.prototype.parseIntrospectionResult=function(e){var t={};return e.__schema.types.forEach(function(e){"UNION"!==e.kind&&"INTERFACE"!==e.kind||(t[e.name]=e.possibleTypes.map(function(e){return e.name}))}),t},e}(),g=Object.prototype.hasOwnProperty,y=function(){function e(e){var t=this;void 0===e&&(e=Object.create(null)),this.data=e,this.depend=Object(o.wrap)(function(e){return t.data[e]},{disposable:!0,makeCacheKey:function(e){return e}})}return e.prototype.toObject=function(){return this.data},e.prototype.get=function(e){return this.depend(e),this.data[e]},e.prototype.set=function(e,t){t!==this.data[e]&&(this.data[e]=t,this.depend.dirty(e))},e.prototype.delete=function(e){g.call(this.data,e)&&(delete this.data[e],this.depend.dirty(e))},e.prototype.clear=function(){this.replace(null)},e.prototype.replace=function(e){var t=this;e?(Object.keys(e).forEach(function(r){t.set(r,e[r])}),Object.keys(this.data).forEach(function(r){g.call(e,r)||t.delete(r)})):Object.keys(this.data).forEach(function(e){t.delete(e)})},e}();function b(e){return new y(e)}var x=function(){function e(e){var t=this,r=void 0===e?{}:e,n=r.cacheKeyRoot,i=void 0===n?new o.KeyTrie(a.canUseWeakMap):n,s=r.freezeResults,l=void 0!==s&&s,u=this.executeStoreQuery,c=this.executeSelectionSet,d=this.executeSubSelectedArray;this.freezeResults=l,this.executeStoreQuery=Object(o.wrap)(function(e){return u.call(t,e)},{makeCacheKey:function(e){var t=e.query,r=e.rootValue,n=e.contextValue,a=e.variableValues,o=e.fragmentMatcher;if(n.store instanceof y)return i.lookup(n.store,t,o,JSON.stringify(a),r.id)}}),this.executeSelectionSet=Object(o.wrap)(function(e){return c.call(t,e)},{makeCacheKey:function(e){var t=e.selectionSet,r=e.rootValue,n=e.execContext;if(n.contextValue.store instanceof y)return i.lookup(n.contextValue.store,t,n.fragmentMatcher,JSON.stringify(n.variableValues),r.id)}}),this.executeSubSelectedArray=Object(o.wrap)(function(e){return d.call(t,e)},{makeCacheKey:function(e){var t=e.field,r=e.array,n=e.execContext;if(n.contextValue.store instanceof y)return i.lookup(n.contextValue.store,t,r,JSON.stringify(n.variableValues))}})}return e.prototype.readQueryFromStore=function(e){return this.diffQueryAgainstStore(Object(n.__assign)({},e,{returnPartialData:!1})).result},e.prototype.diffQueryAgainstStore=function(e){var t=e.store,r=e.query,n=e.variables,i=e.previousResult,o=e.returnPartialData,l=void 0===o||o,u=e.rootId,c=void 0===u?"ROOT_QUERY":u,d=e.fragmentMatcherFunction,h=e.config,f=Object(a.getQueryDefinition)(r);n=Object(a.assign)({},Object(a.getDefaultValues)(f),n);var p={store:t,dataIdFromObject:h&&h.dataIdFromObject||null,cacheRedirects:h&&h.cacheRedirects||{}},m=this.executeStoreQuery({query:r,rootValue:{type:"id",id:c,generated:!0,typename:"Query"},contextValue:p,variableValues:n,fragmentMatcher:d}),v=m.missing&&m.missing.length>0;return v&&!l&&m.missing.forEach(function(e){if(!e.tolerable)throw new s.InvariantError("Can't find field "+e.fieldName+" on object "+JSON.stringify(e.object,null,2)+".")}),i&&Object(a.isEqual)(i,m.result)&&(m.result=i),{result:m.result,complete:!v}},e.prototype.executeStoreQuery=function(e){var t=e.query,r=e.rootValue,n=e.contextValue,i=e.variableValues,o=e.fragmentMatcher,s=void 0===o?E:o,l=Object(a.getMainDefinition)(t),u=Object(a.getFragmentDefinitions)(t),c={query:t,fragmentMap:Object(a.createFragmentMap)(u),contextValue:n,variableValues:i,fragmentMatcher:s};return this.executeSelectionSet({selectionSet:l.selectionSet,rootValue:r,execContext:c})},e.prototype.executeSelectionSet=function(e){var t=this,r=e.selectionSet,i=e.rootValue,o=e.execContext,l=o.fragmentMap,u=o.contextValue,c=o.variableValues,d={result:null},h=[],f=u.store.get(i.id),p=f&&f.__typename||"ROOT_QUERY"===i.id&&"Query"||void 0;function m(e){var t;return e.missing&&(d.missing=d.missing||[],(t=d.missing).push.apply(t,e.missing)),e.result}return r.selections.forEach(function(e){var r;if(Object(a.shouldInclude)(e,c))if(Object(a.isField)(e)){var d=m(t.executeField(f,p,e,o));void 0!==d&&h.push(((r={})[Object(a.resultKeyNameFromField)(e)]=d,r))}else{var v=void 0;if(Object(a.isInlineFragment)(e))v=e;else if(!(v=l[e.name.value]))throw new s.InvariantError("No fragment named "+e.name.value);var _=v.typeCondition.name.value,g=o.fragmentMatcher(i,_,u);if(g){var y=t.executeSelectionSet({selectionSet:v.selectionSet,rootValue:i,execContext:o});"heuristic"===g&&y.missing&&(y=Object(n.__assign)({},y,{missing:y.missing.map(function(e){return Object(n.__assign)({},e,{tolerable:!0})})})),h.push(m(y))}}}),d.result=Object(a.mergeDeepArray)(h),this.freezeResults&&Object.freeze(d.result),d},e.prototype.executeField=function(e,t,r,n){var i=n.variableValues,o=n.contextValue,s=function(e,t,r,n,i,o){o.resultKey;var s=o.directives,l=r;(n||s)&&(l=Object(a.getStoreKeyName)(l,n,s));var u=void 0;if(e&&void 0===(u=e[l])&&i.cacheRedirects&&"string"==typeof t){var c=i.cacheRedirects[t];if(c){var d=c[r];d&&(u=d(e,n,{getCacheKey:function(e){return Object(a.toIdValue)({id:i.dataIdFromObject(e),typename:e.__typename})}}))}}if(void 0===u)return{result:u,missing:[{object:e,fieldName:l,tolerable:!1}]};Object(a.isJsonValue)(u)&&(u=u.json);return{result:u}}(e,t,r.name.value,Object(a.argumentsObjectFromField)(r,i),o,{resultKey:Object(a.resultKeyNameFromField)(r),directives:Object(a.getDirectiveInfoFromField)(r,i)});return Array.isArray(s.result)?this.combineExecResults(s,this.executeSubSelectedArray({field:r,array:s.result,execContext:n})):r.selectionSet?null==s.result?s:this.combineExecResults(s,this.executeSelectionSet({selectionSet:r.selectionSet,rootValue:s.result,execContext:n})):(w(r,s.result),this.freezeResults&&Object(a.maybeDeepFreeze)(s),s)},e.prototype.combineExecResults=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=null;return e.forEach(function(e){e.missing&&(r=r||[]).push.apply(r,e.missing)}),{result:e.pop().result,missing:r}},e.prototype.executeSubSelectedArray=function(e){var t=this,r=e.field,n=e.array,i=e.execContext,a=null;function o(e){return e.missing&&(a=a||[]).push.apply(a,e.missing),e.result}return n=n.map(function(e){return null===e?null:Array.isArray(e)?o(t.executeSubSelectedArray({field:r,array:e,execContext:i})):r.selectionSet?o(t.executeSelectionSet({selectionSet:r.selectionSet,rootValue:e,execContext:i})):(w(r,e),e)}),this.freezeResults&&Object.freeze(n),{result:n,missing:a}},e}();function w(e,t){if(!e.selectionSet&&Object(a.isIdValue)(t))throw new s.InvariantError("Missing selection set for object of type "+t.typename+" returned for query field "+e.name.value)}function E(){return!0}function M(e){Object(s.invariant)(Object(a.isIdValue)(e),"Encountered a sub-selection on the query, but the store doesn't have an object reference. This should never happen during normal use unless you have custom code that is directly manipulating the store; please file an issue.")}var A=function(){function e(e){void 0===e&&(e=Object.create(null)),this.data=e}return e.prototype.toObject=function(){return this.data},e.prototype.get=function(e){return this.data[e]},e.prototype.set=function(e,t){this.data[e]=t},e.prototype.delete=function(e){this.data[e]=void 0},e.prototype.clear=function(){this.data=Object.create(null)},e.prototype.replace=function(e){this.data=e||Object.create(null)},e}();function T(e){return new A(e)}var S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="WriteError",t}return Object(n.__extends)(t,e),t}(Error);function k(e,t){var r=new S("Error writing result to store for query:\n "+JSON.stringify(t));return r.message+="\n"+e.message,r.stack=e.stack,r}var D=function(){function e(){}return e.prototype.writeQueryToStore=function(e){var t=e.query,r=e.result,n=e.store,i=void 0===n?b():n,a=e.variables,o=e.dataIdFromObject,s=e.fragmentMatcherFunction;return this.writeResultToStore({dataId:"ROOT_QUERY",result:r,document:t,store:i,variables:a,dataIdFromObject:o,fragmentMatcherFunction:s})},e.prototype.writeResultToStore=function(e){var t=e.dataId,r=e.result,n=e.document,i=e.store,o=void 0===i?b():i,s=e.variables,l=e.dataIdFromObject,u=e.fragmentMatcherFunction,c=Object(a.getOperationDefinition)(n);try{return this.writeSelectionSetToStore({result:r,dataId:t,selectionSet:c.selectionSet,context:{store:o,processedData:{},variables:Object(a.assign)({},Object(a.getDefaultValues)(c),s),dataIdFromObject:l,fragmentMap:Object(a.createFragmentMap)(Object(a.getFragmentDefinitions)(n)),fragmentMatcherFunction:u}})}catch(e){throw k(e,n)}},e.prototype.writeSelectionSetToStore=function(e){var t=this,r=e.result,n=e.dataId,i=e.selectionSet,o=e.context,l=o.variables,u=o.store,c=o.fragmentMap;return i.selections.forEach(function(e){var i;if(Object(a.shouldInclude)(e,l))if(Object(a.isField)(e)){var u=Object(a.resultKeyNameFromField)(e),d=r[u];if(void 0!==d)t.writeFieldToStore({dataId:n,value:d,field:e,context:o});else{var h=!1,f=!1;e.directives&&e.directives.length&&(h=e.directives.some(function(e){return e.name&&"defer"===e.name.value}),f=e.directives.some(function(e){return e.name&&"client"===e.name.value})),h||f||!o.fragmentMatcherFunction||s.invariant.warn("Missing field "+u+" in "+JSON.stringify(r,null,2).substring(0,100))}}else{var p=void 0;Object(a.isInlineFragment)(e)?p=e:(p=(c||{})[e.name.value],Object(s.invariant)(p,"No fragment named "+e.name.value+"."));var m=!0;if(o.fragmentMatcherFunction&&p.typeCondition){var v=n||"self",_=Object(a.toIdValue)({id:v,typename:void 0}),g={store:new A((i={},i[v]=r,i)),cacheRedirects:{}},y=o.fragmentMatcherFunction(_,p.typeCondition.name.value,g);Object(a.isProduction)()||"heuristic"!==y||s.invariant.error("WARNING: heuristic fragment matching going on!"),m=!!y}m&&t.writeSelectionSetToStore({result:r,selectionSet:p.selectionSet,dataId:n,context:o})}}),u},e.prototype.writeFieldToStore=function(e){var t,r,i,o=e.field,l=e.value,u=e.dataId,c=e.context,d=c.variables,h=c.dataIdFromObject,f=c.store,p=Object(a.storeKeyNameFromField)(o,d);if(o.selectionSet&&null!==l)if(Array.isArray(l)){var m=u+"."+p;r=this.processArrayValue(l,m,o.selectionSet,c)}else{var v=u+"."+p,_=!0;if(P(v)||(v="$"+v),h){var g=h(l);Object(s.invariant)(!g||!P(g),'IDs returned by dataIdFromObject cannot begin with the "$" character.'),(g||"number"==typeof g&&0===g)&&(v=g,_=!1)}I(v,o,c.processedData)||this.writeSelectionSetToStore({dataId:v,result:l,selectionSet:o.selectionSet,context:c});var y=l.__typename;r=Object(a.toIdValue)({id:v,typename:y},_);var b=(i=f.get(u))&&i[p];if(b!==r&&Object(a.isIdValue)(b)){var x=void 0!==b.typename,w=void 0!==y,E=x&&w&&b.typename!==y;Object(s.invariant)(!_||b.generated||E,"Store error: the application attempted to write an object with no provided id but the store already contains an id of "+b.id+" for this object. The selectionSet that was trying to be written is:\n"+JSON.stringify(o)),Object(s.invariant)(!x||w,"Store error: the application attempted to write an object with no provided typename but the store already contains an object with typename of "+b.typename+" for the object of id "+b.id+". The selectionSet that was trying to be written is:\n"+JSON.stringify(o)),b.generated&&(E?_||f.delete(b.id):function e(t,r,i){if(t===r)return!1;var o=i.get(t);var s=i.get(r);var l=!1;Object.keys(o).forEach(function(t){var r=o[t],n=s[t];Object(a.isIdValue)(r)&&P(r.id)&&Object(a.isIdValue)(n)&&!Object(a.isEqual)(r,n)&&e(r.id,n.id,i)&&(l=!0)});i.delete(t);var u=Object(n.__assign)({},o,s);if(Object(a.isEqual)(u,s))return l;i.set(r,u);return!0}(b.id,r.id,f))}}else r=null!=l&&"object"==typeof l?{type:"json",json:l}:l;(i=f.get(u))&&Object(a.isEqual)(r,i[p])||f.set(u,Object(n.__assign)({},i,((t={})[p]=r,t)))},e.prototype.processArrayValue=function(e,t,r,n){var i=this;return e.map(function(e,o){if(null===e)return null;var s=t+"."+o;if(Array.isArray(e))return i.processArrayValue(e,s,r,n);var l=!0;if(n.dataIdFromObject){var u=n.dataIdFromObject(e);u&&(s=u,l=!1)}return I(s,r,n.processedData)||i.writeSelectionSetToStore({dataId:s,result:e,selectionSet:r,context:n}),Object(a.toIdValue)({id:s,typename:e.__typename},l)})},e}();function P(e){return"$"===e[0]}function I(e,t,r){if(!r)return!1;if(r[e]){if(r[e].indexOf(t)>=0)return!0;r[e].push(t)}else r[e]=[t];return!1}var N={fragmentMatcher:new v,dataIdFromObject:O,addTypename:!0,resultCaching:!0,freezeResults:!1};function O(e){if(e.__typename){if(void 0!==e.id)return e.__typename+":"+e.id;if(void 0!==e._id)return e.__typename+":"+e._id}return null}var R=Object.prototype.hasOwnProperty,F=function(e){function t(t,r,n){var i=e.call(this,Object.create(null))||this;return i.optimisticId=t,i.parent=r,i.transaction=n,i}return Object(n.__extends)(t,e),t.prototype.toObject=function(){return Object(n.__assign)({},this.parent.toObject(),this.data)},t.prototype.get=function(e){return R.call(this.data,e)?this.data[e]:this.parent.get(e)},t}(A),C=function(e){function t(t){void 0===t&&(t={});var r=e.call(this)||this;r.watches=new Set,r.typenameDocumentCache=new Map,r.cacheKeyRoot=new o.KeyTrie(a.canUseWeakMap),r.silenceBroadcast=!1,r.config=Object(n.__assign)({},N,t),r.config.customResolvers&&(s.invariant.warn("customResolvers have been renamed to cacheRedirects. Please update your config as we will be deprecating customResolvers in the next major version."),r.config.cacheRedirects=r.config.customResolvers),r.config.cacheResolvers&&(s.invariant.warn("cacheResolvers have been renamed to cacheRedirects. Please update your config as we will be deprecating cacheResolvers in the next major version."),r.config.cacheRedirects=r.config.cacheResolvers),r.addTypename=r.config.addTypename,r.data=r.config.resultCaching?new y:new A,r.optimisticData=r.data,r.storeWriter=new D,r.storeReader=new x({cacheKeyRoot:r.cacheKeyRoot,freezeResults:t.freezeResults});var i=r,l=i.maybeBroadcastWatch;return r.maybeBroadcastWatch=Object(o.wrap)(function(e){return l.call(r,e)},{makeCacheKey:function(e){if(!e.optimistic&&!e.previousResult)return i.data instanceof y?i.cacheKeyRoot.lookup(e.query,JSON.stringify(e.variables)):void 0}}),r}return Object(n.__extends)(t,e),t.prototype.restore=function(e){return e&&this.data.replace(e),this},t.prototype.extract=function(e){return void 0===e&&(e=!1),(e?this.optimisticData:this.data).toObject()},t.prototype.read=function(e){return"string"==typeof e.rootId&&void 0===this.data.get(e.rootId)?null:this.storeReader.readQueryFromStore({store:e.optimistic?this.optimisticData:this.data,query:this.transformDocument(e.query),variables:e.variables,rootId:e.rootId,fragmentMatcherFunction:this.config.fragmentMatcher.match,previousResult:e.previousResult,config:this.config})},t.prototype.write=function(e){this.storeWriter.writeResultToStore({dataId:e.dataId,result:e.result,variables:e.variables,document:this.transformDocument(e.query),store:this.data,dataIdFromObject:this.config.dataIdFromObject,fragmentMatcherFunction:this.config.fragmentMatcher.match}),this.broadcastWatches()},t.prototype.diff=function(e){return this.storeReader.diffQueryAgainstStore({store:e.optimistic?this.optimisticData:this.data,query:this.transformDocument(e.query),variables:e.variables,returnPartialData:e.returnPartialData,previousResult:e.previousResult,fragmentMatcherFunction:this.config.fragmentMatcher.match,config:this.config})},t.prototype.watch=function(e){var t=this;return this.watches.add(e),function(){t.watches.delete(e)}},t.prototype.evict=function(e){throw new s.InvariantError("eviction is not implemented on InMemory Cache")},t.prototype.reset=function(){return this.data.clear(),this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(e){for(var t=[],r=0,n=this.optimisticData;n instanceof F;)n.optimisticId===e?++r:t.push(n),n=n.parent;if(r>0){for(this.optimisticData=n;t.length>0;){var i=t.pop();this.performTransaction(i.transaction,i.optimisticId)}this.broadcastWatches()}},t.prototype.performTransaction=function(e,t){var r=this.data,n=this.silenceBroadcast;this.silenceBroadcast=!0,"string"==typeof t&&(this.data=this.optimisticData=new F(t,this.optimisticData,e));try{e(this)}finally{this.silenceBroadcast=n,this.data=r}this.broadcastWatches()},t.prototype.recordOptimisticTransaction=function(e,t){return this.performTransaction(e,t)},t.prototype.transformDocument=function(e){if(this.addTypename){var t=this.typenameDocumentCache.get(e);return t||(t=Object(a.addTypenameToDocument)(e),this.typenameDocumentCache.set(e,t),this.typenameDocumentCache.set(t,t)),t}return e},t.prototype.broadcastWatches=function(){var e=this;this.silenceBroadcast||this.watches.forEach(function(t){return e.maybeBroadcastWatch(t)})},t.prototype.maybeBroadcastWatch=function(e){e.callback(this.diff({query:e.query,variables:e.variables,previousResult:e.previousResult&&e.previousResult(),optimistic:e.optimistic}))},t}(i.ApolloCache)},"./node_modules/apollo-cache-inmemory/node_modules/apollo-utilities/lib/bundle.esm.js":function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"addTypenameToDocument",function(){return Z}),r.d(t,"argumentsObjectFromField",function(){return m}),r.d(t,"assign",function(){return N}),r.d(t,"buildQueryFromSelectionSet",function(){return ie}),r.d(t,"canUseWeakMap",function(){return oe}),r.d(t,"checkDocument",function(){return R}),r.d(t,"cloneDeep",function(){return le}),r.d(t,"createFragmentMap",function(){return U}),r.d(t,"getDefaultValues",function(){return G}),r.d(t,"getDirectiveInfoFromField",function(){return M}),r.d(t,"getDirectiveNames",function(){return T}),r.d(t,"getDirectivesFromDocument",function(){return te}),r.d(t,"getEnv",function(){return ue}),r.d(t,"getFragmentDefinition",function(){return V}),r.d(t,"getFragmentDefinitions",function(){return L}),r.d(t,"getFragmentQueryDocument",function(){return I}),r.d(t,"getInclusionDirectives",function(){return P}),r.d(t,"getMainDefinition",function(){return z}),r.d(t,"getMutationDefinition",function(){return O}),r.d(t,"getOperationDefinition",function(){return F}),r.d(t,"getOperationDefinitionOrDie",function(){return C}),r.d(t,"getOperationName",function(){return B}),r.d(t,"getQueryDefinition",function(){return j}),r.d(t,"getStoreKeyName",function(){return p}),r.d(t,"graphQLResultHasError",function(){return me}),r.d(t,"hasClientExports",function(){return k}),r.d(t,"hasDirectives",function(){return S}),r.d(t,"isDevelopment",function(){return he}),r.d(t,"isEnv",function(){return ce}),r.d(t,"isField",function(){return _}),r.d(t,"isIdValue",function(){return y}),r.d(t,"isInlineFragment",function(){return g}),r.d(t,"isJsonValue",function(){return x}),r.d(t,"isNumberValue",function(){return c}),r.d(t,"isProduction",function(){return de}),r.d(t,"isScalarValue",function(){return u}),r.d(t,"isTest",function(){return fe}),r.d(t,"maybeDeepFreeze",function(){return ve}),r.d(t,"mergeDeep",function(){return ge}),r.d(t,"mergeDeepArray",function(){return ye}),r.d(t,"removeArgumentsFromDocument",function(){return re}),r.d(t,"removeClientSetsFromDocument",function(){return ae}),r.d(t,"removeConnectionDirectiveFromDocument",function(){return J}),r.d(t,"removeDirectivesFromDocument",function(){return X}),r.d(t,"removeFragmentSpreadFromDocument",function(){return ne}),r.d(t,"resultKeyNameFromField",function(){return v}),r.d(t,"shouldInclude",function(){return A}),r.d(t,"storeKeyNameFromField",function(){return h}),r.d(t,"stripSymbols",function(){return Ae}),r.d(t,"toIdValue",function(){return b}),r.d(t,"tryFunctionOrLogError",function(){return pe}),r.d(t,"valueFromNode",function(){return E}),r.d(t,"valueToObjectRepresentation",function(){return d}),r.d(t,"variablesInOperation",function(){return q}),r.d(t,"warnOnceInDevelopment",function(){return Me});var n=r("./node_modules/graphql/language/visitor.js"),i=r("./node_modules/ts-invariant/lib/invariant.esm.js"),a=r("./node_modules/tslib/tslib.es6.js"),o=r("./node_modules/fast-json-stable-stringify/index.js"),s=r.n(o),l=r("./node_modules/@wry/equality/lib/equality.esm.js");function u(e){return["StringValue","BooleanValue","EnumValue"].indexOf(e.kind)>-1}function c(e){return["IntValue","FloatValue"].indexOf(e.kind)>-1}function d(e,t,r,n){if(function(e){return"IntValue"===e.kind}(r)||function(e){return"FloatValue"===e.kind}(r))e[t.value]=Number(r.value);else if(function(e){return"BooleanValue"===e.kind}(r)||function(e){return"StringValue"===e.kind}(r))e[t.value]=r.value;else if(function(e){return"ObjectValue"===e.kind}(r)){var a={};r.fields.map(function(e){return d(a,e.name,e.value,n)}),e[t.value]=a}else if(function(e){return"Variable"===e.kind}(r)){var o=(n||{})[r.name.value];e[t.value]=o}else if(function(e){return"ListValue"===e.kind}(r))e[t.value]=r.values.map(function(e){var r={};return d(r,t,e,n),r[t.value]});else if(function(e){return"EnumValue"===e.kind}(r))e[t.value]=r.value;else{if(!function(e){return"NullValue"===e.kind}(r))throw new i.InvariantError('The inline argument "'+t.value+'" of kind "'+r.kind+'"is not supported. Use variables instead of inline arguments to overcome this limitation.');e[t.value]=null}}function h(e,t){var r=null;e.directives&&(r={},e.directives.forEach(function(e){r[e.name.value]={},e.arguments&&e.arguments.forEach(function(n){var i=n.name,a=n.value;return d(r[e.name.value],i,a,t)})}));var n=null;return e.arguments&&e.arguments.length&&(n={},e.arguments.forEach(function(e){var r=e.name,i=e.value;return d(n,r,i,t)})),p(e.name.value,n,r)}r.d(t,"isEqual",function(){return l.equal});var f=["connection","include","skip","client","rest","export"];function p(e,t,r){if(r&&r.connection&&r.connection.key){if(r.connection.filter&&r.connection.filter.length>0){var n=r.connection.filter?r.connection.filter:[];n.sort();var i=t,a={};return n.forEach(function(e){a[e]=i[e]}),r.connection.key+"("+JSON.stringify(a)+")"}return r.connection.key}var o=e;if(t){var l=s()(t);o+="("+l+")"}return r&&Object.keys(r).forEach(function(e){-1===f.indexOf(e)&&(r[e]&&Object.keys(r[e]).length?o+="@"+e+"("+JSON.stringify(r[e])+")":o+="@"+e)}),o}function m(e,t){if(e.arguments&&e.arguments.length){var r={};return e.arguments.forEach(function(e){var n=e.name,i=e.value;return d(r,n,i,t)}),r}return null}function v(e){return e.alias?e.alias.value:e.name.value}function _(e){return"Field"===e.kind}function g(e){return"InlineFragment"===e.kind}function y(e){return e&&"id"===e.type&&"boolean"==typeof e.generated}function b(e,t){return void 0===t&&(t=!1),Object(a.__assign)({type:"id",generated:t},"string"==typeof e?{id:e,typename:void 0}:e)}function x(e){return null!=e&&"object"==typeof e&&"json"===e.type}function w(e){throw new i.InvariantError("Variable nodes are not supported by valueFromNode")}function E(e,t){switch(void 0===t&&(t=w),e.kind){case"Variable":return t(e);case"NullValue":return null;case"IntValue":return parseInt(e.value,10);case"FloatValue":return parseFloat(e.value);case"ListValue":return e.values.map(function(e){return E(e,t)});case"ObjectValue":for(var r={},n=0,i=e.fields;n<i.length;n++){var a=i[n];r[a.name.value]=E(a.value,t)}return r;default:return e.value}}function M(e,t){if(e.directives&&e.directives.length){var r={};return e.directives.forEach(function(e){r[e.name.value]=m(e,t)}),r}return null}function A(e,t){return void 0===t&&(t={}),P(e.directives).every(function(e){var r=e.directive,n=e.ifArgument,a=!1;return"Variable"===n.value.kind?(a=t[n.value.name.value],Object(i.invariant)(void 0!==a,"Invalid variable referenced in @"+r.name.value+" directive.")):a=n.value.value,"skip"===r.name.value?!a:a})}function T(e){var t=[];return Object(n.visit)(e,{Directive:function(e){t.push(e.name.value)}}),t}function S(e,t){return T(t).some(function(t){return e.indexOf(t)>-1})}function k(e){return e&&S(["client"],e)&&S(["export"],e)}function D(e){var t=e.name.value;return"skip"===t||"include"===t}function P(e){return e?e.filter(D).map(function(e){var t=e.arguments,r=e.name.value;Object(i.invariant)(t&&1===t.length,"Incorrect number of arguments for the @"+r+" directive.");var n=t[0];Object(i.invariant)(n.name&&"if"===n.name.value,"Invalid argument for the @"+r+" directive.");var a=n.value;return Object(i.invariant)(a&&("Variable"===a.kind||"BooleanValue"===a.kind),"Argument for the @"+r+" directive must be a variable or a boolean value."),{directive:e,ifArgument:n}}):[]}function I(e,t){var r=t,n=[];return e.definitions.forEach(function(e){if("OperationDefinition"===e.kind)throw new i.InvariantError("Found a "+e.operation+" operation"+(e.name?" named '"+e.name.value+"'":"")+". No operations are allowed when using a fragment as a query. Only fragments are allowed.");"FragmentDefinition"===e.kind&&n.push(e)}),void 0===r&&(Object(i.invariant)(1===n.length,"Found "+n.length+" fragments. `fragmentName` must be provided when there is not exactly 1 fragment."),r=n[0].name.value),Object(a.__assign)({},e,{definitions:[{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:r}}]}}].concat(e.definitions)})}function N(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.forEach(function(t){null!=t&&Object.keys(t).forEach(function(r){e[r]=t[r]})}),e}function O(e){R(e);var t=e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation})[0];return Object(i.invariant)(t,"Must contain a mutation definition."),t}function R(e){Object(i.invariant)(e&&"Document"===e.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql');var t=e.definitions.filter(function(e){return"FragmentDefinition"!==e.kind}).map(function(e){if("OperationDefinition"!==e.kind)throw new i.InvariantError('Schema type definitions not allowed in queries. Found: "'+e.kind+'"');return e});return Object(i.invariant)(t.length<=1,"Ambiguous GraphQL document: contains "+t.length+" operations"),e}function F(e){return R(e),e.definitions.filter(function(e){return"OperationDefinition"===e.kind})[0]}function C(e){var t=F(e);return Object(i.invariant)(t,"GraphQL document is missing an operation"),t}function B(e){return e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&e.name}).map(function(e){return e.name.value})[0]||null}function L(e){return e.definitions.filter(function(e){return"FragmentDefinition"===e.kind})}function j(e){var t=F(e);return Object(i.invariant)(t&&"query"===t.operation,"Must contain a query definition."),t}function V(e){Object(i.invariant)("Document"===e.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'),Object(i.invariant)(e.definitions.length<=1,"Fragment must have exactly one definition.");var t=e.definitions[0];return Object(i.invariant)("FragmentDefinition"===t.kind,"Must be a fragment definition."),t}function z(e){var t;R(e);for(var r=0,n=e.definitions;r<n.length;r++){var a=n[r];if("OperationDefinition"===a.kind){var o=a.operation;if("query"===o||"mutation"===o||"subscription"===o)return a}"FragmentDefinition"!==a.kind||t||(t=a)}if(t)return t;throw new i.InvariantError("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment.")}function U(e){void 0===e&&(e=[]);var t={};return e.forEach(function(e){t[e.name.value]=e}),t}function G(e){if(e&&e.variableDefinitions&&e.variableDefinitions.length){var t=e.variableDefinitions.filter(function(e){return e.defaultValue}).map(function(e){var t=e.variable,r=e.defaultValue,n={};return d(n,t.name,r),n});return N.apply(void 0,[{}].concat(t))}return{}}function q(e){var t=new Set;if(e.variableDefinitions)for(var r=0,n=e.variableDefinitions;r<n.length;r++){var i=n[r];t.add(i.variable.name.value)}return t}function Q(e,t,r){var n=0;return e.forEach(function(r,i){t.call(this,r,i,e)&&(e[n++]=r)},r),e.length=n,e}var H={kind:"Field",name:{kind:"Name",value:"__typename"}};function Y(e){return function e(t,r){return t.selectionSet.selections.every(function(t){return"FragmentSpread"===t.kind&&e(r[t.name.value],r)})}(F(e)||V(e),U(L(e)))?null:e}function W(e){return function(t){return e.some(function(e){return e.name&&e.name===t.name.value||e.test&&e.test(t)})}}function X(e,t){var r=Object.create(null),i=[],a=Object.create(null),o=[],s=Y(Object(n.visit)(t,{Variable:{enter:function(e,t,n){"VariableDefinition"!==n.kind&&(r[e.name.value]=!0)}},Field:{enter:function(t){if(e&&t.directives&&(e.some(function(e){return e.remove})&&t.directives&&t.directives.some(W(e))))return t.arguments&&t.arguments.forEach(function(e){"Variable"===e.value.kind&&i.push({name:e.value.name.value})}),t.selectionSet&&function e(t){var r=[];t.selections.forEach(function(t){(_(t)||g(t))&&t.selectionSet?e(t.selectionSet).forEach(function(e){return r.push(e)}):"FragmentSpread"===t.kind&&r.push(t)});return r}(t.selectionSet).forEach(function(e){o.push({name:e.name.value})}),null}},FragmentSpread:{enter:function(e){a[e.name.value]=!0}},Directive:{enter:function(t){if(W(e)(t))return null}}}));return s&&Q(i,function(e){return!r[e.name]}).length&&(s=re(i,s)),s&&Q(o,function(e){return!a[e.name]}).length&&(s=ne(o,s)),s}function Z(e){return Object(n.visit)(R(e),{SelectionSet:{enter:function(e,t,r){if(!r||"OperationDefinition"!==r.kind){var n=e.selections;if(n)if(!n.some(function(e){return _(e)&&("__typename"===e.name.value||0===e.name.value.lastIndexOf("__",0))})){var i=r;if(!(_(i)&&i.directives&&i.directives.some(function(e){return"export"===e.name.value})))return Object(a.__assign)({},e,{selections:n.concat([H])})}}}}})}var K={test:function(e){var t="connection"===e.name.value;return t&&(e.arguments&&e.arguments.some(function(e){return"key"===e.name.value})||i.invariant.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key.")),t}};function J(e){return X([K],R(e))}function $(e,t,r){return void 0===r&&(r=!0),t&&t.selections&&t.selections.some(function(t){return ee(e,t,r)})}function ee(e,t,r){return void 0===r&&(r=!0),!_(t)||!!t.directives&&(t.directives.some(W(e))||r&&$(e,t.selectionSet,r))}function te(e,t){var r;return R(t),Y(Object(n.visit)(t,{SelectionSet:{enter:function(t,n,i,o){var s=o.join("-");if(!r||s===r||!s.startsWith(r)){if(t.selections){var l=t.selections.filter(function(t){return ee(e,t)});return $(e,t,!1)&&(r=s),Object(a.__assign)({},t,{selections:l})}return null}}}}))}function re(e,t){var r=function(e){return function(t){return e.some(function(e){return t.value&&"Variable"===t.value.kind&&t.value.name&&(e.name===t.value.name.value||e.test&&e.test(t))})}}(e);return Y(Object(n.visit)(t,{OperationDefinition:{enter:function(t){return Object(a.__assign)({},t,{variableDefinitions:t.variableDefinitions.filter(function(t){return!e.some(function(e){return e.name===t.variable.name.value})})})}},Field:{enter:function(t){if(e.some(function(e){return e.remove})){var n=0;if(t.arguments.forEach(function(e){r(e)&&(n+=1)}),1===n)return null}}},Argument:{enter:function(e){if(r(e))return null}}}))}function ne(e,t){function r(t){if(e.some(function(e){return e.name===t.name.value}))return null}return Y(Object(n.visit)(t,{FragmentSpread:{enter:r},FragmentDefinition:{enter:r}}))}function ie(e){return"query"===z(e).operation?e:Object(n.visit)(e,{OperationDefinition:{enter:function(e){return Object(a.__assign)({},e,{operation:"query"})}}})}function ae(e){R(e);var t=X([{test:function(e){return"client"===e.name.value},remove:!0}],e);return t&&(t=Object(n.visit)(t,{FragmentDefinition:{enter:function(e){if(e.selectionSet&&e.selectionSet.selections.every(function(e){return _(e)&&"__typename"===e.name.value}))return null}}})),t}var oe="function"==typeof WeakMap&&!("object"==typeof navigator&&"ReactNative"===navigator.product),se=Object.prototype.toString;function le(e){return function e(t,r){switch(se.call(t)){case"[object Array]":if(r.has(t))return r.get(t);var n=t.slice(0);return r.set(t,n),n.forEach(function(t,i){n[i]=e(t,r)}),n;case"[object Object]":if(r.has(t))return r.get(t);var i=Object.create(Object.getPrototypeOf(t));return r.set(t,i),Object.keys(t).forEach(function(n){i[n]=e(t[n],r)}),i;default:return t}}(e,new Map)}function ue(){return"development"}function ce(e){return"development"===e}function de(){return!0===ce("production")}function he(){return!0===ce("development")}function fe(){return!0===ce("test")}function pe(e){try{return e()}catch(e){console.error&&console.error(e)}}function me(e){return e.errors&&e.errors.length}function ve(e){if((he()||fe())&&!("function"==typeof Symbol&&"string"==typeof Symbol("")))return function e(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(r){null===t[r]||"object"!=typeof t[r]&&"function"!=typeof t[r]||Object.isFrozen(t[r])||e(t[r])}),t}(e);return e}var _e=Object.prototype.hasOwnProperty;function ge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ye(e)}function ye(e){var t=e[0]||{},r=e.length;if(r>1){var n=[];t=we(t,n);for(var i=1;i<r;++i)t=xe(t,e[i],n)}return t}function be(e){return null!==e&&"object"==typeof e}function xe(e,t,r){return be(t)&&be(e)?(Object.isExtensible&&!Object.isExtensible(e)&&(e=we(e,r)),Object.keys(t).forEach(function(n){var i=t[n];if(_e.call(e,n)){var a=e[n];i!==a&&(e[n]=xe(we(a,r),i,r))}else e[n]=i}),e):t}function we(e,t){return null!==e&&"object"==typeof e&&t.indexOf(e)<0&&(e=Array.isArray(e)?e.slice(0):Object(a.__assign)({__proto__:Object.getPrototypeOf(e)},e),t.push(e)),e}var Ee=Object.create({});function Me(e,t){void 0===t&&(t="warn"),de()||Ee[e]||(fe()||(Ee[e]=!0),"error"===t?console.error(e):console.warn(e))}function Ae(e){return JSON.parse(JSON.stringify(e))}}.call(this,r("./node_modules/process/browser.js"))},"./node_modules/apollo-cache/lib/bundle.esm.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ApolloCache",function(){return l}),r.d(t,"Cache",function(){return o});var n=r("./node_modules/apollo-cache/node_modules/apollo-utilities/lib/bundle.esm.js");function i(e){return{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:a(e)}]}}function a(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return null;if(Array.isArray(e))return a(e[0]);var t=[];return Object.keys(e).forEach(function(r){var n={kind:"Field",name:{kind:"Name",value:r},selectionSet:a(e[r])||void 0};t.push(n)}),{kind:"SelectionSet",selections:t}}var o,s={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:null,variableDefinitions:null,directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:null}]}}]},l=function(){function e(){}return e.prototype.transformDocument=function(e){return e},e.prototype.transformForLink=function(e){return e},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!1),this.read({query:e.query,variables:e.variables,optimistic:t})},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!1),this.read({query:Object(n.getFragmentQueryDocument)(e.fragment,e.fragmentName),variables:e.variables,rootId:e.id,optimistic:t})},e.prototype.writeQuery=function(e){this.write({dataId:"ROOT_QUERY",result:e.data,query:e.query,variables:e.variables})},e.prototype.writeFragment=function(e){this.write({dataId:e.id,result:e.data,variables:e.variables,query:Object(n.getFragmentQueryDocument)(e.fragment,e.fragmentName)})},e.prototype.writeData=function(e){var t,r,n=e.id,o=e.data;if(void 0!==n){var l=null;try{l=this.read({rootId:n,optimistic:!1,query:s})}catch(e){}var u=l&&l.__typename||"__ClientData",c=Object.assign({__typename:u},o);this.writeFragment({id:n,fragment:(t=c,r=u,{kind:"Document",definitions:[{kind:"FragmentDefinition",typeCondition:{kind:"NamedType",name:{kind:"Name",value:r||"__FakeType"}},name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:a(t)}]}),data:c})}else this.writeQuery({query:i(o),data:o})},e}();o||(o={})},"./node_modules/apollo-cache/node_modules/apollo-utilities/lib/bundle.esm.js":function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"addTypenameToDocument",function(){return Z}),r.d(t,"argumentsObjectFromField",function(){return m}),r.d(t,"assign",function(){return N}),r.d(t,"buildQueryFromSelectionSet",function(){return ie}),r.d(t,"canUseWeakMap",function(){return oe}),r.d(t,"checkDocument",function(){return R}),r.d(t,"cloneDeep",function(){return le}),r.d(t,"createFragmentMap",function(){return U}),r.d(t,"getDefaultValues",function(){return G}),r.d(t,"getDirectiveInfoFromField",function(){return M}),r.d(t,"getDirectiveNames",function(){return T}),r.d(t,"getDirectivesFromDocument",function(){return te}),r.d(t,"getEnv",function(){return ue}),r.d(t,"getFragmentDefinition",function(){return V}),r.d(t,"getFragmentDefinitions",function(){return L}),r.d(t,"getFragmentQueryDocument",function(){return I}),r.d(t,"getInclusionDirectives",function(){return P}),r.d(t,"getMainDefinition",function(){return z}),r.d(t,"getMutationDefinition",function(){return O}),r.d(t,"getOperationDefinition",function(){return F}),r.d(t,"getOperationDefinitionOrDie",function(){return C}),r.d(t,"getOperationName",function(){return B}),r.d(t,"getQueryDefinition",function(){return j}),r.d(t,"getStoreKeyName",function(){return p}),r.d(t,"graphQLResultHasError",function(){return me}),r.d(t,"hasClientExports",function(){return k}),r.d(t,"hasDirectives",function(){return S}),r.d(t,"isDevelopment",function(){return he}),r.d(t,"isEnv",function(){return ce}),r.d(t,"isField",function(){return _}),r.d(t,"isIdValue",function(){return y}),r.d(t,"isInlineFragment",function(){return g}),r.d(t,"isJsonValue",function(){return x}),r.d(t,"isNumberValue",function(){return c}),r.d(t,"isProduction",function(){return de}),r.d(t,"isScalarValue",function(){return u}),r.d(t,"isTest",function(){return fe}),r.d(t,"maybeDeepFreeze",function(){return ve}),r.d(t,"mergeDeep",function(){return ge}),r.d(t,"mergeDeepArray",function(){return ye}),r.d(t,"removeArgumentsFromDocument",function(){return re}),r.d(t,"removeClientSetsFromDocument",function(){return ae}),r.d(t,"removeConnectionDirectiveFromDocument",function(){return J}),r.d(t,"removeDirectivesFromDocument",function(){return X}),r.d(t,"removeFragmentSpreadFromDocument",function(){return ne}),r.d(t,"resultKeyNameFromField",function(){return v}),r.d(t,"shouldInclude",function(){return A}),r.d(t,"storeKeyNameFromField",function(){return h}),r.d(t,"stripSymbols",function(){return Ae}),r.d(t,"toIdValue",function(){return b}),r.d(t,"tryFunctionOrLogError",function(){return pe}),r.d(t,"valueFromNode",function(){return E}),r.d(t,"valueToObjectRepresentation",function(){return d}),r.d(t,"variablesInOperation",function(){return q}),r.d(t,"warnOnceInDevelopment",function(){return Me});var n=r("./node_modules/graphql/language/visitor.js"),i=r("./node_modules/ts-invariant/lib/invariant.esm.js"),a=r("./node_modules/tslib/tslib.es6.js"),o=r("./node_modules/fast-json-stable-stringify/index.js"),s=r.n(o),l=r("./node_modules/@wry/equality/lib/equality.esm.js");function u(e){return["StringValue","BooleanValue","EnumValue"].indexOf(e.kind)>-1}function c(e){return["IntValue","FloatValue"].indexOf(e.kind)>-1}function d(e,t,r,n){if(function(e){return"IntValue"===e.kind}(r)||function(e){return"FloatValue"===e.kind}(r))e[t.value]=Number(r.value);else if(function(e){return"BooleanValue"===e.kind}(r)||function(e){return"StringValue"===e.kind}(r))e[t.value]=r.value;else if(function(e){return"ObjectValue"===e.kind}(r)){var a={};r.fields.map(function(e){return d(a,e.name,e.value,n)}),e[t.value]=a}else if(function(e){return"Variable"===e.kind}(r)){var o=(n||{})[r.name.value];e[t.value]=o}else if(function(e){return"ListValue"===e.kind}(r))e[t.value]=r.values.map(function(e){var r={};return d(r,t,e,n),r[t.value]});else if(function(e){return"EnumValue"===e.kind}(r))e[t.value]=r.value;else{if(!function(e){return"NullValue"===e.kind}(r))throw new i.InvariantError('The inline argument "'+t.value+'" of kind "'+r.kind+'"is not supported. Use variables instead of inline arguments to overcome this limitation.');e[t.value]=null}}function h(e,t){var r=null;e.directives&&(r={},e.directives.forEach(function(e){r[e.name.value]={},e.arguments&&e.arguments.forEach(function(n){var i=n.name,a=n.value;return d(r[e.name.value],i,a,t)})}));var n=null;return e.arguments&&e.arguments.length&&(n={},e.arguments.forEach(function(e){var r=e.name,i=e.value;return d(n,r,i,t)})),p(e.name.value,n,r)}r.d(t,"isEqual",function(){return l.equal});var f=["connection","include","skip","client","rest","export"];function p(e,t,r){if(r&&r.connection&&r.connection.key){if(r.connection.filter&&r.connection.filter.length>0){var n=r.connection.filter?r.connection.filter:[];n.sort();var i=t,a={};return n.forEach(function(e){a[e]=i[e]}),r.connection.key+"("+JSON.stringify(a)+")"}return r.connection.key}var o=e;if(t){var l=s()(t);o+="("+l+")"}return r&&Object.keys(r).forEach(function(e){-1===f.indexOf(e)&&(r[e]&&Object.keys(r[e]).length?o+="@"+e+"("+JSON.stringify(r[e])+")":o+="@"+e)}),o}function m(e,t){if(e.arguments&&e.arguments.length){var r={};return e.arguments.forEach(function(e){var n=e.name,i=e.value;return d(r,n,i,t)}),r}return null}function v(e){return e.alias?e.alias.value:e.name.value}function _(e){return"Field"===e.kind}function g(e){return"InlineFragment"===e.kind}function y(e){return e&&"id"===e.type&&"boolean"==typeof e.generated}function b(e,t){return void 0===t&&(t=!1),Object(a.__assign)({type:"id",generated:t},"string"==typeof e?{id:e,typename:void 0}:e)}function x(e){return null!=e&&"object"==typeof e&&"json"===e.type}function w(e){throw new i.InvariantError("Variable nodes are not supported by valueFromNode")}function E(e,t){switch(void 0===t&&(t=w),e.kind){case"Variable":return t(e);case"NullValue":return null;case"IntValue":return parseInt(e.value,10);case"FloatValue":return parseFloat(e.value);case"ListValue":return e.values.map(function(e){return E(e,t)});case"ObjectValue":for(var r={},n=0,i=e.fields;n<i.length;n++){var a=i[n];r[a.name.value]=E(a.value,t)}return r;default:return e.value}}function M(e,t){if(e.directives&&e.directives.length){var r={};return e.directives.forEach(function(e){r[e.name.value]=m(e,t)}),r}return null}function A(e,t){return void 0===t&&(t={}),P(e.directives).every(function(e){var r=e.directive,n=e.ifArgument,a=!1;return"Variable"===n.value.kind?(a=t[n.value.name.value],Object(i.invariant)(void 0!==a,"Invalid variable referenced in @"+r.name.value+" directive.")):a=n.value.value,"skip"===r.name.value?!a:a})}function T(e){var t=[];return Object(n.visit)(e,{Directive:function(e){t.push(e.name.value)}}),t}function S(e,t){return T(t).some(function(t){return e.indexOf(t)>-1})}function k(e){return e&&S(["client"],e)&&S(["export"],e)}function D(e){var t=e.name.value;return"skip"===t||"include"===t}function P(e){return e?e.filter(D).map(function(e){var t=e.arguments,r=e.name.value;Object(i.invariant)(t&&1===t.length,"Incorrect number of arguments for the @"+r+" directive.");var n=t[0];Object(i.invariant)(n.name&&"if"===n.name.value,"Invalid argument for the @"+r+" directive.");var a=n.value;return Object(i.invariant)(a&&("Variable"===a.kind||"BooleanValue"===a.kind),"Argument for the @"+r+" directive must be a variable or a boolean value."),{directive:e,ifArgument:n}}):[]}function I(e,t){var r=t,n=[];return e.definitions.forEach(function(e){if("OperationDefinition"===e.kind)throw new i.InvariantError("Found a "+e.operation+" operation"+(e.name?" named '"+e.name.value+"'":"")+". No operations are allowed when using a fragment as a query. Only fragments are allowed.");"FragmentDefinition"===e.kind&&n.push(e)}),void 0===r&&(Object(i.invariant)(1===n.length,"Found "+n.length+" fragments. `fragmentName` must be provided when there is not exactly 1 fragment."),r=n[0].name.value),Object(a.__assign)({},e,{definitions:[{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:r}}]}}].concat(e.definitions)})}function N(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.forEach(function(t){null!=t&&Object.keys(t).forEach(function(r){e[r]=t[r]})}),e}function O(e){R(e);var t=e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation})[0];return Object(i.invariant)(t,"Must contain a mutation definition."),t}function R(e){Object(i.invariant)(e&&"Document"===e.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql');var t=e.definitions.filter(function(e){return"FragmentDefinition"!==e.kind}).map(function(e){if("OperationDefinition"!==e.kind)throw new i.InvariantError('Schema type definitions not allowed in queries. Found: "'+e.kind+'"');return e});return Object(i.invariant)(t.length<=1,"Ambiguous GraphQL document: contains "+t.length+" operations"),e}function F(e){return R(e),e.definitions.filter(function(e){return"OperationDefinition"===e.kind})[0]}function C(e){var t=F(e);return Object(i.invariant)(t,"GraphQL document is missing an operation"),t}function B(e){return e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&e.name}).map(function(e){return e.name.value})[0]||null}function L(e){return e.definitions.filter(function(e){return"FragmentDefinition"===e.kind})}function j(e){var t=F(e);return Object(i.invariant)(t&&"query"===t.operation,"Must contain a query definition."),t}function V(e){Object(i.invariant)("Document"===e.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'),Object(i.invariant)(e.definitions.length<=1,"Fragment must have exactly one definition.");var t=e.definitions[0];return Object(i.invariant)("FragmentDefinition"===t.kind,"Must be a fragment definition."),t}function z(e){var t;R(e);for(var r=0,n=e.definitions;r<n.length;r++){var a=n[r];if("OperationDefinition"===a.kind){var o=a.operation;if("query"===o||"mutation"===o||"subscription"===o)return a}"FragmentDefinition"!==a.kind||t||(t=a)}if(t)return t;throw new i.InvariantError("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment.")}function U(e){void 0===e&&(e=[]);var t={};return e.forEach(function(e){t[e.name.value]=e}),t}function G(e){if(e&&e.variableDefinitions&&e.variableDefinitions.length){var t=e.variableDefinitions.filter(function(e){return e.defaultValue}).map(function(e){var t=e.variable,r=e.defaultValue,n={};return d(n,t.name,r),n});return N.apply(void 0,[{}].concat(t))}return{}}function q(e){var t=new Set;if(e.variableDefinitions)for(var r=0,n=e.variableDefinitions;r<n.length;r++){var i=n[r];t.add(i.variable.name.value)}return t}function Q(e,t,r){var n=0;return e.forEach(function(r,i){t.call(this,r,i,e)&&(e[n++]=r)},r),e.length=n,e}var H={kind:"Field",name:{kind:"Name",value:"__typename"}};function Y(e){return function e(t,r){return t.selectionSet.selections.every(function(t){return"FragmentSpread"===t.kind&&e(r[t.name.value],r)})}(F(e)||V(e),U(L(e)))?null:e}function W(e){return function(t){return e.some(function(e){return e.name&&e.name===t.name.value||e.test&&e.test(t)})}}function X(e,t){var r=Object.create(null),i=[],a=Object.create(null),o=[],s=Y(Object(n.visit)(t,{Variable:{enter:function(e,t,n){"VariableDefinition"!==n.kind&&(r[e.name.value]=!0)}},Field:{enter:function(t){if(e&&t.directives&&(e.some(function(e){return e.remove})&&t.directives&&t.directives.some(W(e))))return t.arguments&&t.arguments.forEach(function(e){"Variable"===e.value.kind&&i.push({name:e.value.name.value})}),t.selectionSet&&function e(t){var r=[];t.selections.forEach(function(t){(_(t)||g(t))&&t.selectionSet?e(t.selectionSet).forEach(function(e){return r.push(e)}):"FragmentSpread"===t.kind&&r.push(t)});return r}(t.selectionSet).forEach(function(e){o.push({name:e.name.value})}),null}},FragmentSpread:{enter:function(e){a[e.name.value]=!0}},Directive:{enter:function(t){if(W(e)(t))return null}}}));return s&&Q(i,function(e){return!r[e.name]}).length&&(s=re(i,s)),s&&Q(o,function(e){return!a[e.name]}).length&&(s=ne(o,s)),s}function Z(e){return Object(n.visit)(R(e),{SelectionSet:{enter:function(e,t,r){if(!r||"OperationDefinition"!==r.kind){var n=e.selections;if(n)if(!n.some(function(e){return _(e)&&("__typename"===e.name.value||0===e.name.value.lastIndexOf("__",0))})){var i=r;if(!(_(i)&&i.directives&&i.directives.some(function(e){return"export"===e.name.value})))return Object(a.__assign)({},e,{selections:n.concat([H])})}}}}})}var K={test:function(e){var t="connection"===e.name.value;return t&&(e.arguments&&e.arguments.some(function(e){return"key"===e.name.value})||i.invariant.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key.")),t}};function J(e){return X([K],R(e))}function $(e,t,r){return void 0===r&&(r=!0),t&&t.selections&&t.selections.some(function(t){return ee(e,t,r)})}function ee(e,t,r){return void 0===r&&(r=!0),!_(t)||!!t.directives&&(t.directives.some(W(e))||r&&$(e,t.selectionSet,r))}function te(e,t){var r;return R(t),Y(Object(n.visit)(t,{SelectionSet:{enter:function(t,n,i,o){var s=o.join("-");if(!r||s===r||!s.startsWith(r)){if(t.selections){var l=t.selections.filter(function(t){return ee(e,t)});return $(e,t,!1)&&(r=s),Object(a.__assign)({},t,{selections:l})}return null}}}}))}function re(e,t){var r=function(e){return function(t){return e.some(function(e){return t.value&&"Variable"===t.value.kind&&t.value.name&&(e.name===t.value.name.value||e.test&&e.test(t))})}}(e);return Y(Object(n.visit)(t,{OperationDefinition:{enter:function(t){return Object(a.__assign)({},t,{variableDefinitions:t.variableDefinitions.filter(function(t){return!e.some(function(e){return e.name===t.variable.name.value})})})}},Field:{enter:function(t){if(e.some(function(e){return e.remove})){var n=0;if(t.arguments.forEach(function(e){r(e)&&(n+=1)}),1===n)return null}}},Argument:{enter:function(e){if(r(e))return null}}}))}function ne(e,t){function r(t){if(e.some(function(e){return e.name===t.name.value}))return null}return Y(Object(n.visit)(t,{FragmentSpread:{enter:r},FragmentDefinition:{enter:r}}))}function ie(e){return"query"===z(e).operation?e:Object(n.visit)(e,{OperationDefinition:{enter:function(e){return Object(a.__assign)({},e,{operation:"query"})}}})}function ae(e){R(e);var t=X([{test:function(e){return"client"===e.name.value},remove:!0}],e);return t&&(t=Object(n.visit)(t,{FragmentDefinition:{enter:function(e){if(e.selectionSet&&e.selectionSet.selections.every(function(e){return _(e)&&"__typename"===e.name.value}))return null}}})),t}var oe="function"==typeof WeakMap&&!("object"==typeof navigator&&"ReactNative"===navigator.product),se=Object.prototype.toString;function le(e){return function e(t,r){switch(se.call(t)){case"[object Array]":if(r.has(t))return r.get(t);var n=t.slice(0);return r.set(t,n),n.forEach(function(t,i){n[i]=e(t,r)}),n;case"[object Object]":if(r.has(t))return r.get(t);var i=Object.create(Object.getPrototypeOf(t));return r.set(t,i),Object.keys(t).forEach(function(n){i[n]=e(t[n],r)}),i;default:return t}}(e,new Map)}function ue(){return"development"}function ce(e){return"development"===e}function de(){return!0===ce("production")}function he(){return!0===ce("development")}function fe(){return!0===ce("test")}function pe(e){try{return e()}catch(e){console.error&&console.error(e)}}function me(e){return e.errors&&e.errors.length}function ve(e){if((he()||fe())&&!("function"==typeof Symbol&&"string"==typeof Symbol("")))return function e(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(r){null===t[r]||"object"!=typeof t[r]&&"function"!=typeof t[r]||Object.isFrozen(t[r])||e(t[r])}),t}(e);return e}var _e=Object.prototype.hasOwnProperty;function ge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ye(e)}function ye(e){var t=e[0]||{},r=e.length;if(r>1){var n=[];t=we(t,n);for(var i=1;i<r;++i)t=xe(t,e[i],n)}return t}function be(e){return null!==e&&"object"==typeof e}function xe(e,t,r){return be(t)&&be(e)?(Object.isExtensible&&!Object.isExtensible(e)&&(e=we(e,r)),Object.keys(t).forEach(function(n){var i=t[n];if(_e.call(e,n)){var a=e[n];i!==a&&(e[n]=xe(we(a,r),i,r))}else e[n]=i}),e):t}function we(e,t){return null!==e&&"object"==typeof e&&t.indexOf(e)<0&&(e=Array.isArray(e)?e.slice(0):Object(a.__assign)({__proto__:Object.getPrototypeOf(e)},e),t.push(e)),e}var Ee=Object.create({});function Me(e,t){void 0===t&&(t="warn"),de()||Ee[e]||(fe()||(Ee[e]=!0),"error"===t?console.error(e):console.warn(e))}function Ae(e){return JSON.parse(JSON.stringify(e))}}.call(this,r("./node_modules/process/browser.js"))},"./node_modules/apollo-client/bundle.esm.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ApolloClient",function(){return P}),r.d(t,"ApolloError",function(){return v}),r.d(t,"FetchType",function(){return p}),r.d(t,"NetworkStatus",function(){return n}),r.d(t,"ObservableQuery",function(){return _}),r.d(t,"isApolloError",function(){return f});var n,i=r("./node_modules/tslib/tslib.es6.js"),a=r("./node_modules/apollo-client/node_modules/apollo-utilities/lib/bundle.esm.js"),o=r("./node_modules/apollo-link/lib/bundle.esm.js"),s=r("./node_modules/symbol-observable/es/index.js"),l=r("./node_modules/ts-invariant/lib/invariant.esm.js"),u=r("./node_modules/graphql/language/visitor.js");function c(e){return e<7}!function(e){e[e.loading=1]="loading",e[e.setVariables=2]="setVariables",e[e.fetchMore=3]="fetchMore",e[e.refetch=4]="refetch",e[e.poll=6]="poll",e[e.ready=7]="ready",e[e.error=8]="error"}(n||(n={}));var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype[s.default]=function(){return this},t.prototype["@@observable"]=function(){return this},t}(o.Observable);function h(e){return Array.isArray(e)&&e.length>0}function f(e){return e.hasOwnProperty("graphQLErrors")}var p,m=function(e){var t="";return h(e.graphQLErrors)&&e.graphQLErrors.forEach(function(e){var r=e?e.message:"Error message not found.";t+="GraphQL error: "+r+"\n"}),e.networkError&&(t+="Network error: "+e.networkError.message+"\n"),t=t.replace(/\n$/,"")},v=function(e){function t(r){var n=r.graphQLErrors,i=r.networkError,a=r.errorMessage,o=r.extraInfo,s=e.call(this,a)||this;return s.graphQLErrors=n||[],s.networkError=i||null,s.message=a||m(s),s.extraInfo=o,s.__proto__=t.prototype,s}return Object(i.__extends)(t,e),t}(Error);!function(e){e[e.normal=1]="normal",e[e.refetch=2]="refetch",e[e.poll=3]="poll"}(p||(p={}));var _=function(e){function t(t){var r=t.queryManager,n=t.options,i=t.shouldSubscribe,o=void 0===i||i,s=e.call(this,function(e){return s.onSubscribe(e)})||this;s.observers=new Set,s.subscriptions=new Set,s.isTornDown=!1,s.options=n,s.variables=n.variables||{},s.queryId=r.generateQueryId(),s.shouldSubscribe=o;var l=Object(a.getOperationDefinition)(n.query);return s.queryName=l&&l.name&&l.name.value,s.queryManager=r,s}return Object(i.__extends)(t,e),t.prototype.result=function(){var e=this;return new Promise(function(t,r){var n={next:function(r){t(r),e.observers.delete(n),e.observers.size||e.queryManager.removeQuery(e.queryId),setTimeout(function(){i.unsubscribe()},0)},error:r},i=e.subscribe(n)})},t.prototype.currentResult=function(){var e=this.getCurrentResult();return void 0===e.data&&(e.data={}),e},t.prototype.getCurrentResult=function(){if(this.isTornDown){var e=this.lastResult;return{data:!this.lastError&&e&&e.data||void 0,error:this.lastError,loading:!1,networkStatus:n.error}}var t,r,a,o=this.queryManager.getCurrentQueryResult(this),s=o.data,l=o.partial,u=this.queryManager.queryStore.get(this.queryId),d=this.options.fetchPolicy,f="network-only"===d||"no-cache"===d;if(u){var p=u.networkStatus;if(r=u,void 0===(a=this.options.errorPolicy)&&(a="none"),r&&(r.networkError||"none"===a&&h(r.graphQLErrors)))return{data:void 0,loading:!1,networkStatus:p,error:new v({graphQLErrors:u.graphQLErrors,networkError:u.networkError})};u.variables&&(this.options.variables=Object(i.__assign)({},this.options.variables,u.variables),this.variables=this.options.variables),t={data:s,loading:c(p),networkStatus:p},u.graphQLErrors&&"all"===this.options.errorPolicy&&(t.errors=u.graphQLErrors)}else{var m=f||l&&"cache-only"!==d;t={data:s,loading:m,networkStatus:m?n.loading:n.ready}}return l||this.updateLastResult(Object(i.__assign)({},t,{stale:!1})),Object(i.__assign)({},t,{partial:l})},t.prototype.isDifferentFromLastResult=function(e){var t=this.lastResultSnapshot;return!(t&&e&&t.networkStatus===e.networkStatus&&t.stale===e.stale&&Object(a.isEqual)(t.data,e.data))},t.prototype.getLastResult=function(){return this.lastResult},t.prototype.getLastError=function(){return this.lastError},t.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},t.prototype.resetQueryStoreErrors=function(){var e=this.queryManager.queryStore.get(this.queryId);e&&(e.networkError=null,e.graphQLErrors=[])},t.prototype.refetch=function(e){var t=this.options.fetchPolicy;return"cache-only"===t?Promise.reject(new l.InvariantError("cache-only fetchPolicy option should not be used together with query refetch.")):("no-cache"!==t&&"cache-and-network"!==t&&(t="network-only"),Object(a.isEqual)(this.variables,e)||(this.variables=Object(i.__assign)({},this.variables,e)),Object(a.isEqual)(this.options.variables,this.variables)||(this.options.variables=Object(i.__assign)({},this.options.variables,this.variables)),this.queryManager.fetchQuery(this.queryId,Object(i.__assign)({},this.options,{fetchPolicy:t}),p.refetch))},t.prototype.fetchMore=function(e){var t=this;Object(l.invariant)(e.updateQuery,"updateQuery option is required. This function defines how to update the query data with the new results.");var r=Object(i.__assign)({},e.query?e:Object(i.__assign)({},this.options,e,{variables:Object(i.__assign)({},this.variables,e.variables)}),{fetchPolicy:"network-only"}),n=this.queryManager.generateQueryId();return this.queryManager.fetchQuery(n,r,p.normal,this.queryId).then(function(i){return t.updateQuery(function(t){return e.updateQuery(t,{fetchMoreResult:i.data,variables:r.variables})}),t.queryManager.stopQuery(n),i},function(e){throw t.queryManager.stopQuery(n),e})},t.prototype.subscribeToMore=function(e){var t=this,r=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables}).subscribe({next:function(r){var n=e.updateQuery;n&&t.updateQuery(function(e,t){var i=t.variables;return n(e,{subscriptionData:r,variables:i})})},error:function(t){e.onError?e.onError(t):l.invariant.error("Unhandled GraphQL subscription error",t)}});return this.subscriptions.add(r),function(){t.subscriptions.delete(r)&&r.unsubscribe()}},t.prototype.setOptions=function(e){var t=this.options.fetchPolicy;this.options=Object(i.__assign)({},this.options,e),e.pollInterval?this.startPolling(e.pollInterval):0===e.pollInterval&&this.stopPolling();var r=e.fetchPolicy;return this.setVariables(this.options.variables,t!==r&&("cache-only"===t||"standby"===t||"network-only"===r),e.fetchResults)},t.prototype.setVariables=function(e,t,r){return void 0===t&&(t=!1),void 0===r&&(r=!0),this.isTornDown=!1,e=e||this.variables,!t&&Object(a.isEqual)(e,this.variables)?this.observers.size&&r?this.result():Promise.resolve():(this.variables=this.options.variables=e,this.observers.size?this.queryManager.fetchQuery(this.queryId,this.options):Promise.resolve())},t.prototype.updateQuery=function(e){var t=this.queryManager,r=t.getQueryWithPreviousResult(this.queryId),n=r.previousResult,i=r.variables,o=r.document,s=Object(a.tryFunctionOrLogError)(function(){return e(n,{variables:i})});s&&(t.dataStore.markUpdateQueryResult(o,i,s),t.broadcastQueries())},t.prototype.stopPolling=function(){this.queryManager.stopPollingQuery(this.queryId),this.options.pollInterval=void 0},t.prototype.startPolling=function(e){b(this),this.options.pollInterval=e,this.queryManager.startPollingQuery(this.options,this.queryId)},t.prototype.updateLastResult=function(e){var t=this.lastResult;return this.lastResult=e,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?e:Object(a.cloneDeep)(e),t},t.prototype.onSubscribe=function(e){var t=this;try{var r=e._subscription._observer;r&&!r.error&&(r.error=g)}catch(e){}var n=!this.observers.size;return this.observers.add(e),e.next&&this.lastResult&&e.next(this.lastResult),e.error&&this.lastError&&e.error(this.lastError),n&&this.setUpQuery(),function(){t.observers.delete(e)&&!t.observers.size&&t.tearDownQuery()}},t.prototype.setUpQuery=function(){var e=this,t=this.queryManager,r=this.queryId;this.shouldSubscribe&&t.addObservableQuery(r,this),this.options.pollInterval&&(b(this),t.startPollingQuery(this.options,r));var n=function(t){y(e.observers,"error",e.lastError=t)};t.observeQuery(r,this.options,{next:function(r){if(e.lastError||e.isDifferentFromLastResult(r)){var n=e.updateLastResult(r),i=e.options,o=i.query,s=i.variables,l=i.fetchPolicy;t.transform(o).hasClientExports?t.getLocalState().addExportedVariables(o,s).then(function(i){var s=e.variables;e.variables=e.options.variables=i,!r.loading&&n&&"cache-only"!==l&&t.transform(o).serverQuery&&!Object(a.isEqual)(s,i)?e.refetch():y(e.observers,"next",r)}):y(e.observers,"next",r)}},error:n}).catch(n)},t.prototype.tearDownQuery=function(){var e=this.queryManager;this.isTornDown=!0,e.stopPollingQuery(this.queryId),this.subscriptions.forEach(function(e){return e.unsubscribe()}),this.subscriptions.clear(),e.removeObservableQuery(this.queryId),e.stopQuery(this.queryId),this.observers.clear()},t}(d);function g(e){l.invariant.error("Unhandled error",e.message,e.stack)}function y(e,t,r){var n=[];e.forEach(function(e){return e[t]&&n.push(e)}),n.forEach(function(e){return e[t](r)})}function b(e){var t=e.options.fetchPolicy;Object(l.invariant)("cache-first"!==t&&"cache-only"!==t,"Queries that specify the cache-first and cache-only fetchPolicies cannot also be polling queries.")}var x=function(){function e(){this.store={}}return e.prototype.getStore=function(){return this.store},e.prototype.get=function(e){return this.store[e]},e.prototype.initMutation=function(e,t,r){this.store[e]={mutation:t,variables:r||{},loading:!0,error:null}},e.prototype.markMutationError=function(e,t){var r=this.store[e];r&&(r.loading=!1,r.error=t)},e.prototype.markMutationResult=function(e){var t=this.store[e];t&&(t.loading=!1,t.error=null)},e.prototype.reset=function(){this.store={}},e}(),w=function(){function e(){this.store={}}return e.prototype.getStore=function(){return this.store},e.prototype.get=function(e){return this.store[e]},e.prototype.initQuery=function(e){var t=this.store[e.queryId];Object(l.invariant)(!t||t.document===e.document||Object(a.isEqual)(t.document,e.document),"Internal Error: may not update existing query string in store");var r,i=!1,o=null;e.storePreviousVariables&&t&&t.networkStatus!==n.loading&&(Object(a.isEqual)(t.variables,e.variables)||(i=!0,o=t.variables)),r=i?n.setVariables:e.isPoll?n.poll:e.isRefetch?n.refetch:n.loading;var s=[];t&&t.graphQLErrors&&(s=t.graphQLErrors),this.store[e.queryId]={document:e.document,variables:e.variables,previousVariables:o,networkError:null,graphQLErrors:s,networkStatus:r,metadata:e.metadata},"string"==typeof e.fetchMoreForQueryId&&this.store[e.fetchMoreForQueryId]&&(this.store[e.fetchMoreForQueryId].networkStatus=n.fetchMore)},e.prototype.markQueryResult=function(e,t,r){this.store&&this.store[e]&&(this.store[e].networkError=null,this.store[e].graphQLErrors=h(t.errors)?t.errors:[],this.store[e].previousVariables=null,this.store[e].networkStatus=n.ready,"string"==typeof r&&this.store[r]&&(this.store[r].networkStatus=n.ready))},e.prototype.markQueryError=function(e,t,r){this.store&&this.store[e]&&(this.store[e].networkError=t,this.store[e].networkStatus=n.error,"string"==typeof r&&this.markQueryResultClient(r,!0))},e.prototype.markQueryResultClient=function(e,t){var r=this.store&&this.store[e];r&&(r.networkError=null,r.previousVariables=null,t&&(r.networkStatus=n.ready))},e.prototype.stopQuery=function(e){delete this.store[e]},e.prototype.reset=function(e){var t=this;Object.keys(this.store).forEach(function(r){e.indexOf(r)<0?t.stopQuery(r):t.store[r].networkStatus=n.loading})},e}();var E=function(){function e(e){var t=e.cache,r=e.client,n=e.resolvers,i=e.fragmentMatcher;this.cache=t,r&&(this.client=r),n&&this.addResolvers(n),i&&this.setFragmentMatcher(i)}return e.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(e){t.resolvers=Object(a.mergeDeep)(t.resolvers,e)}):this.resolvers=Object(a.mergeDeep)(this.resolvers,e)},e.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},e.prototype.getResolvers=function(){return this.resolvers||{}},e.prototype.runResolvers=function(e){var t=e.document,r=e.remoteResult,n=e.context,a=e.variables,o=e.onlyRunForcedResolvers,s=void 0!==o&&o;return Object(i.__awaiter)(this,void 0,void 0,function(){return Object(i.__generator)(this,function(e){return t?[2,this.resolveDocument(t,r.data,n,a,this.fragmentMatcher,s).then(function(e){return Object(i.__assign)({},r,{data:e.result})})]:[2,r]})})},e.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},e.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},e.prototype.clientQuery=function(e){if(Object(a.hasDirectives)(["client"],e)){if(this.resolvers)return e;l.invariant.warn("Found @client directives in a query but no ApolloClient resolvers were specified. This means ApolloClient local resolver handling has been disabled, and @client directives will be passed through to your link chain.")}return null},e.prototype.serverQuery=function(e){return this.resolvers?Object(a.removeClientSetsFromDocument)(e):e},e.prototype.prepareContext=function(e){void 0===e&&(e={});var t=this.cache;return Object(i.__assign)({},e,{cache:t,getCacheKey:function(e){if(t.config)return t.config.dataIdFromObject(e);Object(l.invariant)(!1,"To use context.getCacheKey, you need to use a cache that has a configurable dataIdFromObject, like apollo-cache-inmemory.")}})},e.prototype.addExportedVariables=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r={}),Object(i.__awaiter)(this,void 0,void 0,function(){return Object(i.__generator)(this,function(n){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,t)||{},this.prepareContext(r),t).then(function(e){return Object(i.__assign)({},t,e.exportedVariables)})]:[2,Object(i.__assign)({},t)]})})},e.prototype.shouldForceResolvers=function(e){var t=!1;return Object(u.visit)(e,{Directive:{enter:function(e){if("client"===e.name.value&&e.arguments&&(t=e.arguments.some(function(e){return"always"===e.name.value&&"BooleanValue"===e.value.kind&&!0===e.value.value})))return u.BREAK}}}),t},e.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:Object(a.buildQueryFromSelectionSet)(e),variables:t,returnPartialData:!0,optimistic:!1}).result},e.prototype.resolveDocument=function(e,t,r,n,o,s){return void 0===r&&(r={}),void 0===n&&(n={}),void 0===o&&(o=function(){return!0}),void 0===s&&(s=!1),Object(i.__awaiter)(this,void 0,void 0,function(){var l,u,c,d,h,f,p,m,v;return Object(i.__generator)(this,function(_){var g;return l=Object(a.getMainDefinition)(e),u=Object(a.getFragmentDefinitions)(e),c=Object(a.createFragmentMap)(u),d=l.operation,h=d?(g=d).charAt(0).toUpperCase()+g.slice(1):"Query",p=(f=this).cache,m=f.client,v={fragmentMap:c,context:Object(i.__assign)({},r,{cache:p,client:m}),variables:n,fragmentMatcher:o,defaultOperationType:h,exportedVariables:{},onlyRunForcedResolvers:s},[2,this.resolveSelectionSet(l.selectionSet,t,v).then(function(e){return{result:e,exportedVariables:v.exportedVariables}})]})})},e.prototype.resolveSelectionSet=function(e,t,r){return Object(i.__awaiter)(this,void 0,void 0,function(){var n,o,s,u,c,d=this;return Object(i.__generator)(this,function(h){return n=r.fragmentMap,o=r.context,s=r.variables,u=[t],c=function(e){return Object(i.__awaiter)(d,void 0,void 0,function(){var c,d;return Object(i.__generator)(this,function(i){return Object(a.shouldInclude)(e,s)?Object(a.isField)(e)?[2,this.resolveField(e,t,r).then(function(t){var r;void 0!==t&&u.push(((r={})[Object(a.resultKeyNameFromField)(e)]=t,r))})]:(Object(a.isInlineFragment)(e)?c=e:(c=n[e.name.value],Object(l.invariant)(c,"No fragment named "+e.name.value)),c&&c.typeCondition&&(d=c.typeCondition.name.value,r.fragmentMatcher(t,d,o))?[2,this.resolveSelectionSet(c.selectionSet,t,r).then(function(e){u.push(e)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(c)).then(function(){return Object(a.mergeDeepArray)(u)})]})})},e.prototype.resolveField=function(e,t,r){return Object(i.__awaiter)(this,void 0,void 0,function(){var n,o,s,l,u,c,d,h,f,p=this;return Object(i.__generator)(this,function(i){return n=r.variables,o=e.name.value,s=Object(a.resultKeyNameFromField)(e),l=o!==s,u=t[s]||t[o],c=Promise.resolve(u),r.onlyRunForcedResolvers&&!this.shouldForceResolvers(e)||(d=t.__typename||r.defaultOperationType,(h=this.resolvers&&this.resolvers[d])&&(f=h[l?o:s])&&(c=Promise.resolve(f(t,Object(a.argumentsObjectFromField)(e,n),r.context,{field:e})))),[2,c.then(function(t){return void 0===t&&(t=u),e.directives&&e.directives.forEach(function(e){"export"===e.name.value&&e.arguments&&e.arguments.forEach(function(e){"as"===e.name.value&&"StringValue"===e.value.kind&&(r.exportedVariables[e.value.value]=t)})}),e.selectionSet?null==t?t:Array.isArray(t)?p.resolveSubSelectedArray(e,t,r):e.selectionSet?p.resolveSelectionSet(e.selectionSet,t,r):void 0:t})]})})},e.prototype.resolveSubSelectedArray=function(e,t,r){var n=this;return Promise.all(t.map(function(t){return null===t?null:Array.isArray(t)?n.resolveSubSelectedArray(e,t,r):e.selectionSet?n.resolveSelectionSet(e.selectionSet,t,r):void 0}))},e}();function M(e){var t=new Set,r=null;return new d(function(n){return t.add(n),r=r||e.subscribe({next:function(e){t.forEach(function(t){return t.next&&t.next(e)})},error:function(e){t.forEach(function(t){return t.error&&t.error(e)})},complete:function(){t.forEach(function(e){return e.complete&&e.complete()})}}),function(){t.delete(n)&&!t.size&&r&&(r.unsubscribe(),r=null)}})}var A=Object.prototype.hasOwnProperty,T=function(){function e(e){var t=e.link,r=e.queryDeduplication,n=void 0!==r&&r,i=e.store,o=e.onBroadcast,s=void 0===o?function(){}:o,l=e.ssrMode,u=void 0!==l&&l,c=e.clientAwareness,d=void 0===c?{}:c,h=e.localState,f=e.assumeImmutableResults;this.mutationStore=new x,this.queryStore=new w,this.clientAwareness={},this.idCounter=1,this.queries=new Map,this.fetchQueryRejectFns=new Map,this.transformCache=new(a.canUseWeakMap?WeakMap:Map),this.inFlightLinkObservables=new Map,this.pollingInfoByQueryId=new Map,this.link=t,this.queryDeduplication=n,this.dataStore=i,this.onBroadcast=s,this.clientAwareness=d,this.localState=h||new E({cache:i.getCache()}),this.ssrMode=u,this.assumeImmutableResults=!!f}return e.prototype.stop=function(){var e=this;this.queries.forEach(function(t,r){e.stopQueryNoBroadcast(r)}),this.fetchQueryRejectFns.forEach(function(e){e(new l.InvariantError("QueryManager stopped while query was in flight"))})},e.prototype.mutate=function(e){var t=e.mutation,r=e.variables,n=e.optimisticResponse,o=e.updateQueries,s=e.refetchQueries,u=void 0===s?[]:s,c=e.awaitRefetchQueries,d=void 0!==c&&c,f=e.update,p=e.errorPolicy,m=void 0===p?"none":p,_=e.fetchPolicy,g=e.context,y=void 0===g?{}:g;return Object(i.__awaiter)(this,void 0,void 0,function(){var e,s,c,p=this;return Object(i.__generator)(this,function(g){switch(g.label){case 0:return Object(l.invariant)(t,"mutation option is required. You must specify your GraphQL document in the mutation option."),Object(l.invariant)(!_||"no-cache"===_,"fetchPolicy for mutations currently only supports the 'no-cache' policy"),e=this.generateQueryId(),t=this.transform(t).document,this.setQuery(e,function(){return{document:t}}),r=this.getVariables(t,r),this.transform(t).hasClientExports?[4,this.localState.addExportedVariables(t,r,y)]:[3,2];case 1:r=g.sent(),g.label=2;case 2:return s=function(){var e={};return o&&p.queries.forEach(function(t,r){var n=t.observableQuery;if(n){var i=n.queryName;i&&A.call(o,i)&&(e[r]={updater:o[i],query:p.queryStore.get(r)})}}),e},this.mutationStore.initMutation(e,t,r),this.dataStore.markMutationInit({mutationId:e,document:t,variables:r,updateQueries:s(),update:f,optimisticResponse:n}),this.broadcastQueries(),c=this,[2,new Promise(function(o,l){var p,g;c.getObservableFromLink(t,Object(i.__assign)({},y,{optimisticResponse:n}),r,!1).subscribe({next:function(n){Object(a.graphQLResultHasError)(n)&&"none"===m?g=new v({graphQLErrors:n.errors}):(c.mutationStore.markMutationResult(e),"no-cache"!==_&&c.dataStore.markMutationResult({mutationId:e,result:n,document:t,variables:r,updateQueries:s(),update:f}),p=n)},error:function(t){c.mutationStore.markMutationError(e,t),c.dataStore.markMutationComplete({mutationId:e,optimisticResponse:n}),c.broadcastQueries(),c.setQuery(e,function(){return{document:null}}),l(new v({networkError:t}))},complete:function(){if(g&&c.mutationStore.markMutationError(e,g),c.dataStore.markMutationComplete({mutationId:e,optimisticResponse:n}),c.broadcastQueries(),g)l(g);else{"function"==typeof u&&(u=u(p));var t=[];h(u)&&u.forEach(function(e){if("string"==typeof e)c.queries.forEach(function(r){var n=r.observableQuery;n&&n.queryName===e&&t.push(n.refetch())});else{var r={query:e.query,variables:e.variables,fetchPolicy:"network-only"};e.context&&(r.context=e.context),t.push(c.query(r))}}),Promise.all(d?t:[]).then(function(){c.setQuery(e,function(){return{document:null}}),"ignore"===m&&p&&Object(a.graphQLResultHasError)(p)&&delete p.errors,o(p)})}}})})]}})})},e.prototype.fetchQuery=function(e,t,r,n){return Object(i.__awaiter)(this,void 0,void 0,function(){var o,s,l,u,c,d,h,m,_,g,y,b,x,w,E,M,A,T,S=this;return Object(i.__generator)(this,function(k){switch(k.label){case 0:return o=t.metadata,s=void 0===o?null:o,l=t.fetchPolicy,u=void 0===l?"cache-first":l,c=t.context,d=void 0===c?{}:c,h=this.transform(t.query).document,m=this.getVariables(h,t.variables),this.transform(h).hasClientExports?[4,this.localState.addExportedVariables(h,m,d)]:[3,2];case 1:m=k.sent(),k.label=2;case 2:if(t=Object(i.__assign)({},t,{variables:m}),y=g="network-only"===u||"no-cache"===u,g||(b=this.dataStore.getCache().diff({query:h,variables:m,returnPartialData:!0,optimistic:!1}),x=b.complete,w=b.result,y=!x||"cache-and-network"===u,_=w),E=y&&"cache-only"!==u&&"standby"!==u,Object(a.hasDirectives)(["live"],h)&&(E=!0),M=this.idCounter++,A="no-cache"!==u?this.updateQueryWatch(e,h,t):void 0,this.setQuery(e,function(){return{document:h,lastRequestId:M,invalidated:!0,cancel:A}}),this.invalidate(n),this.queryStore.initQuery({queryId:e,document:h,storePreviousVariables:E,variables:m,isPoll:r===p.poll,isRefetch:r===p.refetch,metadata:s,fetchMoreForQueryId:n}),this.broadcastQueries(),E){if(T=this.fetchRequest({requestId:M,queryId:e,document:h,options:t,fetchMoreForQueryId:n}).catch(function(t){throw f(t)?t:(M>=S.getQuery(e).lastRequestId&&(S.queryStore.markQueryError(e,t,n),S.invalidate(e),S.invalidate(n),S.broadcastQueries()),new v({networkError:t}))}),"cache-and-network"!==u)return[2,T];T.catch(function(){})}return this.queryStore.markQueryResultClient(e,!E),this.invalidate(e),this.invalidate(n),this.transform(h).hasForcedResolvers?[2,this.localState.runResolvers({document:h,remoteResult:{data:_},context:d,variables:m,onlyRunForcedResolvers:!0}).then(function(r){return S.markQueryResult(e,r,t,n),S.broadcastQueries(),r})]:(this.broadcastQueries(),[2,{data:_}])}})})},e.prototype.markQueryResult=function(e,t,r,n){var i=r.fetchPolicy,a=r.variables,o=r.errorPolicy;"no-cache"===i?this.setQuery(e,function(){return{newData:{result:t.data,complete:!0}}}):this.dataStore.markQueryResult(t,this.getQuery(e).document,a,n,"ignore"===o||"all"===o)},e.prototype.queryListenerForObserver=function(e,t,r){var n=this;function i(e,t){if(r[e])try{r[e](t)}catch(e){l.invariant.error(e)}else"error"===e&&l.invariant.error(t)}return function(r,a){if(n.invalidate(e,!1),r){var o=n.getQuery(e),s=o.observableQuery,l=o.document,u=s?s.options.fetchPolicy:t.fetchPolicy;if("standby"!==u){var d=c(r.networkStatus),f=s&&s.getLastResult(),p=!(!f||f.networkStatus===r.networkStatus),m=t.returnPartialData||!a&&r.previousVariables||p&&t.notifyOnNetworkStatusChange||"cache-only"===u||"cache-and-network"===u;if(!d||m){var _=h(r.graphQLErrors),g=s&&s.options.errorPolicy||t.errorPolicy||"none";if("none"===g&&_||r.networkError)return i("error",new v({graphQLErrors:r.graphQLErrors,networkError:r.networkError}));try{var y=void 0,b=void 0;if(a)"no-cache"!==u&&"network-only"!==u&&n.setQuery(e,function(){return{newData:null}}),y=a.result,b=!a.complete;else{var x=s&&s.getLastError(),w="none"!==g&&(x&&x.graphQLErrors)!==r.graphQLErrors;if(f&&f.data&&!w)y=f.data,b=!1;else{var E=n.dataStore.getCache().diff({query:l,variables:r.previousVariables||r.variables,returnPartialData:!0,optimistic:!0});y=E.result,b=!E.complete}}var M=b&&!(t.returnPartialData||"cache-only"===u),A={data:M?f&&f.data:y,loading:d,networkStatus:r.networkStatus,stale:M};"all"===g&&_&&(A.errors=r.graphQLErrors),i("next",A)}catch(e){i("error",new v({networkError:e}))}}}}}},e.prototype.transform=function(e){var t=this.transformCache;if(!t.has(e)){var r=this.dataStore.getCache(),n=r.transformDocument(e),i=Object(a.removeConnectionDirectiveFromDocument)(r.transformForLink(n)),o=this.localState.clientQuery(n),s=this.localState.serverQuery(i),l={document:n,hasClientExports:Object(a.hasClientExports)(n),hasForcedResolvers:this.localState.shouldForceResolvers(n),clientQuery:o,serverQuery:s,defaultVars:Object(a.getDefaultValues)(Object(a.getOperationDefinition)(n))},u=function(e){e&&!t.has(e)&&t.set(e,l)};u(e),u(n),u(o),u(s)}return t.get(e)},e.prototype.getVariables=function(e,t){return Object(i.__assign)({},this.transform(e).defaultVars,t)},e.prototype.watchQuery=function(e,t){void 0===t&&(t=!0),Object(l.invariant)("standby"!==e.fetchPolicy,'client.watchQuery cannot be called with fetchPolicy set to "standby"'),e.variables=this.getVariables(e.query,e.variables),void 0===e.notifyOnNetworkStatusChange&&(e.notifyOnNetworkStatusChange=!1);var r=Object(i.__assign)({},e);return new _({queryManager:this,options:r,shouldSubscribe:t})},e.prototype.query=function(e){var t=this;return Object(l.invariant)(e.query,"query option is required. You must specify your GraphQL document in the query option."),Object(l.invariant)("Document"===e.query.kind,'You must wrap the query string in a "gql" tag.'),Object(l.invariant)(!e.returnPartialData,"returnPartialData option only supported on watchQuery."),Object(l.invariant)(!e.pollInterval,"pollInterval option only supported on watchQuery."),new Promise(function(r,n){var i=t.watchQuery(e,!1);t.fetchQueryRejectFns.set("query:"+i.queryId,n),i.result().then(r,n).then(function(){return t.fetchQueryRejectFns.delete("query:"+i.queryId)})})},e.prototype.generateQueryId=function(){return String(this.idCounter++)},e.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryInStoreNoBroadcast=function(e){this.stopPollingQuery(e),this.queryStore.stopQuery(e),this.invalidate(e)},e.prototype.addQueryListener=function(e,t){this.setQuery(e,function(e){return e.listeners.add(t),{invalidated:!1}})},e.prototype.updateQueryWatch=function(e,t,r){var n=this,i=this.getQuery(e).cancel;i&&i();return this.dataStore.getCache().watch({query:t,variables:r.variables,optimistic:!0,previousResult:function(){var t=null,r=n.getQuery(e).observableQuery;if(r){var i=r.getLastResult();i&&(t=i.data)}return t},callback:function(t){n.setQuery(e,function(){return{invalidated:!0,newData:t}})}})},e.prototype.addObservableQuery=function(e,t){this.setQuery(e,function(){return{observableQuery:t}})},e.prototype.removeObservableQuery=function(e){var t=this.getQuery(e).cancel;this.setQuery(e,function(){return{observableQuery:null}}),t&&t()},e.prototype.clearStore=function(){this.fetchQueryRejectFns.forEach(function(e){e(new l.InvariantError("Store reset while query was in flight (not completed in link chain)"))});var e=[];return this.queries.forEach(function(t,r){t.observableQuery&&e.push(r)}),this.queryStore.reset(e),this.mutationStore.reset(),this.dataStore.reset()},e.prototype.resetStore=function(){var e=this;return this.clearStore().then(function(){return e.reFetchObservableQueries()})},e.prototype.reFetchObservableQueries=function(e){var t=this;void 0===e&&(e=!1);var r=[];return this.queries.forEach(function(n,i){var a=n.observableQuery;if(a){var o=a.options.fetchPolicy;a.resetLastResults(),"cache-only"===o||!e&&"standby"===o||r.push(a.refetch()),t.setQuery(i,function(){return{newData:null}}),t.invalidate(i)}}),this.broadcastQueries(),Promise.all(r)},e.prototype.observeQuery=function(e,t,r){return this.addQueryListener(e,this.queryListenerForObserver(e,t,r)),this.fetchQuery(e,t)},e.prototype.startQuery=function(e,t,r){return l.invariant.warn("The QueryManager.startQuery method has been deprecated"),this.addQueryListener(e,r),this.fetchQuery(e,t).catch(function(){}),e},e.prototype.startGraphQLSubscription=function(e){var t=this,r=e.query,n=e.fetchPolicy,i=e.variables;r=this.transform(r).document,i=this.getVariables(r,i);var o=function(e){return t.getObservableFromLink(r,{},e,!1).map(function(i){if(n&&"no-cache"===n||(t.dataStore.markSubscriptionResult(i,r,e),t.broadcastQueries()),Object(a.graphQLResultHasError)(i))throw new v({graphQLErrors:i.errors});return i})};if(this.transform(r).hasClientExports){var s=this.localState.addExportedVariables(r,i).then(o);return new d(function(e){var t=null;return s.then(function(r){return t=r.subscribe(e)},e.error),function(){return t&&t.unsubscribe()}})}return o(i)},e.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},e.prototype.removeQuery=function(e){this.fetchQueryRejectFns.delete("query:"+e),this.fetchQueryRejectFns.delete("fetchRequest:"+e),this.getQuery(e).subscriptions.forEach(function(e){return e.unsubscribe()}),this.queries.delete(e)},e.prototype.getCurrentQueryResult=function(e,t){void 0===t&&(t=!0);var r=e.options,n=r.variables,i=r.query,a=r.fetchPolicy,o=r.returnPartialData,s=e.getLastResult(),l=this.getQuery(e.queryId).newData;if(l&&l.complete)return{data:l.result,partial:!1};if("no-cache"===a||"network-only"===a)return{data:void 0,partial:!1};var u=this.dataStore.getCache().diff({query:i,variables:n,previousResult:s?s.data:void 0,returnPartialData:!0,optimistic:t}),c=u.result,d=u.complete;return{data:d||o?c:void 0,partial:!d}},e.prototype.getQueryWithPreviousResult=function(e){var t;if("string"==typeof e){var r=this.getQuery(e).observableQuery;Object(l.invariant)(r,"ObservableQuery with this id doesn't exist: "+e),t=r}else t=e;var n=t.options,i=n.variables,a=n.query;return{previousResult:this.getCurrentQueryResult(t,!1).data,variables:i,document:a}},e.prototype.broadcastQueries=function(){var e=this;this.onBroadcast(),this.queries.forEach(function(t,r){t.invalidated&&t.listeners.forEach(function(n){n&&n(e.queryStore.get(r),t.newData)})})},e.prototype.getLocalState=function(){return this.localState},e.prototype.getObservableFromLink=function(e,t,r,n){var s,l=this;void 0===n&&(n=this.queryDeduplication);var u=this.transform(e).serverQuery;if(u){var c=this.inFlightLinkObservables,h=this.link,f={query:u,variables:r,operationName:Object(a.getOperationName)(u)||void 0,context:this.prepareContext(Object(i.__assign)({},t,{forceFetch:!n}))};if(t=f.context,n){var p=c.get(u)||new Map;c.set(u,p);var m=JSON.stringify(r);if(!(s=p.get(m))){p.set(m,s=M(Object(o.execute)(h,f)));var v=function(){p.delete(m),p.size||c.delete(u),_.unsubscribe()},_=s.subscribe({next:v,error:v,complete:v})}}else s=M(Object(o.execute)(h,f))}else s=d.of({data:{}}),t=this.prepareContext(t);var g=this.transform(e).clientQuery;return g&&(s=function(e,t){return new d(function(r){var n=r.next,i=r.error,a=r.complete,o=0,s=!1,l={next:function(e){++o,new Promise(function(r){r(t(e))}).then(function(e){--o,n&&n.call(r,e),s&&l.complete()},function(e){--o,i&&i.call(r,e)})},error:function(e){i&&i.call(r,e)},complete:function(){s=!0,o||a&&a.call(r)}},u=e.subscribe(l);return function(){return u.unsubscribe()}})}(s,function(e){return l.localState.runResolvers({document:g,remoteResult:e,context:t,variables:r})})),s},e.prototype.fetchRequest=function(e){var t,r,i=this,a=e.requestId,o=e.queryId,s=e.document,l=e.options,u=e.fetchMoreForQueryId,c=l.variables,d=l.errorPolicy,f=void 0===d?"none":d,p=l.fetchPolicy;return new Promise(function(e,d){var m=i.getObservableFromLink(s,l.context,c),_="fetchRequest:"+o;i.fetchQueryRejectFns.set(_,d);var g=function(){i.fetchQueryRejectFns.delete(_),i.setQuery(o,function(e){e.subscriptions.delete(y)})},y=m.map(function(e){if(a>=i.getQuery(o).lastRequestId&&(i.markQueryResult(o,e,l,u),i.queryStore.markQueryResult(o,e,u),i.invalidate(o),i.invalidate(u),i.broadcastQueries()),"none"===f&&h(e.errors))return d(new v({graphQLErrors:e.errors}));if("all"===f&&(r=e.errors),u||"no-cache"===p)t=e.data;else{var n=i.dataStore.getCache().diff({variables:c,query:s,optimistic:!1,returnPartialData:!0}),m=n.result;(n.complete||l.returnPartialData)&&(t=m)}}).subscribe({error:function(e){g(),d(e)},complete:function(){g(),e({data:t,errors:r,loading:!1,networkStatus:n.ready,stale:!1})}});i.setQuery(o,function(e){e.subscriptions.add(y)})})},e.prototype.getQuery=function(e){return this.queries.get(e)||{listeners:new Set,invalidated:!1,document:null,newData:null,lastRequestId:1,observableQuery:null,subscriptions:new Set}},e.prototype.setQuery=function(e,t){var r=this.getQuery(e),n=Object(i.__assign)({},r,t(r));this.queries.set(e,n)},e.prototype.invalidate=function(e,t){void 0===t&&(t=!0),e&&this.setQuery(e,function(){return{invalidated:t}})},e.prototype.prepareContext=function(e){void 0===e&&(e={});var t=this.localState.prepareContext(e);return Object(i.__assign)({},t,{clientAwareness:this.clientAwareness})},e.prototype.checkInFlight=function(e){var t=this.queryStore.get(e);return t&&t.networkStatus!==n.ready&&t.networkStatus!==n.error},e.prototype.startPollingQuery=function(e,t,r){var n=this,a=e.pollInterval;if(Object(l.invariant)(a,"Attempted to start a polling query without a polling interval."),!this.ssrMode){var o=this.pollingInfoByQueryId.get(t);o||this.pollingInfoByQueryId.set(t,o={}),o.interval=a,o.options=Object(i.__assign)({},e,{fetchPolicy:"network-only"});var s=function(){var e=n.pollingInfoByQueryId.get(t);e&&(n.checkInFlight(t)?u():n.fetchQuery(t,e.options,p.poll).then(u,u))},u=function(){var e=n.pollingInfoByQueryId.get(t);e&&(clearTimeout(e.timeout),e.timeout=setTimeout(s,e.interval))};r&&this.addQueryListener(t,r),u()}return t},e.prototype.stopPollingQuery=function(e){this.pollingInfoByQueryId.delete(e)},e}(),S=function(){function e(e){this.cache=e}return e.prototype.getCache=function(){return this.cache},e.prototype.markQueryResult=function(e,t,r,n,i){void 0===i&&(i=!1);var o=!Object(a.graphQLResultHasError)(e);i&&Object(a.graphQLResultHasError)(e)&&e.data&&(o=!0),!n&&o&&this.cache.write({result:e.data,dataId:"ROOT_QUERY",query:t,variables:r})},e.prototype.markSubscriptionResult=function(e,t,r){Object(a.graphQLResultHasError)(e)||this.cache.write({result:e.data,dataId:"ROOT_SUBSCRIPTION",query:t,variables:r})},e.prototype.markMutationInit=function(e){var t,r=this;e.optimisticResponse&&(t="function"==typeof e.optimisticResponse?e.optimisticResponse(e.variables):e.optimisticResponse,this.cache.recordOptimisticTransaction(function(n){var i=r.cache;r.cache=n;try{r.markMutationResult({mutationId:e.mutationId,result:{data:t},document:e.document,variables:e.variables,updateQueries:e.updateQueries,update:e.update})}finally{r.cache=i}},e.mutationId))},e.prototype.markMutationResult=function(e){var t=this;if(!Object(a.graphQLResultHasError)(e.result)){var r=[{result:e.result.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}],n=e.updateQueries;n&&Object.keys(n).forEach(function(i){var o=n[i],s=o.query,l=o.updater,u=t.cache.diff({query:s.document,variables:s.variables,returnPartialData:!0,optimistic:!1}),c=u.result;if(u.complete){var d=Object(a.tryFunctionOrLogError)(function(){return l(c,{mutationResult:e.result,queryName:Object(a.getOperationName)(s.document)||void 0,queryVariables:s.variables})});d&&r.push({result:d,dataId:"ROOT_QUERY",query:s.document,variables:s.variables})}}),this.cache.performTransaction(function(t){r.forEach(function(e){return t.write(e)});var n=e.update;n&&Object(a.tryFunctionOrLogError)(function(){return n(t,e.result)})})}},e.prototype.markMutationComplete=function(e){var t=e.mutationId;e.optimisticResponse&&this.cache.removeOptimistic(t)},e.prototype.markUpdateQueryResult=function(e,t,r){this.cache.write({result:r,dataId:"ROOT_QUERY",variables:t,query:e})},e.prototype.reset=function(){return this.cache.reset()},e}(),k="2.6.3",D=!1,P=function(){function e(e){var t=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var r=e.cache,n=e.ssrMode,i=void 0!==n&&n,a=e.ssrForceFetchDelay,s=void 0===a?0:a,u=e.connectToDevTools,c=e.queryDeduplication,d=void 0===c||c,h=e.defaultOptions,f=e.assumeImmutableResults,p=void 0!==f&&f,m=e.resolvers,v=e.typeDefs,_=e.fragmentMatcher,g=e.name,y=e.version,b=e.link;if(!b&&m&&(b=o.ApolloLink.empty()),!b||!r)throw new l.InvariantError("In order to initialize Apollo Client, you must specify 'link' and 'cache' properties in the options object.\nThese options are part of the upgrade requirements when migrating from Apollo Client 1.x to Apollo Client 2.x.\nFor more information, please visit: https://www.apollographql.com/docs/tutorial/client.html#apollo-client-setup");this.link=b,this.cache=r,this.store=new S(r),this.disableNetworkFetches=i||s>0,this.queryDeduplication=d,this.defaultOptions=h||{},this.typeDefs=v,s&&setTimeout(function(){return t.disableNetworkFetches=!1},s),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this);var x="undefined"!=typeof window&&!window.__APOLLO_CLIENT__;(void 0===u?x:u&&"undefined"!=typeof window)&&(window.__APOLLO_CLIENT__=this),D||(D=!0,"undefined"!=typeof window&&window.document&&window.top===window.self&&void 0===window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("Chrome")>-1&&console.debug("Download the Apollo DevTools for a better development experience: https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm")),this.version=k,this.localState=new E({cache:r,client:this,resolvers:m,fragmentMatcher:_}),this.queryManager=new T({link:this.link,store:this.store,queryDeduplication:d,ssrMode:i,clientAwareness:{name:g,version:y},localState:this.localState,assumeImmutableResults:p,onBroadcast:function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.queryStore.getStore(),mutations:t.queryManager.mutationStore.getStore()},dataWithOptimisticResults:t.cache.extract(!0)})}})}return e.prototype.stop=function(){this.queryManager.stop()},e.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=Object(i.__assign)({},this.defaultOptions.watchQuery,e)),!this.disableNetworkFetches||"network-only"!==e.fetchPolicy&&"cache-and-network"!==e.fetchPolicy||(e=Object(i.__assign)({},e,{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},e.prototype.query=function(e){return this.defaultOptions.query&&(e=Object(i.__assign)({},this.defaultOptions.query,e)),Object(l.invariant)("cache-and-network"!==e.fetchPolicy,"The cache-and-network fetchPolicy does not work with client.query, because client.query can only return a single result. Please use client.watchQuery to receive multiple results from the cache and the network, or consider using a different fetchPolicy, such as cache-first or network-only."),this.disableNetworkFetches&&"network-only"===e.fetchPolicy&&(e=Object(i.__assign)({},e,{fetchPolicy:"cache-first"})),this.queryManager.query(e)},e.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=Object(i.__assign)({},this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},e.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!1),this.cache.readQuery(e,t)},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!1),this.cache.readFragment(e,t)},e.prototype.writeQuery=function(e){var t=this.cache.writeQuery(e);return this.queryManager.broadcastQueries(),t},e.prototype.writeFragment=function(e){var t=this.cache.writeFragment(e);return this.queryManager.broadcastQueries(),t},e.prototype.writeData=function(e){var t=this.cache.writeData(e);return this.queryManager.broadcastQueries(),t},e.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},e.prototype.__requestRaw=function(e){return Object(o.execute)(this.link,e)},e.prototype.initQueryManager=function(){return l.invariant.warn("Calling the initQueryManager method is no longer necessary, and it will be removed from ApolloClient in version 3.0."),this.queryManager},e.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(e){return e()}))}).then(function(){return e.reFetchObservableQueries()})},e.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(e){return e()}))})},e.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter(function(t){return t!==e})}},e.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter(function(t){return t!==e})}},e.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},e.prototype.extract=function(e){return this.cache.extract(e)},e.prototype.restore=function(e){return this.cache.restore(e)},e.prototype.addResolvers=function(e){this.localState.addResolvers(e)},e.prototype.setResolvers=function(e){this.localState.setResolvers(e)},e.prototype.getResolvers=function(){return this.localState.getResolvers()},e.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},e}();t.default=P},"./node_modules/apollo-client/node_modules/apollo-utilities/lib/bundle.esm.js":function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"addTypenameToDocument",function(){return Z}),r.d(t,"argumentsObjectFromField",function(){return m}),r.d(t,"assign",function(){return N}),r.d(t,"buildQueryFromSelectionSet",function(){return ie}),r.d(t,"canUseWeakMap",function(){return oe}),r.d(t,"checkDocument",function(){return R}),r.d(t,"cloneDeep",function(){return le}),r.d(t,"createFragmentMap",function(){return U}),r.d(t,"getDefaultValues",function(){return G}),r.d(t,"getDirectiveInfoFromField",function(){return M}),r.d(t,"getDirectiveNames",function(){return T}),r.d(t,"getDirectivesFromDocument",function(){return te}),r.d(t,"getEnv",function(){return ue}),r.d(t,"getFragmentDefinition",function(){return V}),r.d(t,"getFragmentDefinitions",function(){return L}),r.d(t,"getFragmentQueryDocument",function(){return I}),r.d(t,"getInclusionDirectives",function(){return P}),r.d(t,"getMainDefinition",function(){return z}),r.d(t,"getMutationDefinition",function(){return O}),r.d(t,"getOperationDefinition",function(){return F}),r.d(t,"getOperationDefinitionOrDie",function(){return C}),r.d(t,"getOperationName",function(){return B}),r.d(t,"getQueryDefinition",function(){return j}),r.d(t,"getStoreKeyName",function(){return p}),r.d(t,"graphQLResultHasError",function(){return me}),r.d(t,"hasClientExports",function(){return k}),r.d(t,"hasDirectives",function(){return S}),r.d(t,"isDevelopment",function(){return he}),r.d(t,"isEnv",function(){return ce}),r.d(t,"isField",function(){return _}),r.d(t,"isIdValue",function(){return y}),r.d(t,"isInlineFragment",function(){return g}),r.d(t,"isJsonValue",function(){return x}),r.d(t,"isNumberValue",function(){return c}),r.d(t,"isProduction",function(){return de}),r.d(t,"isScalarValue",function(){return u}),r.d(t,"isTest",function(){return fe}),r.d(t,"maybeDeepFreeze",function(){return ve}),r.d(t,"mergeDeep",function(){return ge}),r.d(t,"mergeDeepArray",function(){return ye}),r.d(t,"removeArgumentsFromDocument",function(){return re}),r.d(t,"removeClientSetsFromDocument",function(){return ae}),r.d(t,"removeConnectionDirectiveFromDocument",function(){return J}),r.d(t,"removeDirectivesFromDocument",function(){return X}),r.d(t,"removeFragmentSpreadFromDocument",function(){return ne}),r.d(t,"resultKeyNameFromField",function(){return v}),r.d(t,"shouldInclude",function(){return A}),r.d(t,"storeKeyNameFromField",function(){return h}),r.d(t,"stripSymbols",function(){return Ae}),r.d(t,"toIdValue",function(){return b}),r.d(t,"tryFunctionOrLogError",function(){return pe}),r.d(t,"valueFromNode",function(){return E}),r.d(t,"valueToObjectRepresentation",function(){return d}),r.d(t,"variablesInOperation",function(){return q}),r.d(t,"warnOnceInDevelopment",function(){return Me});var n=r("./node_modules/graphql/language/visitor.js"),i=r("./node_modules/ts-invariant/lib/invariant.esm.js"),a=r("./node_modules/tslib/tslib.es6.js"),o=r("./node_modules/fast-json-stable-stringify/index.js"),s=r.n(o),l=r("./node_modules/@wry/equality/lib/equality.esm.js");function u(e){return["StringValue","BooleanValue","EnumValue"].indexOf(e.kind)>-1}function c(e){return["IntValue","FloatValue"].indexOf(e.kind)>-1}function d(e,t,r,n){if(function(e){return"IntValue"===e.kind}(r)||function(e){return"FloatValue"===e.kind}(r))e[t.value]=Number(r.value);else if(function(e){return"BooleanValue"===e.kind}(r)||function(e){return"StringValue"===e.kind}(r))e[t.value]=r.value;else if(function(e){return"ObjectValue"===e.kind}(r)){var a={};r.fields.map(function(e){return d(a,e.name,e.value,n)}),e[t.value]=a}else if(function(e){return"Variable"===e.kind}(r)){var o=(n||{})[r.name.value];e[t.value]=o}else if(function(e){return"ListValue"===e.kind}(r))e[t.value]=r.values.map(function(e){var r={};return d(r,t,e,n),r[t.value]});else if(function(e){return"EnumValue"===e.kind}(r))e[t.value]=r.value;else{if(!function(e){return"NullValue"===e.kind}(r))throw new i.InvariantError('The inline argument "'+t.value+'" of kind "'+r.kind+'"is not supported. Use variables instead of inline arguments to overcome this limitation.');e[t.value]=null}}function h(e,t){var r=null;e.directives&&(r={},e.directives.forEach(function(e){r[e.name.value]={},e.arguments&&e.arguments.forEach(function(n){var i=n.name,a=n.value;return d(r[e.name.value],i,a,t)})}));var n=null;return e.arguments&&e.arguments.length&&(n={},e.arguments.forEach(function(e){var r=e.name,i=e.value;return d(n,r,i,t)})),p(e.name.value,n,r)}r.d(t,"isEqual",function(){return l.equal});var f=["connection","include","skip","client","rest","export"];function p(e,t,r){if(r&&r.connection&&r.connection.key){if(r.connection.filter&&r.connection.filter.length>0){var n=r.connection.filter?r.connection.filter:[];n.sort();var i=t,a={};return n.forEach(function(e){a[e]=i[e]}),r.connection.key+"("+JSON.stringify(a)+")"}return r.connection.key}var o=e;if(t){var l=s()(t);o+="("+l+")"}return r&&Object.keys(r).forEach(function(e){-1===f.indexOf(e)&&(r[e]&&Object.keys(r[e]).length?o+="@"+e+"("+JSON.stringify(r[e])+")":o+="@"+e)}),o}function m(e,t){if(e.arguments&&e.arguments.length){var r={};return e.arguments.forEach(function(e){var n=e.name,i=e.value;return d(r,n,i,t)}),r}return null}function v(e){return e.alias?e.alias.value:e.name.value}function _(e){return"Field"===e.kind}function g(e){return"InlineFragment"===e.kind}function y(e){return e&&"id"===e.type&&"boolean"==typeof e.generated}function b(e,t){return void 0===t&&(t=!1),Object(a.__assign)({type:"id",generated:t},"string"==typeof e?{id:e,typename:void 0}:e)}function x(e){return null!=e&&"object"==typeof e&&"json"===e.type}function w(e){throw new i.InvariantError("Variable nodes are not supported by valueFromNode")}function E(e,t){switch(void 0===t&&(t=w),e.kind){case"Variable":return t(e);case"NullValue":return null;case"IntValue":return parseInt(e.value,10);case"FloatValue":return parseFloat(e.value);case"ListValue":return e.values.map(function(e){return E(e,t)});case"ObjectValue":for(var r={},n=0,i=e.fields;n<i.length;n++){var a=i[n];r[a.name.value]=E(a.value,t)}return r;default:return e.value}}function M(e,t){if(e.directives&&e.directives.length){var r={};return e.directives.forEach(function(e){r[e.name.value]=m(e,t)}),r}return null}function A(e,t){return void 0===t&&(t={}),P(e.directives).every(function(e){var r=e.directive,n=e.ifArgument,a=!1;return"Variable"===n.value.kind?(a=t[n.value.name.value],Object(i.invariant)(void 0!==a,"Invalid variable referenced in @"+r.name.value+" directive.")):a=n.value.value,"skip"===r.name.value?!a:a})}function T(e){var t=[];return Object(n.visit)(e,{Directive:function(e){t.push(e.name.value)}}),t}function S(e,t){return T(t).some(function(t){return e.indexOf(t)>-1})}function k(e){return e&&S(["client"],e)&&S(["export"],e)}function D(e){var t=e.name.value;return"skip"===t||"include"===t}function P(e){return e?e.filter(D).map(function(e){var t=e.arguments,r=e.name.value;Object(i.invariant)(t&&1===t.length,"Incorrect number of arguments for the @"+r+" directive.");var n=t[0];Object(i.invariant)(n.name&&"if"===n.name.value,"Invalid argument for the @"+r+" directive.");var a=n.value;return Object(i.invariant)(a&&("Variable"===a.kind||"BooleanValue"===a.kind),"Argument for the @"+r+" directive must be a variable or a boolean value."),{directive:e,ifArgument:n}}):[]}function I(e,t){var r=t,n=[];return e.definitions.forEach(function(e){if("OperationDefinition"===e.kind)throw new i.InvariantError("Found a "+e.operation+" operation"+(e.name?" named '"+e.name.value+"'":"")+". No operations are allowed when using a fragment as a query. Only fragments are allowed.");"FragmentDefinition"===e.kind&&n.push(e)}),void 0===r&&(Object(i.invariant)(1===n.length,"Found "+n.length+" fragments. `fragmentName` must be provided when there is not exactly 1 fragment."),r=n[0].name.value),Object(a.__assign)({},e,{definitions:[{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:r}}]}}].concat(e.definitions)})}function N(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.forEach(function(t){null!=t&&Object.keys(t).forEach(function(r){e[r]=t[r]})}),e}function O(e){R(e);var t=e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation})[0];return Object(i.invariant)(t,"Must contain a mutation definition."),t}function R(e){Object(i.invariant)(e&&"Document"===e.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql');var t=e.definitions.filter(function(e){return"FragmentDefinition"!==e.kind}).map(function(e){if("OperationDefinition"!==e.kind)throw new i.InvariantError('Schema type definitions not allowed in queries. Found: "'+e.kind+'"');return e});return Object(i.invariant)(t.length<=1,"Ambiguous GraphQL document: contains "+t.length+" operations"),e}function F(e){return R(e),e.definitions.filter(function(e){return"OperationDefinition"===e.kind})[0]}function C(e){var t=F(e);return Object(i.invariant)(t,"GraphQL document is missing an operation"),t}function B(e){return e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&e.name}).map(function(e){return e.name.value})[0]||null}function L(e){return e.definitions.filter(function(e){return"FragmentDefinition"===e.kind})}function j(e){var t=F(e);return Object(i.invariant)(t&&"query"===t.operation,"Must contain a query definition."),t}function V(e){Object(i.invariant)("Document"===e.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'),Object(i.invariant)(e.definitions.length<=1,"Fragment must have exactly one definition.");var t=e.definitions[0];return Object(i.invariant)("FragmentDefinition"===t.kind,"Must be a fragment definition."),t}function z(e){var t;R(e);for(var r=0,n=e.definitions;r<n.length;r++){var a=n[r];if("OperationDefinition"===a.kind){var o=a.operation;if("query"===o||"mutation"===o||"subscription"===o)return a}"FragmentDefinition"!==a.kind||t||(t=a)}if(t)return t;throw new i.InvariantError("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment.")}function U(e){void 0===e&&(e=[]);var t={};return e.forEach(function(e){t[e.name.value]=e}),t}function G(e){if(e&&e.variableDefinitions&&e.variableDefinitions.length){var t=e.variableDefinitions.filter(function(e){return e.defaultValue}).map(function(e){var t=e.variable,r=e.defaultValue,n={};return d(n,t.name,r),n});return N.apply(void 0,[{}].concat(t))}return{}}function q(e){var t=new Set;if(e.variableDefinitions)for(var r=0,n=e.variableDefinitions;r<n.length;r++){var i=n[r];t.add(i.variable.name.value)}return t}function Q(e,t,r){var n=0;return e.forEach(function(r,i){t.call(this,r,i,e)&&(e[n++]=r)},r),e.length=n,e}var H={kind:"Field",name:{kind:"Name",value:"__typename"}};function Y(e){return function e(t,r){return t.selectionSet.selections.every(function(t){return"FragmentSpread"===t.kind&&e(r[t.name.value],r)})}(F(e)||V(e),U(L(e)))?null:e}function W(e){return function(t){return e.some(function(e){return e.name&&e.name===t.name.value||e.test&&e.test(t)})}}function X(e,t){var r=Object.create(null),i=[],a=Object.create(null),o=[],s=Y(Object(n.visit)(t,{Variable:{enter:function(e,t,n){"VariableDefinition"!==n.kind&&(r[e.name.value]=!0)}},Field:{enter:function(t){if(e&&t.directives&&(e.some(function(e){return e.remove})&&t.directives&&t.directives.some(W(e))))return t.arguments&&t.arguments.forEach(function(e){"Variable"===e.value.kind&&i.push({name:e.value.name.value})}),t.selectionSet&&function e(t){var r=[];t.selections.forEach(function(t){(_(t)||g(t))&&t.selectionSet?e(t.selectionSet).forEach(function(e){return r.push(e)}):"FragmentSpread"===t.kind&&r.push(t)});return r}(t.selectionSet).forEach(function(e){o.push({name:e.name.value})}),null}},FragmentSpread:{enter:function(e){a[e.name.value]=!0}},Directive:{enter:function(t){if(W(e)(t))return null}}}));return s&&Q(i,function(e){return!r[e.name]}).length&&(s=re(i,s)),s&&Q(o,function(e){return!a[e.name]}).length&&(s=ne(o,s)),s}function Z(e){return Object(n.visit)(R(e),{SelectionSet:{enter:function(e,t,r){if(!r||"OperationDefinition"!==r.kind){var n=e.selections;if(n)if(!n.some(function(e){return _(e)&&("__typename"===e.name.value||0===e.name.value.lastIndexOf("__",0))})){var i=r;if(!(_(i)&&i.directives&&i.directives.some(function(e){return"export"===e.name.value})))return Object(a.__assign)({},e,{selections:n.concat([H])})}}}}})}var K={test:function(e){var t="connection"===e.name.value;return t&&(e.arguments&&e.arguments.some(function(e){return"key"===e.name.value})||i.invariant.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key.")),t}};function J(e){return X([K],R(e))}function $(e,t,r){return void 0===r&&(r=!0),t&&t.selections&&t.selections.some(function(t){return ee(e,t,r)})}function ee(e,t,r){return void 0===r&&(r=!0),!_(t)||!!t.directives&&(t.directives.some(W(e))||r&&$(e,t.selectionSet,r))}function te(e,t){var r;return R(t),Y(Object(n.visit)(t,{SelectionSet:{enter:function(t,n,i,o){var s=o.join("-");if(!r||s===r||!s.startsWith(r)){if(t.selections){var l=t.selections.filter(function(t){return ee(e,t)});return $(e,t,!1)&&(r=s),Object(a.__assign)({},t,{selections:l})}return null}}}}))}function re(e,t){var r=function(e){return function(t){return e.some(function(e){return t.value&&"Variable"===t.value.kind&&t.value.name&&(e.name===t.value.name.value||e.test&&e.test(t))})}}(e);return Y(Object(n.visit)(t,{OperationDefinition:{enter:function(t){return Object(a.__assign)({},t,{variableDefinitions:t.variableDefinitions.filter(function(t){return!e.some(function(e){return e.name===t.variable.name.value})})})}},Field:{enter:function(t){if(e.some(function(e){return e.remove})){var n=0;if(t.arguments.forEach(function(e){r(e)&&(n+=1)}),1===n)return null}}},Argument:{enter:function(e){if(r(e))return null}}}))}function ne(e,t){function r(t){if(e.some(function(e){return e.name===t.name.value}))return null}return Y(Object(n.visit)(t,{FragmentSpread:{enter:r},FragmentDefinition:{enter:r}}))}function ie(e){return"query"===z(e).operation?e:Object(n.visit)(e,{OperationDefinition:{enter:function(e){return Object(a.__assign)({},e,{operation:"query"})}}})}function ae(e){R(e);var t=X([{test:function(e){return"client"===e.name.value},remove:!0}],e);return t&&(t=Object(n.visit)(t,{FragmentDefinition:{enter:function(e){if(e.selectionSet&&e.selectionSet.selections.every(function(e){return _(e)&&"__typename"===e.name.value}))return null}}})),t}var oe="function"==typeof WeakMap&&!("object"==typeof navigator&&"ReactNative"===navigator.product),se=Object.prototype.toString;function le(e){return function e(t,r){switch(se.call(t)){case"[object Array]":if(r.has(t))return r.get(t);var n=t.slice(0);return r.set(t,n),n.forEach(function(t,i){n[i]=e(t,r)}),n;case"[object Object]":if(r.has(t))return r.get(t);var i=Object.create(Object.getPrototypeOf(t));return r.set(t,i),Object.keys(t).forEach(function(n){i[n]=e(t[n],r)}),i;default:return t}}(e,new Map)}function ue(){return"development"}function ce(e){return"development"===e}function de(){return!0===ce("production")}function he(){return!0===ce("development")}function fe(){return!0===ce("test")}function pe(e){try{return e()}catch(e){console.error&&console.error(e)}}function me(e){return e.errors&&e.errors.length}function ve(e){if((he()||fe())&&!("function"==typeof Symbol&&"string"==typeof Symbol("")))return function e(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(r){null===t[r]||"object"!=typeof t[r]&&"function"!=typeof t[r]||Object.isFrozen(t[r])||e(t[r])}),t}(e);return e}var _e=Object.prototype.hasOwnProperty;function ge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ye(e)}function ye(e){var t=e[0]||{},r=e.length;if(r>1){var n=[];t=we(t,n);for(var i=1;i<r;++i)t=xe(t,e[i],n)}return t}function be(e){return null!==e&&"object"==typeof e}function xe(e,t,r){return be(t)&&be(e)?(Object.isExtensible&&!Object.isExtensible(e)&&(e=we(e,r)),Object.keys(t).forEach(function(n){var i=t[n];if(_e.call(e,n)){var a=e[n];i!==a&&(e[n]=xe(we(a,r),i,r))}else e[n]=i}),e):t}function we(e,t){return null!==e&&"object"==typeof e&&t.indexOf(e)<0&&(e=Array.isArray(e)?e.slice(0):Object(a.__assign)({__proto__:Object.getPrototypeOf(e)},e),t.push(e)),e}var Ee=Object.create({});function Me(e,t){void 0===t&&(t="warn"),de()||Ee[e]||(fe()||(Ee[e]=!0),"error"===t?console.error(e):console.warn(e))}function Ae(e){return JSON.parse(JSON.stringify(e))}}.call(this,r("./node_modules/process/browser.js"))},"./node_modules/apollo-link-error/lib/bundle.esm.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ErrorLink",function(){return o}),r.d(t,"onError",function(){return a});var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/apollo-link/lib/bundle.esm.js");function a(e){return new i.ApolloLink(function(t,r){return new i.Observable(function(n){var i,a,o;try{i=r(t).subscribe({next:function(i){i.errors&&(o=e({graphQLErrors:i.errors,response:i,operation:t,forward:r}))?a=o.subscribe({next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)}):n.next(i)},error:function(i){(o=e({operation:t,networkError:i,graphQLErrors:i&&i.result&&i.result.errors,forward:r}))?a=o.subscribe({next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)}):n.error(i)},complete:function(){o||n.complete.bind(n)()}})}catch(i){e({networkError:i,operation:t,forward:r}),n.error(i)}return function(){i&&i.unsubscribe(),a&&i.unsubscribe()}})})}var o=function(e){function t(t){var r=e.call(this)||this;return r.link=a(t),r}return Object(n.__extends)(t,e),t.prototype.request=function(e,t){return this.link.request(e,t)},t}(i.ApolloLink)},"./node_modules/apollo-link-http-common/lib/bundle.esm.js":function(e,t,r){"use strict";r.r(t),r.d(t,"checkFetcher",function(){return u}),r.d(t,"createSignalIfSupported",function(){return c}),r.d(t,"fallbackHttpConfig",function(){return o}),r.d(t,"parseAndCheckHttpResponse",function(){return l}),r.d(t,"selectHttpOptionsAndBody",function(){return d}),r.d(t,"selectURI",function(){return f}),r.d(t,"serializeFetchParameter",function(){return h}),r.d(t,"throwServerError",function(){return s});var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/graphql/language/printer.js"),a=r("./node_modules/ts-invariant/lib/invariant.esm.js"),o={http:{includeQuery:!0,includeExtensions:!1},headers:{accept:"*/*","content-type":"application/json"},options:{method:"POST"}},s=function(e,t,r){var n=new Error(r);throw n.name="ServerError",n.response=e,n.statusCode=e.status,n.result=t,n},l=function(e){return function(t){return t.text().then(function(e){try{return JSON.parse(e)}catch(n){var r=n;return r.name="ServerParseError",r.response=t,r.statusCode=t.status,r.bodyText=e,Promise.reject(r)}}).then(function(r){return t.status>=300&&s(t,r,"Response not successful: Received status code "+t.status),Array.isArray(r)||r.hasOwnProperty("data")||r.hasOwnProperty("errors")||s(t,r,"Server response was missing for query '"+(Array.isArray(e)?e.map(function(e){return e.operationName}):e.operationName)+"'."),r})}},u=function(e){if(!e&&"undefined"==typeof fetch){var t="unfetch";throw"undefined"==typeof window&&(t="node-fetch"),new a.InvariantError("\nfetch is not found globally and no fetcher passed, to fix pass a fetch for\nyour environment like https://www.npmjs.com/package/"+t+".\n\nFor example:\nimport fetch from '"+t+"';\nimport { createHttpLink } from 'apollo-link-http';\n\nconst link = createHttpLink({ uri: '/graphql', fetch: fetch });")}},c=function(){if("undefined"==typeof AbortController)return{controller:!1,signal:!1};var e=new AbortController;return{controller:e,signal:e.signal}},d=function(e,t){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];var o=Object(n.__assign)({},t.options,{headers:t.headers,credentials:t.credentials}),s=t.http;r.forEach(function(e){o=Object(n.__assign)({},o,e.options,{headers:Object(n.__assign)({},o.headers,e.headers)}),e.credentials&&(o.credentials=e.credentials),s=Object(n.__assign)({},s,e.http)});var l=e.operationName,u=e.extensions,c=e.variables,d=e.query,h={operationName:l,variables:c};return s.includeExtensions&&(h.extensions=u),s.includeQuery&&(h.query=Object(i.print)(d)),{options:o,body:h}},h=function(e,t){var r;try{r=JSON.stringify(e)}catch(e){var n=new a.InvariantError("Network request failed. "+t+" is not serializable: "+e.message);throw n.parseError=e,n}return r},f=function(e,t){var r=e.getContext().uri;return r||("function"==typeof t?t(e):t||"/graphql")}},"./node_modules/apollo-link-http/lib/bundle.esm.js":function(e,t,r){"use strict";r.r(t),r.d(t,"HttpLink",function(){return s}),r.d(t,"createHttpLink",function(){return o});var n=r("./node_modules/tslib/tslib.es6.js"),i=r("./node_modules/apollo-link/lib/bundle.esm.js"),a=r("./node_modules/apollo-link-http-common/lib/bundle.esm.js"),o=function(e){void 0===e&&(e={});var t=e.uri,r=void 0===t?"/graphql":t,o=e.fetch,s=e.includeExtensions,l=e.useGETForQueries,u=Object(n.__rest)(e,["uri","fetch","includeExtensions","useGETForQueries"]);Object(a.checkFetcher)(o),o||(o=fetch);var c={http:{includeExtensions:s},options:u.fetchOptions,credentials:u.credentials,headers:u.headers};return new i.ApolloLink(function(e){var t=Object(a.selectURI)(e,r),s=e.getContext(),u={};if(s.clientAwareness){var d=s.clientAwareness,h=d.name,f=d.version;h&&(u["apollographql-client-name"]=h),f&&(u["apollographql-client-version"]=f)}var p,m=Object(n.__assign)({},u,s.headers),v={http:s.http,options:s.fetchOptions,credentials:s.credentials,headers:m},_=Object(a.selectHttpOptionsAndBody)(e,a.fallbackHttpConfig,c,v),g=_.options,y=_.body;if(!g.signal){var b=Object(a.createSignalIfSupported)(),x=b.controller,w=b.signal;(p=x)&&(g.signal=w)}if(l&&!e.query.definitions.some(function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation})&&(g.method="GET"),"GET"===g.method){var E=function(e,t){var r=[],n=function(e,t){r.push(e+"="+encodeURIComponent(t))};"query"in t&&n("query",t.query);t.operationName&&n("operationName",t.operationName);if(t.variables){var i=void 0;try{i=Object(a.serializeFetchParameter)(t.variables,"Variables map")}catch(e){return{parseError:e}}n("variables",i)}if(t.extensions){var o=void 0;try{o=Object(a.serializeFetchParameter)(t.extensions,"Extensions map")}catch(e){return{parseError:e}}n("extensions",o)}var s="",l=e,u=e.indexOf("#");-1!==u&&(s=e.substr(u),l=e.substr(0,u));var c=-1===l.indexOf("?")?"?":"&";return{newURI:l+c+r.join("&")+s}}(t,y),M=E.newURI,A=E.parseError;if(A)return Object(i.fromError)(A);t=M}else try{g.body=Object(a.serializeFetchParameter)(y,"Payload")}catch(A){return Object(i.fromError)(A)}return new i.Observable(function(r){return o(t,g).then(function(t){return e.setContext({response:t}),t}).then(Object(a.parseAndCheckHttpResponse)(e)).then(function(e){return r.next(e),r.complete(),e}).catch(function(e){"AbortError"!==e.name&&(e.result&&e.result.errors&&e.result.data&&r.next(e.result),r.error(e))}),function(){p&&p.abort()}})})};var s=function(e){function t(t){return e.call(this,o(t).request)||this}return Object(n.__extends)(t,e),t}(i.ApolloLink)},"./node_modules/apollo-link/lib/bundle.esm.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ApolloLink",function(){return b}),r.d(t,"concat",function(){return y}),r.d(t,"createOperation",function(){return f}),r.d(t,"empty",function(){return v}),r.d(t,"execute",function(){return x}),r.d(t,"from",function(){return _}),r.d(t,"fromError",function(){return h}),r.d(t,"fromPromise",function(){return d}),r.d(t,"makePromise",function(){return c}),r.d(t,"split",function(){return g}),r.d(t,"toPromise",function(){return u});var n=r("./node_modules/zen-observable-ts/lib/bundle.esm.js");r.d(t,"Observable",function(){return n.default});var i=r("./node_modules/ts-invariant/lib/invariant.esm.js"),a=r("./node_modules/tslib/tslib.es6.js"),o=r("./node_modules/apollo-link/node_modules/apollo-utilities/lib/bundle.esm.js");r.d(t,"getOperationName",function(){return o.getOperationName});var s=function(e){function t(t,r){var n=e.call(this,t)||this;return n.link=r,n}return Object(a.__extends)(t,e),t}(Error);function l(e){return e.request.length<=1}function u(e){var t=!1;return new Promise(function(r,n){e.subscribe({next:function(e){t?i.invariant.warn("Promise Wrapper does not support multiple results from Observable"):(t=!0,r(e))},error:n})})}var c=u;function d(e){return new n.default(function(t){e.then(function(e){t.next(e),t.complete()}).catch(t.error.bind(t))})}function h(e){return new n.default(function(t){t.error(e)})}function f(e,t){var r=Object(a.__assign)({},e);return Object.defineProperty(t,"setContext",{enumerable:!1,value:function(e){r="function"==typeof e?Object(a.__assign)({},r,e(r)):Object(a.__assign)({},r,e)}}),Object.defineProperty(t,"getContext",{enumerable:!1,value:function(){return Object(a.__assign)({},r)}}),Object.defineProperty(t,"toKey",{enumerable:!1,value:function(){return function(e){var t=e.query,r=e.variables,n=e.operationName;return JSON.stringify([n,t,r])}(t)}}),t}function p(e,t){return t?t(e):n.default.of()}function m(e){return"function"==typeof e?new b(e):e}function v(){return new b(function(){return n.default.of()})}function _(e){return 0===e.length?v():e.map(m).reduce(function(e,t){return e.concat(t)})}function g(e,t,r){var i=m(t),a=m(r||new b(p));return l(i)&&l(a)?new b(function(t){return e(t)?i.request(t)||n.default.of():a.request(t)||n.default.of()}):new b(function(t,r){return e(t)?i.request(t,r)||n.default.of():a.request(t,r)||n.default.of()})}var y=function(e,t){var r=m(e);if(l(r))return i.invariant.warn(new s("You are calling concat on a terminating link, which will have no effect",r)),r;var a=m(t);return l(a)?new b(function(e){return r.request(e,function(e){return a.request(e)||n.default.of()})||n.default.of()}):new b(function(e,t){return r.request(e,function(e){return a.request(e,t)||n.default.of()})||n.default.of()})},b=function(){function e(e){e&&(this.request=e)}return e.prototype.split=function(t,r,n){return this.concat(g(t,r,n||new e(p)))},e.prototype.concat=function(e){return y(this,e)},e.prototype.request=function(e,t){throw new i.InvariantError("request is not implemented")},e.empty=v,e.from=_,e.split=g,e.execute=x,e}();function x(e,t){return e.request(f(t.context,function(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName="string"!=typeof t.query?Object(o.getOperationName)(t.query):""),t}(function(e){for(var t=["query","operationName","variables","extensions","context"],r=0,n=Object.keys(e);r<n.length;r++){var a=n[r];if(t.indexOf(a)<0)throw new i.InvariantError("illegal argument: "+a)}return e}(t))))||n.default.of()}},"./node_modules/apollo-link/node_modules/apollo-utilities/lib/bundle.esm.js":function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"addTypenameToDocument",function(){return Z}),r.d(t,"argumentsObjectFromField",function(){return m}),r.d(t,"assign",function(){return N}),r.d(t,"buildQueryFromSelectionSet",function(){return ie}),r.d(t,"canUseWeakMap",function(){return oe}),r.d(t,"checkDocument",function(){return R}),r.d(t,"cloneDeep",function(){return le}),r.d(t,"createFragmentMap",function(){return U}),r.d(t,"getDefaultValues",function(){return G}),r.d(t,"getDirectiveInfoFromField",function(){return M}),r.d(t,"getDirectiveNames",function(){return T}),r.d(t,"getDirectivesFromDocument",function(){return te}),r.d(t,"getEnv",function(){return ue}),r.d(t,"getFragmentDefinition",function(){return V}),r.d(t,"getFragmentDefinitions",function(){return L}),r.d(t,"getFragmentQueryDocument",function(){return I}),r.d(t,"getInclusionDirectives",function(){return P}),r.d(t,"getMainDefinition",function(){return z}),r.d(t,"getMutationDefinition",function(){return O}),r.d(t,"getOperationDefinition",function(){return F}),r.d(t,"getOperationDefinitionOrDie",function(){return C}),r.d(t,"getOperationName",function(){return B}),r.d(t,"getQueryDefinition",function(){return j}),r.d(t,"getStoreKeyName",function(){return p}),r.d(t,"graphQLResultHasError",function(){return me}),r.d(t,"hasClientExports",function(){return k}),r.d(t,"hasDirectives",function(){return S}),r.d(t,"isDevelopment",function(){return he}),r.d(t,"isEnv",function(){return ce}),r.d(t,"isField",function(){return _}),r.d(t,"isIdValue",function(){return y}),r.d(t,"isInlineFragment",function(){return g}),r.d(t,"isJsonValue",function(){return x}),r.d(t,"isNumberValue",function(){return c}),r.d(t,"isProduction",function(){return de}),r.d(t,"isScalarValue",function(){return u}),r.d(t,"isTest",function(){return fe}),r.d(t,"maybeDeepFreeze",function(){return ve}),r.d(t,"mergeDeep",function(){return ge}),r.d(t,"mergeDeepArray",function(){return ye}),r.d(t,"removeArgumentsFromDocument",function(){return re}),r.d(t,"removeClientSetsFromDocument",function(){return ae}),r.d(t,"removeConnectionDirectiveFromDocument",function(){return J}),r.d(t,"removeDirectivesFromDocument",function(){return X}),r.d(t,"removeFragmentSpreadFromDocument",function(){return ne}),r.d(t,"resultKeyNameFromField",function(){return v}),r.d(t,"shouldInclude",function(){return A}),r.d(t,"storeKeyNameFromField",function(){return h}),r.d(t,"stripSymbols",function(){return Ae}),r.d(t,"toIdValue",function(){return b}),r.d(t,"tryFunctionOrLogError",function(){return pe}),r.d(t,"valueFromNode",function(){return E}),r.d(t,"valueToObjectRepresentation",function(){return d}),r.d(t,"variablesInOperation",function(){return q}),r.d(t,"warnOnceInDevelopment",function(){return Me});var n=r("./node_modules/graphql/language/visitor.js"),i=r("./node_modules/ts-invariant/lib/invariant.esm.js"),a=r("./node_modules/tslib/tslib.es6.js"),o=r("./node_modules/fast-json-stable-stringify/index.js"),s=r.n(o),l=r("./node_modules/@wry/equality/lib/equality.esm.js");function u(e){return["StringValue","BooleanValue","EnumValue"].indexOf(e.kind)>-1}function c(e){return["IntValue","FloatValue"].indexOf(e.kind)>-1}function d(e,t,r,n){if(function(e){return"IntValue"===e.kind}(r)||function(e){return"FloatValue"===e.kind}(r))e[t.value]=Number(r.value);else if(function(e){return"BooleanValue"===e.kind}(r)||function(e){return"StringValue"===e.kind}(r))e[t.value]=r.value;else if(function(e){return"ObjectValue"===e.kind}(r)){var a={};r.fields.map(function(e){return d(a,e.name,e.value,n)}),e[t.value]=a}else if(function(e){return"Variable"===e.kind}(r)){var o=(n||{})[r.name.value];e[t.value]=o}else if(function(e){return"ListValue"===e.kind}(r))e[t.value]=r.values.map(function(e){var r={};return d(r,t,e,n),r[t.value]});else if(function(e){return"EnumValue"===e.kind}(r))e[t.value]=r.value;else{if(!function(e){return"NullValue"===e.kind}(r))throw new i.InvariantError('The inline argument "'+t.value+'" of kind "'+r.kind+'"is not supported. Use variables instead of inline arguments to overcome this limitation.');e[t.value]=null}}function h(e,t){var r=null;e.directives&&(r={},e.directives.forEach(function(e){r[e.name.value]={},e.arguments&&e.arguments.forEach(function(n){var i=n.name,a=n.value;return d(r[e.name.value],i,a,t)})}));var n=null;return e.arguments&&e.arguments.length&&(n={},e.arguments.forEach(function(e){var r=e.name,i=e.value;return d(n,r,i,t)})),p(e.name.value,n,r)}r.d(t,"isEqual",function(){return l.equal});var f=["connection","include","skip","client","rest","export"];function p(e,t,r){if(r&&r.connection&&r.connection.key){if(r.connection.filter&&r.connection.filter.length>0){var n=r.connection.filter?r.connection.filter:[];n.sort();var i=t,a={};return n.forEach(function(e){a[e]=i[e]}),r.connection.key+"("+JSON.stringify(a)+")"}return r.connection.key}var o=e;if(t){var l=s()(t);o+="("+l+")"}return r&&Object.keys(r).forEach(function(e){-1===f.indexOf(e)&&(r[e]&&Object.keys(r[e]).length?o+="@"+e+"("+JSON.stringify(r[e])+")":o+="@"+e)}),o}function m(e,t){if(e.arguments&&e.arguments.length){var r={};return e.arguments.forEach(function(e){var n=e.name,i=e.value;return d(r,n,i,t)}),r}return null}function v(e){return e.alias?e.alias.value:e.name.value}function _(e){return"Field"===e.kind}function g(e){return"InlineFragment"===e.kind}function y(e){return e&&"id"===e.type&&"boolean"==typeof e.generated}function b(e,t){return void 0===t&&(t=!1),Object(a.__assign)({type:"id",generated:t},"string"==typeof e?{id:e,typename:void 0}:e)}function x(e){return null!=e&&"object"==typeof e&&"json"===e.type}function w(e){throw new i.InvariantError("Variable nodes are not supported by valueFromNode")}function E(e,t){switch(void 0===t&&(t=w),e.kind){case"Variable":return t(e);case"NullValue":return null;case"IntValue":return parseInt(e.value,10);case"FloatValue":return parseFloat(e.value);case"ListValue":return e.values.map(function(e){return E(e,t)});case"ObjectValue":for(var r={},n=0,i=e.fields;n<i.length;n++){var a=i[n];r[a.name.value]=E(a.value,t)}return r;default:return e.value}}function M(e,t){if(e.directives&&e.directives.length){var r={};return e.directives.forEach(function(e){r[e.name.value]=m(e,t)}),r}return null}function A(e,t){return void 0===t&&(t={}),P(e.directives).every(function(e){var r=e.directive,n=e.ifArgument,a=!1;return"Variable"===n.value.kind?(a=t[n.value.name.value],Object(i.invariant)(void 0!==a,"Invalid variable referenced in @"+r.name.value+" directive.")):a=n.value.value,"skip"===r.name.value?!a:a})}function T(e){var t=[];return Object(n.visit)(e,{Directive:function(e){t.push(e.name.value)}}),t}function S(e,t){return T(t).some(function(t){return e.indexOf(t)>-1})}function k(e){return e&&S(["client"],e)&&S(["export"],e)}function D(e){var t=e.name.value;return"skip"===t||"include"===t}function P(e){return e?e.filter(D).map(function(e){var t=e.arguments,r=e.name.value;Object(i.invariant)(t&&1===t.length,"Incorrect number of arguments for the @"+r+" directive.");var n=t[0];Object(i.invariant)(n.name&&"if"===n.name.value,"Invalid argument for the @"+r+" directive.");var a=n.value;return Object(i.invariant)(a&&("Variable"===a.kind||"BooleanValue"===a.kind),"Argument for the @"+r+" directive must be a variable or a boolean value."),{directive:e,ifArgument:n}}):[]}function I(e,t){var r=t,n=[];return e.definitions.forEach(function(e){if("OperationDefinition"===e.kind)throw new i.InvariantError("Found a "+e.operation+" operation"+(e.name?" named '"+e.name.value+"'":"")+". No operations are allowed when using a fragment as a query. Only fragments are allowed.");"FragmentDefinition"===e.kind&&n.push(e)}),void 0===r&&(Object(i.invariant)(1===n.length,"Found "+n.length+" fragments. `fragmentName` must be provided when there is not exactly 1 fragment."),r=n[0].name.value),Object(a.__assign)({},e,{definitions:[{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:r}}]}}].concat(e.definitions)})}function N(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.forEach(function(t){null!=t&&Object.keys(t).forEach(function(r){e[r]=t[r]})}),e}function O(e){R(e);var t=e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation})[0];return Object(i.invariant)(t,"Must contain a mutation definition."),t}function R(e){Object(i.invariant)(e&&"Document"===e.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql');var t=e.definitions.filter(function(e){return"FragmentDefinition"!==e.kind}).map(function(e){if("OperationDefinition"!==e.kind)throw new i.InvariantError('Schema type definitions not allowed in queries. Found: "'+e.kind+'"');return e});return Object(i.invariant)(t.length<=1,"Ambiguous GraphQL document: contains "+t.length+" operations"),e}function F(e){return R(e),e.definitions.filter(function(e){return"OperationDefinition"===e.kind})[0]}function C(e){var t=F(e);return Object(i.invariant)(t,"GraphQL document is missing an operation"),t}function B(e){return e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&e.name}).map(function(e){return e.name.value})[0]||null}function L(e){return e.definitions.filter(function(e){return"FragmentDefinition"===e.kind})}function j(e){var t=F(e);return Object(i.invariant)(t&&"query"===t.operation,"Must contain a query definition."),t}function V(e){Object(i.invariant)("Document"===e.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'),Object(i.invariant)(e.definitions.length<=1,"Fragment must have exactly one definition.");var t=e.definitions[0];return Object(i.invariant)("FragmentDefinition"===t.kind,"Must be a fragment definition."),t}function z(e){var t;R(e);for(var r=0,n=e.definitions;r<n.length;r++){var a=n[r];if("OperationDefinition"===a.kind){var o=a.operation;if("query"===o||"mutation"===o||"subscription"===o)return a}"FragmentDefinition"!==a.kind||t||(t=a)}if(t)return t;throw new i.InvariantError("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment.")}function U(e){void 0===e&&(e=[]);var t={};return e.forEach(function(e){t[e.name.value]=e}),t}function G(e){if(e&&e.variableDefinitions&&e.variableDefinitions.length){var t=e.variableDefinitions.filter(function(e){return e.defaultValue}).map(function(e){var t=e.variable,r=e.defaultValue,n={};return d(n,t.name,r),n});return N.apply(void 0,[{}].concat(t))}return{}}function q(e){var t=new Set;if(e.variableDefinitions)for(var r=0,n=e.variableDefinitions;r<n.length;r++){var i=n[r];t.add(i.variable.name.value)}return t}function Q(e,t,r){var n=0;return e.forEach(function(r,i){t.call(this,r,i,e)&&(e[n++]=r)},r),e.length=n,e}var H={kind:"Field",name:{kind:"Name",value:"__typename"}};function Y(e){return function e(t,r){return t.selectionSet.selections.every(function(t){return"FragmentSpread"===t.kind&&e(r[t.name.value],r)})}(F(e)||V(e),U(L(e)))?null:e}function W(e){return function(t){return e.some(function(e){return e.name&&e.name===t.name.value||e.test&&e.test(t)})}}function X(e,t){var r=Object.create(null),i=[],a=Object.create(null),o=[],s=Y(Object(n.visit)(t,{Variable:{enter:function(e,t,n){"VariableDefinition"!==n.kind&&(r[e.name.value]=!0)}},Field:{enter:function(t){if(e&&t.directives&&(e.some(function(e){return e.remove})&&t.directives&&t.directives.some(W(e))))return t.arguments&&t.arguments.forEach(function(e){"Variable"===e.value.kind&&i.push({name:e.value.name.value})}),t.selectionSet&&function e(t){var r=[];t.selections.forEach(function(t){(_(t)||g(t))&&t.selectionSet?e(t.selectionSet).forEach(function(e){return r.push(e)}):"FragmentSpread"===t.kind&&r.push(t)});return r}(t.selectionSet).forEach(function(e){o.push({name:e.name.value})}),null}},FragmentSpread:{enter:function(e){a[e.name.value]=!0}},Directive:{enter:function(t){if(W(e)(t))return null}}}));return s&&Q(i,function(e){return!r[e.name]}).length&&(s=re(i,s)),s&&Q(o,function(e){return!a[e.name]}).length&&(s=ne(o,s)),s}function Z(e){return Object(n.visit)(R(e),{SelectionSet:{enter:function(e,t,r){if(!r||"OperationDefinition"!==r.kind){var n=e.selections;if(n)if(!n.some(function(e){return _(e)&&("__typename"===e.name.value||0===e.name.value.lastIndexOf("__",0))})){var i=r;if(!(_(i)&&i.directives&&i.directives.some(function(e){return"export"===e.name.value})))return Object(a.__assign)({},e,{selections:n.concat([H])})}}}}})}var K={test:function(e){var t="connection"===e.name.value;return t&&(e.arguments&&e.arguments.some(function(e){return"key"===e.name.value})||i.invariant.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key.")),t}};function J(e){return X([K],R(e))}function $(e,t,r){return void 0===r&&(r=!0),t&&t.selections&&t.selections.some(function(t){return ee(e,t,r)})}function ee(e,t,r){return void 0===r&&(r=!0),!_(t)||!!t.directives&&(t.directives.some(W(e))||r&&$(e,t.selectionSet,r))}function te(e,t){var r;return R(t),Y(Object(n.visit)(t,{SelectionSet:{enter:function(t,n,i,o){var s=o.join("-");if(!r||s===r||!s.startsWith(r)){if(t.selections){var l=t.selections.filter(function(t){return ee(e,t)});return $(e,t,!1)&&(r=s),Object(a.__assign)({},t,{selections:l})}return null}}}}))}function re(e,t){var r=function(e){return function(t){return e.some(function(e){return t.value&&"Variable"===t.value.kind&&t.value.name&&(e.name===t.value.name.value||e.test&&e.test(t))})}}(e);return Y(Object(n.visit)(t,{OperationDefinition:{enter:function(t){return Object(a.__assign)({},t,{variableDefinitions:t.variableDefinitions.filter(function(t){return!e.some(function(e){return e.name===t.variable.name.value})})})}},Field:{enter:function(t){if(e.some(function(e){return e.remove})){var n=0;if(t.arguments.forEach(function(e){r(e)&&(n+=1)}),1===n)return null}}},Argument:{enter:function(e){if(r(e))return null}}}))}function ne(e,t){function r(t){if(e.some(function(e){return e.name===t.name.value}))return null}return Y(Object(n.visit)(t,{FragmentSpread:{enter:r},FragmentDefinition:{enter:r}}))}function ie(e){return"query"===z(e).operation?e:Object(n.visit)(e,{OperationDefinition:{enter:function(e){return Object(a.__assign)({},e,{operation:"query"})}}})}function ae(e){R(e);var t=X([{test:function(e){return"client"===e.name.value},remove:!0}],e);return t&&(t=Object(n.visit)(t,{FragmentDefinition:{enter:function(e){if(e.selectionSet&&e.selectionSet.selections.every(function(e){return _(e)&&"__typename"===e.name.value}))return null}}})),t}var oe="function"==typeof WeakMap&&!("object"==typeof navigator&&"ReactNative"===navigator.product),se=Object.prototype.toString;function le(e){return function e(t,r){switch(se.call(t)){case"[object Array]":if(r.has(t))return r.get(t);var n=t.slice(0);return r.set(t,n),n.forEach(function(t,i){n[i]=e(t,r)}),n;case"[object Object]":if(r.has(t))return r.get(t);var i=Object.create(Object.getPrototypeOf(t));return r.set(t,i),Object.keys(t).forEach(function(n){i[n]=e(t[n],r)}),i;default:return t}}(e,new Map)}function ue(){return"development"}function ce(e){return"development"===e}function de(){return!0===ce("production")}function he(){return!0===ce("development")}function fe(){return!0===ce("test")}function pe(e){try{return e()}catch(e){console.error&&console.error(e)}}function me(e){return e.errors&&e.errors.length}function ve(e){if((he()||fe())&&!("function"==typeof Symbol&&"string"==typeof Symbol("")))return function e(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(r){null===t[r]||"object"!=typeof t[r]&&"function"!=typeof t[r]||Object.isFrozen(t[r])||e(t[r])}),t}(e);return e}var _e=Object.prototype.hasOwnProperty;function ge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ye(e)}function ye(e){var t=e[0]||{},r=e.length;if(r>1){var n=[];t=we(t,n);for(var i=1;i<r;++i)t=xe(t,e[i],n)}return t}function be(e){return null!==e&&"object"==typeof e}function xe(e,t,r){return be(t)&&be(e)?(Object.isExtensible&&!Object.isExtensible(e)&&(e=we(e,r)),Object.keys(t).forEach(function(n){var i=t[n];if(_e.call(e,n)){var a=e[n];i!==a&&(e[n]=xe(we(a,r),i,r))}else e[n]=i}),e):t}function we(e,t){return null!==e&&"object"==typeof e&&t.indexOf(e)<0&&(e=Array.isArray(e)?e.slice(0):Object(a.__assign)({__proto__:Object.getPrototypeOf(e)},e),t.push(e)),e}var Ee=Object.create({});function Me(e,t){void 0===t&&(t="warn"),de()||Ee[e]||(fe()||(Ee[e]=!0),"error"===t?console.error(e):console.warn(e))}function Ae(e){return JSON.parse(JSON.stringify(e))}}.call(this,r("./node_modules/process/browser.js"))},"./node_modules/axios/index.js":function(e,t,r){e.exports=r("./node_modules/axios/lib/axios.js")},"./node_modules/axios/lib/adapters/xhr.js":function(e,t,r){"use strict";var n=r("./node_modules/axios/lib/utils.js"),i=r("./node_modules/axios/lib/core/settle.js"),a=r("./node_modules/axios/lib/helpers/buildURL.js"),o=r("./node_modules/axios/lib/helpers/parseHeaders.js"),s=r("./node_modules/axios/lib/helpers/isURLSameOrigin.js"),l=r("./node_modules/axios/lib/core/createError.js");e.exports=function(e){return new Promise(function(t,u){var c=e.data,d=e.headers;n.isFormData(c)&&delete d["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",p=e.auth.password||"";d.Authorization="Basic "+btoa(f+":"+p)}if(h.open(e.method.toUpperCase(),a(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in h?o(h.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:r,config:e,request:h};i(t,u,n),h=null}},h.onerror=function(){u(l("Network Error",e,null,h)),h=null},h.ontimeout=function(){u(l("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",h)),h=null},n.isStandardBrowserEnv()){var m=r("./node_modules/axios/lib/helpers/cookies.js"),v=(e.withCredentials||s(e.url))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;v&&(d[e.xsrfHeaderName]=v)}if("setRequestHeader"in h&&n.forEach(d,function(e,t){void 0===c&&"content-type"===t.toLowerCase()?delete d[t]:h.setRequestHeader(t,e)}),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){h&&(h.abort(),u(e),h=null)}),void 0===c&&(c=null),h.send(c)})}},"./node_modules/axios/lib/axios.js":function(e,t,r){"use strict";var n=r("./node_modules/axios/lib/utils.js"),i=r("./node_modules/axios/lib/helpers/bind.js"),a=r("./node_modules/axios/lib/core/Axios.js"),o=r("./node_modules/axios/lib/defaults.js");function s(e){var t=new a(e),r=i(a.prototype.request,t);return n.extend(r,a.prototype,t),n.extend(r,t),r}var l=s(o);l.Axios=a,l.create=function(e){return s(n.merge(o,e))},l.Cancel=r("./node_modules/axios/lib/cancel/Cancel.js"),l.CancelToken=r("./node_modules/axios/lib/cancel/CancelToken.js"),l.isCancel=r("./node_modules/axios/lib/cancel/isCancel.js"),l.all=function(e){return Promise.all(e)},l.spread=r("./node_modules/axios/lib/helpers/spread.js"),e.exports=l,e.exports.default=l},"./node_modules/axios/lib/cancel/Cancel.js":function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},"./node_modules/axios/lib/cancel/CancelToken.js":function(e,t,r){"use strict";var n=r("./node_modules/axios/lib/cancel/Cancel.js");function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new n(e),t(r.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i(function(t){e=t}),cancel:e}},e.exports=i},"./node_modules/axios/lib/cancel/isCancel.js":function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},"./node_modules/axios/lib/core/Axios.js":function(e,t,r){"use strict";var n=r("./node_modules/axios/lib/defaults.js"),i=r("./node_modules/axios/lib/utils.js"),a=r("./node_modules/axios/lib/core/InterceptorManager.js"),o=r("./node_modules/axios/lib/core/dispatchRequest.js");function s(e){this.defaults=e,this.interceptors={request:new a,response:new a}}s.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),(e=i.merge(n,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[o,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},i.forEach(["delete","get","head","options"],function(e){s.prototype[e]=function(t,r){return this.request(i.merge(r||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){s.prototype[e]=function(t,r,n){return this.request(i.merge(n||{},{method:e,url:t,data:r}))}}),e.exports=s},"./node_modules/axios/lib/core/InterceptorManager.js":function(e,t,r){"use strict";var n=r("./node_modules/axios/lib/utils.js");function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=i},"./node_modules/axios/lib/core/createError.js":function(e,t,r){"use strict";var n=r("./node_modules/axios/lib/core/enhanceError.js");e.exports=function(e,t,r,i,a){var o=new Error(e);return n(o,t,r,i,a)}},"./node_modules/axios/lib/core/dispatchRequest.js":function(e,t,r){"use strict";var n=r("./node_modules/axios/lib/utils.js"),i=r("./node_modules/axios/lib/core/transformData.js"),a=r("./node_modules/axios/lib/cancel/isCancel.js"),o=r("./node_modules/axios/lib/defaults.js"),s=r("./node_modules/axios/lib/helpers/isAbsoluteURL.js"),l=r("./node_modules/axios/lib/helpers/combineURLs.js");function u(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return u(e),e.baseURL&&!s(e.url)&&(e.url=l(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||o.adapter)(e).then(function(t){return u(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(u(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},"./node_modules/axios/lib/core/enhanceError.js":function(e,t,r){"use strict";e.exports=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e}},"./node_modules/axios/lib/core/settle.js":function(e,t,r){"use strict";var n=r("./node_modules/axios/lib/core/createError.js");e.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},"./node_modules/axios/lib/core/transformData.js":function(e,t,r){"use strict";var n=r("./node_modules/axios/lib/utils.js");e.exports=function(e,t,r){return n.forEach(r,function(r){e=r(e,t)}),e}},"./node_modules/axios/lib/defaults.js":function(e,t,r){"use strict";(function(t){var n=r("./node_modules/axios/lib/utils.js"),i=r("./node_modules/axios/lib/helpers/normalizeHeaderName.js"),a={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,l={adapter:("undefined"!=typeof XMLHttpRequest?s=r("./node_modules/axios/lib/adapters/xhr.js"):void 0!==t&&(s=r("./node_modules/axios/lib/adapters/xhr.js")),s),transformRequest:[function(e,t){return i(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(e){l.headers[e]={}}),n.forEach(["post","put","patch"],function(e){l.headers[e]=n.merge(a)}),e.exports=l}).call(this,r("./node_modules/process/browser.js"))},"./node_modules/axios/lib/helpers/bind.js":function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},"./node_modules/axios/lib/helpers/buildURL.js":function(e,t,r){"use strict";var n=r("./node_modules/axios/lib/utils.js");function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var a;if(r)a=r(t);else if(n.isURLSearchParams(t))a=t.toString();else{var o=[];n.forEach(t,function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))}))}),a=o.join("&")}return a&&(e+=(-1===e.indexOf("?")?"?":"&")+a),e}},"./node_modules/axios/lib/helpers/combineURLs.js":function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},"./node_modules/axios/lib/helpers/cookies.js":function(e,t,r){"use strict";var n=r("./node_modules/axios/lib/utils.js");e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,i,a,o){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(i)&&s.push("path="+i),n.isString(a)&&s.push("domain="+a),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},"./node_modules/axios/lib/helpers/isAbsoluteURL.js":function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},"./node_modules/axios/lib/helpers/isURLSameOrigin.js":function(e,t,r){"use strict";var n=r("./node_modules/axios/lib/utils.js");e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=i(window.location.href),function(t){var r=n.isString(t)?i(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},"./node_modules/axios/lib/helpers/normalizeHeaderName.js":function(e,t,r){"use strict";var n=r("./node_modules/axios/lib/utils.js");e.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},"./node_modules/axios/lib/helpers/parseHeaders.js":function(e,t,r){"use strict";var n=r("./node_modules/axios/lib/utils.js"),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,a,o={};return e?(n.forEach(e.split("\n"),function(e){if(a=e.indexOf(":"),t=n.trim(e.substr(0,a)).toLowerCase(),r=n.trim(e.substr(a+1)),t){if(o[t]&&i.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+", "+r:r}}),o):o}},"./node_modules/axios/lib/helpers/spread.js":function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},"./node_modules/axios/lib/utils.js":function(e,t,r){"use strict";var n=r("./node_modules/axios/lib/helpers/bind.js"),i=r("./node_modules/axios/node_modules/is-buffer/index.js"),a=Object.prototype.toString;function o(e){return"[object Array]"===a.call(e)}function s(e){return null!==e&&"object"==typeof e}function l(e){return"[object Function]"===a.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===a.call(e)},isBuffer:i,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===a.call(e)},isFile:function(e){return"[object File]"===a.call(e)},isBlob:function(e){return"[object Blob]"===a.call(e)},isFunction:l,isStream:function(e){return s(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]=r}for(var n=0,i=arguments.length;n<i;n++)u(arguments[n],r);return t},extend:function(e,t,r){return u(t,function(t,i){e[i]=r&&"function"==typeof t?n(t,r):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},"./node_modules/axios/node_modules/is-buffer/index.js":function(e,t){e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},"./node_modules/fast-json-stable-stringify/index.js":function(e,t,r){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,n="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(r=t.cmp,function(e){return function(t,n){var i={key:t,value:e[t]},a={key:n,value:e[n]};return r(i,a)}}),a=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,o;if(Array.isArray(t)){for(o="[",r=0;r<t.length;r++)r&&(o+=","),o+=e(t[r])||"null";return o+"]"}if(null===t)return"null";if(-1!==a.indexOf(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=a.push(t)-1,l=Object.keys(t).sort(i&&i(t));for(o="",r=0;r<l.length;r++){var u=l[r],c=e(t[u]);c&&(o&&(o+=","),o+=JSON.stringify(u)+":"+c)}return a.splice(s,1),"{"+o+"}"}}(e)}},"./node_modules/graphql/jsutils/inspect.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return l(e,[])};var n,i=(n=r("./node_modules/graphql/jsutils/nodejsCustomInspectSymbol.js"))&&n.__esModule?n:{default:n};function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=10,s=2;function l(e,t){switch(a(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return null===e?"null":function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var r=[].concat(t,[e]),n=function(e){var t=e[String(i.default)];if("function"==typeof t)return t;if("function"==typeof e.inspect)return e.inspect}(e);if(void 0!==n){var a=n.call(e);if(a!==e)return"string"==typeof a?a:l(a,r)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>s)return"[Array]";for(var r=Math.min(o,e.length),n=e.length-r,i=[],a=0;a<r;++a)i.push(l(e[a],t));1===n?i.push("... 1 more item"):n>1&&i.push("... ".concat(n," more items"));return"["+i.join(", ")+"]"}(e,r);return function(e,t){var r=Object.keys(e);if(0===r.length)return"{}";if(t.length>s)return"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var r=e.constructor.name;if("string"==typeof r)return r}return t}(e)+"]";return"{ "+r.map(function(r){var n=l(e[r],t);return r+": "+n}).join(", ")+" }"}(e,r)}(e,t);default:return String(e)}}},"./node_modules/graphql/jsutils/nodejsCustomInspectSymbol.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;t.default=n},"./node_modules/graphql/language/blockString.js":function(e,t,r){"use strict";function n(e){for(var t=null,r=1;r<e.length;r++){var n=e[r],a=i(n);if(a!==n.length&&((null===t||a<t)&&0===(t=a)))break}return null===t?0:t}function i(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);)t++;return t}function a(e){return i(e)===e.length}Object.defineProperty(t,"__esModule",{value:!0}),t.dedentBlockStringValue=function(e){var t=e.split(/\r\n|[\n\r]/g),r=n(t);if(0!==r)for(var i=1;i<t.length;i++)t[i]=t[i].slice(r);for(;t.length>0&&a(t[0]);)t.shift();for(;t.length>0&&a(t[t.length-1]);)t.pop();return t.join("\n")},t.getBlockStringIndentation=n,t.printBlockString=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=-1===e.indexOf("\n"),i=" "===e[0]||"\t"===e[0],a='"'===e[e.length-1],o=!n||a||r,s="";!o||n&&i||(s+="\n"+t);s+=t?e.replace(/\n/g,"\n"+t):e,o&&(s+="\n");return'"""'+s.replace(/"""/g,'\\"""')+'"""'}},"./node_modules/graphql/language/printer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.print=function(e){return(0,n.visit)(e,{leave:a})};var n=r("./node_modules/graphql/language/visitor.js"),i=r("./node_modules/graphql/language/blockString.js");var a={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return s(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,r=e.name,n=u("(",s(e.variableDefinitions,", "),")"),i=s(e.directives," "),a=e.selectionSet;return r||i||n||"query"!==t?s([t,s([r,n]),i,a]," "):a},VariableDefinition:function(e){var t=e.variable,r=e.type,n=e.defaultValue,i=e.directives;return t+": "+r+u(" = ",n)+u(" ",s(i," "))},SelectionSet:function(e){return l(e.selections)},Field:function(e){var t=e.alias,r=e.name,n=e.arguments,i=e.directives,a=e.selectionSet;return s([u("",t,": ")+r+u("(",s(n,", "),")"),s(i," "),a]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+u(" ",s(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,r=e.directives,n=e.selectionSet;return s(["...",u("on ",t),s(r," "),n]," ")},FragmentDefinition:function(e){var t=e.name,r=e.typeCondition,n=e.variableDefinitions,i=e.directives,a=e.selectionSet;return"fragment ".concat(t).concat(u("(",s(n,", "),")")," ")+"on ".concat(r," ").concat(u("",s(i," ")," "))+a},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var r=e.value;return e.block?(0,i.printBlockString)(r,"description"===t?"":"  "):JSON.stringify(r)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+s(e.values,", ")+"]"},ObjectValue:function(e){return"{"+s(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+u("(",s(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:function(e){var t=e.directives,r=e.operationTypes;return s(["schema",s(t," "),l(r)]," ")},OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:o(function(e){return s(["scalar",e.name,s(e.directives," ")]," ")}),ObjectTypeDefinition:o(function(e){var t=e.name,r=e.interfaces,n=e.directives,i=e.fields;return s(["type",t,u("implements ",s(r," & ")),s(n," "),l(i)]," ")}),FieldDefinition:o(function(e){var t=e.name,r=e.arguments,n=e.type,i=e.directives;return t+(h(r)?u("(\n",c(s(r,"\n")),"\n)"):u("(",s(r,", "),")"))+": "+n+u(" ",s(i," "))}),InputValueDefinition:o(function(e){var t=e.name,r=e.type,n=e.defaultValue,i=e.directives;return s([t+": "+r,u("= ",n),s(i," ")]," ")}),InterfaceTypeDefinition:o(function(e){var t=e.name,r=e.directives,n=e.fields;return s(["interface",t,s(r," "),l(n)]," ")}),UnionTypeDefinition:o(function(e){var t=e.name,r=e.directives,n=e.types;return s(["union",t,s(r," "),n&&0!==n.length?"= "+s(n," | "):""]," ")}),EnumTypeDefinition:o(function(e){var t=e.name,r=e.directives,n=e.values;return s(["enum",t,s(r," "),l(n)]," ")}),EnumValueDefinition:o(function(e){return s([e.name,s(e.directives," ")]," ")}),InputObjectTypeDefinition:o(function(e){var t=e.name,r=e.directives,n=e.fields;return s(["input",t,s(r," "),l(n)]," ")}),DirectiveDefinition:o(function(e){var t=e.name,r=e.arguments,n=e.repeatable,i=e.locations;return"directive @"+t+(h(r)?u("(\n",c(s(r,"\n")),"\n)"):u("(",s(r,", "),")"))+(n?" repeatable":"")+" on "+s(i," | ")}),SchemaExtension:function(e){var t=e.directives,r=e.operationTypes;return s(["extend schema",s(t," "),l(r)]," ")},ScalarTypeExtension:function(e){return s(["extend scalar",e.name,s(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,r=e.interfaces,n=e.directives,i=e.fields;return s(["extend type",t,u("implements ",s(r," & ")),s(n," "),l(i)]," ")},InterfaceTypeExtension:function(e){var t=e.name,r=e.directives,n=e.fields;return s(["extend interface",t,s(r," "),l(n)]," ")},UnionTypeExtension:function(e){var t=e.name,r=e.directives,n=e.types;return s(["extend union",t,s(r," "),n&&0!==n.length?"= "+s(n," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,r=e.directives,n=e.values;return s(["extend enum",t,s(r," "),l(n)]," ")},InputObjectTypeExtension:function(e){var t=e.name,r=e.directives,n=e.fields;return s(["extend input",t,s(r," "),l(n)]," ")}};function o(e){return function(t){return s([t.description,e(t)],"\n")}}function s(e,t){return e?e.filter(function(e){return e}).join(t||""):""}function l(e){return e&&0!==e.length?"{\n"+c(s(e,"\n"))+"\n}":""}function u(e,t,r){return t?e+t+(r||""):""}function c(e){return e&&"  "+e.replace(/\n/g,"\n  ")}function d(e){return-1!==e.indexOf("\n")}function h(e){return e&&e.some(d)}},"./node_modules/graphql/language/visitor.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.visit=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,n=void 0,u=Array.isArray(e),c=[e],d=-1,h=[],f=void 0,p=void 0,m=void 0,v=[],_=[],g=e;do{var y=++d===c.length,b=y&&0!==h.length;if(y){if(p=0===_.length?void 0:v[v.length-1],f=m,m=_.pop(),b){if(u)f=f.slice();else{for(var x={},w=0,E=Object.keys(f);w<E.length;w++){var M=E[w];x[M]=f[M]}f=x}for(var A=0,T=0;T<h.length;T++){var S=h[T][0],k=h[T][1];u&&(S-=A),u&&null===k?(f.splice(S,1),A++):f[S]=k}}d=n.index,c=n.keys,h=n.edits,u=n.inArray,n=n.prev}else{if(p=m?u?d:c[d]:void 0,null==(f=m?m[p]:g))continue;m&&v.push(p)}var D=void 0;if(!Array.isArray(f)){if(!s(f))throw new Error("Invalid AST Node: "+(0,i.default)(f));var P=l(t,f.kind,y);if(P){if((D=P.call(t,f,p,m,v,_))===o)break;if(!1===D){if(!y){v.pop();continue}}else if(void 0!==D&&(h.push([p,D]),!y)){if(!s(D)){v.pop();continue}f=D}}}void 0===D&&b&&h.push([p,f]),y?v.pop():(n={inArray:u,index:d,keys:c,edits:h,prev:n},u=Array.isArray(f),c=u?f:r[f.kind]||[],d=-1,h=[],m&&_.push(m),m=f)}while(void 0!==n);0!==h.length&&(g=h[h.length-1][1]);return g},t.visitInParallel=function(e){var t=new Array(e.length);return{enter:function(r){for(var n=0;n<e.length;n++)if(!t[n]){var i=l(e[n],r.kind,!1);if(i){var a=i.apply(e[n],arguments);if(!1===a)t[n]=r;else if(a===o)t[n]=o;else if(void 0!==a)return a}}},leave:function(r){for(var n=0;n<e.length;n++)if(t[n])t[n]===r&&(t[n]=null);else{var i=l(e[n],r.kind,!0);if(i){var a=i.apply(e[n],arguments);if(a===o)t[n]=o;else if(void 0!==a&&!1!==a)return a}}}}},t.visitWithTypeInfo=function(e,t){return{enter:function(r){e.enter(r);var n=l(t,r.kind,!1);if(n){var i=n.apply(t,arguments);return void 0!==i&&(e.leave(r),s(i)&&e.enter(i)),i}},leave:function(r){var n,i=l(t,r.kind,!0);return i&&(n=i.apply(t,arguments)),e.leave(r),n}}},t.getVisitFn=l,t.BREAK=t.QueryDocumentKeys=void 0;var n,i=(n=r("./node_modules/graphql/jsutils/inspect.js"))&&n.__esModule?n:{default:n};var a={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};t.QueryDocumentKeys=a;var o=Object.freeze({});function s(e){return Boolean(e&&"string"==typeof e.kind)}function l(e,t,r){var n=e[t];if(n){if(!r&&"function"==typeof n)return n;var i=r?n.leave:n.enter;if("function"==typeof i)return i}else{var a=r?e.leave:e.enter;if(a){if("function"==typeof a)return a;var o=a[t];if("function"==typeof o)return o}}}t.BREAK=o},"./node_modules/mime/Mime.js":function(e,t,r){"use strict";function n(){this._types=Object.create(null),this._extensions=Object.create(null);for(var e=0;e<arguments.length;e++)this.define(arguments[e]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}n.prototype.define=function(e,t){for(var r in e){var n=e[r].map(function(e){return e.toLowerCase()});r=r.toLowerCase();for(var i=0;i<n.length;i++){if("*"!=(a=n[i])[0]){if(!t&&a in this._types)throw new Error('Attempt to change mapping for "'+a+'" extension from "'+this._types[a]+'" to "'+r+'". Pass `force=true` to allow this, otherwise remove "'+a+'" from the list of extensions for "'+r+'".');this._types[a]=r}}if(t||!this._extensions[r]){var a=n[0];this._extensions[r]="*"!=a[0]?a:a.substr(1)}}},n.prototype.getType=function(e){var t=(e=String(e)).replace(/^.*[\/\\]/,"").toLowerCase(),r=t.replace(/^.*\./,"").toLowerCase(),n=t.length<e.length;return(r.length<t.length-1||!n)&&this._types[r]||null},n.prototype.getExtension=function(e){return(e=/^\s*([^;\s]*)/.test(e)&&RegExp.$1)&&this._extensions[e.toLowerCase()]||null},e.exports=n},"./node_modules/mime/index.js":function(e,t,r){"use strict";var n=r("./node_modules/mime/Mime.js");e.exports=new n(r("./node_modules/mime/types/standard.js"),r("./node_modules/mime/types/other.js"))},"./node_modules/mime/types/other.js":function(e,t){e.exports={"application/prs.cww":["cww"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["keynote"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}},"./node_modules/mime/types/standard.js":function(e,t){e.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomsvc+xml":["atomsvc"],"application/bdoc":["bdoc"],"application/ccxml+xml":["ccxml"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma","es"],"application/emma+xml":["emma"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-diff+xml":["xdf"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/ktx":["ktx"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}},"./node_modules/optimism/lib/bundle.esm.js":function(e,t,r){"use strict";r.r(t),r.d(t,"KeyTrie",function(){return M}),r.d(t,"defaultMakeCacheKey",function(){return T}),r.d(t,"wrap",function(){return S});var n=r("./node_modules/@wry/context/lib/context.esm.js");function i(){}r.d(t,"asyncFromGen",function(){return n.asyncFromGen}),r.d(t,"bindContext",function(){return n.bind}),r.d(t,"noContext",function(){return n.noContext}),r.d(t,"setTimeout",function(){return n.setTimeout});var a=function(){function e(e,t){void 0===e&&(e=1/0),void 0===t&&(t=i),this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}return e.prototype.has=function(e){return this.map.has(e)},e.prototype.get=function(e){var t=this.getEntry(e);return t&&t.value},e.prototype.getEntry=function(e){var t=this.map.get(e);if(t&&t!==this.newest){var r=t.older,n=t.newer;n&&(n.older=r),r&&(r.newer=n),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=n)}return t},e.prototype.set=function(e,t){var r=this.getEntry(e);return r?r.value=t:(r={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(e,r),r.value)},e.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},e.prototype.delete=function(e){var t=this.map.get(e);return!!t&&(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0)},e}(),o=new n.Slot,s=Object.create(null),l=[],u=[],c=100;function d(e,t){if(!e)throw new Error(t||"assertion failure")}var h=function(){function e(t,r){this.fn=t,this.args=r,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=s,++e.count}return e.prototype.recompute=function(){if(function(e){var t=o.getValue();if(t)return e.parents.add(t),t.childValues.has(e)||t.childValues.set(e,s),p(e)?_(t,e):g(t,e),t}(this)||!b(this))return function e(t){if(t.dirty)return f(t);if(p(t)&&(t.dirtyChildren.forEach(function(r){d(t.childValues.has(r));try{e(r)}catch(e){t.setDirty()}}),t.dirty))return f(t);d(t.value!==s);return t.value}(this)},e.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value=s,m(this),E(this))},e.prototype.dispose=function(){var e=this;x(this).forEach(b),E(this),this.parents.forEach(function(t){t.setDirty(),w(t,e)})},e.count=0,e}();function f(e){d(!e.recomputing,"already recomputing"),e.recomputing=!0;var t=x(e),r=!0;try{o.withValue(e,function(){e.value=e.fn.apply(null,e.args)}),r=!1}finally{e.recomputing=!1,r||!function(e){if("function"==typeof e.subscribe)try{E(e),e.unsubscribe=e.subscribe.apply(null,e.args)}catch(t){return e.setDirty(),!1}return!0}(e)?e.setDirty():function(e){if(e.dirty=!1,p(e))return;v(e)}(e)}return t.forEach(b),e.value}function p(e){return e.dirty||!(!e.dirtyChildren||!e.dirtyChildren.size)}function m(e){e.parents.forEach(function(t){return _(t,e)})}function v(e){e.parents.forEach(function(t){return g(t,e)})}function _(e,t){if(d(e.childValues.has(t)),d(p(t)),e.dirtyChildren){if(e.dirtyChildren.has(t))return}else e.dirtyChildren=u.pop()||new Set;e.dirtyChildren.add(t),m(e)}function g(e,t){d(e.childValues.has(t)),d(!p(t));var r=e.childValues.get(t);r===s?e.childValues.set(t,t.value):r!==t.value&&e.setDirty(),y(e,t),p(e)||v(e)}function y(e,t){var r=e.dirtyChildren;r&&(r.delete(t),0===r.size&&(u.length<c&&u.push(r),e.dirtyChildren=null))}function b(e){return 0===e.parents.size&&"function"==typeof e.reportOrphan&&!0===e.reportOrphan()}function x(e){var t=l;return e.childValues.size>0&&(t=[],e.childValues.forEach(function(r,n){w(e,n),t.push(n)})),d(null===e.dirtyChildren),t}function w(e,t){t.parents.delete(e),e.childValues.delete(t),y(e,t)}function E(e){var t=e.unsubscribe;"function"==typeof t&&(e.unsubscribe=void 0,t())}var M=function(){function e(e){this.weakness=e}return e.prototype.lookup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.lookupArray(e)},e.prototype.lookupArray=function(e){var t=this;return e.forEach(function(e){return t=t.getChildTrie(e)}),t.data||(t.data=Object.create(null))},e.prototype.getChildTrie=function(t){var r=this.weakness&&function(e){switch(typeof e){case"object":if(null===e)break;case"function":return!0}return!1}(t)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),n=r.get(t);return n||r.set(t,n=new e(this.weakness)),n},e}();var A=new M("function"==typeof WeakMap);function T(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return A.lookupArray(e)}function S(e,t){void 0===t&&(t=Object.create(null));var r=new a(t.max||Math.pow(2,16),function(e){return e.dispose()}),n=!!t.disposable,i=t.makeCacheKey||T;function s(){if(!n||o.hasValue()){var a=i.apply(null,arguments);if(!a)return e.apply(null,arguments);var s=Array.prototype.slice.call(arguments),l=r.get(a);l?l.args=s:(l=new h(e,s),r.set(a,l),l.subscribe=t.subscribe,n&&(l.reportOrphan=function(){return r.delete(a)}));var u=l.recompute();return r.set(a,l),o.hasValue()||r.clean(),n?void 0:u}}return s.dirty=function(){var e=i.apply(null,arguments),t=e&&r.get(e);t&&t.setDirty()},s}},"./node_modules/process/browser.js":function(e,t){var r,n,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var l,u=[],c=!1,d=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&f())}function f(){if(!c){var e=s(h);c=!0;for(var t=u.length;t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new p(e,t)),1!==u.length||c||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"./node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js":function(e,t,r){"use strict";r.r(t),function(e){var r=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var r=-1;return e.some(function(e,n){return e[0]===t&&(r=n,!0)}),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var r=e(this.__entries__,t),n=this.__entries__[r];return n&&n[1]},t.prototype.set=function(t,r){var n=e(this.__entries__,t);~n?this.__entries__[n][1]=r:this.__entries__.push([t,r])},t.prototype.delete=function(t){var r=this.__entries__,n=e(r,t);~n&&r.splice(n,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var r=0,n=this.__entries__;r<n.length;r++){var i=n[r];e.call(t,i[1],i[0])}},t}()}(),n="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,i=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),a="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},o=2;var s=20,l=["top","right","bottom","left","width","height","size","weight"],u="undefined"!=typeof MutationObserver,c=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var r=!1,n=!1,i=0;function s(){r&&(r=!1,e()),n&&u()}function l(){a(s)}function u(){var e=Date.now();if(r){if(e-i<o)return;n=!0}else r=!0,n=!1,setTimeout(l,t);i=e}return u}(this.refresh.bind(this),s)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){n&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){n&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=void 0===t?"":t;l.some(function(e){return!!~r.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),d=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},h=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||i},f=y(0,0,0,0);function p(e){return parseFloat(e)||0}function m(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(t,r){return t+p(e["border-"+r+"-width"])},0)}function v(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return f;var n=h(e).getComputedStyle(e),i=function(e){for(var t={},r=0,n=["top","right","bottom","left"];r<n.length;r++){var i=n[r],a=e["padding-"+i];t[i]=p(a)}return t}(n),a=i.left+i.right,o=i.top+i.bottom,s=p(n.width),l=p(n.height);if("border-box"===n.boxSizing&&(Math.round(s+a)!==t&&(s-=m(n,"left","right")+a),Math.round(l+o)!==r&&(l-=m(n,"top","bottom")+o)),!function(e){return e===h(e).document.documentElement}(e)){var u=Math.round(s+a)-t,c=Math.round(l+o)-r;1!==Math.abs(u)&&(s-=u),1!==Math.abs(c)&&(l-=c)}return y(i.left,i.top,s,l)}var _="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof h(e).SVGGraphicsElement}:function(e){return e instanceof h(e).SVGElement&&"function"==typeof e.getBBox};function g(e){return n?_(e)?function(e){var t=e.getBBox();return y(0,0,t.width,t.height)}(e):v(e):f}function y(e,t,r,n){return{x:e,y:t,width:r,height:n}}var b=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=g(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),x=function(){return function(e,t){var r,n,i,a,o,s,l,u=(n=(r=t).x,i=r.y,a=r.width,o=r.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),d(l,{x:n,y:i,width:a,height:o,top:i,right:n+a,bottom:o+i,left:n}),l);d(this,{target:e,contentRect:u})}}(),w=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new r,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof h(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new b(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof h(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new x(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),E="undefined"!=typeof WeakMap?new WeakMap:new r,M=function(){return function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=c.getInstance(),n=new w(t,r,this);E.set(this,n)}}();["observe","unobserve","disconnect"].forEach(function(e){M.prototype[e]=function(){var t;return(t=E.get(this))[e].apply(t,arguments)}});var A=void 0!==i.ResizeObserver?i.ResizeObserver:M;t.default=A}.call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/symbol-observable/es/index.js":function(e,t,r){"use strict";r.r(t),function(e,n){var i,a=r("./node_modules/symbol-observable/es/ponyfill.js");i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:n;var o=Object(a.default)(i);t.default=o}.call(this,r("./node_modules/webpack/buildin/global.js"),r("./node_modules/webpack/buildin/harmony-module.js")(e))},"./node_modules/symbol-observable/es/ponyfill.js":function(e,t,r){"use strict";function n(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}r.r(t),r.d(t,"default",function(){return n})},"./node_modules/ts-invariant/lib/invariant.esm.js":function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"InvariantError",function(){return s}),r.d(t,"invariant",function(){return l}),r.d(t,"process",function(){return c});var n=r("./node_modules/tslib/tslib.es6.js"),i="Invariant Violation",a=Object.setPrototypeOf,o=void 0===a?function(e,t){return e.__proto__=t,e}:a,s=function(e){function t(r){void 0===r&&(r=i);var n=e.call(this,"number"==typeof r?i+": "+r+" (see https://github.com/apollographql/invariant-packages)":r)||this;return n.framesToPop=1,n.name=i,o(n,t.prototype),n}return Object(n.__extends)(t,e),t}(Error);function l(e,t){if(!e)throw new s(t)}function u(e){return function(){return console[e].apply(console,arguments)}}!function(e){e.warn=u("warn"),e.error=u("error")}(l||(l={}));var c={env:{}};if("object"==typeof e)c=e;else try{Function("stub","process = stub")(c)}catch(e){}var d=l;t.default=d}.call(this,r("./node_modules/process/browser.js"))},"./node_modules/tslib/tslib.es6.js":function(e,t,r){"use strict";r.r(t),r.d(t,"__extends",function(){return i}),r.d(t,"__assign",function(){return a}),r.d(t,"__rest",function(){return o}),r.d(t,"__decorate",function(){return s}),r.d(t,"__param",function(){return l}),r.d(t,"__metadata",function(){return u}),r.d(t,"__awaiter",function(){return c}),r.d(t,"__generator",function(){return d}),r.d(t,"__exportStar",function(){return h}),r.d(t,"__values",function(){return f}),r.d(t,"__read",function(){return p}),r.d(t,"__spread",function(){return m}),r.d(t,"__await",function(){return v}),r.d(t,"__asyncGenerator",function(){return _}),r.d(t,"__asyncDelegator",function(){return g}),r.d(t,"__asyncValues",function(){return y}),r.d(t,"__makeTemplateObject",function(){return b}),r.d(t,"__importStar",function(){return x}),r.d(t,"__importDefault",function(){return w});var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(r[n[i]]=e[n[i]])}return r}function s(e,t,r,n){var i,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,r,o):i(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}function l(e,t){return function(r,n){t(r,n,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})}function d(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function h(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function p(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function _(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),a=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){i[e]&&(n[e]=function(t){return new Promise(function(r,n){a.push([e,t,r,n])>1||s(e,t)})})}function s(e,t){try{(r=i[e](t)).value instanceof v?Promise.resolve(r.value.v).then(l,u):c(a[0][2],r)}catch(e){c(a[0][3],e)}var r}function l(e){s("next",e)}function u(e){s("throw",e)}function c(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}function g(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:v(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function y(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,i,(t=e[r](t)).done,t.value)})}}}function b(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function w(e){return e&&e.__esModule?e:{default:e}}},"./node_modules/ua-parser-js/src/ua-parser.js":function(e,t,r){var n;!function(i,a){"use strict";var o="model",s="name",l="type",u="vendor",c="version",d="mobile",h="tablet",f={extend:function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},p={rgx:function(e,t){for(var r,n,i,a,o,s,l=0;l<t.length&&!o;){var u=t[l],c=t[l+1];for(r=n=0;r<u.length&&!o;)if(o=u[r++].exec(e))for(i=0;i<c.length;i++)s=o[++n],"object"==typeof(a=c[i])&&a.length>0?2==a.length?"function"==typeof a[1]?this[a[0]]=a[1].call(this,s):this[a[0]]=a[1]:3==a.length?"function"!=typeof a[1]||a[1].exec&&a[1].test?this[a[0]]=s?s.replace(a[1],a[2]):void 0:this[a[0]]=s?a[1].call(this,s,a[2]):void 0:4==a.length&&(this[a[0]]=s?a[3].call(this,s.replace(a[1],a[2])):void 0):this[a]=s||void 0;l+=2}},str:function(e,t){for(var r in t)if("object"==typeof t[r]&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(f.has(t[r][n],e))return"?"===r?void 0:r}else if(f.has(t[r],e))return"?"===r?void 0:r;return e}},m={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},v={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,c],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],c],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],c],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[s,c],[/(konqueror)\/([\w\.]+)/i],[[s,"Konqueror"],c],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],c],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[s,"Edge"],c],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],c],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],c],[/(focus)\/([\w\.]+)/i],[[s,"Firefox Focus"],c],[/(opt)\/([\w\.]+)/i],[[s,"Opera Touch"],c],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],c],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],c],[/(windowswechat qbcore)\/([\w\.]+)/i],[[s,"WeChat(Win) Desktop"],c],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],c],[/(brave)\/([\w\.]+)/i],[[s,"Brave"],c],[/(qqbrowserlite)\/([\w\.]+)/i],[s,c],[/(QQ)\/([\d\.]+)/i],[s,c],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,c],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[s,c],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[s,c],[/(MetaSr)[\/\s]?([\w\.]+)/i],[s],[/(LBBROWSER)/i],[s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[c,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[c,[s,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[s,c],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[c,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],c],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],c],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[c,[s,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[s,"Sailfish Browser"],c],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,c],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],c],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],c],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],c],[/fxios\/([\w\.-]+)/i],[c,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[c,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[c,s],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],c],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[c,p.str,m.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[s,c],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],c],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,c]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",f.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",f.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",f.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[o,u,[l,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[o,[u,"Apple"],[l,h]],[/(apple\s{0,1}tv)/i],[[o,"Apple TV"],[u,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[u,o,[l,h]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[o,[u,"Amazon"],[l,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[o,p.str,m.device.amazon.model],[u,"Amazon"],[l,d]],[/android.+aft([bms])\sbuild/i],[o,[u,"Amazon"],[l,"smarttv"]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[o,u,[l,d]],[/\((ip[honed|\s\w*]+);/i],[o,[u,"Apple"],[l,d]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[u,o,[l,d]],[/\(bb10;\s(\w+)/i],[o,[u,"BlackBerry"],[l,d]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[o,[u,"Asus"],[l,h]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[u,"Sony"],[o,"Xperia Tablet"],[l,h]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[o,[u,"Sony"],[l,d]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[u,o,[l,"console"]],[/android.+;\s(shield)\sbuild/i],[o,[u,"Nvidia"],[l,"console"]],[/(playstation\s[34portablevi]+)/i],[o,[u,"Sony"],[l,"console"]],[/(sprint\s(\w+))/i],[[u,p.str,m.device.sprint.vendor],[o,p.str,m.device.sprint.model],[l,d]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[u,[o,/_/g," "],[l,d]],[/(nexus\s9)/i],[o,[u,"HTC"],[l,h]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[o,[u,"Huawei"],[l,d]],[/(microsoft);\s(lumia[\s\w]+)/i],[u,o,[l,d]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[o,[u,"Microsoft"],[l,"console"]],[/(kin\.[onetw]{3})/i],[[o,/\./g," "],[u,"Microsoft"],[l,d]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[o,[u,"Motorola"],[l,d]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[o,[u,"Motorola"],[l,h]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[u,f.trim],[o,f.trim],[l,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[o,/^/,"SmartTV"],[u,"Samsung"],[l,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[o,[u,"Sharp"],[l,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[u,"Samsung"],o,[l,h]],[/smart-tv.+(samsung)/i],[u,[l,"smarttv"],o],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[u,"Samsung"],o,[l,d]],[/sie-(\w*)/i],[o,[u,"Siemens"],[l,d]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[u,"Nokia"],o,[l,d]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[o,[u,"Acer"],[l,h]],[/android.+([vl]k\-?\d{3})\s+build/i],[o,[u,"LG"],[l,h]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[u,"LG"],o,[l,h]],[/(lg) netcast\.tv/i],[u,o,[l,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[o,[u,"LG"],[l,d]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[u,o,[l,h]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[o,[u,"Lenovo"],[l,h]],[/(lenovo)[_\s-]?([\w-]+)/i],[u,o,[l,d]],[/linux;.+((jolla));/i],[u,o,[l,d]],[/((pebble))app\/[\d\.]+\s/i],[u,o,[l,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[u,o,[l,d]],[/crkey/i],[[o,"Chromecast"],[u,"Google"]],[/android.+;\s(glass)\s\d/i],[o,[u,"Google"],[l,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[o,[u,"Google"],[l,h]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[o,[u,"Google"],[l,d]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[o,/_/g," "],[u,"Xiaomi"],[l,d]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[o,/_/g," "],[u,"Xiaomi"],[l,h]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[o,[u,"Meizu"],[l,d]],[/(mz)-([\w-]{2,})/i],[[u,"Meizu"],o,[l,d]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[o,[u,"OnePlus"],[l,d]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[o,[u,"RCA"],[l,h]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[o,[u,"Dell"],[l,h]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[o,[u,"Verizon"],[l,h]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[u,"Barnes & Noble"],o,[l,h]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[o,[u,"NuVision"],[l,h]],[/android.+;\s(k88)\sbuild/i],[o,[u,"ZTE"],[l,h]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[o,[u,"Swiss"],[l,d]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[o,[u,"Swiss"],[l,h]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[o,[u,"Zeki"],[l,h]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[u,"Dragon Touch"],o,[l,h]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[o,[u,"Insignia"],[l,h]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[o,[u,"NextBook"],[l,h]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[u,"Voice"],o,[l,d]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[u,"LvTel"],o,[l,d]],[/android.+;\s(PH-1)\s/i],[o,[u,"Essential"],[l,d]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[o,[u,"Envizen"],[l,h]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[u,o,[l,h]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[o,[u,"MachSpeed"],[l,h]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[u,o,[l,h]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[o,[u,"Rotor"],[l,h]],[/android.+(KS(.+))\s+build/i],[o,[u,"Amazon"],[l,h]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[u,o,[l,h]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[l,f.lowerize],u,o],[/[\s\/\(](smart-?tv)[;\)]/i],[[l,"smarttv"]],[/(android[\w\.\s\-]{0,9});.+build/i],[o,[u,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[c,[s,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)/i],[[s,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,c],[/rv\:([\w\.]{1,9}).+(gecko)/i],[c,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,c],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[c,p.str,m.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[c,p.str,m.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],c],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[s,c],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[s,"Symbian"],c],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],c],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[s,c],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],c],[/(sunos)\s?([\w\.\d]*)/i],[[s,"Solaris"],c],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[s,c],[/(haiku)\s(\w+)/i],[s,c],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[c,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[c,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[s,c]]},_=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof _))return new _(e,t).getResult();var r=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),n=t?f.extend(v,t):v;return this.getBrowser=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,r,n.browser),e.major=f.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return p.rgx.call(e,r,n.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return p.rgx.call(e,r,n.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,r,n.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,r,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};_.VERSION="0.7.20",_.BROWSER={NAME:s,MAJOR:"major",VERSION:c},_.CPU={ARCHITECTURE:"architecture"},_.DEVICE={MODEL:o,VENDOR:u,TYPE:l,CONSOLE:"console",MOBILE:d,SMARTTV:"smarttv",TABLET:h,WEARABLE:"wearable",EMBEDDED:"embedded"},_.ENGINE={NAME:s,VERSION:c},_.OS={NAME:s,VERSION:c},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=_),t.UAParser=_):void 0===(n=function(){return _}.call(t,r,t,e))||(e.exports=n);var g=i&&(i.jQuery||i.Zepto);if(void 0!==g&&!g.ua){var y=new _;g.ua=y.getResult(),g.ua.get=function(){return y.getUA()},g.ua.set=function(e){y.setUA(e);var t=y.getResult();for(var r in t)g.ua[r]=t[r]}}}("object"==typeof window?window:this)},"./node_modules/webpack/buildin/global.js":function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},"./node_modules/webpack/buildin/harmony-module.js":function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},"./node_modules/zen-observable-ts/lib/bundle.esm.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Observable",function(){return i});var n=r("./node_modules/zen-observable/index.js"),i=r.n(n).a;t.default=i},"./node_modules/zen-observable/index.js":function(e,t,r){e.exports=r("./node_modules/zen-observable/lib/Observable.js").Observable},"./node_modules/zen-observable/lib/Observable.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){return"function"==typeof Symbol},o=function(e){return a()&&Boolean(Symbol[e])},s=function(e){return o(e)?Symbol[e]:"@@"+e};a()&&!o("observable")&&(Symbol.observable=Symbol("observable"));var l=s("iterator"),u=s("observable"),c=s("species");function d(e,t){var r=e[t];if(null!=r){if("function"!=typeof r)throw new TypeError(r+" is not a function");return r}}function h(e){var t=e.constructor;return void 0!==t&&null===(t=t[c])&&(t=void 0),void 0!==t?t:w}function f(e){return e instanceof w}function p(e){p.log?p.log(e):setTimeout(function(){throw e})}function m(e){Promise.resolve().then(function(){try{e()}catch(e){p(e)}})}function v(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var r=d(t,"unsubscribe");r&&r.call(t)}}catch(e){p(e)}}function _(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function g(e,t,r){e._state="running";var n=e._observer;try{var i=d(n,t);switch(t){case"next":i&&i.call(n,r);break;case"error":if(_(e),!i)throw r;i.call(n,r);break;case"complete":_(e),i&&i.call(n)}}catch(e){p(e)}"closed"===e._state?v(e):"running"===e._state&&(e._state="ready")}function y(e,t,r){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:r}],void m(function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var r=0;r<t.length&&(g(e,t[r].type,t[r].value),"closed"!==e._state);++r);}}(e)})):void g(e,t,r);e._queue.push({type:t,value:r})}}var b=function(){function e(t,r){i(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var n=new x(this);try{this._cleanup=r.call(void 0,n)}catch(e){n.error(e)}"initializing"===this._state&&(this._state="ready")}return n(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(_(this),v(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),x=function(){function e(t){i(this,e),this._subscription=t}return n(e,[{key:"next",value:function(e){y(this._subscription,"next",e)}},{key:"error",value:function(e){y(this._subscription,"error",e)}},{key:"complete",value:function(){y(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),w=t.Observable=function(){function e(t){if(i(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return n(e,[{key:"subscribe",value:function(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new b(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise(function(r,n){if("function"==typeof e)var i=t.subscribe({next:function(t){try{e(t,a)}catch(e){n(e),i.unsubscribe()}},error:n,complete:r});else n(new TypeError(e+" is not a function"));function a(){i.unsubscribe(),r()}})}},{key:"map",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(h(this))(function(r){return t.subscribe({next:function(t){try{t=e(t)}catch(e){return r.error(e)}r.next(t)},error:function(e){r.error(e)},complete:function(){r.complete()}})})}},{key:"filter",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(h(this))(function(r){return t.subscribe({next:function(t){try{if(!e(t))return}catch(e){return r.error(e)}r.next(t)},error:function(e){r.error(e)},complete:function(){r.complete()}})})}},{key:"reduce",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var r=h(this),n=arguments.length>1,i=!1,a=arguments[1];return new r(function(r){return t.subscribe({next:function(t){var o=!i;if(i=!0,!o||n)try{a=e(a,t)}catch(e){return r.error(e)}else a=t},error:function(e){r.error(e)},complete:function(){if(!i&&!n)return r.error(new TypeError("Cannot reduce an empty sequence"));r.next(a),r.complete()}})})}},{key:"concat",value:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=h(this);return new i(function(t){var n=void 0,a=0;return function e(o){n=o.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){a===r.length?(n=void 0,t.complete()):e(i.from(r[a++]))}})}(e),function(){n&&(n.unsubscribe(),n=void 0)}})}},{key:"flatMap",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var r=h(this);return new r(function(n){var i=[],a=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(e){return n.error(e)}var a=r.from(t).subscribe({next:function(e){n.next(e)},error:function(e){n.error(e)},complete:function(){var e=i.indexOf(a);e>=0&&i.splice(e,1),o()}});i.push(a)},error:function(e){n.error(e)},complete:function(){o()}});function o(){a.closed&&0===i.length&&n.complete()}return function(){i.forEach(function(e){return e.unsubscribe()}),a.unsubscribe()}})}},{key:u,value:function(){return this}}],[{key:"from",value:function(t){var r="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var n=d(t,u);if(n){var i=n.call(t);if(Object(i)!==i)throw new TypeError(i+" is not an object");return f(i)&&i.constructor===r?i:new r(function(e){return i.subscribe(e)})}if(o("iterator")&&(n=d(t,l)))return new r(function(e){m(function(){if(!e.closed){var r=!0,i=!1,a=void 0;try{for(var o,s=n.call(t)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;if(e.next(l),e.closed)return}}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}e.complete()}})});if(Array.isArray(t))return new r(function(e){m(function(){if(!e.closed){for(var r=0;r<t.length;++r)if(e.next(t[r]),e.closed)return;e.complete()}})});throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return new("function"==typeof this?this:e)(function(e){m(function(){if(!e.closed){for(var t=0;t<r.length;++t)if(e.next(r[t]),e.closed)return;e.complete()}})})}},{key:c,get:function(){return this}}]),e}();a()&&Object.defineProperty(w,Symbol("extensions"),{value:{symbol:u,hostReportError:p},configurable:!0})},"./webgl-utils.js":function(e,t,r){"use strict";r.r(t),t.default=function(){var e=function(e){return'<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+e+"</div></div></td></tr></table>"},t=function(e,t){var r=null;if(t.webgl2){if(r=e.getContext("webgl2",t),console.log("Try to use webgl2.0."),!!r)return r;console.warn("webgl2.0 is not supported on this browser!")}for(var n=["webgl","experimental-webgl","webkit-3d","moz-webgl"],i=0;i<n.length;++i){try{r=e.getContext(n[i],t)}catch(e){}if(r)break}return r};return window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return window.setTimeout(e,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout,{create3DContext:t,setupWebGL:function(r,n){return window.WebGLRenderingContext?t(r,n):(i='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',(a=r.parentNode)&&(a.innerHTML=e(i)),null);var i,a}}}},0:function(e,t,r){e.exports=r("./99api/index.ts")}}).default});